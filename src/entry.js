(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();const Zu=!1;var fr=Array.isArray,hg=Array.prototype.indexOf,ul=Array.from,Zr=Object.defineProperty,fi=Object.getOwnPropertyDescriptor,Xu=Object.getOwnPropertyDescriptors,pg=Object.prototype,fg=Array.prototype,hl=Object.getPrototypeOf,Kd=Object.isExtensible;function gg(o){return typeof o=="function"}const Vt=()=>{};function vg(o){return typeof o?.then=="function"}function mg(o){return o()}function Aa(o){for(var e=0;e<o.length;e++)o[e]()}function Ju(){var o,e,t=new Promise((n,i)=>{o=n,e=i});return{promise:t,resolve:o,reject:e}}const Ft=2,pl=4,gs=8,yn=16,Jo=32,Hn=64,fl=128,co=256,Xr=512,_t=1024,no=2048,Qo=4096,yo=8192,zn=16384,vs=32768,wn=65536,Yd=1<<17,bg=1<<18,Oi=1<<19,Qu=1<<20,Pa=1<<21,ms=1<<22,An=1<<23,hn=Symbol("$state"),yg=Symbol("legacy props"),wg=Symbol(""),ui=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function eh(o){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function kg(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function xg(o){throw new Error("https://svelte.dev/e/effect_in_teardown")}function _g(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Eg(o){throw new Error("https://svelte.dev/e/effect_orphan")}function Cg(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Sg(o){throw new Error("https://svelte.dev/e/props_invalid_value")}function Tg(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Lg(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Bg(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Og(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const bs=1,ys=2,th=4,Ig=8,Ag=16,Pg=1,Mg=2,Ng=4,$g=8,Rg=16,Dg=4,jg=1,Fg=2,pt=Symbol(),Hg="http://www.w3.org/1999/xhtml",zg="http://www.w3.org/2000/svg";function Ug(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Wg(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let qg=!1;function oh(o){return o===this.v}function gl(o,e){return o!=o?e==e:o!==e||o!==null&&typeof o=="object"||typeof o=="function"}function Vg(o,e){return o!==e}function nh(o){return!gl(o,this.v)}let Ii=!1,Gg=!1;function Kg(){Ii=!0}let it=null;function gn(o){it=o}function Qe(o,e=!1,t){it={p:it,c:null,e:null,s:o,x:null,l:Ii&&!e?{s:null,u:null,$:[]}:null}}function et(o){var e=it,t=e.e;if(t!==null){e.e=null;for(var n of t)bh(n)}return it=e.p,{}}function Un(){return!Ii||it!==null&&it.l===null}let Bn=[];function ih(){var o=Bn;Bn=[],Aa(o)}function vn(o){if(Bn.length===0&&!gi){var e=Bn;queueMicrotask(()=>{e===Bn&&ih()})}Bn.push(o)}function Yg(){for(;Bn.length>0;)ih()}const Zg=new WeakMap;function rh(o){var e=$e;if(e===null)return je.f|=An,o;if((e.f&vs)===0){if((e.f&fl)===0)throw!e.parent&&o instanceof Error&&sh(o),o;e.b.error(o)}else wi(o,e)}function wi(o,e){for(;e!==null;){if((e.f&fl)!==0)try{e.b.error(o);return}catch(t){o=t}e=e.parent}throw o instanceof Error&&sh(o),o}function sh(o){const e=Zg.get(o);e&&(Zr(o,"message",{value:e.message}),Zr(o,"stack",{value:e.stack}))}const Ar=new Set;let Je=null,Hr=null,mo=null,Ma=new Set,Lo=[],ws=null,Na=!1,gi=!1;class Bo{current=new Map;#e=new Map;#t=new Set;#l=0;#i=null;#c=[];#r=[];#n=[];#o=[];#s=[];#d=[];skipped_effects=new Set;process(e){Lo=[],Hr=null,this.apply();for(const r of e)this.#u(r);if(this.#l===0){var t=mo;this.#h();var n=this.#r,i=this.#n;this.#r=[],this.#n=[],this.#o=[],Hr=this,Je=null,mo=t,Zd(n),Zd(i),Hr=null,this.#i?.resolve()}else this.#a(this.#r),this.#a(this.#n),this.#a(this.#o);mo=null;for(const r of this.#c)xi(r);this.#c=[]}#u(e){e.f^=_t;for(var t=e.first;t!==null;){var n=t.f,i=(n&(Jo|Hn))!==0,r=i&&(n&_t)!==0,s=r||(n&yo)!==0||this.skipped_effects.has(t);if(!s&&t.fn!==null){i?t.f^=_t:(n&pl)!==0?this.#n.push(t):(n&_t)===0&&((n&ms)!==0&&t.b?.is_pending()?this.#c.push(t):br(t)&&((t.f&yn)!==0&&this.#o.push(t),xi(t)));var a=t.first;if(a!==null){t=a;continue}}var l=t.parent;for(t=t.next;t===null&&l!==null;)t=l.next,l=l.parent}}#a(e){for(const t of e)((t.f&no)!==0?this.#s:this.#d).push(t),It(t,_t);e.length=0}capture(e,t){this.#e.has(e)||this.#e.set(e,t),this.current.set(e,e.v),mo?.set(e,e.v)}activate(){Je=this}deactivate(){Je=null,mo=null}flush(){if(Lo.length>0){if(this.activate(),lh(),Je!==null&&Je!==this)return}else this.#l===0&&this.#h();this.deactivate();for(const e of Ma)if(Ma.delete(e),e(),Je!==null)break}#h(){for(const e of this.#t)e();if(this.#t.clear(),Ar.size>1){this.#e.clear();let e=!0;for(const t of Ar){if(t===this){e=!1;continue}const n=[];for(const[r,s]of this.current){if(t.current.has(r))if(e&&s!==t.current.get(r))t.current.set(r,s);else continue;n.push(r)}if(n.length===0)continue;const i=[...t.current.keys()].filter(r=>!this.current.has(r));if(i.length>0){for(const r of n)ch(r,i);if(Lo.length>0){Je=t,t.apply();for(const r of Lo)t.#u(r);Lo=[],t.deactivate()}}}Je=null}Ar.delete(this)}increment(){this.#l+=1}decrement(){this.#l-=1;for(const e of this.#s)It(e,no),Rn(e);for(const e of this.#d)It(e,Qo),Rn(e);this.flush()}add_callback(e){this.#t.add(e)}settled(){return(this.#i??=Ju()).promise}static ensure(){if(Je===null){const e=Je=new Bo;Ar.add(Je),gi||Bo.enqueue(()=>{Je===e&&e.flush()})}return Je}static enqueue(e){vn(e)}apply(){}}function ah(o){var e=gi;gi=!0;try{for(var t;;){if(Yg(),Lo.length===0&&(Je?.flush(),Lo.length===0))return ws=null,t;lh()}}finally{gi=e}}function lh(){var o=mi;Na=!0;try{var e=0;for(Qd(!0);Lo.length>0;){var t=Bo.ensure();if(e++>1e3){var n,i;Xg()}t.process(Lo),pn.clear()}}finally{Na=!1,Qd(o),ws=null}}function Xg(){try{Cg()}catch(o){wi(o,ws)}}let Ln=null;function Zd(o){var e=o.length;if(e!==0){for(var t=0;t<e;){var n=o[t++];if((n.f&(zn|yo))===0&&br(n)&&(Ln=[],xi(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?xh(n):n.fn=null),Ln?.length>0)){pn.clear();for(const i of Ln)xi(i);Ln=[]}}Ln=null}}function ch(o,e){if(o.reactions!==null)for(const t of o.reactions){const n=t.f;(n&Ft)!==0?ch(t,e):(n&(ms|yn))!==0&&dh(t,e)&&(It(t,no),Rn(t))}}function dh(o,e){if(o.deps!==null){for(const t of o.deps)if(e.includes(t)||(t.f&Ft)!==0&&dh(t,e))return!0}return!1}function Rn(o){for(var e=ws=o;e.parent!==null;){e=e.parent;var t=e.f;if(Na&&e===$e&&(t&yn)!==0)return;if((t&(Hn|Jo))!==0){if((t&_t)===0)return;e.f^=_t}}Lo.push(e)}function Jg(o){let e=0,t=Yo(0),n;return()=>{uv()&&(d(t),mr(()=>(e===0&&(n=v(()=>o(()=>nr(t)))),e+=1,()=>{vn(()=>{e-=1,e===0&&(n?.(),n=void 0,nr(t))})})))}}var Qg=wn|Oi|fl;function ks(o,e,t){new ev(o,e,t)}class ev{parent;#e=!1;#t;#l=null;#i;#c;#r;#n=null;#o=null;#s=null;#d=null;#u=0;#a=0;#h=!1;#p=null;#m=()=>{this.#p&&Mo(this.#p,this.#u)};#b=Jg(()=>(this.#p=Yo(this.#u),()=>{this.#p=null}));constructor(e,t,n){this.#t=e,this.#i=t,this.#c=n,this.parent=$e.b,this.#e=!!this.#i.pending,this.#r=kn(()=>{$e.b=this;{try{this.#n=xt(()=>n(this.#t))}catch(i){this.error(i)}this.#a>0?this.#g():this.#e=!1}},Qg)}#y(){try{this.#n=xt(()=>this.#c(this.#t))}catch(e){this.error(e)}this.#e=!1}#w(){const e=this.#i.pending;e&&(this.#o=xt(()=>e(this.#t)),Bo.enqueue(()=>{this.#n=this.#f(()=>(Bo.ensure(),xt(()=>this.#c(this.#t)))),this.#a>0?this.#g():(uo(this.#o,()=>{this.#o=null}),this.#e=!1)}))}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#i.pending}#f(e){var t=$e,n=je,i=it;ho(this.#r),Ot(this.#r),gn(this.#r.ctx);try{return e()}catch(r){return rh(r),null}finally{ho(t),Ot(n),gn(i)}}#g(){const e=this.#i.pending;this.#n!==null&&(this.#d=document.createDocumentFragment(),tv(this.#n,this.#d)),this.#o===null&&(this.#o=xt(()=>e(this.#t)))}#v(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#v(e);return}this.#a+=e,this.#a===0&&(this.#e=!1,this.#o&&uo(this.#o,()=>{this.#o=null}),this.#d&&(this.#t.before(this.#d),this.#d=null),vn(()=>{Bo.ensure().flush()}))}update_pending_count(e){this.#v(e),this.#u+=e,Ma.add(this.#m)}get_effect_pending(){return this.#b(),d(this.#p)}error(e){var t=this.#i.onerror;let n=this.#i.failed;if(this.#h||!t&&!n)throw e;this.#n&&(Kt(this.#n),this.#n=null),this.#o&&(Kt(this.#o),this.#o=null),this.#s&&(Kt(this.#s),this.#s=null);var i=!1,r=!1;const s=()=>{if(i){Wg();return}i=!0,r&&Og(),Bo.ensure(),this.#u=0,this.#s!==null&&uo(this.#s,()=>{this.#s=null}),this.#e=this.has_pending_snippet(),this.#n=this.#f(()=>(this.#h=!1,xt(()=>this.#c(this.#t)))),this.#a>0?this.#g():this.#e=!1};var a=je;try{Ot(null),r=!0,t?.(e,s),r=!1}catch(l){wi(l,this.#r&&this.#r.parent)}finally{Ot(a)}n&&vn(()=>{this.#s=this.#f(()=>{this.#h=!0;try{return xt(()=>{n(this.#t,()=>e,()=>s)})}catch(l){return wi(l,this.#r.parent),null}finally{this.#h=!1}})})}}function tv(o,e){for(var t=o.nodes_start,n=o.nodes_end;t!==null;){var i=t===n?null:vr(t);e.append(t),t=i}}function ov(o,e,t){const n=Un()?gr:vl;if(e.length===0){t(o.map(n));return}var i=Je,r=$e,s=nv();Promise.all(e.map(a=>iv(a))).then(a=>{s();try{t([...o.map(n),...a])}catch(l){(r.f&zn)===0&&wi(l,r)}i?.deactivate(),$a()}).catch(a=>{wi(a,r)})}function nv(){var o=$e,e=je,t=it,n=Je;return function(){ho(o),Ot(e),gn(t),n?.activate()}}function $a(){ho(null),Ot(null),gn(null)}function gr(o){var e=Ft|no,t=je!==null&&(je.f&Ft)!==0?je:null;return $e===null||t!==null&&(t.f&co)!==0?e|=co:$e.f|=Oi,{ctx:it,deps:null,effects:null,equals:oh,f:e,fn:o,reactions:null,rv:0,v:pt,wv:0,parent:t??$e,ac:null}}function iv(o,e){let t=$e;t===null&&kg();var n=t.b,i=void 0,r=Yo(pt),s=!je,a=new Map;return fv(()=>{var l=Ju();i=l.promise;try{Promise.resolve(o()).then(l.resolve,l.reject).then($a)}catch(h){l.reject(h),$a()}var c=Je,u=n.is_pending();s&&(n.update_pending_count(1),u||(c.increment(),a.get(c)?.reject(ui),a.delete(c),a.set(c,l)));const p=(h,g=void 0)=>{if(u||c.activate(),g)g!==ui&&(r.f|=An,Mo(r,g));else{(r.f&An)!==0&&(r.f^=An),Mo(r,h);for(const[f,m]of a){if(a.delete(f),f===c)break;m.reject(ui)}}s&&(n.update_pending_count(-1),u||c.decrement())};l.promise.then(p,h=>p(null,h||"unknown"))}),_s(()=>{for(const l of a.values())l.reject(ui)}),new Promise(l=>{function c(u){function p(){u===i?l(r):c(i)}u.then(p,p)}c(i)})}function qt(o){const e=gr(o);return Ch(e),e}function vl(o){const e=gr(o);return e.equals=nh,e}function uh(o){var e=o.effects;if(e!==null){o.effects=null;for(var t=0;t<e.length;t+=1)Kt(e[t])}}function rv(o){for(var e=o.parent;e!==null;){if((e.f&Ft)===0)return e;e=e.parent}return null}function ml(o){var e,t=$e;ho(rv(o));try{uh(o),e=Bh(o)}finally{ho(t)}return e}function hh(o){var e=ml(o);if(o.equals(e)||(o.v=e,o.wv=Th()),!qn)if(mo!==null)mo.set(o,o.v);else{var t=(dn||(o.f&co)!==0)&&o.deps!==null?Qo:_t;It(o,t)}}const pn=new Map;function Yo(o,e){var t={f:0,v:o,reactions:null,equals:oh,rv:0,wv:0};return t}function He(o,e){const t=Yo(o);return Ch(t),t}function me(o,e=!1,t=!0){const n=Yo(o);return e||(n.equals=nh),Ii&&t&&it!==null&&it.l!==null&&(it.l.s??=[]).push(n),n}function Ut(o,e){return V(o,v(()=>d(o))),e}function V(o,e,t=!1){je!==null&&(!bo||(je.f&Yd)!==0)&&Un()&&(je.f&(Ft|yn|ms|Yd))!==0&&!Vo?.includes(o)&&Bg();let n=t?$t(e):e;return Mo(o,n)}function Mo(o,e){if(!o.equals(e)){var t=o.v;qn?pn.set(o,e):pn.set(o,t),o.v=e;var n=Bo.ensure();n.capture(o,t),(o.f&Ft)!==0&&((o.f&no)!==0&&ml(o),It(o,(o.f&co)===0?_t:Qo)),o.wv=Th(),ph(o,no),Un()&&$e!==null&&($e.f&_t)!==0&&($e.f&(Jo|Hn))===0&&(ao===null?mv([o]):ao.push(o))}return e}function nr(o){V(o,o.v+1)}function ph(o,e){var t=o.reactions;if(t!==null)for(var n=Un(),i=t.length,r=0;r<i;r++){var s=t[r],a=s.f;if(!(!n&&s===$e)){var l=(a&no)===0;l&&It(s,e),(a&Ft)!==0?ph(s,Qo):l&&((a&yn)!==0&&Ln!==null&&Ln.push(s),Rn(s))}}}function $t(o){if(typeof o!="object"||o===null||hn in o)return o;const e=hl(o);if(e!==pg&&e!==fg)return o;var t=new Map,n=fr(o),i=He(0),r=Pn,s=a=>{if(Pn===r)return a();var l=je,c=Pn;Ot(null),tu(r);var u=a();return Ot(l),tu(c),u};return n&&t.set("length",He(o.length)),new Proxy(o,{defineProperty(a,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Tg();var u=t.get(l);return u===void 0?u=s(()=>{var p=He(c.value);return t.set(l,p),p}):V(u,c.value,!0),!0},deleteProperty(a,l){var c=t.get(l);if(c===void 0){if(l in a){const u=s(()=>He(pt));t.set(l,u),nr(i)}}else V(c,pt),nr(i);return!0},get(a,l,c){if(l===hn)return o;var u=t.get(l),p=l in a;if(u===void 0&&(!p||fi(a,l)?.writable)&&(u=s(()=>{var g=$t(p?a[l]:pt),f=He(g);return f}),t.set(l,u)),u!==void 0){var h=d(u);return h===pt?void 0:h}return Reflect.get(a,l,c)},getOwnPropertyDescriptor(a,l){var c=Reflect.getOwnPropertyDescriptor(a,l);if(c&&"value"in c){var u=t.get(l);u&&(c.value=d(u))}else if(c===void 0){var p=t.get(l),h=p?.v;if(p!==void 0&&h!==pt)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return c},has(a,l){if(l===hn)return!0;var c=t.get(l),u=c!==void 0&&c.v!==pt||Reflect.has(a,l);if(c!==void 0||$e!==null&&(!u||fi(a,l)?.writable)){c===void 0&&(c=s(()=>{var h=u?$t(a[l]):pt,g=He(h);return g}),t.set(l,c));var p=d(c);if(p===pt)return!1}return u},set(a,l,c,u){var p=t.get(l),h=l in a;if(n&&l==="length")for(var g=c;g<p.v;g+=1){var f=t.get(g+"");f!==void 0?V(f,pt):g in a&&(f=s(()=>He(pt)),t.set(g+"",f))}if(p===void 0)(!h||fi(a,l)?.writable)&&(p=s(()=>He(void 0)),V(p,$t(c)),t.set(l,p));else{h=p.v!==pt;var m=s(()=>$t(c));V(p,m)}var L=Reflect.getOwnPropertyDescriptor(a,l);if(L?.set&&L.set.call(u,c),!h){if(n&&typeof l=="string"){var _=t.get("length"),k=Number(l);Number.isInteger(k)&&k>=_.v&&V(_,k+1)}nr(i)}return!0},ownKeys(a){d(i);var l=Reflect.ownKeys(a).filter(p=>{var h=t.get(p);return h===void 0||h.v!==pt});for(var[c,u]of t)u.v!==pt&&!(c in a)&&l.push(c);return l},setPrototypeOf(){Lg()}})}function Xd(o){try{if(o!==null&&typeof o=="object"&&hn in o)return o[hn]}catch{}return o}function sv(o,e){return Object.is(Xd(o),Xd(e))}var vi,fh,gh,vh;function av(){if(vi===void 0){vi=window,fh=/Firefox/.test(navigator.userAgent);var o=Element.prototype,e=Node.prototype,t=Text.prototype;gh=fi(e,"firstChild").get,vh=fi(e,"nextSibling").get,Kd(o)&&(o.__click=void 0,o.__className=void 0,o.__attributes=null,o.__style=void 0,o.__e=void 0),Kd(t)&&(t.__t=void 0)}}function en(o=""){return document.createTextNode(o)}function Oo(o){return gh.call(o)}function vr(o){return vh.call(o)}function E(o,e){return Oo(o)}function ie(o,e=!1){{var t=Oo(o);return t instanceof Comment&&t.data===""?vr(t):t}}function y(o,e=1,t=!1){let n=o;for(;e--;)n=vr(n);return n}function lv(o){o.textContent=""}function xs(){return!1}let Jd=!1;function cv(){Jd||(Jd=!0,document.addEventListener("reset",o=>{Promise.resolve().then(()=>{if(!o.defaultPrevented)for(const e of o.target.elements)e.__on_r?.()})},{capture:!0}))}function Ai(o){var e=je,t=$e;Ot(null),ho(null);try{return o()}finally{Ot(e),ho(t)}}function bl(o,e,t,n=t){o.addEventListener(e,()=>Ai(t));const i=o.__on_r;i?o.__on_r=()=>{i(),n(!0)}:o.__on_r=()=>n(!0),cv()}function mh(o){$e===null&&je===null&&Eg(),je!==null&&(je.f&co)!==0&&$e===null&&_g(),qn&&xg()}function dv(o,e){var t=e.last;t===null?e.last=e.first=o:(t.next=o,o.prev=t,e.last=o)}function Do(o,e,t,n=!0){var i=$e;i!==null&&(i.f&yo)!==0&&(o|=yo);var r={ctx:it,deps:null,nodes_start:null,nodes_end:null,f:o|no,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(t)try{xi(r),r.f|=vs}catch(l){throw Kt(r),l}else e!==null&&Rn(r);if(n){var s=r;if(t&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&Oi)===0&&(s=s.first),s!==null&&(s.parent=i,i!==null&&dv(s,i),je!==null&&(je.f&Ft)!==0&&(o&Hn)===0)){var a=je;(a.effects??=[]).push(s)}}return r}function uv(){return je!==null&&!bo}function _s(o){const e=Do(gs,null,!1);return It(e,_t),e.teardown=o,e}function Zo(o){mh();var e=$e.f,t=!je&&(e&Jo)!==0&&(e&vs)===0;if(t){var n=it;(n.e??=[]).push(o)}else return bh(o)}function bh(o){return Do(pl|Qu,o,!1)}function hv(o){return mh(),Do(gs|Qu,o,!0)}function pv(o){Bo.ensure();const e=Do(Hn|Oi,o,!0);return(t={})=>new Promise(n=>{t.outro?uo(e,()=>{Kt(e),n(void 0)}):(Kt(e),n(void 0))})}function yl(o){return Do(pl,o,!1)}function ht(o,e){var t=it,n={effect:null,ran:!1,deps:o};t.l.$.push(n),n.effect=mr(()=>{o(),!n.ran&&(n.ran=!0,v(e))})}function Wn(){var o=it;mr(()=>{for(var e of o.l.$){e.deps();var t=e.effect;(t.f&_t)!==0&&It(t,Qo),br(t)&&xi(t),e.ran=!1}})}function fv(o){return Do(ms|Oi,o,!0)}function mr(o,e=0){return Do(gs|e,o,!0)}function Q(o,e=[],t=[]){ov(e,t,n=>{Do(gs,()=>o(...n.map(d)),!0)})}function kn(o,e=0){var t=Do(yn|e,o,!0);return t}function xt(o,e=!0){return Do(Jo|Oi,o,!0,e)}function yh(o){var e=o.teardown;if(e!==null){const t=qn,n=je;eu(!0),Ot(null);try{e.call(null)}finally{eu(t),Ot(n)}}}function wh(o,e=!1){var t=o.first;for(o.first=o.last=null;t!==null;){const i=t.ac;i!==null&&Ai(()=>{i.abort(ui)});var n=t.next;(t.f&Hn)!==0?t.parent=null:Kt(t,e),t=n}}function gv(o){for(var e=o.first;e!==null;){var t=e.next;(e.f&Jo)===0&&Kt(e),e=t}}function Kt(o,e=!0){var t=!1;(e||(o.f&bg)!==0)&&o.nodes_start!==null&&o.nodes_end!==null&&(kh(o.nodes_start,o.nodes_end),t=!0),wh(o,e&&!t),Jr(o,0),It(o,zn);var n=o.transitions;if(n!==null)for(const r of n)r.stop();yh(o);var i=o.parent;i!==null&&i.first!==null&&xh(o),o.next=o.prev=o.teardown=o.ctx=o.deps=o.fn=o.nodes_start=o.nodes_end=o.ac=null}function kh(o,e){for(;o!==null;){var t=o===e?null:vr(o);o.remove(),o=t}}function xh(o){var e=o.parent,t=o.prev,n=o.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===o&&(e.first=n),e.last===o&&(e.last=t))}function uo(o,e){var t=[];wl(o,t,!0),_h(t,()=>{Kt(o),e&&e()})}function _h(o,e){var t=o.length;if(t>0){var n=()=>--t||e();for(var i of o)i.out(n)}else e()}function wl(o,e,t){if((o.f&yo)===0){if(o.f^=yo,o.transitions!==null)for(const s of o.transitions)(s.is_global||t)&&e.push(s);for(var n=o.first;n!==null;){var i=n.next,r=(n.f&wn)!==0||(n.f&Jo)!==0;wl(n,e,r?t:!1),n=i}}}function ki(o){Eh(o,!0)}function Eh(o,e){if((o.f&yo)!==0){o.f^=yo,(o.f&_t)===0&&(It(o,no),Rn(o));for(var t=o.first;t!==null;){var n=t.next,i=(t.f&wn)!==0||(t.f&Jo)!==0;Eh(t,i?e:!1),t=n}if(o.transitions!==null)for(const r of o.transitions)(r.is_global||e)&&r.in()}}let ni=null;function vv(o){var e=ni;try{if(ni=new Set,v(o),e!==null)for(var t of ni)e.add(t);return ni}finally{ni=e}}function wo(o){for(var e of vv(o))Mo(e,e.v)}let mi=!1;function Qd(o){mi=o}let qn=!1;function eu(o){qn=o}let je=null,bo=!1;function Ot(o){je=o}let $e=null;function ho(o){$e=o}let Vo=null;function Ch(o){je!==null&&(Vo===null?Vo=[o]:Vo.push(o))}let Mt=null,Qt=0,ao=null;function mv(o){ao=o}let Sh=1,lr=0,Pn=lr;function tu(o){Pn=o}let dn=!1;function Th(){return++Sh}function br(o){var e=o.f;if((e&no)!==0)return!0;if((e&Qo)!==0){var t=o.deps,n=(e&co)!==0;if(t!==null){var i,r,s=(e&Xr)!==0,a=n&&$e!==null&&!dn,l=t.length;if((s||a)&&($e===null||($e.f&zn)===0)){var c=o,u=c.parent;for(i=0;i<l;i++)r=t[i],(s||!r?.reactions?.includes(c))&&(r.reactions??=[]).push(c);s&&(c.f^=Xr),a&&u!==null&&(u.f&co)===0&&(c.f^=co)}for(i=0;i<l;i++)if(r=t[i],br(r)&&hh(r),r.wv>o.wv)return!0}(!n||$e!==null&&!dn)&&It(o,_t)}return!1}function Lh(o,e,t=!0){var n=o.reactions;if(n!==null&&!Vo?.includes(o))for(var i=0;i<n.length;i++){var r=n[i];(r.f&Ft)!==0?Lh(r,e,!1):e===r&&(t?It(r,no):(r.f&_t)!==0&&It(r,Qo),Rn(r))}}function Bh(o){var e=Mt,t=Qt,n=ao,i=je,r=dn,s=Vo,a=it,l=bo,c=Pn,u=o.f;Mt=null,Qt=0,ao=null,dn=(u&co)!==0&&(bo||!mi||je===null),je=(u&(Jo|Hn))===0?o:null,Vo=null,gn(o.ctx),bo=!1,Pn=++lr,o.ac!==null&&(Ai(()=>{o.ac.abort(ui)}),o.ac=null);try{o.f|=Pa;var p=o.fn,h=p(),g=o.deps;if(Mt!==null){var f;if(Jr(o,Qt),g!==null&&Qt>0)for(g.length=Qt+Mt.length,f=0;f<Mt.length;f++)g[Qt+f]=Mt[f];else o.deps=g=Mt;if(!dn||(u&Ft)!==0&&o.reactions!==null)for(f=Qt;f<g.length;f++)(g[f].reactions??=[]).push(o)}else g!==null&&Qt<g.length&&(Jr(o,Qt),g.length=Qt);if(Un()&&ao!==null&&!bo&&g!==null&&(o.f&(Ft|Qo|no))===0)for(f=0;f<ao.length;f++)Lh(ao[f],o);return i!==null&&i!==o&&(lr++,ao!==null&&(n===null?n=ao:n.push(...ao))),(o.f&An)!==0&&(o.f^=An),h}catch(m){return rh(m)}finally{o.f^=Pa,Mt=e,Qt=t,ao=n,je=i,dn=r,Vo=s,gn(a),bo=l,Pn=c}}function bv(o,e){let t=e.reactions;if(t!==null){var n=hg.call(t,o);if(n!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[n]=t[i],t.pop())}}t===null&&(e.f&Ft)!==0&&(Mt===null||!Mt.includes(e))&&(It(e,Qo),(e.f&(co|Xr))===0&&(e.f^=Xr),uh(e),Jr(e,0))}function Jr(o,e){var t=o.deps;if(t!==null)for(var n=e;n<t.length;n++)bv(o,t[n])}function xi(o){var e=o.f;if((e&zn)===0){It(o,_t);var t=$e,n=mi;$e=o,mi=!0;try{(e&yn)!==0?gv(o):wh(o),yh(o);var i=Bh(o);o.teardown=typeof i=="function"?i:null,o.wv=Sh;var r;Zu&&Gg&&(o.f&no)!==0&&o.deps}finally{mi=n,$e=t}}}async function yv(){await Promise.resolve(),ah()}function d(o){var e=o.f,t=(e&Ft)!==0;if(ni?.add(o),je!==null&&!bo){var n=$e!==null&&($e.f&zn)!==0;if(!n&&!Vo?.includes(o)){var i=je.deps;if((je.f&Pa)!==0)o.rv<lr&&(o.rv=lr,Mt===null&&i!==null&&i[Qt]===o?Qt++:Mt===null?Mt=[o]:(!dn||!Mt.includes(o))&&Mt.push(o));else{(je.deps??=[]).push(o);var r=o.reactions;r===null?o.reactions=[je]:r.includes(je)||r.push(je)}}}else if(t&&o.deps===null&&o.effects===null){var s=o,a=s.parent;a!==null&&(a.f&co)===0&&(s.f^=co)}if(qn){if(pn.has(o))return pn.get(o);if(t){s=o;var l=s.v;return((s.f&_t)===0&&s.reactions!==null||Oh(s))&&(l=ml(s)),pn.set(s,l),l}}else if(t){if(s=o,mo?.has(s))return mo.get(s);br(s)&&hh(s)}if(mo?.has(o))return mo.get(o);if((o.f&An)!==0)throw o.v;return o.v}function Oh(o){if(o.v===pt)return!0;if(o.deps===null)return!1;for(const e of o.deps)if(pn.has(e)||(e.f&Ft)!==0&&Oh(e))return!0;return!1}function v(o){var e=bo;try{return bo=!0,o()}finally{bo=e}}const wv=-7169;function It(o,e){o.f=o.f&wv|e}function eo(o){if(!(typeof o!="object"||!o||o instanceof EventTarget)){if(hn in o)Ra(o);else if(!Array.isArray(o))for(let e in o){const t=o[e];typeof t=="object"&&t&&hn in t&&Ra(t)}}}function Ra(o,e=new Set){if(typeof o=="object"&&o!==null&&!(o instanceof EventTarget)&&!e.has(o)){e.add(o),o instanceof Date&&o.getTime();for(let n in o)try{Ra(o[n],e)}catch{}const t=hl(o);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const n=Xu(t);for(let i in n){const r=n[i].get;if(r)try{r.call(o)}catch{}}}}}const kv=["touchstart","touchmove"];function xv(o){return kv.includes(o)}const Ih=new Set,Da=new Set;function _v(o,e,t,n={}){function i(r){if(n.capture||Zi.call(e,r),!r.cancelBubble)return Ai(()=>t?.call(this,r))}return o.startsWith("pointer")||o.startsWith("touch")||o==="wheel"?vn(()=>{e.addEventListener(o,i,n)}):e.addEventListener(o,i,n),i}function Te(o,e,t,n,i){var r={capture:n,passive:i},s=_v(o,e,t,r);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&_s(()=>{e.removeEventListener(o,s,r)})}function Yt(o){for(var e=0;e<o.length;e++)Ih.add(o[e]);for(var t of Da)t(o)}let ou=null;function Zi(o){var e=this,t=e.ownerDocument,n=o.type,i=o.composedPath?.()||[],r=i[0]||o.target;ou=o;var s=0,a=ou===o&&o.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(e===document||e===window)){o.__root=e;return}var c=i.indexOf(e);if(c===-1)return;l<=c&&(s=l)}if(r=i[s]||o.target,r!==e){Zr(o,"currentTarget",{configurable:!0,get(){return r||t}});var u=je,p=$e;Ot(null),ho(null);try{for(var h,g=[];r!==null;){var f=r.assignedSlot||r.parentNode||r.host||null;try{var m=r["__"+n];if(m!=null&&(!r.disabled||o.target===r))if(fr(m)){var[L,..._]=m;L.apply(r,[o,..._])}else m.call(r,o)}catch(k){h?g.push(k):h=k}if(o.cancelBubble||f===e||f===null)break;r=f}if(h){for(let k of g)queueMicrotask(()=>{throw k});throw h}}finally{o.__root=e,delete o.currentTarget,Ot(u),ho(p)}}}function kl(o){var e=document.createElement("template");return e.innerHTML=o.replaceAll("<!>","<!---->"),e.content}function Dn(o,e){var t=$e;t.nodes_start===null&&(t.nodes_start=o,t.nodes_end=e)}function F(o,e){var t=(e&jg)!==0,n=(e&Fg)!==0,i,r=!o.startsWith("<!>");return()=>{i===void 0&&(i=kl(r?o:"<!>"+o),t||(i=Oo(i)));var s=n||fh?document.importNode(i,!0):i.cloneNode(!0);if(t){var a=Oo(s),l=s.lastChild;Dn(a,l)}else Dn(s,s);return s}}function Ev(o,e,t="svg"){var n=!o.startsWith("<!>"),i=`<${t}>${n?o:"<!>"+o}</${t}>`,r;return()=>{if(!r){var s=kl(i),a=Oo(s);r=Oo(a)}var l=r.cloneNode(!0);return Dn(l,l),l}}function xl(o,e){return Ev(o,e,"svg")}function Qr(o=""){{var e=en(o+"");return Dn(e,e),e}}function We(){var o=document.createDocumentFragment(),e=document.createComment(""),t=en();return o.append(e,t),Dn(e,t),o}function $(o,e){o!==null&&o.before(e)}let es=!0;function nu(o){es=o}function ce(o,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(o.__t??=o.nodeValue)&&(o.__t=t,o.nodeValue=t+"")}function Cv(o,e){return Sv(o,e)}const Qn=new Map;function Sv(o,{target:e,anchor:t,props:n={},events:i,context:r,intro:s=!0}){av();var a=new Set,l=p=>{for(var h=0;h<p.length;h++){var g=p[h];if(!a.has(g)){a.add(g);var f=xv(g);e.addEventListener(g,Zi,{passive:f});var m=Qn.get(g);m===void 0?(document.addEventListener(g,Zi,{passive:f}),Qn.set(g,1)):Qn.set(g,m+1)}}};l(ul(Ih)),Da.add(l);var c=void 0,u=pv(()=>{var p=t??e.appendChild(en());return ks(p,{pending:()=>{}},h=>{if(r){Qe({});var g=it;g.c=r}i&&(n.$$events=i),es=s,c=o(h,n)||{},es=!0,r&&et()}),()=>{for(var h of a){e.removeEventListener(h,Zi);var g=Qn.get(h);--g===0?(document.removeEventListener(h,Zi),Qn.delete(h)):Qn.set(h,g)}Da.delete(l),p!==t&&p.parentNode?.removeChild(p)}});return Tv.set(c,u),c}let Tv=new WeakMap;const aa=0,Pr=1,la=2;function Mn(o,e,t,n,i){var r=o,s=Un(),a=it,l=pt,c,u,p,h=s?Yo(void 0):me(void 0,!1,!1),g=s?Yo(void 0):me(void 0,!1,!1),f=!1;function m(_,k){f=!0,k&&(ho(L),Ot(L),gn(a));try{_===aa&&t&&(c?ki(c):c=xt(()=>t(r))),_===Pr&&n&&(u?ki(u):u=xt(()=>n(r,h))),_!==aa&&c&&uo(c,()=>c=null),_!==Pr&&u&&uo(u,()=>u=null),_!==la&&p&&uo(p,()=>p=null)}finally{k&&(gn(null),Ot(null),ho(null),gi||ah())}}var L=kn(()=>{if(l!==(l=e())){if(vg(l)){var _=l;f=!1,_.then(k=>{_===l&&(Mo(h,k),m(Pr,!0))},k=>{if(_===l)throw Mo(g,k),m(la,!0),g.v}),vn(()=>{f||m(aa,!0)})}else Mo(h,l),m(Pr,!1);return()=>l=pt}})}function ee(o,e,t=!1){var n=o,i=null,r=null,s=pt,a=t?wn:0,l=!1;const c=(g,f=!0)=>{l=!0,h(f,g)};var u=null;function p(){u!==null&&(u.lastChild.remove(),n.before(u),u=null);var g=s?i:r,f=s?r:i;g&&ki(g),f&&uo(f,()=>{s?r=null:i=null})}const h=(g,f)=>{if(s!==(s=g)){var m=xs(),L=n;if(m&&(u=document.createDocumentFragment(),u.append(L=en())),s?i??=f&&xt(()=>f(L)):r??=f&&xt(()=>f(L)),m){var _=Je,k=s?i:r,N=s?r:i;k&&_.skipped_effects.delete(k),N&&_.skipped_effects.add(N),_.add_callback(p)}else p()}};kn(()=>{l=!1,e(c),l||h(null,null)},a)}function Lv(o,e,t){var n=o,i=pt,r,s,a=null,l=Un()?Vg:gl;function c(){r&&uo(r),a!==null&&(a.lastChild.remove(),n.before(a),a=null),r=s}kn(()=>{if(l(i,i=e())){var u=n,p=xs();p&&(a=document.createDocumentFragment(),a.append(u=en())),s=xt(()=>t(u)),p?Je.add_callback(c):c()}})}function ye(o,e){return e}function Bv(o,e,t){for(var n=o.items,i=[],r=e.length,s=0;s<r;s++)wl(e[s].e,i,!0);var a=r>0&&i.length===0&&t!==null;if(a){var l=t.parentNode;lv(l),l.append(t),n.clear(),Co(o,e[0].prev,e[r-1].next)}_h(i,()=>{for(var c=0;c<r;c++){var u=e[c];a||(n.delete(u.k),Co(o,u.prev,u.next)),Kt(u.e,!a)}})}function we(o,e,t,n,i,r=null){var s=o,a={flags:e,items:new Map,first:null},l=(e&th)!==0;if(l){var c=o;s=c.appendChild(en())}var u=null,p=!1,h=new Map,g=vl(()=>{var _=t();return fr(_)?_:_==null?[]:ul(_)}),f,m;function L(){Ov(m,f,a,h,s,i,e,n,t),r!==null&&(f.length===0?u?ki(u):u=xt(()=>r(s)):u!==null&&uo(u,()=>{u=null}))}kn(()=>{m??=$e,f=d(g);var _=f.length;if(!(p&&_===0)){p=_===0;var k,N,H,I;if(xs()){var D=new Set,C=Je;for(N=0;N<_;N+=1){H=f[N],I=n(H,N);var w=a.items.get(I)??h.get(I);w?(e&(bs|ys))!==0&&Ah(w,H,N,e):(k=Ph(null,a,null,null,H,I,N,i,e,t,!0),h.set(I,k)),D.add(I)}for(const[A,R]of a.items)D.has(A)||C.skipped_effects.add(R.e);C.add_callback(L)}else L();d(g)}})}function Ov(o,e,t,n,i,r,s,a,l){var c=(s&Ig)!==0,u=(s&(bs|ys))!==0,p=e.length,h=t.items,g=t.first,f=g,m,L=null,_,k=[],N=[],H,I,D,C;if(c)for(C=0;C<p;C+=1)H=e[C],I=a(H,C),D=h.get(I),D!==void 0&&(D.a?.measure(),(_??=new Set).add(D));for(C=0;C<p;C+=1){if(H=e[C],I=a(H,C),D=h.get(I),D===void 0){var w=n.get(I);if(w!==void 0){n.delete(I),h.set(I,w);var A=L?L.next:f;Co(t,L,w),Co(t,w,A),ca(w,A,i),L=w}else{var R=f?f.e.nodes_start:i;L=Ph(R,t,L,L===null?t.first:L.next,H,I,C,r,s,l)}h.set(I,L),k=[],N=[],f=L.next;continue}if(u&&Ah(D,H,C,s),(D.e.f&yo)!==0&&(ki(D.e),c&&(D.a?.unfix(),(_??=new Set).delete(D))),D!==f){if(m!==void 0&&m.has(D)){if(k.length<N.length){var M=N[0],T;L=M.prev;var O=k[0],b=k[k.length-1];for(T=0;T<k.length;T+=1)ca(k[T],M,i);for(T=0;T<N.length;T+=1)m.delete(N[T]);Co(t,O.prev,b.next),Co(t,L,O),Co(t,b,M),f=M,L=b,C-=1,k=[],N=[]}else m.delete(D),ca(D,f,i),Co(t,D.prev,D.next),Co(t,D,L===null?t.first:L.next),Co(t,L,D),L=D;continue}for(k=[],N=[];f!==null&&f.k!==I;)(f.e.f&yo)===0&&(m??=new Set).add(f),N.push(f),f=f.next;if(f===null)continue;D=f}k.push(D),L=D,f=D.next}if(f!==null||m!==void 0){for(var x=m===void 0?[]:ul(m);f!==null;)(f.e.f&yo)===0&&x.push(f),f=f.next;var S=x.length;if(S>0){var B=(s&th)!==0&&p===0?i:null;if(c){for(C=0;C<S;C+=1)x[C].a?.measure();for(C=0;C<S;C+=1)x[C].a?.fix()}Bv(t,x,B)}}c&&vn(()=>{if(_!==void 0)for(D of _)D.a?.apply()}),o.first=t.first&&t.first.e,o.last=L&&L.e;for(var j of n.values())Kt(j.e);n.clear()}function Ah(o,e,t,n){(n&bs)!==0&&Mo(o.v,e),(n&ys)!==0?Mo(o.i,t):o.i=t}function Ph(o,e,t,n,i,r,s,a,l,c,u){var p=(l&bs)!==0,h=(l&Ag)===0,g=p?h?me(i,!1,!1):Yo(i):i,f=(l&ys)===0?s:Yo(s),m={i:f,v:g,k:r,a:null,e:null,prev:t,next:n};try{if(o===null){var L=document.createDocumentFragment();L.append(o=en())}return m.e=xt(()=>a(o,g,f,c),qg),m.e.prev=t&&t.e,m.e.next=n&&n.e,t===null?u||(e.first=m):(t.next=m,t.e.next=m.e),n!==null&&(n.prev=m,n.e.prev=m.e),m}finally{}}function ca(o,e,t){for(var n=o.next?o.next.e.nodes_start:t,i=e?e.e.nodes_start:t,r=o.e.nodes_start;r!==null&&r!==n;){var s=vr(r);i.before(r),r=s}}function Co(o,e,t){e===null?o.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function No(o,e,t=!1,n=!1,i=!1){var r=o,s="";Q(()=>{var a=$e;if(s!==(s=e()??"")&&(a.nodes_start!==null&&(kh(a.nodes_start,a.nodes_end),a.nodes_start=a.nodes_end=null),s!=="")){var l=s+"";t?l=`<svg>${l}</svg>`:n&&(l=`<math>${l}</math>`);var c=kl(l);if((t||n)&&(c=Oo(c)),Dn(Oo(c),c.lastChild),t||n)for(;Oo(c);)r.before(Oo(c));else r.before(c)}})}function Iv(o,e,...t){var n=o,i=Vt,r;kn(()=>{i!==(i=e())&&(r&&(Kt(r),r=null),r=xt(()=>i(n,...t)))},wn)}function Av(o,e,t){var n=o,i,r,s=null,a=null;function l(){r&&(uo(r),r=null),s&&(s.lastChild.remove(),n.before(s),s=null),r=a,a=null}kn(()=>{if(i!==(i=e())){var c=xs();if(i){var u=n;c&&(s=document.createDocumentFragment(),s.append(u=en()),r&&Je.skipped_effects.add(r)),a=xt(()=>t(u,i))}c?Je.add_callback(l):l()}},wn)}function Pv(o,e,t,n,i,r){var s,a,l=null,c=o,u;kn(()=>{const p=e()||null;var h=p==="svg"?zg:null;p!==s&&(u&&(p===null?uo(u,()=>{u=null,a=null}):p===a?ki(u):(Kt(u),nu(!1))),p&&p!==a&&(u=xt(()=>{if(l=h?document.createElementNS(h,p):document.createElement(p),Dn(l,l),n){var g=l.appendChild(en());n(l,g)}$e.nodes_end=l,c.before(l)})),s=p,s&&(a=s),nu(!0))},wn)}function Mh(o){var e,t,n="";if(typeof o=="string"||typeof o=="number")n+=o;else if(typeof o=="object")if(Array.isArray(o)){var i=o.length;for(e=0;e<i;e++)o[e]&&(t=Mh(o[e]))&&(n&&(n+=" "),n+=t)}else for(t in o)o[t]&&(n&&(n+=" "),n+=t);return n}function Mv(){for(var o,e,t=0,n="",i=arguments.length;t<i;t++)(o=arguments[t])&&(e=Mh(o))&&(n&&(n+=" "),n+=e);return n}function Nh(o){return typeof o=="object"?Mv(o):o??""}const iu=[...` 	
\r\f \v\uFEFF`];function Nv(o,e,t){var n=o==null?"":""+o;if(e&&(n=n?n+" "+e:e),t){for(var i in t)if(t[i])n=n?n+" "+i:i;else if(n.length)for(var r=i.length,s=0;(s=n.indexOf(i,s))>=0;){var a=s+r;(s===0||iu.includes(n[s-1]))&&(a===n.length||iu.includes(n[a]))?n=(s===0?"":n.substring(0,s))+n.substring(a+1):s=a}}return n===""?null:n}function ru(o,e=!1){var t=e?" !important;":";",n="";for(var i in o){var r=o[i];r!=null&&r!==""&&(n+=" "+i+": "+r+t)}return n}function da(o){return o[0]!=="-"||o[1]!=="-"?o.toLowerCase():o}function $v(o,e){if(e){var t="",n,i;if(Array.isArray(e)?(n=e[0],i=e[1]):n=e,o){o=String(o).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var r=!1,s=0,a=!1,l=[];n&&l.push(...Object.keys(n).map(da)),i&&l.push(...Object.keys(i).map(da));var c=0,u=-1;const m=o.length;for(var p=0;p<m;p++){var h=o[p];if(a?h==="/"&&o[p-1]==="*"&&(a=!1):r?r===h&&(r=!1):h==="/"&&o[p+1]==="*"?a=!0:h==='"'||h==="'"?r=h:h==="("?s++:h===")"&&s--,!a&&r===!1&&s===0){if(h===":"&&u===-1)u=p;else if(h===";"||p===m-1){if(u!==-1){var g=da(o.substring(c,u).trim());if(!l.includes(g)){h!==";"&&p++;var f=o.substring(c,p).trim();t+=" "+f+";"}}c=p+1,u=-1}}}}return n&&(t+=ru(n)),i&&(t+=ru(i,!0)),t=t.trim(),t===""?null:t}return o==null?null:String(o)}function xo(o,e,t,n,i,r){var s=o.__className;if(s!==t||s===void 0){var a=Nv(t,n,r);a==null?o.removeAttribute("class"):o.className=a,o.__className=t}else if(r&&i!==r)for(var l in r){var c=!!r[l];(i==null||c!==!!i[l])&&o.classList.toggle(l,c)}return r}function ua(o,e={},t,n){for(var i in t){var r=t[i];e[i]!==r&&(t[i]==null?o.style.removeProperty(i):o.style.setProperty(i,r,n))}}function Et(o,e,t,n){var i=o.__style;if(i!==e){var r=$v(e,n);r==null?o.removeAttribute("style"):o.style.cssText=r,o.__style=e}else n&&(Array.isArray(n)?(ua(o,t?.[0],n[0]),ua(o,t?.[1],n[1],"important")):ua(o,t,n));return n}function $h(o,e,t=!1){if(o.multiple){if(e==null)return;if(!fr(e))return Ug();for(var n of o.options)n.selected=e.includes(ir(n));return}for(n of o.options){var i=ir(n);if(sv(i,e)){n.selected=!0;return}}(!t||e!==void 0)&&(o.selectedIndex=-1)}function Rv(o){var e=new MutationObserver(()=>{$h(o,o.__value)});e.observe(o,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),_s(()=>{e.disconnect()})}function Rt(o,e,t=e){var n=!0;bl(o,"change",i=>{var r=i?"[selected]":":checked",s;if(o.multiple)s=[].map.call(o.querySelectorAll(r),ir);else{var a=o.querySelector(r)??o.querySelector("option:not([disabled])");s=a&&ir(a)}t(s)}),yl(()=>{var i=e();if($h(o,i,n),n&&i===void 0){var r=o.querySelector(":checked");r!==null&&(i=ir(r),t(i))}o.__value=i,n=!1}),Rv(o)}function ir(o){return"__value"in o?o.__value:o.value}const Dv=Symbol("is custom element"),jv=Symbol("is html");function un(o,e){var t=_l(o);t.value===(t.value=e??void 0)||o.value===e&&(e!==0||o.nodeName!=="PROGRESS")||(o.value=e??"")}function Fv(o,e){var t=_l(o);t.checked!==(t.checked=e??void 0)&&(o.checked=e)}function Ue(o,e,t,n){var i=_l(o);i[e]!==(i[e]=t)&&(e==="loading"&&(o[wg]=t),t==null?o.removeAttribute(e):typeof t!="string"&&Hv(o).includes(e)?o[e]=t:o.setAttribute(e,t))}function _l(o){return o.__attributes??={[Dv]:o.nodeName.includes("-"),[jv]:o.namespaceURI===Hg}}var su=new Map;function Hv(o){var e=o.getAttribute("is")||o.nodeName,t=su.get(e);if(t)return t;su.set(e,t=[]);for(var n,i=o,r=Element.prototype;r!==i;){n=Xu(i);for(var s in n)n[s].set&&t.push(s);i=hl(i)}return t}const zv=()=>performance.now(),Wo={tick:o=>requestAnimationFrame(o),now:()=>zv(),tasks:new Set};function Rh(){const o=Wo.now();Wo.tasks.forEach(e=>{e.c(o)||(Wo.tasks.delete(e),e.f())}),Wo.tasks.size!==0&&Wo.tick(Rh)}function Uv(o){let e;return Wo.tasks.size===0&&Wo.tick(Rh),{promise:new Promise(t=>{Wo.tasks.add(e={c:o,f:t})}),abort(){Wo.tasks.delete(e)}}}function Mr(o,e){Ai(()=>{o.dispatchEvent(new CustomEvent(e))})}function Wv(o){if(o==="float")return"cssFloat";if(o==="offset")return"cssOffset";if(o.startsWith("--"))return o;const e=o.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function au(o){const e={},t=o.split(";");for(const n of t){const[i,r]=n.split(":");if(!i||r===void 0)break;const s=Wv(i.trim());e[s]=r.trim()}return e}const qv=o=>o;function Sn(o,e,t,n){var i=(o&Dg)!==0,r="both",s,a=e.inert,l=e.style.overflow,c,u;function p(){return Ai(()=>s??=t()(e,n?.()??{},{direction:r}))}var h={is_global:i,in(){e.inert=a,Mr(e,"introstart"),c=ja(e,p(),u,1,()=>{Mr(e,"introend"),c?.abort(),c=s=void 0,e.style.overflow=l})},out(L){e.inert=!0,Mr(e,"outrostart"),u=ja(e,p(),c,0,()=>{Mr(e,"outroend"),L?.()})},stop:()=>{c?.abort(),u?.abort()}},g=$e;if((g.transitions??=[]).push(h),es){var f=i;if(!f){for(var m=g.parent;m&&(m.f&wn)!==0;)for(;(m=m.parent)&&(m.f&yn)===0;);f=!m||(m.f&vs)!==0}f&&yl(()=>{v(()=>h.in())})}}function ja(o,e,t,n,i){var r=n===1;if(gg(e)){var s,a=!1;return vn(()=>{if(!a){var L=e({direction:r?"in":"out"});s=ja(o,L,t,n,i)}}),{abort:()=>{a=!0,s?.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(t?.deactivate(),!e?.duration)return i(),{abort:Vt,deactivate:Vt,reset:Vt,t:()=>n};const{delay:l=0,css:c,tick:u,easing:p=qv}=e;var h=[];if(r&&t===void 0&&(u&&u(0,1),c)){var g=au(c(0,1));h.push(g,g)}var f=()=>1-n,m=o.animate(h,{duration:l,fill:"forwards"});return m.onfinish=()=>{m.cancel();var L=t?.t()??1-n;t?.abort();var _=n-L,k=e.duration*Math.abs(_),N=[];if(k>0){var H=!1;if(c)for(var I=Math.ceil(k/16.666666666666668),D=0;D<=I;D+=1){var C=L+_*p(D/I),w=au(c(C,1-C));N.push(w),H||=w.overflow==="hidden"}H&&(o.style.overflow="hidden"),f=()=>{var A=m.currentTime;return L+_*p(A/k)},u&&Uv(()=>{if(m.playState!=="running")return!1;var A=f();return u(A,1-A),!0})}m=o.animate(N,{duration:k,fill:"forwards"}),m.onfinish=()=>{f=()=>n,u?.(n,1-n),i()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=Vt)},deactivate:()=>{i=Vt},reset:()=>{n===0&&u?.(1,0)},t:()=>f()}}function pe(o,e,t=e){var n=new WeakSet;bl(o,"input",async i=>{var r=i?o.defaultValue:o.value;if(r=ha(o)?pa(r):r,t(r),Je!==null&&n.add(Je),await yv(),r!==(r=e())){var s=o.selectionStart,a=o.selectionEnd,l=o.value.length;if(o.value=r??"",a!==null){var c=o.value.length;s===a&&a===l&&c>l?(o.selectionStart=c,o.selectionEnd=c):(o.selectionStart=s,o.selectionEnd=Math.min(a,c))}}}),v(e)==null&&o.value&&(t(ha(o)?pa(o.value):o.value),Je!==null&&n.add(Je)),mr(()=>{var i=e();if(o===document.activeElement){var r=Hr??Je;if(n.has(r))return}ha(o)&&i===pa(o.value)||o.type==="date"&&!i&&!o.value||i!==o.value&&(o.value=i??"")})}function st(o,e,t=e){bl(o,"change",n=>{var i=n?o.defaultChecked:o.checked;t(i)}),v(e)==null&&t(o.checked),mr(()=>{var n=e();o.checked=!!n})}function ha(o){var e=o.type;return e==="number"||e==="range"}function pa(o){return o===""?null:+o}class El{#e=new WeakMap;#t;#l;static entries=new WeakMap;constructor(e){this.#l=e}observe(e,t){var n=this.#e.get(e)||new Set;return n.add(t),this.#e.set(e,n),this.#i().observe(e,this.#l),()=>{var i=this.#e.get(e);i.delete(t),i.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#i(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var t of e){El.entries.set(t.target,t);for(var n of this.#e.get(t.target)||[])n(t)}}))}}var Vv=new El({box:"border-box"});function _i(o,e,t){var n=Vv.observe(o,()=>t(o[e]));yl(()=>(v(()=>t(o[e])),n))}function jo(o=!1){const e=it,t=e.l.u;if(!t)return;let n=()=>eo(e.s);if(o){let i=0,r={};const s=gr(()=>{let a=!1;const l=e.s;for(const c in l)l[c]!==r[c]&&(r[c]=l[c],a=!0);return a&&i++,i});n=()=>d(s)}t.b.length&&hv(()=>{lu(e,n),Aa(t.b)}),Zo(()=>{const i=v(()=>t.m.map(mg));return()=>{for(const r of i)typeof r=="function"&&r()}}),t.a.length&&Zo(()=>{lu(e,n),Aa(t.a)})}function lu(o,e){if(o.l.s)for(const t of o.l.s)d(t);e()}function Dh(o,e,t){if(o==null)return e(void 0),Vt;const n=v(()=>o.subscribe(e,t));return n.unsubscribe?()=>n.unsubscribe():n}const ei=[];function kt(o,e=Vt){let t=null;const n=new Set;function i(a){if(gl(o,a)&&(o=a,t)){const l=!ei.length;for(const c of n)c[1](),ei.push(c,o);if(l){for(let c=0;c<ei.length;c+=2)ei[c][0](ei[c+1]);ei.length=0}}}function r(a){i(a(o))}function s(a,l=Vt){const c=[a,l];return n.add(c),n.size===1&&(t=e(i,r)||Vt),a(o),()=>{n.delete(c),n.size===0&&t&&(t(),t=null)}}return{set:i,update:r,subscribe:s}}function Ge(o){let e;return Dh(o,t=>e=t)(),e}let Nr=!1,Fa=Symbol();function ne(o,e,t){const n=t[e]??={store:null,source:me(void 0),unsubscribe:Vt};if(n.store!==o&&!(Fa in t))if(n.unsubscribe(),n.store=o??null,o==null)n.source.v=void 0,n.unsubscribe=Vt;else{var i=!0;n.unsubscribe=Dh(o,r=>{i?n.source.v=r:V(n.source,r)}),i=!1}return o&&Fa in t?Ge(o):d(n.source)}function fe(o,e){return o.set(e),e}function Wt(o,e){var t=o[e];t.store!==null&&fe(t.store,t.source.v)}function rt(){const o={};function e(){_s(()=>{for(var t in o)o[t].unsubscribe();Zr(o,Fa,{enumerable:!1,value:!0})})}return[o,e]}function z(o,e,t){return o.set(t),e}function Gv(o,e,t=1){return o.set(e+t),e}function Kv(o){var e=Nr;try{return Nr=!1,[o(),Nr]}finally{Nr=e}}function Ct(o,e,t,n){var i=!Ii||(t&Mg)!==0,r=(t&$g)!==0,s=(t&Rg)!==0,a=n,l=!0,c=()=>(l&&(l=!1,a=s?v(n):n),a),u;if(r){var p=hn in o||yg in o;u=fi(o,e)?.set??(p&&e in o?N=>o[e]=N:void 0)}var h,g=!1;r?[h,g]=Kv(()=>o[e]):h=o[e],h===void 0&&n!==void 0&&(h=c(),u&&(i&&Sg(),u(h)));var f;if(i?f=()=>{var N=o[e];return N===void 0?c():(l=!0,N)}:f=()=>{var N=o[e];return N!==void 0&&(a=void 0),N===void 0?a:N},i&&(t&Ng)===0)return f;if(u){var m=o.$$legacy;return(function(N,H){return arguments.length>0?((!i||!H||m||g)&&u(H?f():N),N):f()})}var L=!1,_=((t&Pg)!==0?gr:vl)(()=>(L=!1,f()));r&&d(_);var k=$e;return(function(N,H){if(arguments.length>0){const I=H?d(_):i&&r?$t(N):N;return V(_,I),L=!0,a!==void 0&&(a=I),N}return qn&&L||(k.f&zn)!==0?_.v:d(_)})}function Yv(o){it===null&&eh(),Ii&&it.l!==null?Jv(it).m.push(o):Zo(()=>{const e=v(o);if(typeof e=="function")return e})}function Zv(o,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(o,{detail:e,bubbles:t,cancelable:n})}function Xv(){const o=it;return o===null&&eh(),(e,t,n)=>{const i=o.s.$$events?.[e];if(i){const r=fr(i)?i.slice():[i],s=Zv(e,t,n);for(const a of r)a.call(o.x,s);return!s.defaultPrevented}return!0}}function Jv(o){var e=o.l;return e.u??={a:[],b:[],m:[]}}const Qv="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Qv);Kg();(function(){try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode(".ce-hint--align-start{text-align:left}.ce-hint--align-center{text-align:center}.ce-hint__description{opacity:.6;margin-top:3px}")),document.head.appendChild(o)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();var cr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Es(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function em(o){if(o.__esModule)return o;var e=o.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(o).forEach(function(n){var i=Object.getOwnPropertyDescriptor(o,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return o[n]}})}),t}function fa(){}Object.assign(fa,{default:fa,register:fa,revert:function(){},__esModule:!0});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(o){const e=(this.document||this.ownerDocument).querySelectorAll(o);let t=e.length;for(;--t>=0&&e.item(t)!==this;);return t>-1});Element.prototype.closest||(Element.prototype.closest=function(o){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(o))return e;e=e.parentElement||e.parentNode}while(e!==null);return null});Element.prototype.prepend||(Element.prototype.prepend=function(o){const e=document.createDocumentFragment();Array.isArray(o)||(o=[o]),o.forEach(t=>{const n=t instanceof Node;e.appendChild(n?t:document.createTextNode(t))}),this.insertBefore(e,this.firstChild)});Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(o){o=arguments.length===0?!0:!!o;const e=this.parentNode,t=window.getComputedStyle(e,null),n=parseInt(t.getPropertyValue("border-top-width")),i=parseInt(t.getPropertyValue("border-left-width")),r=this.offsetTop-e.offsetTop<e.scrollTop,s=this.offsetTop-e.offsetTop+this.clientHeight-n>e.scrollTop+e.clientHeight,a=this.offsetLeft-e.offsetLeft<e.scrollLeft,l=this.offsetLeft-e.offsetLeft+this.clientWidth-i>e.scrollLeft+e.clientWidth,c=r&&!s;(r||s)&&o&&(e.scrollTop=this.offsetTop-e.offsetTop-e.clientHeight/2-n+this.clientHeight/2),(a||l)&&o&&(e.scrollLeft=this.offsetLeft-e.offsetLeft-e.clientWidth/2-i+this.clientWidth/2),(r||s||a||l)&&!o&&this.scrollIntoView(c)});window.requestIdleCallback=window.requestIdleCallback||function(o){const e=Date.now();return setTimeout(function(){o({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(o){clearTimeout(o)};let tm=(o=21)=>crypto.getRandomValues(new Uint8Array(o)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");var jh=(o=>(o.VERBOSE="VERBOSE",o.INFO="INFO",o.WARN="WARN",o.ERROR="ERROR",o))(jh||{});const Oe={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46},om={LEFT:0};function yr(o,e,t="log",n,i="color: inherit"){if(!("console"in window)||!window.console[t])return;const r=["info","log","warn","error"].includes(t),s=[];switch(yr.logLevel){case"ERROR":if(t!=="error")return;break;case"WARN":if(!["error","warn"].includes(t))return;break;case"INFO":if(!r||o)return;break}n&&s.push(n);const a="Editor.js 2.31.0";o&&(r?(s.unshift(`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`,i),e=`%c${a}%c ${e}`):e=`( ${a} )${e}`);try{r?n?console[t](`${e} %o`,...s):console[t](e,...s):console[t](e)}catch{}}yr.logLevel="VERBOSE";function nm(o){yr.logLevel=o}const Ve=yr.bind(window,!1),lo=yr.bind(window,!0);function jn(o){return Object.prototype.toString.call(o).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function ct(o){return jn(o)==="function"||jn(o)==="asyncfunction"}function Tt(o){return jn(o)==="object"}function Xo(o){return jn(o)==="string"}function im(o){return jn(o)==="boolean"}function cu(o){return jn(o)==="number"}function du(o){return jn(o)==="undefined"}function po(o){return o?Object.keys(o).length===0&&o.constructor===Object:!0}function Fh(o){return o>47&&o<58||o===32||o===13||o===229||o>64&&o<91||o>95&&o<112||o>185&&o<193||o>218&&o<223}async function rm(o,e=()=>{},t=()=>{}){async function n(i,r,s){try{await i.function(i.data),await r(du(i.data)?{}:i.data)}catch{s(du(i.data)?{}:i.data)}}return o.reduce(async(i,r)=>(await i,n(r,e,t)),Promise.resolve())}function Hh(o){return Array.prototype.slice.call(o)}function ts(o,e){return function(){const t=this,n=arguments;window.setTimeout(()=>o.apply(t,n),e)}}function sm(o){return o.name.split(".").pop()}function am(o){return/^[-\w]+\/([-+\w]+|\*)$/.test(o)}function uu(o,e,t){let n;return(...i)=>{const r=this,s=()=>{n=null,o.apply(r,i)};window.clearTimeout(n),n=window.setTimeout(s,e)}}function Ha(o,e,t=void 0){let n,i,r,s=null,a=0;t||(t={});const l=function(){a=t.leading===!1?0:Date.now(),s=null,r=o.apply(n,i),s||(n=i=null)};return function(){const c=Date.now();!a&&t.leading===!1&&(a=c);const u=e-(c-a);return n=this,i=arguments,u<=0||u>e?(s&&(clearTimeout(s),s=null),a=c,r=o.apply(n,i),s||(n=i=null)):!s&&t.trailing!==!1&&(s=setTimeout(l,u)),r}}function lm(){const o={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(o).find(t=>window.navigator.appVersion.toLowerCase().indexOf(t)!==-1);return e&&(o[e]=!0),o}function os(o){return o[0].toUpperCase()+o.slice(1)}function za(o,...e){if(!e.length)return o;const t=e.shift();if(Tt(o)&&Tt(t))for(const n in t)Tt(t[n])?(o[n]||Object.assign(o,{[n]:{}}),za(o[n],t[n])):Object.assign(o,{[n]:t[n]});return za(o,...e)}function Cl(o){const e=lm();return o=o.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi," + "),e.mac?o=o.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):o=o.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),o}function cm(o){try{return new URL(o).href}catch{}return o.substring(0,2)==="//"?window.location.protocol+o:window.location.origin+o}function dm(){return tm(10)}function um(o){window.open(o,"_blank")}function hm(o=""){return`${o}${Math.floor(Math.random()*1e8).toString(16)}`}function Ua(o,e,t){const n=`«${e}» is deprecated and will be removed in the next major release. Please use the «${t}» instead.`;o&&lo(n,"warn")}function Pi(o,e,t){const n=t.value?"value":"get",i=t[n],r=`#${e}Cache`;if(t[n]=function(...s){return this[r]===void 0&&(this[r]=i.apply(this,...s)),this[r]},n==="get"&&t.set){const s=t.set;t.set=function(a){delete o[r],s.apply(this,a)}}return t}const zh=650;function Mi(){return window.matchMedia(`(max-width: ${zh}px)`).matches}const Wa=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function pm(o,e){const t=Array.isArray(o)||Tt(o),n=Array.isArray(e)||Tt(e);return t||n?JSON.stringify(o)===JSON.stringify(e):o===e}let G=class Pt{static isSingleTag(e){return e.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}static isLineBreakTag(e){return e&&e.tagName&&["BR","WBR"].includes(e.tagName)}static make(e,t=null,n={}){const i=document.createElement(e);if(Array.isArray(t)){const r=t.filter(s=>s!==void 0);i.classList.add(...r)}else t&&i.classList.add(t);for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r]);return i}static text(e){return document.createTextNode(e)}static append(e,t){Array.isArray(t)?t.forEach(n=>e.appendChild(n)):e.appendChild(t)}static prepend(e,t){Array.isArray(t)?(t=t.reverse(),t.forEach(n=>e.prepend(n))):e.prepend(t)}static swap(e,t){const n=document.createElement("div"),i=e.parentNode;i.insertBefore(n,e),i.insertBefore(e,t),i.insertBefore(t,n),i.removeChild(n)}static find(e=document,t){return e.querySelector(t)}static get(e){return document.getElementById(e)}static findAll(e=document,t){return e.querySelectorAll(t)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(e=>`input[type="${e}"]`).join(", ")}static findAllInputs(e){return Hh(e.querySelectorAll(Pt.allInputsSelector)).reduce((t,n)=>Pt.isNativeInput(n)||Pt.containsOnlyInlineElements(n)?[...t,n]:[...t,...Pt.getDeepestBlockElements(n)],[])}static getDeepestNode(e,t=!1){const n=t?"lastChild":"firstChild",i=t?"previousSibling":"nextSibling";if(e&&e.nodeType===Node.ELEMENT_NODE&&e[n]){let r=e[n];if(Pt.isSingleTag(r)&&!Pt.isNativeInput(r)&&!Pt.isLineBreakTag(r))if(r[i])r=r[i];else if(r.parentNode[i])r=r.parentNode[i];else return r.parentNode;return this.getDeepestNode(r,t)}return e}static isElement(e){return cu(e)?!1:e&&e.nodeType&&e.nodeType===Node.ELEMENT_NODE}static isFragment(e){return cu(e)?!1:e&&e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}static isContentEditable(e){return e.contentEditable==="true"}static isNativeInput(e){const t=["INPUT","TEXTAREA"];return e&&e.tagName?t.includes(e.tagName):!1}static canSetCaret(e){let t=!0;if(Pt.isNativeInput(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":t=!1;break}else t=Pt.isContentEditable(e);return t}static isNodeEmpty(e,t){let n;return this.isSingleTag(e)&&!this.isLineBreakTag(e)?!1:(this.isElement(e)&&this.isNativeInput(e)?n=e.value:n=e.textContent.replace("​",""),t&&(n=n.replace(new RegExp(t,"g"),"")),n.length===0)}static isLeaf(e){return e?e.childNodes.length===0:!1}static isEmpty(e,t){const n=[e];for(;n.length>0;)if(e=n.shift(),!!e){if(this.isLeaf(e)&&!this.isNodeEmpty(e,t))return!1;e.childNodes&&n.push(...Array.from(e.childNodes))}return!0}static isHTMLString(e){const t=Pt.make("div");return t.innerHTML=e,t.childElementCount>0}static getContentLength(e){return Pt.isNativeInput(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:e.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(e){let t;Xo(e)?(t=document.createElement("div"),t.innerHTML=e):t=e;const n=i=>!Pt.blockElements.includes(i.tagName.toLowerCase())&&Array.from(i.children).every(n);return Array.from(t.children).every(n)}static getDeepestBlockElements(e){return Pt.containsOnlyInlineElements(e)?[e]:Array.from(e.children).reduce((t,n)=>[...t,...Pt.getDeepestBlockElements(n)],[])}static getHolder(e){return Xo(e)?document.getElementById(e):e}static isAnchor(e){return e.tagName.toLowerCase()==="a"}static offset(e){const t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop,r=t.top+i,s=t.left+n;return{top:r,left:s,bottom:r+t.height,right:s+t.width}}static getNodeByOffset(e,t){let n=0,i=null;const r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null);let s=r.nextNode();for(;s;){const c=s.textContent,u=c===null?0:c.length;if(i=s,n+u>=t)break;n+=u,s=r.nextNode()}if(!i)return{node:null,offset:0};const a=i.textContent;if(a===null||a.length===0)return{node:null,offset:0};const l=Math.min(t-n,a.length);return{node:i,offset:l}}};function fm(o){return!/[^\t\n\r ]/.test(o)}function gm(o){const e=window.getComputedStyle(o),t=parseFloat(e.fontSize),n=parseFloat(e.lineHeight)||t*1.2,i=parseFloat(e.paddingTop),r=parseFloat(e.borderTopWidth),s=parseFloat(e.marginTop),a=t*.8,l=(n-t)/2;return s+r+i+l+a}function Uh(o){o.dataset.empty=G.isEmpty(o)?"true":"false"}const vm={blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":"","Convert to":""}},mm={Text:"",Link:"",Bold:"",Italic:""},bm={link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},ym={delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}},Wh={ui:vm,toolNames:mm,tools:bm,blockTunes:ym},qh=class ii{static ui(e,t){return ii._t(e,t)}static t(e,t){return ii._t(e,t)}static setDictionary(e){ii.currentDictionary=e}static _t(e,t){const n=ii.getNamespace(e);return!n||!n[t]?t:n[t]}static getNamespace(e){return e.split(".").reduce((t,n)=>!t||!Object.keys(t).length?{}:t[n],ii.currentDictionary)}};qh.currentDictionary=Wh;let Dt=qh;class Vh extends Error{}let wr=class{constructor(){this.subscribers={}}on(e,t){e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].push(t)}once(e,t){e in this.subscribers||(this.subscribers[e]=[]);const n=i=>{const r=t(i),s=this.subscribers[e].indexOf(n);return s!==-1&&this.subscribers[e].splice(s,1),r};this.subscribers[e].push(n)}emit(e,t){po(this.subscribers)||!this.subscribers[e]||this.subscribers[e].reduce((n,i)=>{const r=i(n);return r!==void 0?r:n},t)}off(e,t){if(this.subscribers[e]===void 0){console.warn(`EventDispatcher .off(): there is no subscribers for event "${e.toString()}". Probably, .off() called before .on()`);return}for(let n=0;n<this.subscribers[e].length;n++)if(this.subscribers[e][n]===t){delete this.subscribers[e][n];break}}destroy(){this.subscribers={}}};function zo(o){Object.setPrototypeOf(this,{get id(){return o.id},get name(){return o.name},get config(){return o.config},get holder(){return o.holder},get isEmpty(){return o.isEmpty},get selected(){return o.selected},set stretched(e){o.stretched=e},get stretched(){return o.stretched},get focusable(){return o.focusable},call(e,t){return o.call(e,t)},save(){return o.save()},validate(e){return o.validate(e)},dispatchChange(){o.dispatchChange()},getActiveToolboxEntry(){return o.getActiveToolboxEntry()}})}let kr=class{constructor(){this.allListeners=[]}on(e,t,n,i=!1){const r=hm("l"),s={id:r,element:e,eventType:t,handler:n,options:i};if(!this.findOne(e,t,n))return this.allListeners.push(s),e.addEventListener(t,n,i),r}off(e,t,n,i){const r=this.findAll(e,t,n);r.forEach((s,a)=>{const l=this.allListeners.indexOf(r[a]);l>-1&&(this.allListeners.splice(l,1),s.element.removeEventListener(s.eventType,s.handler,s.options))})}offById(e){const t=this.findById(e);t&&t.element.removeEventListener(t.eventType,t.handler,t.options)}findOne(e,t,n){const i=this.findAll(e,t,n);return i.length>0?i[0]:null}findAll(e,t,n){let i;const r=e?this.findByEventTarget(e):[];return e&&t&&n?i=r.filter(s=>s.eventType===t&&s.handler===n):e&&t?i=r.filter(s=>s.eventType===t):i=r,i}removeAll(){this.allListeners.map(e=>{e.element.removeEventListener(e.eventType,e.handler,e.options)}),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(e){return this.allListeners.filter(t=>{if(t.element===e)return t})}findByType(e){return this.allListeners.filter(t=>{if(t.eventType===e)return t})}findByHandler(e){return this.allListeners.filter(t=>{if(t.handler===e)return t})}findById(e){return this.allListeners.find(t=>t.id===e)}},ze=class Gh{constructor({config:e,eventsDispatcher:t}){if(this.nodes={},this.listeners=new kr,this.readOnlyMutableListeners={on:(n,i,r,s=!1)=>{this.mutableListenerIds.push(this.listeners.on(n,i,r,s))},clearAll:()=>{for(const n of this.mutableListenerIds)this.listeners.offById(n);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===Gh)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=e,this.eventsDispatcher=t}set state(e){this.Editor=e}removeAllNodes(){for(const e in this.nodes){const t=this.nodes[e];t instanceof HTMLElement&&t.remove()}}get isRtl(){return this.config.i18n.direction==="rtl"}},_e=class nn{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const e=window.getSelection();return e?e.anchorNode:null}static get anchorElement(){const e=window.getSelection();if(!e)return null;const t=e.anchorNode;return t?G.isElement(t)?t:t.parentElement:null}static get anchorOffset(){const e=window.getSelection();return e?e.anchorOffset:null}static get isCollapsed(){const e=window.getSelection();return e?e.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(nn.get())}static isSelectionAtEditor(e){if(!e)return!1;let t=e.anchorNode||e.focusNode;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let n=null;return t&&t instanceof Element&&(n=t.closest(`.${nn.CSS.editorZone}`)),n?n.nodeType===Node.ELEMENT_NODE:!1}static isRangeAtEditor(e){if(!e)return;let t=e.startContainer;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let n=null;return t&&t instanceof Element&&(n=t.closest(`.${nn.CSS.editorZone}`)),n?n.nodeType===Node.ELEMENT_NODE:!1}static get isSelectionExists(){return!!nn.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(e){return e&&e.rangeCount?e.getRangeAt(0):null}static get rect(){let e=document.selection,t,n={x:0,y:0,width:0,height:0};if(e&&e.type!=="Control")return e=e,t=e.createRange(),n.x=t.boundingLeft,n.y=t.boundingTop,n.width=t.boundingWidth,n.height=t.boundingHeight,n;if(!window.getSelection)return Ve("Method window.getSelection is not supported","warn"),n;if(e=window.getSelection(),e.rangeCount===null||isNaN(e.rangeCount))return Ve("Method SelectionUtils.rangeCount is not supported","warn"),n;if(e.rangeCount===0)return n;if(t=e.getRangeAt(0).cloneRange(),t.getBoundingClientRect&&(n=t.getBoundingClientRect()),n.x===0&&n.y===0){const i=document.createElement("span");if(i.getBoundingClientRect){i.appendChild(document.createTextNode("​")),t.insertNode(i),n=i.getBoundingClientRect();const r=i.parentNode;r.removeChild(i),r.normalize()}}return n}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(e,t=0){const n=document.createRange(),i=window.getSelection();return G.isNativeInput(e)?G.canSetCaret(e)?(e.focus(),e.selectionStart=e.selectionEnd=t,e.getBoundingClientRect()):void 0:(n.setStart(e,t),n.setEnd(e,t),i.removeAllRanges(),i.addRange(n),n.getBoundingClientRect())}static isRangeInsideContainer(e){const t=nn.range;return t===null?!1:e.contains(t.startContainer)}static addFakeCursor(){const e=nn.range;if(e===null)return;const t=G.make("span","codex-editor__fake-cursor");t.dataset.mutationFree="true",e.collapse(),e.insertNode(t)}static isFakeCursorInsideContainer(e){return G.find(e,".codex-editor__fake-cursor")!==null}static removeFakeCursor(e=document.body){const t=G.find(e,".codex-editor__fake-cursor");t&&t.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=nn.range}restore(){if(!this.savedSelectionRange)return;const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(e.focusNode),t.collapse(!1),e.removeAllRanges(),e.addRange(t)}findParentTag(e,t,n=10){const i=window.getSelection();let r=null;return!i||!i.anchorNode||!i.focusNode?null:([i.anchorNode,i.focusNode].forEach(s=>{let a=n;for(;a>0&&s.parentNode&&!(s.tagName===e&&(r=s,t&&s.classList&&!s.classList.contains(t)&&(r=null),r));)s=s.parentNode,a--}),r)}expandToTag(e){const t=window.getSelection();t.removeAllRanges();const n=document.createRange();n.selectNodeContents(e),t.addRange(n)}};function wm(o,e){const{type:t,target:n,addedNodes:i,removedNodes:r}=o;return o.type==="attributes"&&o.attributeName==="data-empty"?!1:!!(e.contains(n)||t==="childList"&&(Array.from(i).some(s=>s===e)||Array.from(r).some(s=>s===e)))}const qa="redactor dom changed",Kh="block changed",Yh="fake cursor is about to be toggled",Zh="fake cursor have been set",dr="editor mobile layout toggled";function Va(o,e){if(!o.conversionConfig)return!1;const t=o.conversionConfig[e];return ct(t)||Xo(t)}function ns(o,e){return Va(o.tool,e)}function Xh(o,e){return Object.entries(o).some(([t,n])=>e[t]&&pm(e[t],n))}async function Jh(o,e){const t=(await o.save()).data,n=e.find(i=>i.name===o.name);return n!==void 0&&!Va(n,"export")?[]:e.reduce((i,r)=>{if(!Va(r,"import")||r.toolbox===void 0)return i;const s=r.toolbox.filter(a=>{if(po(a)||a.icon===void 0)return!1;if(a.data!==void 0){if(Xh(a.data,t))return!1}else if(r.name===o.name)return!1;return!0});return i.push({...r,toolbox:s}),i},[])}function hu(o,e){return o.mergeable?o.name===e.name?!0:ns(e,"export")&&ns(o,"import"):!1}function km(o,e){const t=e?.export;return ct(t)?t(o):Xo(t)?o[t]:(t!==void 0&&Ve("Conversion «export» property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}function pu(o,e,t){const n=e?.import;return ct(n)?n(o,t):Xo(n)?{[n]:o}:(n!==void 0&&Ve("Conversion «import» property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}var at=(o=>(o.Default="default",o.Separator="separator",o.Html="html",o))(at||{}),Uo=(o=>(o.APPEND_CALLBACK="appendCallback",o.RENDERED="rendered",o.MOVED="moved",o.UPDATED="updated",o.REMOVED="removed",o.ON_PASTE="onPaste",o))(Uo||{});let qo=class rn extends wr{constructor({id:e=dm(),data:t,tool:n,readOnly:i,tunesData:r},s){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=(a=void 0)=>{const l=a===void 0,c=a instanceof InputEvent;!l&&!c&&this.detectToolRootChange(a);let u;l||c?u=!0:u=!(a.length>0&&a.every(p=>{const{addedNodes:h,removedNodes:g,target:f}=p;return[...Array.from(h),...Array.from(g),f].some(m=>(G.isElement(m)||(m=m.parentElement),m&&m.closest('[data-mutation-free="true"]')!==null))})),u&&(this.dropInputsCache(),this.updateCurrentInput(),this.toggleInputsEmptyMark(),this.call("updated"),this.emit("didMutated",this))},this.name=n.name,this.id=e,this.settings=n.settings,this.config=n.settings.config||{},this.editorEventBus=s||null,this.blockAPI=new zo(this),this.tool=n,this.toolInstance=n.create(t,this.blockAPI,i),this.tunes=n.tunes,this.composeTunes(r),this.holder=this.compose(),window.requestIdleCallback(()=>{this.watchBlockMutations(),this.addInputEvents(),this.toggleInputsEmptyMark()})}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(this.cachedInputs.length!==0)return this.cachedInputs;const e=G.findAllInputs(this.holder);return this.inputIndex>e.length-1&&(this.inputIndex=e.length-1),this.cachedInputs=e,e}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(e){const t=this.inputs.findIndex(n=>n===e||n.contains(e));t!==-1&&(this.inputIndex=t)}get firstInput(){return this.inputs[0]}get lastInput(){const e=this.inputs;return e[e.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then(e=>e&&!po(e.data)?e.data:{})}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return ct(this.toolInstance.merge)}get focusable(){return this.inputs.length!==0}get isEmpty(){const e=G.isEmpty(this.pluginsContent,"/"),t=!this.hasMedia;return e&&t}get hasMedia(){const e=["img","iframe","video","audio","source","input","textarea","twitterwidget"];return!!this.holder.querySelector(e.join(","))}set selected(e){var t,n;this.holder.classList.toggle(rn.CSS.selected,e);const i=e===!0&&_e.isRangeInsideContainer(this.holder),r=e===!1&&_e.isFakeCursorInsideContainer(this.holder);(i||r)&&((t=this.editorEventBus)==null||t.emit(Yh,{state:e}),i?_e.addFakeCursor():_e.removeFakeCursor(this.holder),(n=this.editorEventBus)==null||n.emit(Zh,{state:e}))}get selected(){return this.holder.classList.contains(rn.CSS.selected)}set stretched(e){this.holder.classList.toggle(rn.CSS.wrapperStretched,e)}get stretched(){return this.holder.classList.contains(rn.CSS.wrapperStretched)}set dropTarget(e){this.holder.classList.toggle(rn.CSS.dropTarget,e)}get pluginsContent(){return this.toolRenderedElement}call(e,t){if(ct(this.toolInstance[e])){e==="appendCallback"&&Ve("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[e].call(this.toolInstance,t)}catch(n){Ve(`Error during '${e}' call: ${n.message}`,"error")}}}async mergeWith(e){await this.toolInstance.merge(e)}async save(){const e=await this.toolInstance.save(this.pluginsContent),t=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach(([r,s])=>{if(ct(s.save))try{t[r]=s.save()}catch(a){Ve(`Tune ${s.constructor.name} save method throws an Error %o`,"warn",a)}});const n=window.performance.now();let i;return Promise.resolve(e).then(r=>(i=window.performance.now(),{id:this.id,tool:this.name,data:r,tunes:t,time:i-n})).catch(r=>{Ve(`Saving process for ${this.name} tool failed due to the ${r}`,"log","red")})}async validate(e){let t=!0;return this.toolInstance.validate instanceof Function&&(t=await this.toolInstance.validate(e)),t}getTunes(){const e=[],t=[],n=typeof this.toolInstance.renderSettings=="function"?this.toolInstance.renderSettings():[];return G.isElement(n)?e.push({type:at.Html,element:n}):Array.isArray(n)?e.push(...n):e.push(n),[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map(i=>i.render()).forEach(i=>{G.isElement(i)?t.push({type:at.Html,element:i}):Array.isArray(i)?t.push(...i):t.push(i)}),{toolTunes:e,commonTunes:t}}updateCurrentInput(){this.currentInput=G.isNativeInput(document.activeElement)||!_e.anchorNode?document.activeElement:_e.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),ct(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const e=this.tool.toolbox;if(e.length===1)return Promise.resolve(this.tool.toolbox[0]);const t=await this.data,n=e;return n?.find(i=>Xh(i.data,t))}async exportDataAsString(){const e=await this.data;return km(e,this.tool.conversionConfig)}compose(){const e=G.make("div",rn.CSS.wrapper),t=G.make("div",rn.CSS.content),n=this.toolInstance.render();e.dataset.id=this.id,this.toolRenderedElement=n,t.appendChild(this.toolRenderedElement);let i=t;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach(r=>{if(ct(r.wrap))try{i=r.wrap(i)}catch(s){Ve(`Tune ${r.constructor.name} wrap method throws an Error %o`,"warn",s)}}),e.appendChild(i),e}composeTunes(e){Array.from(this.tunes.values()).forEach(t=>{(t.isInternal?this.defaultTunesInstances:this.tunesInstances).set(t.name,t.create(e[t.name],this.blockAPI))}),Object.entries(e).forEach(([t,n])=>{this.tunesInstances.has(t)||(this.unavailableTunesData[t]=n)})}addInputEvents(){this.inputs.forEach(e=>{e.addEventListener("focus",this.handleFocus),G.isNativeInput(e)&&e.addEventListener("input",this.didMutated)})}removeInputEvents(){this.inputs.forEach(e=>{e.removeEventListener("focus",this.handleFocus),G.isNativeInput(e)&&e.removeEventListener("input",this.didMutated)})}watchBlockMutations(){var e;this.redactorDomChangedCallback=t=>{const{mutations:n}=t;n.some(i=>wm(i,this.toolRenderedElement))&&this.didMutated(n)},(e=this.editorEventBus)==null||e.on(qa,this.redactorDomChangedCallback)}unwatchBlockMutations(){var e;(e=this.editorEventBus)==null||e.off(qa,this.redactorDomChangedCallback)}detectToolRootChange(e){e.forEach(t=>{if(Array.from(t.removedNodes).includes(this.toolRenderedElement)){const n=t.addedNodes[t.addedNodes.length-1];this.toolRenderedElement=n}})}dropInputsCache(){this.cachedInputs=[]}toggleInputsEmptyMark(){this.inputs.forEach(Uh)}};class xm extends ze{constructor(){super(...arguments),this.insert=(e=this.config.defaultBlock,t={},n={},i,r,s,a)=>{const l=this.Editor.BlockManager.insert({id:a,tool:e,data:t,index:i,needToFocus:r,replace:s});return new zo(l)},this.composeBlockData=async e=>{const t=this.Editor.Tools.blockTools.get(e);return new qo({tool:t,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(e,t,n)=>{const{BlockManager:i}=this.Editor,r=i.getBlockById(e);if(r===void 0)throw new Error(`Block with id "${e}" not found`);const s=await i.update(r,t,n);return new zo(s)},this.convert=async(e,t,n)=>{var i,r;const{BlockManager:s,Tools:a}=this.Editor,l=s.getBlockById(e);if(!l)throw new Error(`Block with id "${e}" not found`);const c=a.blockTools.get(l.name),u=a.blockTools.get(t);if(!u)throw new Error(`Block Tool with type "${t}" not found`);const p=((i=c?.conversionConfig)==null?void 0:i.export)!==void 0,h=((r=u.conversionConfig)==null?void 0:r.import)!==void 0;if(p&&h){const g=await s.convert(l,t,n);return new zo(g)}else{const g=[p?!1:os(l.name),h?!1:os(t)].filter(Boolean).join(" and ");throw new Error(`Conversion from "${l.name}" to "${t}" is not possible. ${g} tool(s) should provide a "conversionConfig"`)}},this.insertMany=(e,t=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(t);const n=e.map(({id:i,type:r,data:s})=>this.Editor.BlockManager.composeBlock({id:i,tool:r||this.config.defaultBlock,data:s}));return this.Editor.BlockManager.insertMany(n,t),n.map(i=>new zo(i))}}get methods(){return{clear:()=>this.clear(),render:e=>this.render(e),renderFromHTML:e=>this.renderFromHTML(e),delete:e=>this.delete(e),swap:(e,t)=>this.swap(e,t),move:(e,t)=>this.move(e,t),getBlockByIndex:e=>this.getBlockByIndex(e),getById:e=>this.getById(e),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:e=>this.getBlockIndex(e),getBlocksCount:()=>this.getBlocksCount(),getBlockByElement:e=>this.getBlockByElement(e),stretchBlock:(e,t=!0)=>this.stretchBlock(e,t),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(e){const t=this.Editor.BlockManager.getBlockById(e);if(!t){lo("There is no block with id `"+e+"`","warn");return}return this.Editor.BlockManager.getBlockIndex(t)}getBlockByIndex(e){const t=this.Editor.BlockManager.getBlockByIndex(e);if(t===void 0){lo("There is no block at index `"+e+"`","warn");return}return new zo(t)}getById(e){const t=this.Editor.BlockManager.getBlockById(e);return t===void 0?(lo("There is no block with id `"+e+"`","warn"),null):new zo(t)}getBlockByElement(e){const t=this.Editor.BlockManager.getBlock(e);if(t===void 0){lo("There is no block corresponding to element `"+e+"`","warn");return}return new zo(t)}swap(e,t){Ve("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(e,t)}move(e,t){this.Editor.BlockManager.move(e,t)}delete(e=this.Editor.BlockManager.currentBlockIndex){try{const t=this.Editor.BlockManager.getBlockByIndex(e);this.Editor.BlockManager.removeBlock(t)}catch(t){lo(t,"warn");return}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(e){if(e===void 0||e.blocks===void 0)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(e.blocks),this.Editor.ModificationsObserver.enable()}async renderFromHTML(e){return await this.Editor.BlockManager.clear(),this.Editor.Paste.processText(e,!0)}stretchBlock(e,t=!0){Ua(!0,"blocks.stretchBlock()","BlockAPI");const n=this.Editor.BlockManager.getBlockByIndex(e);n&&(n.stretched=t)}insertNewBlock(){Ve("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(e){if(typeof e!="number")throw new Error("Index should be a number");if(e<0)throw new Error("Index should be greater than or equal to 0");if(e===null)throw new Error("Index should be greater than or equal to 0")}}function _m(o,e){return typeof o=="number"?e.BlockManager.getBlockByIndex(o):typeof o=="string"?e.BlockManager.getBlockById(o):e.BlockManager.getBlockById(o.id)}class Em extends ze{constructor(){super(...arguments),this.setToFirstBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.firstBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,e,t),!0):!1,this.setToLastBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.lastBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,e,t),!0):!1,this.setToPreviousBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.previousBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,e,t),!0):!1,this.setToNextBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.nextBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,e,t),!0):!1,this.setToBlock=(e,t=this.Editor.Caret.positions.DEFAULT,n=0)=>{const i=_m(e,this.Editor);return i===void 0?!1:(this.Editor.Caret.setToBlock(i,t,n),!0)},this.focus=(e=!1)=>e?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}}class Cm extends ze{get methods(){return{emit:(e,t)=>this.emit(e,t),off:(e,t)=>this.off(e,t),on:(e,t)=>this.on(e,t)}}on(e,t){this.eventsDispatcher.on(e,t)}emit(e,t){this.eventsDispatcher.emit(e,t)}off(e,t){this.eventsDispatcher.off(e,t)}}let Sm=class Qh extends ze{static getNamespace(e,t){return t?`blockTunes.${e}`:`tools.${e}`}get methods(){return{t:()=>{lo("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(e,t){return Object.assign(this.methods,{t:n=>Dt.t(Qh.getNamespace(e,t),n)})}};class Tm extends ze{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,tools:this.Editor.ToolsAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(e,t){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(e,t)})}}class Lm extends ze{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}}class Bm extends ze{get methods(){return{on:(e,t,n,i)=>this.on(e,t,n,i),off:(e,t,n,i)=>this.off(e,t,n,i),offById:e=>this.offById(e)}}on(e,t,n,i){return this.listeners.on(e,t,n,i)}off(e,t,n,i){this.listeners.off(e,t,n,i)}offById(e){this.listeners.offById(e)}}var ep={exports:{}};(function(o,e){(function(t,n){o.exports=n()})(window,function(){return(function(t){var n={};function i(r){if(n[r])return n[r].exports;var s=n[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=n,i.d=function(r,s,a){i.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:a})},i.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,s){if(1&s&&(r=i(r)),8&s||4&s&&typeof r=="object"&&r&&r.__esModule)return r;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:r}),2&s&&typeof r!="string")for(var l in r)i.d(a,l,(function(c){return r[c]}).bind(null,l));return a},i.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(s,"a",s),s},i.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},i.p="/",i(i.s=0)})([function(t,n,i){i(1),t.exports=(function(){var r=i(6),s="cdx-notify--bounce-in",a=null;return{show:function(l){if(l.message){(function(){if(a)return!0;a=r.getWrapper(),document.body.appendChild(a)})();var c=null,u=l.time||8e3;switch(l.type){case"confirm":c=r.confirm(l);break;case"prompt":c=r.prompt(l);break;default:c=r.alert(l),window.setTimeout(function(){c.remove()},u)}a.appendChild(c),c.classList.add(s)}}}})()},function(t,n,i){var r=i(2);typeof r=="string"&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i(4)(r,s),r.locals&&(t.exports=r.locals)},function(t,n,i){(t.exports=i(3)(!1)).push([t.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(t,n){t.exports=function(i){var r=[];return r.toString=function(){return this.map(function(s){var a=(function(l,c){var u=l[1]||"",p=l[3];if(!p)return u;if(c&&typeof btoa=="function"){var h=(f=p,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(f))))+" */"),g=p.sources.map(function(m){return"/*# sourceURL="+p.sourceRoot+m+" */"});return[u].concat(g).concat([h]).join(`
`)}var f;return[u].join(`
`)})(s,i);return s[2]?"@media "+s[2]+"{"+a+"}":a}).join("")},r.i=function(s,a){typeof s=="string"&&(s=[[null,s,""]]);for(var l={},c=0;c<this.length;c++){var u=this[c][0];typeof u=="number"&&(l[u]=!0)}for(c=0;c<s.length;c++){var p=s[c];typeof p[0]=="number"&&l[p[0]]||(a&&!p[2]?p[2]=a:a&&(p[2]="("+p[2]+") and ("+a+")"),r.push(p))}},r}},function(t,n,i){var r,s,a={},l=(r=function(){return window&&document&&document.all&&!window.atob},function(){return s===void 0&&(s=r.apply(this,arguments)),s}),c=(function(w){var A={};return function(R){if(typeof R=="function")return R();if(A[R]===void 0){var M=(function(T){return document.querySelector(T)}).call(this,R);if(window.HTMLIFrameElement&&M instanceof window.HTMLIFrameElement)try{M=M.contentDocument.head}catch{M=null}A[R]=M}return A[R]}})(),u=null,p=0,h=[],g=i(5);function f(w,A){for(var R=0;R<w.length;R++){var M=w[R],T=a[M.id];if(T){T.refs++;for(var O=0;O<T.parts.length;O++)T.parts[O](M.parts[O]);for(;O<M.parts.length;O++)T.parts.push(H(M.parts[O],A))}else{var b=[];for(O=0;O<M.parts.length;O++)b.push(H(M.parts[O],A));a[M.id]={id:M.id,refs:1,parts:b}}}}function m(w,A){for(var R=[],M={},T=0;T<w.length;T++){var O=w[T],b=A.base?O[0]+A.base:O[0],x={css:O[1],media:O[2],sourceMap:O[3]};M[b]?M[b].parts.push(x):R.push(M[b]={id:b,parts:[x]})}return R}function L(w,A){var R=c(w.insertInto);if(!R)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var M=h[h.length-1];if(w.insertAt==="top")M?M.nextSibling?R.insertBefore(A,M.nextSibling):R.appendChild(A):R.insertBefore(A,R.firstChild),h.push(A);else if(w.insertAt==="bottom")R.appendChild(A);else{if(typeof w.insertAt!="object"||!w.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var T=c(w.insertInto+" "+w.insertAt.before);R.insertBefore(A,T)}}function _(w){if(w.parentNode===null)return!1;w.parentNode.removeChild(w);var A=h.indexOf(w);A>=0&&h.splice(A,1)}function k(w){var A=document.createElement("style");return w.attrs.type===void 0&&(w.attrs.type="text/css"),N(A,w.attrs),L(w,A),A}function N(w,A){Object.keys(A).forEach(function(R){w.setAttribute(R,A[R])})}function H(w,A){var R,M,T,O;if(A.transform&&w.css){if(!(O=A.transform(w.css)))return function(){};w.css=O}if(A.singleton){var b=p++;R=u||(u=k(A)),M=C.bind(null,R,b,!1),T=C.bind(null,R,b,!0)}else w.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(R=(function(x){var S=document.createElement("link");return x.attrs.type===void 0&&(x.attrs.type="text/css"),x.attrs.rel="stylesheet",N(S,x.attrs),L(x,S),S})(A),M=(function(x,S,B){var j=B.css,q=B.sourceMap,P=S.convertToAbsoluteUrls===void 0&&q;(S.convertToAbsoluteUrls||P)&&(j=g(j)),q&&(j+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(q))))+" */");var U=new Blob([j],{type:"text/css"}),K=x.href;x.href=URL.createObjectURL(U),K&&URL.revokeObjectURL(K)}).bind(null,R,A),T=function(){_(R),R.href&&URL.revokeObjectURL(R.href)}):(R=k(A),M=(function(x,S){var B=S.css,j=S.media;if(j&&x.setAttribute("media",j),x.styleSheet)x.styleSheet.cssText=B;else{for(;x.firstChild;)x.removeChild(x.firstChild);x.appendChild(document.createTextNode(B))}}).bind(null,R),T=function(){_(R)});return M(w),function(x){if(x){if(x.css===w.css&&x.media===w.media&&x.sourceMap===w.sourceMap)return;M(w=x)}else T()}}t.exports=function(w,A){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(A=A||{}).attrs=typeof A.attrs=="object"?A.attrs:{},A.singleton||typeof A.singleton=="boolean"||(A.singleton=l()),A.insertInto||(A.insertInto="head"),A.insertAt||(A.insertAt="bottom");var R=m(w,A);return f(R,A),function(M){for(var T=[],O=0;O<R.length;O++){var b=R[O];(x=a[b.id]).refs--,T.push(x)}for(M&&f(m(M,A),A),O=0;O<T.length;O++){var x;if((x=T[O]).refs===0){for(var S=0;S<x.parts.length;S++)x.parts[S]();delete a[x.id]}}}};var I,D=(I=[],function(w,A){return I[w]=A,I.filter(Boolean).join(`
`)});function C(w,A,R,M){var T=R?"":M.css;if(w.styleSheet)w.styleSheet.cssText=D(A,T);else{var O=document.createTextNode(T),b=w.childNodes;b[A]&&w.removeChild(b[A]),b.length?w.insertBefore(O,b[A]):w.appendChild(O)}}},function(t,n){t.exports=function(i){var r=typeof window<"u"&&window.location;if(!r)throw new Error("fixUrls requires window.location");if(!i||typeof i!="string")return i;var s=r.protocol+"//"+r.host,a=s+r.pathname.replace(/\/[^\/]*$/,"/");return i.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(l,c){var u,p=c.trim().replace(/^"(.*)"$/,function(h,g){return g}).replace(/^'(.*)'$/,function(h,g){return g});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(p)?l:(u=p.indexOf("//")===0?p:p.indexOf("/")===0?s+p:a+p.replace(/^\.\//,""),"url("+JSON.stringify(u)+")")})}},function(t,n,i){var r,s,a,l,c,u,p,h,g;t.exports=(r="cdx-notifies",s="cdx-notify",a="cdx-notify__cross",l="cdx-notify__button--confirm",c="cdx-notify__button--cancel",u="cdx-notify__input",p="cdx-notify__button",h="cdx-notify__btns-wrapper",{alert:g=function(f){var m=document.createElement("DIV"),L=document.createElement("DIV"),_=f.message,k=f.style;return m.classList.add(s),k&&m.classList.add(s+"--"+k),m.innerHTML=_,L.classList.add(a),L.addEventListener("click",m.remove.bind(m)),m.appendChild(L),m},confirm:function(f){var m=g(f),L=document.createElement("div"),_=document.createElement("button"),k=document.createElement("button"),N=m.querySelector("."+a),H=f.cancelHandler,I=f.okHandler;return L.classList.add(h),_.innerHTML=f.okText||"Confirm",k.innerHTML=f.cancelText||"Cancel",_.classList.add(p),k.classList.add(p),_.classList.add(l),k.classList.add(c),H&&typeof H=="function"&&(k.addEventListener("click",H),N.addEventListener("click",H)),I&&typeof I=="function"&&_.addEventListener("click",I),_.addEventListener("click",m.remove.bind(m)),k.addEventListener("click",m.remove.bind(m)),L.appendChild(_),L.appendChild(k),m.appendChild(L),m},prompt:function(f){var m=g(f),L=document.createElement("div"),_=document.createElement("button"),k=document.createElement("input"),N=m.querySelector("."+a),H=f.cancelHandler,I=f.okHandler;return L.classList.add(h),_.innerHTML=f.okText||"Ok",_.classList.add(p),_.classList.add(l),k.classList.add(u),f.placeholder&&k.setAttribute("placeholder",f.placeholder),f.default&&(k.value=f.default),f.inputType&&(k.type=f.inputType),H&&typeof H=="function"&&N.addEventListener("click",H),I&&typeof I=="function"&&_.addEventListener("click",function(){I(k.value)}),_.addEventListener("click",m.remove.bind(m)),L.appendChild(k),L.appendChild(_),m.appendChild(L),m},getWrapper:function(){var f=document.createElement("DIV");return f.classList.add(r),f}})}])})})(ep);var Om=ep.exports;const Im=Es(Om);class Am{show(e){Im.show(e)}}class Pm extends ze{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.notifier=new Am}get methods(){return{show:e=>this.show(e)}}show(e){return this.notifier.show(e)}}class Mm extends ze{get methods(){const e=()=>this.isEnabled;return{toggle:t=>this.toggle(t),get isEnabled(){return e()}}}toggle(e){return this.Editor.ReadOnly.toggle(e)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}}var tp={exports:{}};(function(o,e){(function(t,n){o.exports=n()})(cr,function(){function t(p){var h=p.tags,g=Object.keys(h),f=g.map(function(m){return typeof h[m]}).every(function(m){return m==="object"||m==="boolean"||m==="function"});if(!f)throw new Error("The configuration was invalid");this.config=p}var n=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function i(p){return n.indexOf(p.nodeName)!==-1}var r=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function s(p){return r.indexOf(p.nodeName)!==-1}t.prototype.clean=function(p){const h=document.implementation.createHTMLDocument(),g=h.createElement("div");return g.innerHTML=p,this._sanitize(h,g),g.innerHTML},t.prototype._sanitize=function(p,h){var g=a(p,h),f=g.firstChild();if(f)do{if(f.nodeType===Node.TEXT_NODE)if(f.data.trim()===""&&(f.previousElementSibling&&i(f.previousElementSibling)||f.nextElementSibling&&i(f.nextElementSibling))){h.removeChild(f),this._sanitize(p,h);break}else continue;if(f.nodeType===Node.COMMENT_NODE){h.removeChild(f),this._sanitize(p,h);break}var m=s(f),L;m&&(L=Array.prototype.some.call(f.childNodes,i));var _=!!h.parentNode,k=i(h)&&i(f)&&_,N=f.nodeName.toLowerCase(),H=l(this.config,N,f),I=m&&L;if(I||c(f,H)||!this.config.keepNestedBlockElements&&k){if(!(f.nodeName==="SCRIPT"||f.nodeName==="STYLE"))for(;f.childNodes.length>0;)h.insertBefore(f.childNodes[0],f);h.removeChild(f),this._sanitize(p,h);break}for(var D=0;D<f.attributes.length;D+=1){var C=f.attributes[D];u(C,H,f)&&(f.removeAttribute(C.name),D=D-1)}this._sanitize(p,f)}while(f=g.nextSibling())};function a(p,h){return p.createTreeWalker(h,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function l(p,h,g){return typeof p.tags[h]=="function"?p.tags[h](g):p.tags[h]}function c(p,h){return typeof h>"u"?!0:typeof h=="boolean"?!h:!1}function u(p,h,g){var f=p.name.toLowerCase();return h===!0?!1:typeof h[f]=="function"?!h[f](p.value,g):typeof h[f]>"u"||h[f]===!1?!0:typeof h[f]=="string"?h[f]!==p.value:!1}return t})})(tp);var Nm=tp.exports;const $m=Es(Nm);function Sl(o,e){return o.map(t=>{const n=ct(e)?e(t.tool):e;return po(n)||(t.data=Tl(t.data,n)),t})}function Io(o,e={}){const t={tags:e};return new $m(t).clean(o)}function Tl(o,e){return Array.isArray(o)?Rm(o,e):Tt(o)?Dm(o,e):Xo(o)?jm(o,e):o}function Rm(o,e){return o.map(t=>Tl(t,e))}function Dm(o,e){const t={};for(const n in o){if(!Object.prototype.hasOwnProperty.call(o,n))continue;const i=o[n],r=Fm(e[n])?e[n]:e;t[n]=Tl(i,r)}return t}function jm(o,e){return Tt(e)?Io(o,e):e===!1?Io(o,{}):o}function Fm(o){return Tt(o)||im(o)||ct(o)}class Hm extends ze{get methods(){return{clean:(e,t)=>this.clean(e,t)}}clean(e,t){return Io(e,t)}}class zm extends ze{get methods(){return{save:()=>this.save()}}save(){const e="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(lo(e,"warn"),Promise.reject(new Error(e))):this.Editor.Saver.save()}}class Um extends ze{constructor(){super(...arguments),this.selectionUtils=new _e}get methods(){return{findParentTag:(e,t)=>this.findParentTag(e,t),expandToTag:e=>this.expandToTag(e),save:()=>this.selectionUtils.save(),restore:()=>this.selectionUtils.restore(),setFakeBackground:()=>this.selectionUtils.setFakeBackground(),removeFakeBackground:()=>this.selectionUtils.removeFakeBackground()}}findParentTag(e,t){return this.selectionUtils.findParentTag(e,t)}expandToTag(e){this.selectionUtils.expandToTag(e)}}class Wm extends ze{get methods(){return{getBlockTools:()=>Array.from(this.Editor.Tools.blockTools.values())}}}class qm extends ze{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}}class Vm extends ze{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:e=>this.toggleBlockSettings(e),toggleToolbox:e=>this.toggleToolbox(e)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(e){if(this.Editor.BlockManager.currentBlockIndex===-1){lo("Could't toggle the Toolbar because there is no block selected ","warn");return}e??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close()}toggleToolbox(e){if(this.Editor.BlockManager.currentBlockIndex===-1){lo("Could't toggle the Toolbox because there is no block selected ","warn");return}e??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close()}}var op={exports:{}};/*!
 * CodeX.Tooltips
 * 
 * @version 1.0.5
 * 
 * @licence MIT
 * @author CodeX <https://codex.so>
 * 
 * 
 */(function(o,e){(function(t,n){o.exports=n()})(window,function(){return(function(t){var n={};function i(r){if(n[r])return n[r].exports;var s=n[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=n,i.d=function(r,s,a){i.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:a})},i.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,s){if(1&s&&(r=i(r)),8&s||4&s&&typeof r=="object"&&r&&r.__esModule)return r;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:r}),2&s&&typeof r!="string")for(var l in r)i.d(a,l,(function(c){return r[c]}).bind(null,l));return a},i.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(s,"a",s),s},i.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},i.p="",i(i.s=0)})([function(t,n,i){t.exports=i(1)},function(t,n,i){i.r(n),i.d(n,"default",function(){return r});class r{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(a,l,c){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const u=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},c);if(u.hidingDelay&&(this.hidingDelay=u.hidingDelay),this.nodes.content.innerHTML="",typeof l=="string")this.nodes.content.appendChild(document.createTextNode(l));else{if(!(l instanceof Node))throw Error("[CodeX Tooltip] Wrong type of «content» passed. It should be an instance of Node or String. But "+typeof l+" given.");this.nodes.content.appendChild(l)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),u.placement){case"top":this.placeTop(a,u);break;case"left":this.placeLeft(a,u);break;case"right":this.placeRight(a,u);break;case"bottom":default:this.placeBottom(a,u)}u&&u.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},u.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(a=!1){if(this.hidingDelay&&!a)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(a,l,c){a.addEventListener("mouseenter",()=>{this.show(a,l,c)}),a.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const a="codex-tooltips-style";if(document.getElementById(a))return;const l=i(2),c=this.make("style",null,{textContent:l.toString(),id:a});this.prepend(document.head,c)}placeBottom(a,l){const c=a.getBoundingClientRect(),u=c.left+a.clientWidth/2-this.nodes.wrapper.offsetWidth/2,p=c.bottom+window.pageYOffset+this.offsetTop+l.marginTop;this.applyPlacement("bottom",u,p)}placeTop(a,l){const c=a.getBoundingClientRect(),u=c.left+a.clientWidth/2-this.nodes.wrapper.offsetWidth/2,p=c.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",u,p)}placeLeft(a,l){const c=a.getBoundingClientRect(),u=c.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-l.marginLeft,p=c.top+window.pageYOffset+a.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",u,p)}placeRight(a,l){const c=a.getBoundingClientRect(),u=c.right+this.offsetRight+l.marginRight,p=c.top+window.pageYOffset+a.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",u,p)}applyPlacement(a,l,c){this.nodes.wrapper.classList.add(this.CSS.placement[a]),this.nodes.wrapper.style.left=l+"px",this.nodes.wrapper.style.top=c+"px"}make(a,l=null,c={}){const u=document.createElement(a);Array.isArray(l)?u.classList.add(...l):l&&u.classList.add(l);for(const p in c)c.hasOwnProperty(p)&&(u[p]=c[p]);return u}append(a,l){Array.isArray(l)?l.forEach(c=>a.appendChild(c)):a.appendChild(l)}prepend(a,l){Array.isArray(l)?(l=l.reverse()).forEach(c=>a.prepend(c)):a.prepend(l)}}},function(t,n){t.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default})})(op);var Gm=op.exports;const Km=Es(Gm);let ko=null;function Ll(){ko||(ko=new Km)}function Ym(o,e,t){Ll(),ko?.show(o,e,t)}function is(o=!1){Ll(),ko?.hide(o)}function rs(o,e,t){Ll(),ko?.onHover(o,e,t)}function Zm(){ko?.destroy(),ko=null}class Xm extends ze{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t})}get methods(){return{show:(e,t,n)=>this.show(e,t,n),hide:()=>this.hide(),onHover:(e,t,n)=>this.onHover(e,t,n)}}show(e,t,n){Ym(e,t,n)}hide(){is()}onHover(e,t,n){rs(e,t,n)}}class Jm extends ze{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}}function np(o,e){const t={};return Object.entries(o).forEach(([n,i])=>{if(Tt(i)){const r=e?`${e}.${n}`:n;Object.values(i).every(s=>Xo(s))?t[n]=r:t[n]=np(i,r);return}t[n]=i}),t}const oo=np(Wh);function Qm(o,e){const t={};return Object.keys(o).forEach(n=>{const i=e[n];i!==void 0?t[i]=o[n]:t[n]=o[n]}),t}const ip=class Xi{constructor(e,t){this.cursor=-1,this.items=[],this.items=e||[],this.focusedCssClass=t}get currentItem(){return this.cursor===-1?null:this.items[this.cursor]}setCursor(e){e<this.items.length&&e>=-1&&(this.dropCursor(),this.cursor=e,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(e){this.items=e}next(){this.cursor=this.leafNodesAndReturnIndex(Xi.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(Xi.directions.LEFT)}dropCursor(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(e){if(this.items.length===0)return this.cursor;let t=this.cursor;return t===-1?t=e===Xi.directions.RIGHT?-1:0:this.items[t].classList.remove(this.focusedCssClass),e===Xi.directions.RIGHT?t=(t+1)%this.items.length:t=(this.items.length+t-1)%this.items.length,G.canSetCaret(this.items[t])&&ts(()=>_e.setCursor(this.items[t]),50)(),this.items[t].classList.add(this.focusedCssClass),t}};ip.directions={RIGHT:"right",LEFT:"left"};let Hi=ip,ss=class Ga{constructor(e){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=t=>{if(!(!this.isEventReadyForHandling(t)||t.shiftKey===!0))switch(Ga.usedKeys.includes(t.keyCode)&&t.preventDefault(),t.keyCode){case Oe.TAB:this.handleTabPress(t);break;case Oe.LEFT:case Oe.UP:this.flipLeft();break;case Oe.RIGHT:case Oe.DOWN:this.flipRight();break;case Oe.ENTER:this.handleEnterPress(t);break}},this.iterator=new Hi(e.items,e.focusedItemClass),this.activateCallback=e.activateCallback,this.allowedKeys=e.allowedKeys||Ga.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[Oe.TAB,Oe.LEFT,Oe.RIGHT,Oe.ENTER,Oe.UP,Oe.DOWN]}activate(e,t){this.activated=!0,e&&this.iterator.setItems(e),t!==void 0&&this.iterator.setCursor(t),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(e){this.flipCallbacks.push(e)}removeOnFlip(e){this.flipCallbacks=this.flipCallbacks.filter(t=>t!==e)}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(e){return this.activated&&this.allowedKeys.includes(e.keyCode)}handleTabPress(e){switch(e.shiftKey?Hi.directions.LEFT:Hi.directions.RIGHT){case Hi.directions.RIGHT:this.flipRight();break;case Hi.directions.LEFT:this.flipLeft();break}}handleEnterPress(e){this.activated&&(this.iterator.currentItem&&(e.stopPropagation(),e.preventDefault(),this.iterator.currentItem.click()),ct(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(e=>e())}};const eb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',tb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',ob='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.5 17.5L9.64142 12.6414C9.56331 12.5633 9.56331 12.4367 9.64142 12.3586L14.5 7.5"/></svg>',nb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.58284 17.5L14.4414 12.6414C14.5195 12.5633 14.5195 12.4367 14.4414 12.3586L9.58284 7.5"/></svg>',ib='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',rb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',sb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>',ab='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',fu='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',lb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>',cb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',rp='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M11.5 17.5L5 11M5 11V15.5M5 11H9.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12.5 6.5L19 13M19 13V8.5M19 13H14.5"/></svg>',db='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',ub='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',hb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>',pb="__",fb="--";function xn(o){return(e,t)=>[[o,e].filter(n=>!!n).join(pb),t].filter(n=>!!n).join(fb)}const zi=xn("ce-hint"),Ui={root:zi(),alignedStart:zi(null,"align-left"),alignedCenter:zi(null,"align-center"),title:zi("title"),description:zi("description")};class gb{constructor(e){this.nodes={root:G.make("div",[Ui.root,e.alignment==="center"?Ui.alignedCenter:Ui.alignedStart]),title:G.make("div",Ui.title,{textContent:e.title})},this.nodes.root.appendChild(this.nodes.title),e.description!==void 0&&(this.nodes.description=G.make("div",Ui.description,{textContent:e.description}),this.nodes.root.appendChild(this.nodes.description))}getElement(){return this.nodes.root}}let Bl=class{constructor(e){this.params=e}get name(){if(this.params!==void 0&&"name"in this.params)return this.params.name}destroy(){is()}onChildrenOpen(){var e;this.params!==void 0&&"children"in this.params&&typeof((e=this.params.children)==null?void 0:e.onOpen)=="function"&&this.params.children.onOpen()}onChildrenClose(){var e;this.params!==void 0&&"children"in this.params&&typeof((e=this.params.children)==null?void 0:e.onClose)=="function"&&this.params.children.onClose()}handleClick(){var e,t;this.params!==void 0&&"onActivate"in this.params&&((t=(e=this.params).onActivate)==null||t.call(e,this.params))}addHint(e,t){const n=new gb(t);rs(e,n.getElement(),{placement:t.position,hidingDelay:100})}get children(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.items)!==void 0?this.params.children.items:[]}get hasChildren(){return this.children.length>0}get isChildrenOpen(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.isOpen)===!0}get isChildrenFlippable(){var e;return!(this.params===void 0||!("children"in this.params)||((e=this.params.children)==null?void 0:e.isFlippable)===!1)}get isChildrenSearchable(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.searchable)===!0}get closeOnActivate(){return this.params!==void 0&&"closeOnActivate"in this.params&&this.params.closeOnActivate}get isActive(){return this.params===void 0||!("isActive"in this.params)?!1:typeof this.params.isActive=="function"?this.params.isActive():this.params.isActive===!0}};const Xt=xn("ce-popover-item"),dt={container:Xt(),active:Xt(null,"active"),disabled:Xt(null,"disabled"),focused:Xt(null,"focused"),hidden:Xt(null,"hidden"),confirmationState:Xt(null,"confirmation"),noHover:Xt(null,"no-hover"),noFocus:Xt(null,"no-focus"),title:Xt("title"),secondaryTitle:Xt("secondary-title"),icon:Xt("icon"),iconTool:Xt("icon","tool"),iconChevronRight:Xt("icon","chevron-right"),wobbleAnimation:xn("wobble")()};let On=class extends Bl{constructor(e,t){super(e),this.params=e,this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{var n;(n=this.nodes.root)==null||n.classList.remove(dt.noFocus)},this.removeSpecialHoverBehavior=()=>{var n;(n=this.nodes.root)==null||n.classList.remove(dt.noHover)},this.onErrorAnimationEnd=()=>{var n,i;(n=this.nodes.icon)==null||n.classList.remove(dt.wobbleAnimation),(i=this.nodes.icon)==null||i.removeEventListener("animationend",this.onErrorAnimationEnd)},this.nodes.root=this.make(e,t)}get isDisabled(){return this.params.isDisabled===!0}get toggle(){return this.params.toggle}get title(){return this.params.title}get isConfirmationStateEnabled(){return this.confirmationState!==null}get isFocused(){return this.nodes.root===null?!1:this.nodes.root.classList.contains(dt.focused)}getElement(){return this.nodes.root}handleClick(){if(this.isConfirmationStateEnabled&&this.confirmationState!==null){this.activateOrEnableConfirmationMode(this.confirmationState);return}this.activateOrEnableConfirmationMode(this.params)}toggleActive(e){var t;(t=this.nodes.root)==null||t.classList.toggle(dt.active,e)}toggleHidden(e){var t;(t=this.nodes.root)==null||t.classList.toggle(dt.hidden,e)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(e,t){var n,i;const r=t?.wrapperTag||"div",s=G.make(r,dt.container,{type:r==="button"?"button":void 0});return e.name&&(s.dataset.itemName=e.name),this.nodes.icon=G.make("div",[dt.icon,dt.iconTool],{innerHTML:e.icon||sb}),s.appendChild(this.nodes.icon),e.title!==void 0&&s.appendChild(G.make("div",dt.title,{innerHTML:e.title||""})),e.secondaryLabel&&s.appendChild(G.make("div",dt.secondaryTitle,{textContent:e.secondaryLabel})),this.hasChildren&&s.appendChild(G.make("div",[dt.icon,dt.iconChevronRight],{innerHTML:nb})),this.isActive&&s.classList.add(dt.active),e.isDisabled&&s.classList.add(dt.disabled),e.hint!==void 0&&((n=t?.hint)==null?void 0:n.enabled)!==!1&&this.addHint(s,{...e.hint,position:((i=t?.hint)==null?void 0:i.position)||"right"}),s}enableConfirmationMode(e){if(this.nodes.root===null)return;const t={...this.params,...e,confirmation:"confirmation"in e?e.confirmation:void 0},n=this.make(t);this.nodes.root.innerHTML=n.innerHTML,this.nodes.root.classList.add(dt.confirmationState),this.confirmationState=e,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){if(this.nodes.root===null)return;const e=this.make(this.params);this.nodes.root.innerHTML=e.innerHTML,this.nodes.root.classList.remove(dt.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){var e,t,n;(e=this.nodes.root)==null||e.classList.add(dt.noHover),(t=this.nodes.root)==null||t.classList.add(dt.noFocus),(n=this.nodes.root)==null||n.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){var e;this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),(e=this.nodes.root)==null||e.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(e){var t;if(!("confirmation"in e)||e.confirmation===void 0)try{(t=e.onActivate)==null||t.call(e,e),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(e.confirmation)}animateError(){var e,t,n;(e=this.nodes.icon)!=null&&e.classList.contains(dt.wobbleAnimation)||((t=this.nodes.icon)==null||t.classList.add(dt.wobbleAnimation),(n=this.nodes.icon)==null||n.addEventListener("animationend",this.onErrorAnimationEnd))}};const ga=xn("ce-popover-item-separator"),va={container:ga(),line:ga("line"),hidden:ga(null,"hidden")};class sp extends Bl{constructor(){super(),this.nodes={root:G.make("div",va.container),line:G.make("div",va.line)},this.nodes.root.appendChild(this.nodes.line)}getElement(){return this.nodes.root}toggleHidden(e){var t;(t=this.nodes.root)==null||t.classList.toggle(va.hidden,e)}}var $o=(o=>(o.Closed="closed",o.ClosedOnActivate="closed-on-activate",o))($o||{});const At=xn("ce-popover"),ut={popover:At(),popoverContainer:At("container"),popoverOpenTop:At(null,"open-top"),popoverOpenLeft:At(null,"open-left"),popoverOpened:At(null,"opened"),search:At("search"),nothingFoundMessage:At("nothing-found-message"),nothingFoundMessageDisplayed:At("nothing-found-message","displayed"),items:At("items"),overlay:At("overlay"),overlayHidden:At("overlay","hidden"),popoverNested:At(null,"nested"),getPopoverNestedClass:o=>At(null,`nested-level-${o.toString()}`),popoverInline:At(null,"inline"),popoverHeader:At("header")};var bi=(o=>(o.NestingLevel="--nesting-level",o.PopoverHeight="--popover-height",o.InlinePopoverWidth="--inline-popover-width",o.TriggerItemLeft="--trigger-item-left",o.TriggerItemTop="--trigger-item-top",o))(bi||{});const gu=xn("ce-popover-item-html"),vu={root:gu(),hidden:gu(null,"hidden")};let ur=class extends Bl{constructor(e,t){var n,i;super(e),this.nodes={root:G.make("div",vu.root)},this.nodes.root.appendChild(e.element),e.name&&(this.nodes.root.dataset.itemName=e.name),e.hint!==void 0&&((n=t?.hint)==null?void 0:n.enabled)!==!1&&this.addHint(this.nodes.root,{...e.hint,position:((i=t?.hint)==null?void 0:i.position)||"right"})}getElement(){return this.nodes.root}toggleHidden(e){var t;(t=this.nodes.root)==null||t.classList.toggle(vu.hidden,e)}getControls(){const e=this.nodes.root.querySelectorAll(`button, ${G.allInputsSelector}`);return Array.from(e)}};class ap extends wr{constructor(e,t={}){super(),this.params=e,this.itemsRenderParams=t,this.listeners=new kr,this.messages={nothingFound:"Nothing found",search:"Search"},this.items=this.buildItems(e.items),e.messages&&(this.messages={...this.messages,...e.messages}),this.nodes={},this.nodes.popoverContainer=G.make("div",[ut.popoverContainer]),this.nodes.nothingFoundMessage=G.make("div",[ut.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popoverContainer.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=G.make("div",[ut.items]),this.items.forEach(n=>{const i=n.getElement();i!==null&&this.nodes.items.appendChild(i)}),this.nodes.popoverContainer.appendChild(this.nodes.items),this.listeners.on(this.nodes.popoverContainer,"click",n=>this.handleClick(n)),this.nodes.popover=G.make("div",[ut.popover,this.params.class]),this.nodes.popover.appendChild(this.nodes.popoverContainer)}get itemsDefault(){return this.items.filter(e=>e instanceof On)}getElement(){return this.nodes.popover}show(){this.nodes.popover.classList.add(ut.popoverOpened),this.search!==void 0&&this.search.focus()}hide(){this.nodes.popover.classList.remove(ut.popoverOpened),this.nodes.popover.classList.remove(ut.popoverOpenTop),this.itemsDefault.forEach(e=>e.reset()),this.search!==void 0&&this.search.clear(),this.emit($o.Closed)}destroy(){var e;this.items.forEach(t=>t.destroy()),this.nodes.popover.remove(),this.listeners.removeAll(),(e=this.search)==null||e.destroy()}activateItemByName(e){const t=this.items.find(n=>n.name===e);this.handleItemClick(t)}buildItems(e){return e.map(t=>{switch(t.type){case at.Separator:return new sp;case at.Html:return new ur(t,this.itemsRenderParams[at.Html]);default:return new On(t,this.itemsRenderParams[at.Default])}})}getTargetItem(e){return this.items.filter(t=>t instanceof On||t instanceof ur).find(t=>{const n=t.getElement();return n===null?!1:e.composedPath().includes(n)})}handleItemClick(e){if(!("isDisabled"in e&&e.isDisabled)){if(e.hasChildren){this.showNestedItems(e),"handleClick"in e&&typeof e.handleClick=="function"&&e.handleClick();return}this.itemsDefault.filter(t=>t!==e).forEach(t=>t.reset()),"handleClick"in e&&typeof e.handleClick=="function"&&e.handleClick(),this.toggleItemActivenessIfNeeded(e),e.closeOnActivate&&(this.hide(),this.emit($o.ClosedOnActivate))}}handleClick(e){const t=this.getTargetItem(e);t!==void 0&&this.handleItemClick(t)}toggleItemActivenessIfNeeded(e){if(e instanceof On&&(e.toggle===!0&&e.toggleActive(),typeof e.toggle=="string")){const t=this.itemsDefault.filter(n=>n.toggle===e.toggle);if(t.length===1){e.toggleActive();return}t.forEach(n=>{n.toggleActive(n===e)})}}}var as=(o=>(o.Search="search",o))(as||{});const ma=xn("cdx-search-field"),ba={wrapper:ma(),icon:ma("icon"),input:ma("input")};class vb extends wr{constructor({items:e,placeholder:t}){super(),this.listeners=new kr,this.items=e,this.wrapper=G.make("div",ba.wrapper);const n=G.make("div",ba.icon,{innerHTML:db});this.input=G.make("input",ba.input,{placeholder:t,tabIndex:-1}),this.wrapper.appendChild(n),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",()=>{this.searchQuery=this.input.value,this.emit(as.Search,{query:this.searchQuery,items:this.foundItems})})}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.emit(as.Search,{query:"",items:this.foundItems})}destroy(){this.listeners.removeAll()}get foundItems(){return this.items.filter(e=>this.checkItem(e))}checkItem(e){var t,n;const i=((t=e.title)==null?void 0:t.toLowerCase())||"",r=(n=this.searchQuery)==null?void 0:n.toLowerCase();return r!==void 0?i.includes(r):!1}}var mb=Object.defineProperty,bb=Object.getOwnPropertyDescriptor,yb=(o,e,t,n)=>{for(var i=bb(e,t),r=o.length-1,s;r>=0;r--)(s=o[r])&&(i=s(e,t,i)||i);return i&&mb(e,t,i),i};const lp=class cp extends ap{constructor(e,t){super(e,t),this.nestingLevel=0,this.nestedPopoverTriggerItem=null,this.previouslyHoveredItem=null,this.scopeElement=document.body,this.hide=()=>{var n;super.hide(),this.destroyNestedPopoverIfExists(),(n=this.flipper)==null||n.deactivate(),this.previouslyHoveredItem=null},this.onFlip=()=>{const n=this.itemsDefault.find(i=>i.isFocused);n?.onFocus()},this.onSearch=n=>{var i;const r=n.query==="",s=n.items.length===0;this.items.forEach(l=>{let c=!1;l instanceof On?c=!n.items.includes(l):(l instanceof sp||l instanceof ur)&&(c=s||!r),l.toggleHidden(c)}),this.toggleNothingFoundMessage(s);const a=n.query===""?this.flippableElements:n.items.map(l=>l.getElement());(i=this.flipper)!=null&&i.isActivated&&(this.flipper.deactivate(),this.flipper.activate(a))},e.nestingLevel!==void 0&&(this.nestingLevel=e.nestingLevel),this.nestingLevel>0&&this.nodes.popover.classList.add(ut.popoverNested),e.scopeElement!==void 0&&(this.scopeElement=e.scopeElement),this.nodes.popoverContainer!==null&&this.listeners.on(this.nodes.popoverContainer,"mouseover",n=>this.handleHover(n)),e.searchable&&this.addSearch(),e.flippable!==!1&&(this.flipper=new ss({items:this.flippableElements,focusedItemClass:dt.focused,allowedKeys:[Oe.TAB,Oe.UP,Oe.DOWN,Oe.ENTER]}),this.flipper.onFlip(this.onFlip))}hasFocus(){return this.flipper===void 0?!1:this.flipper.hasFocus()}get scrollTop(){return this.nodes.items===null?0:this.nodes.items.scrollTop}get offsetTop(){return this.nodes.popoverContainer===null?0:this.nodes.popoverContainer.offsetTop}show(){var e;this.nodes.popover.style.setProperty(bi.PopoverHeight,this.size.height+"px"),this.shouldOpenBottom||this.nodes.popover.classList.add(ut.popoverOpenTop),this.shouldOpenRight||this.nodes.popover.classList.add(ut.popoverOpenLeft),super.show(),(e=this.flipper)==null||e.activate(this.flippableElements)}destroy(){this.hide(),super.destroy()}showNestedItems(e){this.nestedPopover!==null&&this.nestedPopover!==void 0||(this.nestedPopoverTriggerItem=e,this.showNestedPopoverForItem(e))}handleHover(e){const t=this.getTargetItem(e);t!==void 0&&this.previouslyHoveredItem!==t&&(this.destroyNestedPopoverIfExists(),this.previouslyHoveredItem=t,t.hasChildren&&this.showNestedPopoverForItem(t))}setTriggerItemPosition(e,t){const n=t.getElement(),i=(n?n.offsetTop:0)-this.scrollTop,r=this.offsetTop+i;e.style.setProperty(bi.TriggerItemTop,r+"px")}destroyNestedPopoverIfExists(){var e,t;this.nestedPopover===void 0||this.nestedPopover===null||(this.nestedPopover.off($o.ClosedOnActivate,this.hide),this.nestedPopover.hide(),this.nestedPopover.destroy(),this.nestedPopover.getElement().remove(),this.nestedPopover=null,(e=this.flipper)==null||e.activate(this.flippableElements),(t=this.nestedPopoverTriggerItem)==null||t.onChildrenClose())}showNestedPopoverForItem(e){var t;this.nestedPopover=new cp({searchable:e.isChildrenSearchable,items:e.children,nestingLevel:this.nestingLevel+1,flippable:e.isChildrenFlippable,messages:this.messages}),e.onChildrenOpen(),this.nestedPopover.on($o.ClosedOnActivate,this.hide);const n=this.nestedPopover.getElement();return this.nodes.popover.appendChild(n),this.setTriggerItemPosition(n,e),n.style.setProperty(bi.NestingLevel,this.nestedPopover.nestingLevel.toString()),this.nestedPopover.show(),(t=this.flipper)==null||t.deactivate(),this.nestedPopover}get shouldOpenBottom(){if(this.nodes.popover===void 0||this.nodes.popover===null)return!1;const e=this.nodes.popoverContainer.getBoundingClientRect(),t=this.scopeElement.getBoundingClientRect(),n=this.size.height,i=e.top+n,r=e.top-n,s=Math.min(window.innerHeight,t.bottom);return r<t.top||i<=s}get shouldOpenRight(){if(this.nodes.popover===void 0||this.nodes.popover===null)return!1;const e=this.nodes.popover.getBoundingClientRect(),t=this.scopeElement.getBoundingClientRect(),n=this.size.width,i=e.right+n,r=e.left-n,s=Math.min(window.innerWidth,t.right);return r<t.left||i<=s}get size(){var e;const t={height:0,width:0};if(this.nodes.popover===null)return t;const n=this.nodes.popover.cloneNode(!0);n.style.visibility="hidden",n.style.position="absolute",n.style.top="-1000px",n.classList.add(ut.popoverOpened),(e=n.querySelector("."+ut.popoverNested))==null||e.remove(),document.body.appendChild(n);const i=n.querySelector("."+ut.popoverContainer);return t.height=i.offsetHeight,t.width=i.offsetWidth,n.remove(),t}get flippableElements(){return this.items.map(e=>{if(e instanceof On)return e.getElement();if(e instanceof ur)return e.getControls()}).flat().filter(e=>e!=null)}addSearch(){this.search=new vb({items:this.itemsDefault,placeholder:this.messages.search}),this.search.on(as.Search,this.onSearch);const e=this.search.getElement();e.classList.add(ut.search),this.nodes.popoverContainer.insertBefore(e,this.nodes.popoverContainer.firstChild)}toggleNothingFoundMessage(e){this.nodes.nothingFoundMessage.classList.toggle(ut.nothingFoundMessageDisplayed,e)}};yb([Pi],lp.prototype,"size");let Ol=lp;class wb extends Ol{constructor(e){const t=!Mi();super({...e,class:ut.popoverInline},{[at.Default]:{wrapperTag:"button",hint:{position:"top",alignment:"center",enabled:t}},[at.Html]:{hint:{position:"top",alignment:"center",enabled:t}}}),this.items.forEach(n=>{!(n instanceof On)&&!(n instanceof ur)||n.hasChildren&&n.isChildrenOpen&&this.showNestedItems(n)})}get offsetLeft(){return this.nodes.popoverContainer===null?0:this.nodes.popoverContainer.offsetLeft}show(){this.nestingLevel===0&&this.nodes.popover.style.setProperty(bi.InlinePopoverWidth,this.size.width+"px"),super.show()}handleHover(){}setTriggerItemPosition(e,t){const n=t.getElement(),i=n?n.offsetLeft:0,r=this.offsetLeft+i;e.style.setProperty(bi.TriggerItemLeft,r+"px")}showNestedItems(e){if(this.nestedPopoverTriggerItem===e){this.destroyNestedPopoverIfExists(),this.nestedPopoverTriggerItem=null;return}super.showNestedItems(e)}showNestedPopoverForItem(e){const t=super.showNestedPopoverForItem(e);return t.getElement().classList.add(ut.getPopoverNestedClass(t.nestingLevel)),t}handleItemClick(e){var t;e!==this.nestedPopoverTriggerItem&&((t=this.nestedPopoverTriggerItem)==null||t.handleClick(),super.destroyNestedPopoverIfExists()),super.handleItemClick(e)}}const dp=class Ji{constructor(){this.scrollPosition=null}lock(){Wa?this.lockHard():document.body.classList.add(Ji.CSS.scrollLocked)}unlock(){Wa?this.unlockHard():document.body.classList.remove(Ji.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(Ji.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(Ji.CSS.scrollLockedHard),this.scrollPosition!==null&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};dp.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};let kb=dp;const ya=xn("ce-popover-header"),wa={root:ya(),text:ya("text"),backButton:ya("back-button")};let xb=class{constructor({text:e,onBackButtonClick:t}){this.listeners=new kr,this.text=e,this.onBackButtonClick=t,this.nodes={root:G.make("div",[wa.root]),backButton:G.make("button",[wa.backButton]),text:G.make("div",[wa.text])},this.nodes.backButton.innerHTML=ob,this.nodes.root.appendChild(this.nodes.backButton),this.listeners.on(this.nodes.backButton,"click",this.onBackButtonClick),this.nodes.text.innerText=this.text,this.nodes.root.appendChild(this.nodes.text)}getElement(){return this.nodes.root}destroy(){this.nodes.root.remove(),this.listeners.destroy()}};class _b{constructor(){this.history=[]}push(e){this.history.push(e)}pop(){return this.history.pop()}get currentTitle(){return this.history.length===0?"":this.history[this.history.length-1].title}get currentItems(){return this.history.length===0?[]:this.history[this.history.length-1].items}reset(){for(;this.history.length>1;)this.pop()}}let up=class extends ap{constructor(e){super(e,{[at.Default]:{hint:{enabled:!1}},[at.Html]:{hint:{enabled:!1}}}),this.scrollLocker=new kb,this.history=new _b,this.isHidden=!0,this.nodes.overlay=G.make("div",[ut.overlay,ut.overlayHidden]),this.nodes.popover.insertBefore(this.nodes.overlay,this.nodes.popover.firstChild),this.listeners.on(this.nodes.overlay,"click",()=>{this.hide()}),this.history.push({items:e.items})}show(){this.nodes.overlay.classList.remove(ut.overlayHidden),super.show(),this.scrollLocker.lock(),this.isHidden=!1}hide(){this.isHidden||(super.hide(),this.nodes.overlay.classList.add(ut.overlayHidden),this.scrollLocker.unlock(),this.history.reset(),this.isHidden=!0)}destroy(){super.destroy(),this.scrollLocker.unlock()}showNestedItems(e){this.updateItemsAndHeader(e.children,e.title),this.history.push({title:e.title,items:e.children})}updateItemsAndHeader(e,t){if(this.header!==null&&this.header!==void 0&&(this.header.destroy(),this.header=null),t!==void 0){this.header=new xb({text:t,onBackButtonClick:()=>{this.history.pop(),this.updateItemsAndHeader(this.history.currentItems,this.history.currentTitle)}});const n=this.header.getElement();n!==null&&this.nodes.popoverContainer.insertBefore(n,this.nodes.popoverContainer.firstChild)}this.items.forEach(n=>{var i;return(i=n.getElement())==null?void 0:i.remove()}),this.items=this.buildItems(e),this.items.forEach(n=>{var i;const r=n.getElement();r!==null&&((i=this.nodes.items)==null||i.appendChild(r))})}};class Eb extends ze{constructor(){super(...arguments),this.opened=!1,this.selection=new _e,this.popover=null,this.close=()=>{this.opened&&(this.opened=!1,_e.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&this.Editor.BlockSelection.unselectBlock(this.Editor.BlockManager.currentBlock),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off($o.Closed,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null))},this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var e;if(this.popover!==null)return"flipper"in this.popover?(e=this.popover)==null?void 0:e.flipper:void 0}make(){this.nodes.wrapper=G.make("div",[this.CSS.settings]),this.eventsDispatcher.on(dr,this.close)}destroy(){this.removeAllNodes(),this.listeners.destroy(),this.eventsDispatcher.off(dr,this.close)}async open(e=this.Editor.BlockManager.currentBlock){var t;this.opened=!0,this.selection.save(),this.Editor.BlockSelection.selectBlock(e),this.Editor.BlockSelection.clearCache();const{toolTunes:n,commonTunes:i}=e.getTunes();this.eventsDispatcher.emit(this.events.opened);const r=Mi()?up:Ol;this.popover=new r({searchable:!0,items:await this.getTunesItems(e,i,n),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:Dt.ui(oo.ui.popover,"Nothing found"),search:Dt.ui(oo.ui.popover,"Filter")}}),this.popover.on($o.Closed,this.onPopoverClose),(t=this.nodes.wrapper)==null||t.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}async getTunesItems(e,t,n){const i=[];n!==void 0&&n.length>0&&(i.push(...n),i.push({type:at.Separator}));const r=Array.from(this.Editor.Tools.blockTools.values()),s=(await Jh(e,r)).reduce((a,l)=>(l.toolbox.forEach(c=>{a.push({icon:c.icon,title:Dt.t(oo.toolNames,c.title),name:l.name,closeOnActivate:!0,onActivate:async()=>{const{BlockManager:u,Caret:p,Toolbar:h}=this.Editor,g=await u.convert(e,l.name,c.data);h.close(),p.setToBlock(g,p.positions.END)}})}),a),[]);return s.length>0&&(i.push({icon:rp,name:"convert-to",title:Dt.ui(oo.ui.popover,"Convert to"),children:{searchable:!0,items:s}}),i.push({type:at.Separator})),i.push(...t),i.map(a=>this.resolveTuneAliases(a))}resolveTuneAliases(e){if(e.type===at.Separator||e.type===at.Html)return e;const t=Qm(e,{label:"title"});return e.confirmation&&(t.confirmation=this.resolveTuneAliases(e.confirmation)),t}}var hp={exports:{}};/*!
 * Library for handling keyboard shortcuts
 * @copyright CodeX (https://codex.so)
 * @license MIT
 * @author CodeX (https://codex.so)
 * @version 1.2.0
 */(function(o,e){(function(t,n){o.exports=n()})(window,function(){return(function(t){var n={};function i(r){if(n[r])return n[r].exports;var s=n[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=n,i.d=function(r,s,a){i.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:a})},i.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,s){if(1&s&&(r=i(r)),8&s||4&s&&typeof r=="object"&&r&&r.__esModule)return r;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:r}),2&s&&typeof r!="string")for(var l in r)i.d(a,l,(function(c){return r[c]}).bind(null,l));return a},i.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(s,"a",s),s},i.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},i.p="",i(i.s=0)})([function(t,n,i){function r(l,c){for(var u=0;u<c.length;u++){var p=c[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,p.key,p)}}function s(l,c,u){return c&&r(l.prototype,c),u&&r(l,u),l}i.r(n);var a=(function(){function l(c){var u=this;(function(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")})(this,l),this.commands={},this.keys={},this.name=c.name,this.parseShortcutName(c.name),this.element=c.on,this.callback=c.callback,this.executeShortcut=function(p){u.execute(p)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return s(l,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),s(l,[{key:"parseShortcutName",value:function(c){c=c.split("+");for(var u=0;u<c.length;u++){c[u]=c[u].toUpperCase();var p=!1;for(var h in l.supportedCommands)if(l.supportedCommands[h].includes(c[u])){p=this.commands[h]=!0;break}p||(this.keys[c[u]]=!0)}for(var g in l.supportedCommands)this.commands[g]||(this.commands[g]=!1)}},{key:"execute",value:function(c){var u,p={CMD:c.ctrlKey||c.metaKey,SHIFT:c.shiftKey,ALT:c.altKey},h=!0;for(u in this.commands)this.commands[u]!==p[u]&&(h=!1);var g,f=!0;for(g in this.keys)f=f&&c.keyCode===l.keyCodes[g];h&&f&&this.callback(c)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),l})();n.default=a}]).default})})(hp);var Cb=hp.exports;const Sb=Es(Cb);class Tb{constructor(){this.registeredShortcuts=new Map}add(e){if(this.findShortcut(e.on,e.name))throw Error(`Shortcut ${e.name} is already registered for ${e.on}. Please remove it before add a new handler.`);const t=new Sb({name:e.name,on:e.on,callback:e.handler}),n=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[...n,t])}remove(e,t){const n=this.findShortcut(e,t);if(!n)return;n.remove();const i=this.registeredShortcuts.get(e).filter(r=>r!==n);if(i.length===0){this.registeredShortcuts.delete(e);return}this.registeredShortcuts.set(e,i)}findShortcut(e,t){return(this.registeredShortcuts.get(e)||[]).find(({name:n})=>n===t)}}const Ei=new Tb;var Lb=Object.defineProperty,Bb=Object.getOwnPropertyDescriptor,pp=(o,e,t,n)=>{for(var i=Bb(e,t),r=o.length-1,s;r>=0;r--)(s=o[r])&&(i=s(e,t,i)||i);return i&&Lb(e,t,i),i},zr=(o=>(o.Opened="toolbox-opened",o.Closed="toolbox-closed",o.BlockAdded="toolbox-block-added",o))(zr||{});const Il=class fp extends wr{constructor({api:e,tools:t,i18nLabels:n}){super(),this.opened=!1,this.listeners=new kr,this.popover=null,this.handleMobileLayoutToggle=()=>{this.destroyPopover(),this.initPopover()},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=e,this.tools=t,this.i18nLabels=n,this.enableShortcuts(),this.nodes={toolbox:G.make("div",fp.CSS.toolbox)},this.initPopover(),this.api.events.on(dr,this.handleMobileLayoutToggle)}get isEmpty(){return this.toolsToBeDisplayed.length===0}static get CSS(){return{toolbox:"ce-toolbox"}}getElement(){return this.nodes.toolbox}hasFocus(){if(this.popover!==null)return"hasFocus"in this.popover?this.popover.hasFocus():void 0}destroy(){var e;super.destroy(),this.nodes&&this.nodes.toolbox&&this.nodes.toolbox.remove(),this.removeAllShortcuts(),(e=this.popover)==null||e.off($o.Closed,this.onPopoverClose),this.listeners.destroy(),this.api.events.off(dr,this.handleMobileLayoutToggle)}toolButtonActivated(e,t){this.insertNewBlock(e,t)}open(){var e;this.isEmpty||((e=this.popover)==null||e.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var e;(e=this.popover)==null||e.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}initPopover(){var e;const t=Mi()?up:Ol;this.popover=new t({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on($o.Closed,this.onPopoverClose),(e=this.nodes.toolbox)==null||e.append(this.popover.getElement())}destroyPopover(){this.popover!==null&&(this.popover.hide(),this.popover.off($o.Closed,this.onPopoverClose),this.popover.destroy(),this.popover=null),this.nodes.toolbox!==null&&(this.nodes.toolbox.innerHTML="")}get toolsToBeDisplayed(){const e=[];return this.tools.forEach(t=>{t.toolbox&&e.push(t)}),e}get toolboxItemsToBeDisplayed(){const e=(t,n,i=!0)=>({icon:t.icon,title:Dt.t(oo.toolNames,t.title||os(n.name)),name:n.name,onActivate:()=>{this.toolButtonActivated(n.name,t.data)},secondaryLabel:n.shortcut&&i?Cl(n.shortcut):""});return this.toolsToBeDisplayed.reduce((t,n)=>(Array.isArray(n.toolbox)?n.toolbox.forEach((i,r)=>{t.push(e(i,n,r===0))}):n.toolbox!==void 0&&t.push(e(n.toolbox,n)),t),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach(e=>{const t=e.shortcut;t&&this.enableShortcutForTool(e.name,t)})}enableShortcutForTool(e,t){Ei.add({name:t,on:this.api.ui.nodes.redactor,handler:async n=>{n.preventDefault();const i=this.api.blocks.getCurrentBlockIndex(),r=this.api.blocks.getBlockByIndex(i);if(r)try{const s=await this.api.blocks.convert(r.id,e);this.api.caret.setToBlock(s,"end");return}catch{}this.insertNewBlock(e)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach(e=>{const t=e.shortcut;t&&Ei.remove(this.api.ui.nodes.redactor,t)})}async insertNewBlock(e,t){const n=this.api.blocks.getCurrentBlockIndex(),i=this.api.blocks.getBlockByIndex(n);if(!i)return;const r=i.isEmpty?n:n+1;let s;if(t){const l=await this.api.blocks.composeBlockData(e);s=Object.assign(l,t)}const a=this.api.blocks.insert(e,s,void 0,r,void 0,i.isEmpty);a.call(Uo.APPEND_CALLBACK),this.api.caret.setToBlock(r),this.emit("toolbox-block-added",{block:a}),this.api.toolbar.close()}};pp([Pi],Il.prototype,"toolsToBeDisplayed");pp([Pi],Il.prototype,"toolboxItemsToBeDisplayed");let Ob=Il;const gp="block hovered";async function Ib(o,e){const t=navigator.keyboard;if(!t)return e;try{return(await t.getLayoutMap()).get(o)||e}catch(n){return console.error(n),e}}class Ab extends ze{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.toolboxInstance=null}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var e;return{opened:(e=this.toolboxInstance)==null?void 0:e.opened,close:()=>{var t;(t=this.toolboxInstance)==null||t.close()},open:()=>{if(this.toolboxInstance===null){Ve("toolbox.open() called before initialization is finished","warn");return}this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()},toggle:()=>{if(this.toolboxInstance===null){Ve("toolbox.toggle() called before initialization is finished","warn");return}this.toolboxInstance.toggle()},hasFocus:()=>{var t;return(t=this.toolboxInstance)==null?void 0:t.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(e){e?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback(()=>{this.drawUI(),this.enableModuleBindings()},{timeout:2e3})}moveAndOpen(e=this.Editor.BlockManager.currentBlock){if(this.toolboxInstance===null){Ve("Can't open Toolbar since Editor initialization is not finished yet","warn");return}if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!e)return;this.hoveredBlock=e;const t=e.holder,{isMobile:n}=this.Editor.UI;let i;const r=20,s=e.firstInput,a=t.getBoundingClientRect(),l=s!==void 0?s.getBoundingClientRect():null,c=l!==null?l.top-a.top:null,u=c!==null?c>r:void 0;if(n)i=t.offsetTop+t.offsetHeight;else if(s===void 0||u){const p=parseInt(window.getComputedStyle(e.pluginsContent).paddingTop);i=t.offsetTop+p}else{const p=gm(s),h=parseInt(window.getComputedStyle(this.nodes.plusButton).height,10);i=t.offsetTop+p-h+8+c}this.nodes.wrapper.style.top=`${Math.floor(i)}px`,this.Editor.BlockManager.blocks.length===1&&e.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var e,t;this.Editor.ReadOnly.isEnabled||((e=this.nodes.wrapper)==null||e.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),(t=this.toolboxInstance)==null||t.close(),this.Editor.BlockSettings.close(),this.reset())}reset(){this.nodes.wrapper.style.top="unset"}open(e=!0){this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),e?this.blockActions.show():this.blockActions.hide()}async make(){this.nodes.wrapper=G.make("div",this.CSS.toolbar),["content","actions"].forEach(r=>{this.nodes[r]=G.make("div",this.CSS[r])}),G.append(this.nodes.wrapper,this.nodes.content),G.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=G.make("div",this.CSS.plusButton,{innerHTML:cb}),G.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",()=>{is(!0),this.plusButtonClicked()},!1);const e=G.make("div");e.appendChild(document.createTextNode(Dt.ui(oo.ui.toolbar.toolbox,"Add"))),e.appendChild(G.make("div",this.CSS.plusButtonShortcut,{textContent:"/"})),rs(this.nodes.plusButton,e,{hidingDelay:400}),this.nodes.settingsToggler=G.make("span",this.CSS.settingsToggler,{innerHTML:lb}),G.append(this.nodes.actions,this.nodes.settingsToggler);const t=G.make("div"),n=G.text(Dt.ui(oo.ui.blockTunes.toggler,"Click to tune")),i=await Ib("Slash","/");t.appendChild(n),t.appendChild(G.make("div",this.CSS.plusButtonShortcut,{textContent:Cl(`CMD + ${i}`)})),rs(this.nodes.settingsToggler,t,{hidingDelay:400}),G.append(this.nodes.actions,this.makeToolbox()),G.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),G.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new Ob({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:Dt.ui(oo.ui.popover,"Filter"),nothingFound:Dt.ui(oo.ui.popover,"Nothing found")}}),this.toolboxInstance.on(zr.Opened,()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(zr.Closed,()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(zr.BlockAdded,({block:e})=>{const{BlockManager:t,Caret:n}=this.Editor,i=t.getBlockById(e.id);i.inputs.length===0&&(i===t.lastBlock?(t.insertAtEnd(),n.setToBlock(t.lastBlock)):n.setToBlock(t.nextBlock))}),this.toolboxInstance.getElement()}plusButtonClicked(){var e;this.Editor.BlockManager.currentBlock=this.hoveredBlock,(e=this.toolboxInstance)==null||e.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",e=>{var t;e.stopPropagation(),this.settingsTogglerClicked(),(t=this.toolboxInstance)!=null&&t.opened&&this.toolboxInstance.close(),is(!0)},!0),Mi()||this.eventsDispatcher.on(gp,e=>{var t;this.Editor.BlockSettings.opened||(t=this.toolboxInstance)!=null&&t.opened||this.moveAndOpen(e.block)})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy()}}var Nn=(o=>(o[o.Block=0]="Block",o[o.Inline=1]="Inline",o[o.Tune=2]="Tune",o))(Nn||{}),Ur=(o=>(o.Shortcut="shortcut",o.Toolbox="toolbox",o.EnabledInlineTools="inlineToolbar",o.EnabledBlockTunes="tunes",o.Config="config",o))(Ur||{}),vp=(o=>(o.Shortcut="shortcut",o.SanitizeConfig="sanitize",o))(vp||{}),ri=(o=>(o.IsEnabledLineBreaks="enableLineBreaks",o.Toolbox="toolbox",o.ConversionConfig="conversionConfig",o.IsReadOnlySupported="isReadOnlySupported",o.PasteConfig="pasteConfig",o))(ri||{}),ls=(o=>(o.IsInline="isInline",o.Title="title",o.IsReadOnlySupported="isReadOnlySupported",o))(ls||{}),Ka=(o=>(o.IsTune="isTune",o))(Ka||{});let Al=class{constructor({name:e,constructable:t,config:n,api:i,isDefault:r,isInternal:s=!1,defaultPlaceholder:a}){this.api=i,this.name=e,this.constructable=t,this.config=n,this.isDefault=r,this.isInternal=s,this.defaultPlaceholder=a}get settings(){const e=this.config.config||{};return this.isDefault&&!("placeholder"in e)&&this.defaultPlaceholder&&(e.placeholder=this.defaultPlaceholder),e}reset(){if(ct(this.constructable.reset))return this.constructable.reset()}prepare(){if(ct(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const e=this.constructable.shortcut;return this.config.shortcut||e}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return this.type===Nn.Inline}isBlock(){return this.type===Nn.Block}isTune(){return this.type===Nn.Tune}};class Pb extends ze{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.CSS={inlineToolbar:"ce-inline-toolbar"},this.opened=!1,this.popover=null,this.toolbarVerticalMargin=Mi()?20:6,this.tools=new Map,window.requestIdleCallback(()=>{this.make()},{timeout:2e3})}async tryToShow(e=!1){e&&this.close(),this.allowedToShow()&&(await this.open(),this.Editor.Toolbar.close())}close(){var e,t;if(this.opened){for(const[n,i]of this.tools){const r=this.getToolShortcut(n.name);r!==void 0&&Ei.remove(this.Editor.UI.nodes.redactor,r),ct(i.clear)&&i.clear()}this.tools=new Map,this.reset(),this.opened=!1,(e=this.popover)==null||e.hide(),(t=this.popover)==null||t.destroy(),this.popover=null}}containsNode(e){return this.nodes.wrapper===void 0?!1:this.nodes.wrapper.contains(e)}destroy(){var e;this.removeAllNodes(),(e=this.popover)==null||e.destroy(),this.popover=null}make(){this.nodes.wrapper=G.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),G.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}async open(){var e;if(this.opened)return;this.opened=!0,this.popover!==null&&this.popover.destroy(),this.createToolsInstances();const t=await this.getPopoverItems();this.popover=new wb({items:t,scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:Dt.ui(oo.ui.popover,"Nothing found"),search:Dt.ui(oo.ui.popover,"Filter")}}),this.move(this.popover.size.width),(e=this.nodes.wrapper)==null||e.append(this.popover.getElement()),this.popover.show()}move(e){const t=_e.rect,n=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),i={x:t.x-n.x,y:t.y+t.height-n.top+this.toolbarVerticalMargin};i.x+e+n.x>this.Editor.UI.contentRect.right&&(i.x=this.Editor.UI.contentRect.right-e-n.x),this.nodes.wrapper.style.left=Math.floor(i.x)+"px",this.nodes.wrapper.style.top=Math.floor(i.y)+"px"}reset(){this.nodes.wrapper.style.left="0",this.nodes.wrapper.style.top="0"}allowedToShow(){const e=["IMG","INPUT"],t=_e.get(),n=_e.text;if(!t||!t.anchorNode||t.isCollapsed||n.length<1)return!1;const i=G.isElement(t.anchorNode)?t.anchorNode:t.anchorNode.parentElement;if(i===null||t!==null&&e.includes(i.tagName))return!1;const r=this.Editor.BlockManager.getBlock(t.anchorNode);return!r||this.getTools().some(s=>r.tool.inlineTools.has(s.name))===!1?!1:i.closest("[contenteditable]")!==null}getTools(){const e=this.Editor.BlockManager.currentBlock;return e?Array.from(e.tool.inlineTools.values()).filter(t=>!(this.Editor.ReadOnly.isEnabled&&t.isReadOnlySupported!==!0)):[]}createToolsInstances(){this.tools=new Map,this.getTools().forEach(e=>{const t=e.create();this.tools.set(e,t)})}async getPopoverItems(){const e=[];let t=0;for(const[n,i]of this.tools){const r=await i.render(),s=this.getToolShortcut(n.name);if(s!==void 0)try{this.enableShortcuts(n.name,s)}catch{}const a=s!==void 0?Cl(s):void 0,l=Dt.t(oo.toolNames,n.title||os(n.name));[r].flat().forEach(c=>{var u,p;const h={name:n.name,onActivate:()=>{this.toolClicked(i)},hint:{title:l,description:a}};if(G.isElement(c)){const g={...h,element:c,type:at.Html};if(ct(i.renderActions)){const f=i.renderActions();g.children={isOpen:(u=i.checkState)==null?void 0:u.call(i,_e.get()),isFlippable:!1,items:[{type:at.Html,element:f}]}}else(p=i.checkState)==null||p.call(i,_e.get());e.push(g)}else if(c.type===at.Html)e.push({...h,...c,type:at.Html});else if(c.type===at.Separator)e.push({type:at.Separator});else{const g={...h,...c,type:at.Default};"children"in g&&t!==0&&e.push({type:at.Separator}),e.push(g),"children"in g&&t<this.tools.size-1&&e.push({type:at.Separator})}}),t++}return e}getToolShortcut(e){const{Tools:t}=this.Editor,n=t.inlineTools.get(e),i=t.internal.inlineTools;return Array.from(i.keys()).includes(e)?this.inlineTools[e][vp.Shortcut]:n?.shortcut}enableShortcuts(e,t){Ei.add({name:t,handler:n=>{var i;const{currentBlock:r}=this.Editor.BlockManager;r&&r.tool.enabledInlineTools&&(n.preventDefault(),(i=this.popover)==null||i.activateItemByName(e))},on:document})}toolClicked(e){var t;const n=_e.range;(t=e.surround)==null||t.call(e,n),this.checkToolsState()}checkToolsState(){var e;(e=this.tools)==null||e.forEach(t=>{var n;(n=t.checkState)==null||n.call(t,_e.get())})}get inlineTools(){const e={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(([t,n])=>{e[t]=n.create()}),e}}function mp(){const o=window.getSelection();if(o===null)return[null,0];let e=o.focusNode,t=o.focusOffset;return e===null?[null,0]:(e.nodeType!==Node.TEXT_NODE&&e.childNodes.length>0&&(e.childNodes[t]?(e=e.childNodes[t],t=0):(e=e.childNodes[t-1],t=e.textContent.length)),[e,t])}function bp(o,e,t,n){const i=document.createRange();n==="left"?(i.setStart(o,0),i.setEnd(e,t)):(i.setStart(e,t),i.setEnd(o,o.childNodes.length));const r=i.cloneContents(),s=document.createElement("div");s.appendChild(r);const a=s.textContent||"";return fm(a)}function Wr(o){const e=G.getDeepestNode(o);if(e===null||G.isEmpty(o))return!0;if(G.isNativeInput(e))return e.selectionEnd===0;if(G.isEmpty(o))return!0;const[t,n]=mp();return t===null?!1:bp(o,t,n,"left")}function qr(o){const e=G.getDeepestNode(o,!0);if(e===null)return!0;if(G.isNativeInput(e))return e.selectionEnd===e.value.length;const[t,n]=mp();return t===null?!1:bp(o,t,n,"right")}var yp={},Pl={},Cs={},Vn={},Ml={},Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.allInputsSelector=Mb;function Mb(){var o=["text","password","email","number","search","tel","url"];return"[contenteditable=true], textarea, input:not([type]), "+o.map(function(e){return'input[type="'.concat(e,'"]')}).join(", ")}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.allInputsSelector=void 0;var e=Nl;Object.defineProperty(o,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}})})(Ml);var Gn={},$l={};Object.defineProperty($l,"__esModule",{value:!0});$l.isNativeInput=Nb;function Nb(o){var e=["INPUT","TEXTAREA"];return o&&o.tagName?e.includes(o.tagName):!1}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isNativeInput=void 0;var e=$l;Object.defineProperty(o,"isNativeInput",{enumerable:!0,get:function(){return e.isNativeInput}})})(Gn);var wp={},Rl={};Object.defineProperty(Rl,"__esModule",{value:!0});Rl.append=$b;function $b(o,e){Array.isArray(e)?e.forEach(function(t){o.appendChild(t)}):o.appendChild(e)}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.append=void 0;var e=Rl;Object.defineProperty(o,"append",{enumerable:!0,get:function(){return e.append}})})(wp);var Dl={},jl={};Object.defineProperty(jl,"__esModule",{value:!0});jl.blockElements=Rb;function Rb(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.blockElements=void 0;var e=jl;Object.defineProperty(o,"blockElements",{enumerable:!0,get:function(){return e.blockElements}})})(Dl);var kp={},Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.calculateBaseline=Db;function Db(o){var e=window.getComputedStyle(o),t=parseFloat(e.fontSize),n=parseFloat(e.lineHeight)||t*1.2,i=parseFloat(e.paddingTop),r=parseFloat(e.borderTopWidth),s=parseFloat(e.marginTop),a=t*.8,l=(n-t)/2,c=s+r+i+l+a;return c}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.calculateBaseline=void 0;var e=Fl;Object.defineProperty(o,"calculateBaseline",{enumerable:!0,get:function(){return e.calculateBaseline}})})(kp);var xp={},Hl={},zl={},Ul={};Object.defineProperty(Ul,"__esModule",{value:!0});Ul.isContentEditable=jb;function jb(o){return o.contentEditable==="true"}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isContentEditable=void 0;var e=Ul;Object.defineProperty(o,"isContentEditable",{enumerable:!0,get:function(){return e.isContentEditable}})})(zl);Object.defineProperty(Hl,"__esModule",{value:!0});Hl.canSetCaret=zb;var Fb=Gn,Hb=zl;function zb(o){var e=!0;if((0,Fb.isNativeInput)(o))switch(o.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":e=!1;break}else e=(0,Hb.isContentEditable)(o);return e}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.canSetCaret=void 0;var e=Hl;Object.defineProperty(o,"canSetCaret",{enumerable:!0,get:function(){return e.canSetCaret}})})(xp);var Ss={},Wl={};function Ub(o,e,t){const n=t.value!==void 0?"value":"get",i=t[n],r=`#${e}Cache`;if(t[n]=function(...s){return this[r]===void 0&&(this[r]=i.apply(this,s)),this[r]},n==="get"&&t.set){const s=t.set;t.set=function(a){delete o[r],s.apply(this,a)}}return t}function _p(){const o={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(o).find(t=>window.navigator.appVersion.toLowerCase().indexOf(t)!==-1);return e!==void 0&&(o[e]=!0),o}function ql(o){return o!=null&&o!==""&&(typeof o!="object"||Object.keys(o).length>0)}function Wb(o){return!ql(o)}const qb=()=>typeof window<"u"&&window.navigator!==null&&ql(window.navigator.platform)&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function Vb(o){const e=_p();return o=o.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi,"+"),e.mac?o=o.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):o=o.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),o}function Gb(o){return o[0].toUpperCase()+o.slice(1)}function Kb(o){const e=document.createElement("div");e.style.position="absolute",e.style.left="-999px",e.style.bottom="-999px",e.innerHTML=o,document.body.appendChild(e);const t=window.getSelection(),n=document.createRange();if(n.selectNode(e),t===null)throw new Error("Cannot copy text to clipboard");t.removeAllRanges(),t.addRange(n),document.execCommand("copy"),document.body.removeChild(e)}function Yb(o,e,t){let n;return(...i)=>{const r=this,s=()=>{n=void 0,t!==!0&&o.apply(r,i)},a=t===!0&&n!==void 0;window.clearTimeout(n),n=window.setTimeout(s,e),a&&o.apply(r,i)}}function mn(o){return Object.prototype.toString.call(o).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function Zb(o){return mn(o)==="boolean"}function Ep(o){return mn(o)==="function"||mn(o)==="asyncfunction"}function Xb(o){return Ep(o)&&/^\s*class\s+/.test(o.toString())}function Jb(o){return mn(o)==="number"}function Vr(o){return mn(o)==="object"}function Qb(o){return Promise.resolve(o)===o}function ey(o){return mn(o)==="string"}function ty(o){return mn(o)==="undefined"}function Ya(o,...e){if(!e.length)return o;const t=e.shift();if(Vr(o)&&Vr(t))for(const n in t)Vr(t[n])?(o[n]===void 0&&Object.assign(o,{[n]:{}}),Ya(o[n],t[n])):Object.assign(o,{[n]:t[n]});return Ya(o,...e)}function oy(o,e,t){const n=`«${e}» is deprecated and will be removed in the next major release. Please use the «${t}» instead.`;o&&console.warn(n)}function ny(o){try{return new URL(o).href}catch{}return o.substring(0,2)==="//"?window.location.protocol+o:window.location.origin+o}function iy(o){return o>47&&o<58||o===32||o===13||o===229||o>64&&o<91||o>95&&o<112||o>185&&o<193||o>218&&o<223}const ry={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},sy={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};let ay=class{constructor(){this.completed=Promise.resolve()}add(o){return new Promise((e,t)=>{this.completed=this.completed.then(o).then(e).catch(t)})}};function ly(o,e,t=void 0){let n,i,r,s=null,a=0;t||(t={});const l=function(){a=t.leading===!1?0:Date.now(),s=null,r=o.apply(n,i),s===null&&(n=i=null)};return function(){const c=Date.now();!a&&t.leading===!1&&(a=c);const u=e-(c-a);return n=this,i=arguments,u<=0||u>e?(s&&(clearTimeout(s),s=null),a=c,r=o.apply(n,i),s===null&&(n=i=null)):!s&&t.trailing!==!1&&(s=setTimeout(l,u)),r}}const cy=Object.freeze(Object.defineProperty({__proto__:null,PromiseQueue:ay,beautifyShortcut:Vb,cacheable:Ub,capitalize:Gb,copyTextToClipboard:Kb,debounce:Yb,deepMerge:Ya,deprecationAssert:oy,getUserOS:_p,getValidUrl:ny,isBoolean:Zb,isClass:Xb,isEmpty:Wb,isFunction:Ep,isIosDevice:qb,isNumber:Jb,isObject:Vr,isPrintableKey:iy,isPromise:Qb,isString:ey,isUndefined:ty,keyCodes:ry,mouseButtons:sy,notEmpty:ql,throttle:ly,typeOf:mn},Symbol.toStringTag,{value:"Module"})),Vl=em(cy);Object.defineProperty(Wl,"__esModule",{value:!0});Wl.containsOnlyInlineElements=hy;var dy=Vl,uy=Dl;function hy(o){var e;(0,dy.isString)(o)?(e=document.createElement("div"),e.innerHTML=o):e=o;var t=function(n){return!(0,uy.blockElements)().includes(n.tagName.toLowerCase())&&Array.from(n.children).every(t)};return Array.from(e.children).every(t)}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.containsOnlyInlineElements=void 0;var e=Wl;Object.defineProperty(o,"containsOnlyInlineElements",{enumerable:!0,get:function(){return e.containsOnlyInlineElements}})})(Ss);var Cp={},Gl={},Ts={},Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});Kl.make=py;function py(o,e,t){var n;e===void 0&&(e=null),t===void 0&&(t={});var i=document.createElement(o);if(Array.isArray(e)){var r=e.filter(function(a){return a!==void 0});(n=i.classList).add.apply(n,r)}else e!==null&&i.classList.add(e);for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s]);return i}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.make=void 0;var e=Kl;Object.defineProperty(o,"make",{enumerable:!0,get:function(){return e.make}})})(Ts);Object.defineProperty(Gl,"__esModule",{value:!0});Gl.fragmentToString=gy;var fy=Ts;function gy(o){var e=(0,fy.make)("div");return e.appendChild(o),e.innerHTML}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.fragmentToString=void 0;var e=Gl;Object.defineProperty(o,"fragmentToString",{enumerable:!0,get:function(){return e.fragmentToString}})})(Cp);var Sp={},Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.getContentLength=my;var vy=Gn;function my(o){var e,t;return(0,vy.isNativeInput)(o)?o.value.length:o.nodeType===Node.TEXT_NODE?o.length:(t=(e=o.textContent)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.getContentLength=void 0;var e=Yl;Object.defineProperty(o,"getContentLength",{enumerable:!0,get:function(){return e.getContentLength}})})(Sp);var Zl={},Xl={},mu=cr&&cr.__spreadArray||function(o,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,r;n<i;n++)(r||!(n in e))&&(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return o.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(Xl,"__esModule",{value:!0});Xl.getDeepestBlockElements=Tp;var by=Ss;function Tp(o){return(0,by.containsOnlyInlineElements)(o)?[o]:Array.from(o.children).reduce(function(e,t){return mu(mu([],e,!0),Tp(t),!0)},[])}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.getDeepestBlockElements=void 0;var e=Xl;Object.defineProperty(o,"getDeepestBlockElements",{enumerable:!0,get:function(){return e.getDeepestBlockElements}})})(Zl);var Lp={},Jl={},Ls={},Ql={};Object.defineProperty(Ql,"__esModule",{value:!0});Ql.isLineBreakTag=yy;function yy(o){return["BR","WBR"].includes(o.tagName)}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isLineBreakTag=void 0;var e=Ql;Object.defineProperty(o,"isLineBreakTag",{enumerable:!0,get:function(){return e.isLineBreakTag}})})(Ls);var Bs={},ec={};Object.defineProperty(ec,"__esModule",{value:!0});ec.isSingleTag=wy;function wy(o){return["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(o.tagName)}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isSingleTag=void 0;var e=ec;Object.defineProperty(o,"isSingleTag",{enumerable:!0,get:function(){return e.isSingleTag}})})(Bs);Object.defineProperty(Jl,"__esModule",{value:!0});Jl.getDeepestNode=Bp;var ky=Gn,xy=Ls,_y=Bs;function Bp(o,e){e===void 0&&(e=!1);var t=e?"lastChild":"firstChild",n=e?"previousSibling":"nextSibling";if(o.nodeType===Node.ELEMENT_NODE&&o[t]){var i=o[t];if((0,_y.isSingleTag)(i)&&!(0,ky.isNativeInput)(i)&&!(0,xy.isLineBreakTag)(i))if(i[n])i=i[n];else if(i.parentNode!==null&&i.parentNode[n])i=i.parentNode[n];else return i.parentNode;return Bp(i,e)}return o}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.getDeepestNode=void 0;var e=Jl;Object.defineProperty(o,"getDeepestNode",{enumerable:!0,get:function(){return e.getDeepestNode}})})(Lp);var Op={},tc={},$r=cr&&cr.__spreadArray||function(o,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,r;n<i;n++)(r||!(n in e))&&(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return o.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(tc,"__esModule",{value:!0});tc.findAllInputs=Ly;var Ey=Ss,Cy=Zl,Sy=Ml,Ty=Gn;function Ly(o){return Array.from(o.querySelectorAll((0,Sy.allInputsSelector)())).reduce(function(e,t){return(0,Ty.isNativeInput)(t)||(0,Ey.containsOnlyInlineElements)(t)?$r($r([],e,!0),[t],!1):$r($r([],e,!0),(0,Cy.getDeepestBlockElements)(t),!0)},[])}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.findAllInputs=void 0;var e=tc;Object.defineProperty(o,"findAllInputs",{enumerable:!0,get:function(){return e.findAllInputs}})})(Op);var Ip={},oc={};Object.defineProperty(oc,"__esModule",{value:!0});oc.isCollapsedWhitespaces=By;function By(o){return!/[^\t\n\r ]/.test(o)}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isCollapsedWhitespaces=void 0;var e=oc;Object.defineProperty(o,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return e.isCollapsedWhitespaces}})})(Ip);var nc={},ic={};Object.defineProperty(ic,"__esModule",{value:!0});ic.isElement=Iy;var Oy=Vl;function Iy(o){return(0,Oy.isNumber)(o)?!1:!!o&&!!o.nodeType&&o.nodeType===Node.ELEMENT_NODE}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isElement=void 0;var e=ic;Object.defineProperty(o,"isElement",{enumerable:!0,get:function(){return e.isElement}})})(nc);var Ap={},rc={},sc={},ac={};Object.defineProperty(ac,"__esModule",{value:!0});ac.isLeaf=Ay;function Ay(o){return o===null?!1:o.childNodes.length===0}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isLeaf=void 0;var e=ac;Object.defineProperty(o,"isLeaf",{enumerable:!0,get:function(){return e.isLeaf}})})(sc);var lc={},cc={};Object.defineProperty(cc,"__esModule",{value:!0});cc.isNodeEmpty=Ry;var Py=Ls,My=nc,Ny=Gn,$y=Bs;function Ry(o,e){var t="";return(0,$y.isSingleTag)(o)&&!(0,Py.isLineBreakTag)(o)?!1:((0,My.isElement)(o)&&(0,Ny.isNativeInput)(o)?t=o.value:o.textContent!==null&&(t=o.textContent.replace("​","")),e!==void 0&&(t=t.replace(new RegExp(e,"g"),"")),t.trim().length===0)}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isNodeEmpty=void 0;var e=cc;Object.defineProperty(o,"isNodeEmpty",{enumerable:!0,get:function(){return e.isNodeEmpty}})})(lc);Object.defineProperty(rc,"__esModule",{value:!0});rc.isEmpty=Fy;var Dy=sc,jy=lc;function Fy(o,e){o.normalize();for(var t=[o];t.length>0;){var n=t.shift();if(n){if(o=n,(0,Dy.isLeaf)(o)&&!(0,jy.isNodeEmpty)(o,e))return!1;t.push.apply(t,Array.from(o.childNodes))}}return!0}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isEmpty=void 0;var e=rc;Object.defineProperty(o,"isEmpty",{enumerable:!0,get:function(){return e.isEmpty}})})(Ap);var Pp={},dc={};Object.defineProperty(dc,"__esModule",{value:!0});dc.isFragment=zy;var Hy=Vl;function zy(o){return(0,Hy.isNumber)(o)?!1:!!o&&!!o.nodeType&&o.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isFragment=void 0;var e=dc;Object.defineProperty(o,"isFragment",{enumerable:!0,get:function(){return e.isFragment}})})(Pp);var Mp={},uc={};Object.defineProperty(uc,"__esModule",{value:!0});uc.isHTMLString=Wy;var Uy=Ts;function Wy(o){var e=(0,Uy.make)("div");return e.innerHTML=o,e.childElementCount>0}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isHTMLString=void 0;var e=uc;Object.defineProperty(o,"isHTMLString",{enumerable:!0,get:function(){return e.isHTMLString}})})(Mp);var Np={},hc={};Object.defineProperty(hc,"__esModule",{value:!0});hc.offset=qy;function qy(o){var e=o.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop,i=e.top+n,r=e.left+t;return{top:i,left:r,bottom:i+e.height,right:r+e.width}}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.offset=void 0;var e=hc;Object.defineProperty(o,"offset",{enumerable:!0,get:function(){return e.offset}})})(Np);var $p={},pc={};Object.defineProperty(pc,"__esModule",{value:!0});pc.prepend=Vy;function Vy(o,e){Array.isArray(e)?(e=e.reverse(),e.forEach(function(t){return o.prepend(t)})):o.prepend(e)}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.prepend=void 0;var e=pc;Object.defineProperty(o,"prepend",{enumerable:!0,get:function(){return e.prepend}})})($p);(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.prepend=o.offset=o.make=o.isLineBreakTag=o.isSingleTag=o.isNodeEmpty=o.isLeaf=o.isHTMLString=o.isFragment=o.isEmpty=o.isElement=o.isContentEditable=o.isCollapsedWhitespaces=o.findAllInputs=o.isNativeInput=o.allInputsSelector=o.getDeepestNode=o.getDeepestBlockElements=o.getContentLength=o.fragmentToString=o.containsOnlyInlineElements=o.canSetCaret=o.calculateBaseline=o.blockElements=o.append=void 0;var e=Ml;Object.defineProperty(o,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}});var t=Gn;Object.defineProperty(o,"isNativeInput",{enumerable:!0,get:function(){return t.isNativeInput}});var n=wp;Object.defineProperty(o,"append",{enumerable:!0,get:function(){return n.append}});var i=Dl;Object.defineProperty(o,"blockElements",{enumerable:!0,get:function(){return i.blockElements}});var r=kp;Object.defineProperty(o,"calculateBaseline",{enumerable:!0,get:function(){return r.calculateBaseline}});var s=xp;Object.defineProperty(o,"canSetCaret",{enumerable:!0,get:function(){return s.canSetCaret}});var a=Ss;Object.defineProperty(o,"containsOnlyInlineElements",{enumerable:!0,get:function(){return a.containsOnlyInlineElements}});var l=Cp;Object.defineProperty(o,"fragmentToString",{enumerable:!0,get:function(){return l.fragmentToString}});var c=Sp;Object.defineProperty(o,"getContentLength",{enumerable:!0,get:function(){return c.getContentLength}});var u=Zl;Object.defineProperty(o,"getDeepestBlockElements",{enumerable:!0,get:function(){return u.getDeepestBlockElements}});var p=Lp;Object.defineProperty(o,"getDeepestNode",{enumerable:!0,get:function(){return p.getDeepestNode}});var h=Op;Object.defineProperty(o,"findAllInputs",{enumerable:!0,get:function(){return h.findAllInputs}});var g=Ip;Object.defineProperty(o,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return g.isCollapsedWhitespaces}});var f=zl;Object.defineProperty(o,"isContentEditable",{enumerable:!0,get:function(){return f.isContentEditable}});var m=nc;Object.defineProperty(o,"isElement",{enumerable:!0,get:function(){return m.isElement}});var L=Ap;Object.defineProperty(o,"isEmpty",{enumerable:!0,get:function(){return L.isEmpty}});var _=Pp;Object.defineProperty(o,"isFragment",{enumerable:!0,get:function(){return _.isFragment}});var k=Mp;Object.defineProperty(o,"isHTMLString",{enumerable:!0,get:function(){return k.isHTMLString}});var N=sc;Object.defineProperty(o,"isLeaf",{enumerable:!0,get:function(){return N.isLeaf}});var H=lc;Object.defineProperty(o,"isNodeEmpty",{enumerable:!0,get:function(){return H.isNodeEmpty}});var I=Ls;Object.defineProperty(o,"isLineBreakTag",{enumerable:!0,get:function(){return I.isLineBreakTag}});var D=Bs;Object.defineProperty(o,"isSingleTag",{enumerable:!0,get:function(){return D.isSingleTag}});var C=Ts;Object.defineProperty(o,"make",{enumerable:!0,get:function(){return C.make}});var w=Np;Object.defineProperty(o,"offset",{enumerable:!0,get:function(){return w.offset}});var A=$p;Object.defineProperty(o,"prepend",{enumerable:!0,get:function(){return A.prepend}})})(Vn);var Os={};Object.defineProperty(Os,"__esModule",{value:!0});Os.getContenteditableSlice=Ky;var Gy=Vn;function Ky(o,e,t,n,i){var r;i===void 0&&(i=!1);var s=document.createRange();if(n==="left"?(s.setStart(o,0),s.setEnd(e,t)):(s.setStart(e,t),s.setEnd(o,o.childNodes.length)),i===!0){var a=s.extractContents();return(0,Gy.fragmentToString)(a)}var l=s.cloneContents(),c=document.createElement("div");c.appendChild(l);var u=(r=c.textContent)!==null&&r!==void 0?r:"";return u}Object.defineProperty(Cs,"__esModule",{value:!0});Cs.checkContenteditableSliceForEmptiness=Xy;var Yy=Vn,Zy=Os;function Xy(o,e,t,n){var i=(0,Zy.getContenteditableSlice)(o,e,t,n);return(0,Yy.isCollapsedWhitespaces)(i)}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.checkContenteditableSliceForEmptiness=void 0;var e=Cs;Object.defineProperty(o,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}})})(Pl);var Rp={};(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.getContenteditableSlice=void 0;var e=Os;Object.defineProperty(o,"getContenteditableSlice",{enumerable:!0,get:function(){return e.getContenteditableSlice}})})(Rp);var Dp={},fc={};Object.defineProperty(fc,"__esModule",{value:!0});fc.focus=Qy;var Jy=Vn;function Qy(o,e){var t,n;if(e===void 0&&(e=!0),(0,Jy.isNativeInput)(o)){o.focus();var i=e?0:o.value.length;o.setSelectionRange(i,i)}else{var r=document.createRange(),s=window.getSelection();if(!s)return;var a=function(h){var g=document.createTextNode("");h.appendChild(g),r.setStart(g,0),r.setEnd(g,0)},l=function(h){return h!=null},c=o.childNodes,u=e?c[0]:c[c.length-1];if(l(u)){for(;l(u)&&u.nodeType!==Node.TEXT_NODE;)u=e?u.firstChild:u.lastChild;if(l(u)&&u.nodeType===Node.TEXT_NODE){var p=(n=(t=u.textContent)===null||t===void 0?void 0:t.length)!==null&&n!==void 0?n:0,i=e?0:p;r.setStart(u,i),r.setEnd(u,i)}else a(o)}else a(o);s.removeAllRanges(),s.addRange(r)}}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.focus=void 0;var e=fc;Object.defineProperty(o,"focus",{enumerable:!0,get:function(){return e.focus}})})(Dp);var gc={},Is={};Object.defineProperty(Is,"__esModule",{value:!0});Is.getCaretNodeAndOffset=ew;function ew(){var o=window.getSelection();if(o===null)return[null,0];var e=o.focusNode,t=o.focusOffset;return e===null?[null,0]:(e.nodeType!==Node.TEXT_NODE&&e.childNodes.length>0&&(e.childNodes[t]!==void 0?(e=e.childNodes[t],t=0):(e=e.childNodes[t-1],e.textContent!==null&&(t=e.textContent.length))),[e,t])}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.getCaretNodeAndOffset=void 0;var e=Is;Object.defineProperty(o,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return e.getCaretNodeAndOffset}})})(gc);var jp={},As={};Object.defineProperty(As,"__esModule",{value:!0});As.getRange=tw;function tw(){var o=window.getSelection();return o&&o.rangeCount?o.getRangeAt(0):null}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.getRange=void 0;var e=As;Object.defineProperty(o,"getRange",{enumerable:!0,get:function(){return e.getRange}})})(jp);var Fp={},vc={};Object.defineProperty(vc,"__esModule",{value:!0});vc.isCaretAtEndOfInput=iw;var bu=Vn,ow=gc,nw=Pl;function iw(o){var e=(0,bu.getDeepestNode)(o,!0);if(e===null)return!0;if((0,bu.isNativeInput)(e))return e.selectionEnd===e.value.length;var t=(0,ow.getCaretNodeAndOffset)(),n=t[0],i=t[1];return n===null?!1:(0,nw.checkContenteditableSliceForEmptiness)(o,n,i,"right")}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isCaretAtEndOfInput=void 0;var e=vc;Object.defineProperty(o,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return e.isCaretAtEndOfInput}})})(Fp);var Hp={},mc={};Object.defineProperty(mc,"__esModule",{value:!0});mc.isCaretAtStartOfInput=aw;var Rr=Vn,rw=Is,sw=Cs;function aw(o){var e=(0,Rr.getDeepestNode)(o);if(e===null||(0,Rr.isEmpty)(o))return!0;if((0,Rr.isNativeInput)(e))return e.selectionEnd===0;if((0,Rr.isEmpty)(o))return!0;var t=(0,rw.getCaretNodeAndOffset)(),n=t[0],i=t[1];return n===null?!1:(0,sw.checkContenteditableSliceForEmptiness)(o,n,i,"left")}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isCaretAtStartOfInput=void 0;var e=mc;Object.defineProperty(o,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return e.isCaretAtStartOfInput}})})(Hp);var zp={},bc={};Object.defineProperty(bc,"__esModule",{value:!0});bc.save=dw;var lw=Vn,cw=As;function dw(){var o=(0,cw.getRange)(),e=(0,lw.make)("span");if(e.id="cursor",e.hidden=!0,!!o)return o.insertNode(e),function(){var t=window.getSelection();t&&(o.setStartAfter(e),o.setEndAfter(e),t.removeAllRanges(),t.addRange(o),setTimeout(function(){e.remove()},150))}}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.save=void 0;var e=bc;Object.defineProperty(o,"save",{enumerable:!0,get:function(){return e.save}})})(zp);(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.save=o.isCaretAtStartOfInput=o.isCaretAtEndOfInput=o.getRange=o.getCaretNodeAndOffset=o.focus=o.getContenteditableSlice=o.checkContenteditableSliceForEmptiness=void 0;var e=Pl;Object.defineProperty(o,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}});var t=Rp;Object.defineProperty(o,"getContenteditableSlice",{enumerable:!0,get:function(){return t.getContenteditableSlice}});var n=Dp;Object.defineProperty(o,"focus",{enumerable:!0,get:function(){return n.focus}});var i=gc;Object.defineProperty(o,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return i.getCaretNodeAndOffset}});var r=jp;Object.defineProperty(o,"getRange",{enumerable:!0,get:function(){return r.getRange}});var s=Fp;Object.defineProperty(o,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return s.isCaretAtEndOfInput}});var a=Hp;Object.defineProperty(o,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return a.isCaretAtStartOfInput}});var l=zp;Object.defineProperty(o,"save",{enumerable:!0,get:function(){return l.save}})})(yp);class uw extends ze{keydown(e){switch(this.beforeKeydownProcessing(e),e.keyCode){case Oe.BACKSPACE:this.backspace(e);break;case Oe.DELETE:this.delete(e);break;case Oe.ENTER:this.enter(e);break;case Oe.DOWN:case Oe.RIGHT:this.arrowRightAndDown(e);break;case Oe.UP:case Oe.LEFT:this.arrowLeftAndUp(e);break;case Oe.TAB:this.tabPressed(e);break}e.key==="/"&&!e.ctrlKey&&!e.metaKey&&this.slashPressed(e),e.code==="Slash"&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.commandSlashPressed())}beforeKeydownProcessing(e){this.needToolbarClosing(e)&&Fh(e.keyCode)&&(this.Editor.Toolbar.close(),e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||this.Editor.BlockSelection.clearSelection(e))}keyup(e){e.shiftKey||this.Editor.UI.checkEmptiness()}dragOver(e){const t=this.Editor.BlockManager.getBlockByChildNode(e.target);t.dropTarget=!0}dragLeave(e){const t=this.Editor.BlockManager.getBlockByChildNode(e.target);t.dropTarget=!1}handleCommandC(e){const{BlockSelection:t}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e)}handleCommandX(e){const{BlockSelection:t,BlockManager:n,Caret:i}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e).then(()=>{const r=n.removeSelectedBlocks(),s=n.insertDefaultBlockAtIndex(r,!0);i.setToBlock(s,i.positions.START),t.clearSelection(e)})}tabPressed(e){const{InlineToolbar:t,Caret:n}=this.Editor;t.opened||(e.shiftKey?n.navigatePrevious(!0):n.navigateNext(!0))&&e.preventDefault()}commandSlashPressed(){this.Editor.BlockSelection.selectedBlocks.length>1||this.activateBlockSettings()}slashPressed(e){!this.Editor.UI.nodes.wrapper.contains(e.target)||!this.Editor.BlockManager.currentBlock.isEmpty||(e.preventDefault(),this.Editor.Caret.insertContentAtCaretPosition("/"),this.activateToolbox())}enter(e){const{BlockManager:t,UI:n}=this.Editor,i=t.currentBlock;if(i===void 0||i.tool.isLineBreaksEnabled||n.someToolbarOpened&&n.someFlipperButtonFocused||e.shiftKey&&!Wa)return;let r=i;i.currentInput!==void 0&&Wr(i.currentInput)&&!i.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):i.currentInput&&qr(i.currentInput)?r=this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):r=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(r),this.Editor.Toolbar.moveAndOpen(r),e.preventDefault()}backspace(e){const{BlockManager:t,Caret:n}=this.Editor,{currentBlock:i,previousBlock:r}=t;if(!(i===void 0||!_e.isCollapsed||!i.currentInput||!Wr(i.currentInput))){if(e.preventDefault(),this.Editor.Toolbar.close(),i.currentInput!==i.firstInput){n.navigatePrevious();return}if(r!==null){if(r.isEmpty){t.removeBlock(r);return}if(i.isEmpty){t.removeBlock(i);const s=t.currentBlock;n.setToBlock(s,n.positions.END);return}hu(r,i)?this.mergeBlocks(r,i):n.setToBlock(r,n.positions.END)}}}delete(e){const{BlockManager:t,Caret:n}=this.Editor,{currentBlock:i,nextBlock:r}=t;if(!(!_e.isCollapsed||!qr(i.currentInput))){if(e.preventDefault(),this.Editor.Toolbar.close(),i.currentInput!==i.lastInput){n.navigateNext();return}if(r!==null){if(r.isEmpty){t.removeBlock(r);return}if(i.isEmpty){t.removeBlock(i),n.setToBlock(r,n.positions.START);return}hu(i,r)?this.mergeBlocks(i,r):n.setToBlock(r,n.positions.START)}}}mergeBlocks(e,t){const{BlockManager:n,Toolbar:i}=this.Editor;e.lastInput!==void 0&&(yp.focus(e.lastInput,!1),n.mergeBlocks(e,t).then(()=>{i.close()}))}arrowRightAndDown(e){const t=ss.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===Oe.TAB);if(this.Editor.UI.someToolbarOpened&&t)return;this.Editor.Toolbar.close();const{currentBlock:n}=this.Editor.BlockManager,i=(n?.currentInput!==void 0?qr(n.currentInput):void 0)||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===Oe.DOWN&&i){this.Editor.CrossBlockSelection.toggleBlockSelectedState();return}if(e.keyCode===Oe.DOWN||e.keyCode===Oe.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious()){e.preventDefault();return}ts(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}arrowLeftAndUp(e){if(this.Editor.UI.someToolbarOpened){if(ss.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===Oe.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.Toolbar.close();const{currentBlock:t}=this.Editor.BlockManager,n=(t?.currentInput!==void 0?Wr(t.currentInput):void 0)||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===Oe.UP&&n){this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);return}if(e.keyCode===Oe.UP||e.keyCode===Oe.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext()){e.preventDefault();return}ts(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}needToolbarClosing(e){const t=e.keyCode===Oe.ENTER&&this.Editor.Toolbar.toolbox.opened,n=e.keyCode===Oe.ENTER&&this.Editor.BlockSettings.opened,i=e.keyCode===Oe.ENTER&&this.Editor.InlineToolbar.opened,r=e.keyCode===Oe.TAB;return!(e.shiftKey||r||t||n||i)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}}class ka{constructor(e){this.blocks=[],this.workingArea=e}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return Hh(this.workingArea.children)}static set(e,t,n){return isNaN(Number(t))?(Reflect.set(e,t,n),!0):(e.insert(+t,n),!0)}static get(e,t){return isNaN(Number(t))?Reflect.get(e,t):e.get(+t)}push(e){this.blocks.push(e),this.insertToDOM(e)}swap(e,t){const n=this.blocks[t];G.swap(this.blocks[e].holder,n.holder),this.blocks[t]=this.blocks[e],this.blocks[e]=n}move(e,t){const n=this.blocks.splice(t,1)[0],i=e-1,r=Math.max(0,i),s=this.blocks[r];e>0?this.insertToDOM(n,"afterend",s):this.insertToDOM(n,"beforebegin",s),this.blocks.splice(e,0,n);const a=this.composeBlockEvent("move",{fromIndex:t,toIndex:e});n.call(Uo.MOVED,a)}insert(e,t,n=!1){if(!this.length){this.push(t);return}e>this.length&&(e=this.length),n&&(this.blocks[e].holder.remove(),this.blocks[e].call(Uo.REMOVED));const i=n?1:0;if(this.blocks.splice(e,i,t),e>0){const r=this.blocks[e-1];this.insertToDOM(t,"afterend",r)}else{const r=this.blocks[e+1];r?this.insertToDOM(t,"beforebegin",r):this.insertToDOM(t)}}replace(e,t){if(this.blocks[e]===void 0)throw Error("Incorrect index");this.blocks[e].holder.replaceWith(t.holder),this.blocks[e]=t}insertMany(e,t){const n=new DocumentFragment;for(const i of e)n.appendChild(i.holder);if(this.length>0){if(t>0){const i=Math.min(t-1,this.length-1);this.blocks[i].holder.after(n)}else t===0&&this.workingArea.prepend(n);this.blocks.splice(t,0,...e)}else this.blocks.push(...e),this.workingArea.appendChild(n);e.forEach(i=>i.call(Uo.RENDERED))}remove(e){isNaN(e)&&(e=this.length-1),this.blocks[e].holder.remove(),this.blocks[e].call(Uo.REMOVED),this.blocks.splice(e,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach(e=>e.call(Uo.REMOVED)),this.blocks.length=0}insertAfter(e,t){const n=this.blocks.indexOf(e);this.insert(n+1,t)}get(e){return this.blocks[e]}indexOf(e){return this.blocks.indexOf(e)}insertToDOM(e,t,n){t?n.holder.insertAdjacentElement(t,e.holder):this.workingArea.appendChild(e.holder),e.call(Uo.RENDERED)}composeBlockEvent(e,t){return new CustomEvent(e,{detail:t})}}const yu="block-removed",wu="block-added",hw="block-moved",ku="block-changed";class pw{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((t,n)=>{this.completed=this.completed.then(e).then(t).catch(n)})}}class fw extends ze{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(e){this._currentBlockIndex=e}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(e){this.currentBlockIndex=this.getBlockIndex(e)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find(e=>!!e.inputs.length)}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(e=>!!e.inputs.length)}get previousBlock(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every(e=>e.isEmpty)}prepare(){const e=new ka(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(e,{set:ka.set,get:ka.get}),this.listeners.on(document,"copy",t=>this.Editor.BlockEvents.handleCommandC(t))}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:e,data:t={},id:n=void 0,tunes:i={}}){const r=this.Editor.ReadOnly.isEnabled,s=this.Editor.Tools.blockTools.get(e),a=new qo({id:n,data:t,tool:s,api:this.Editor.API,readOnly:r,tunesData:i},this.eventsDispatcher);return r||window.requestIdleCallback(()=>{this.bindBlockEvents(a)},{timeout:2e3}),a}insert({id:e=void 0,tool:t=this.config.defaultBlock,data:n={},index:i,needToFocus:r=!0,replace:s=!1,tunes:a={}}={}){let l=i;l===void 0&&(l=this.currentBlockIndex+(s?0:1));const c=this.composeBlock({id:e,tool:t,data:n,tunes:a});return s&&this.blockDidMutated(yu,this.getBlockByIndex(l),{index:l}),this._blocks.insert(l,c,s),this.blockDidMutated(wu,c,{index:l}),r?this.currentBlockIndex=l:l<=this.currentBlockIndex&&this.currentBlockIndex++,c}insertMany(e,t=0){this._blocks.insertMany(e,t)}async update(e,t,n){if(!t&&!n)return e;const i=await e.data,r=this.composeBlock({id:e.id,tool:e.name,data:Object.assign({},i,t??{}),tunes:n??e.tunes}),s=this.getBlockIndex(e);return this._blocks.replace(s,r),this.blockDidMutated(ku,r,{index:s}),r}replace(e,t,n){const i=this.getBlockIndex(e);return this.insert({tool:t,data:n,index:i,replace:!0})}paste(e,t,n=!1){const i=this.insert({tool:e,replace:n});try{window.requestIdleCallback(()=>{i.call(Uo.ON_PASTE,t)})}catch(r){Ve(`${e}: onPaste callback call is failed`,"error",r)}return i}insertDefaultBlockAtIndex(e,t=!1){const n=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[e]=n,this.blockDidMutated(wu,n,{index:e}),t?this.currentBlockIndex=e:e<=this.currentBlockIndex&&this.currentBlockIndex++,n}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(e,t){let n;if(e.name===t.name&&e.mergeable){const i=await t.data;if(po(i)){console.error("Could not merge Block. Failed to extract original Block data.");return}const[r]=Sl([i],e.tool.sanitizeConfig);n=r}else if(e.mergeable&&ns(t,"export")&&ns(e,"import")){const i=await t.exportDataAsString(),r=Io(i,e.tool.sanitizeConfig);n=pu(r,e.tool.conversionConfig)}n!==void 0&&(await e.mergeWith(n),this.removeBlock(t),this.currentBlockIndex=this._blocks.indexOf(e))}removeBlock(e,t=!0){return new Promise(n=>{const i=this._blocks.indexOf(e);if(!this.validateIndex(i))throw new Error("Can't find a Block to remove");this._blocks.remove(i),e.destroy(),this.blockDidMutated(yu,e,{index:i}),this.currentBlockIndex>=i&&this.currentBlockIndex--,this.blocks.length?i===0&&(this.currentBlockIndex=0):(this.unsetCurrentBlock(),t&&this.insert()),n()})}removeSelectedBlocks(){let e;for(let t=this.blocks.length-1;t>=0;t--)this.blocks[t].selected&&(this.removeBlock(this.blocks[t]),e=t);return e}removeAllBlocks(){for(let e=this.blocks.length-1;e>=0;e--)this._blocks.remove(e);this.unsetCurrentBlock(),this.insert(),this.currentBlock.firstInput.focus()}split(){const e=this.Editor.Caret.extractFragmentFromCaretPosition(),t=G.make("div");t.appendChild(e);const n={text:G.isEmpty(t)?"":t.innerHTML};return this.insert({data:n})}getBlockByIndex(e){return e===-1&&(e=this._blocks.length-1),this._blocks[e]}getBlockIndex(e){return this._blocks.indexOf(e)}getBlockById(e){return this._blocks.array.find(t=>t.id===e)}getBlock(e){G.isElement(e)||(e=e.parentNode);const t=this._blocks.nodes,n=e.closest(`.${qo.CSS.wrapper}`),i=t.indexOf(n);if(i>=0)return this._blocks[i]}setCurrentBlockByChildNode(e){G.isElement(e)||(e=e.parentNode);const t=e.closest(`.${qo.CSS.wrapper}`);if(!t)return;const n=t.closest(`.${this.Editor.UI.CSS.editorWrapper}`);if(n!=null&&n.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(t),this.currentBlock.updateCurrentInput(),this.currentBlock}getBlockByChildNode(e){if(!e||!(e instanceof Node))return;G.isElement(e)||(e=e.parentNode);const t=e.closest(`.${qo.CSS.wrapper}`);return this.blocks.find(n=>n.holder===t)}swap(e,t){this._blocks.swap(e,t),this.currentBlockIndex=t}move(e,t=this.currentBlockIndex){if(isNaN(e)||isNaN(t)){Ve("Warning during 'move' call: incorrect indices provided.","warn");return}if(!this.validateIndex(e)||!this.validateIndex(t)){Ve("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn");return}this._blocks.move(e,t),this.currentBlockIndex=e,this.blockDidMutated(hw,this.currentBlock,{fromIndex:t,toIndex:e})}async convert(e,t,n){if(!await e.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const i=this.Editor.Tools.blockTools.get(t);if(!i)throw new Error(`Could not convert Block. Tool «${t}» not found.`);const r=await e.exportDataAsString(),s=Io(r,i.sanitizeConfig);let a=pu(s,i.conversionConfig,i.settings);return n&&(a=Object.assign(a,n)),this.replace(e,i.name,a)}unsetCurrentBlock(){this.currentBlockIndex=-1}async clear(e=!1){const t=new pw;[...this.blocks].forEach(n=>{t.add(async()=>{await this.removeBlock(n,!1)})}),await t.completed,this.unsetCurrentBlock(),e&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map(e=>e.destroy()))}bindBlockEvents(e){const{BlockEvents:t}=this.Editor;this.readOnlyMutableListeners.on(e.holder,"keydown",n=>{t.keydown(n)}),this.readOnlyMutableListeners.on(e.holder,"keyup",n=>{t.keyup(n)}),this.readOnlyMutableListeners.on(e.holder,"dragover",n=>{t.dragOver(n)}),this.readOnlyMutableListeners.on(e.holder,"dragleave",n=>{t.dragLeave(n)}),e.on("didMutated",n=>this.blockDidMutated(ku,n,{index:this.getBlockIndex(n)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",e=>this.Editor.BlockEvents.handleCommandX(e)),this.blocks.forEach(e=>{this.bindBlockEvents(e)})}validateIndex(e){return!(e<0||e>=this._blocks.length)}blockDidMutated(e,t,n){const i=new CustomEvent(e,{detail:{target:new zo(t),...n}});return this.eventsDispatcher.emit(Kh,{event:i}),t}}class gw extends ze{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:e}=this.Editor;return e.blocks.every(t=>t.selected===!0)}set allBlocksSelected(e){const{BlockManager:t}=this.Editor;t.blocks.forEach(n=>{n.selected=e}),this.clearCache()}get anyBlockSelected(){const{BlockManager:e}=this.Editor;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=e.blocks.some(t=>t.selected===!0)),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter(e=>e.selected)}prepare(){this.selection=new _e,Ei.add({name:"CMD+A",handler:e=>{const{BlockManager:t,ReadOnly:n}=this.Editor;if(n.isEnabled){e.preventDefault(),this.selectAllBlocks();return}t.currentBlock&&this.handleCommandA(e)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){_e.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(e){const{BlockManager:t}=this.Editor;let n;isNaN(e)?n=t.currentBlock:n=t.getBlockByIndex(e),n.selected=!1,this.clearCache()}clearSelection(e,t=!1){const{BlockManager:n,Caret:i,RectangleSelection:r}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const s=e&&e instanceof KeyboardEvent,a=s&&Fh(e.keyCode);if(this.anyBlockSelected&&s&&a&&!_e.isSelectionExists){const l=n.removeSelectedBlocks();n.insertDefaultBlockAtIndex(l,!0),i.setToBlock(n.currentBlock),ts(()=>{const c=e.key;i.insertContentAtCaretPosition(c.length>1?"":c)},20)()}if(this.Editor.CrossBlockSelection.clear(e),!this.anyBlockSelected||r.isRectActivated()){this.Editor.RectangleSelection.clearSelection();return}t&&this.selection.restore(),this.allBlocksSelected=!1}copySelectedBlocks(e){e.preventDefault();const t=G.make("div");this.selectedBlocks.forEach(r=>{const s=Io(r.holder.innerHTML,this.sanitizerConfig),a=G.make("p");a.innerHTML=s,t.appendChild(a)});const n=Array.from(t.childNodes).map(r=>r.textContent).join(`

`),i=t.innerHTML;return e.clipboardData.setData("text/plain",n),e.clipboardData.setData("text/html",i),Promise.all(this.selectedBlocks.map(r=>r.save())).then(r=>{try{e.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(r))}catch{}})}selectBlockByIndex(e){const{BlockManager:t}=this.Editor,n=t.getBlockByIndex(e);n!==void 0&&this.selectBlock(n)}selectBlock(e){this.selection.save(),_e.get().removeAllRanges(),e.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}unselectBlock(e){e.selected=!1,this.clearCache()}clearCache(){this.anyBlockSelectedCache=null}destroy(){Ei.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(e){if(this.Editor.RectangleSelection.clearSelection(),G.isNativeInput(e.target)&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}const t=this.Editor.BlockManager.getBlock(e.target),n=t.inputs;if(n.length>1&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}if(n.length===1&&!this.needToSelectAll){this.needToSelectAll=!0;return}this.needToSelectAll?(e.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1):this.readyToBlockSelection&&(e.preventDefault(),this.selectBlock(t),this.needToSelectAll=!0)}selectAllBlocks(){this.selection.save(),_e.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}}let vw=class Za extends ze{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}setToBlock(e,t=this.positions.DEFAULT,n=0){var i;const{BlockManager:r,BlockSelection:s}=this.Editor;if(s.clearSelection(),!e.focusable){(i=window.getSelection())==null||i.removeAllRanges(),s.selectBlock(e),r.currentBlock=e;return}let a;switch(t){case this.positions.START:a=e.firstInput;break;case this.positions.END:a=e.lastInput;break;default:a=e.currentInput}if(!a)return;let l,c=n;if(t===this.positions.START)l=G.getDeepestNode(a,!1),c=0;else if(t===this.positions.END)l=G.getDeepestNode(a,!0),c=G.getContentLength(l);else{const{node:u,offset:p}=G.getNodeByOffset(a,n);u?(l=u,c=p):(l=G.getDeepestNode(a,!1),c=0)}this.set(l,c),r.setCurrentBlockByChildNode(e.holder),r.currentBlock.currentInput=a}setToInput(e,t=this.positions.DEFAULT,n=0){const{currentBlock:i}=this.Editor.BlockManager,r=G.getDeepestNode(e);switch(t){case this.positions.START:this.set(r,0);break;case this.positions.END:this.set(r,G.getContentLength(r));break;default:n&&this.set(r,n)}i.currentInput=e}set(e,t=0){const{top:n,bottom:i}=_e.setCursor(e,t),{innerHeight:r}=window;n<0?window.scrollBy(0,n-30):i>r&&window.scrollBy(0,i-r+30)}setToTheLastBlock(){const e=this.Editor.BlockManager.lastBlock;if(e)if(e.tool.isDefault&&e.isEmpty)this.setToBlock(e);else{const t=this.Editor.BlockManager.insertAtEnd();this.setToBlock(t)}}extractFragmentFromCaretPosition(){const e=_e.get();if(e.rangeCount){const t=e.getRangeAt(0),n=this.Editor.BlockManager.currentBlock.currentInput;if(t.deleteContents(),n)if(G.isNativeInput(n)){const i=n,r=document.createDocumentFragment(),s=i.value.substring(0,i.selectionStart),a=i.value.substring(i.selectionStart);return r.textContent=a,i.value=s,r}else{const i=t.cloneRange();return i.selectNodeContents(n),i.setStart(t.endContainer,t.endOffset),i.extractContents()}}}navigateNext(e=!1){const{BlockManager:t}=this.Editor,{currentBlock:n,nextBlock:i}=t;if(n===void 0)return!1;const{nextInput:r,currentInput:s}=n,a=s!==void 0?qr(s):void 0;let l=i;const c=e||a||!n.focusable;if(r&&c)return this.setToInput(r,this.positions.START),!0;if(l===null){if(n.tool.isDefault||!c)return!1;l=t.insertAtEnd()}return c?(this.setToBlock(l,this.positions.START),!0):!1}navigatePrevious(e=!1){const{currentBlock:t,previousBlock:n}=this.Editor.BlockManager;if(!t)return!1;const{previousInput:i,currentInput:r}=t,s=r!==void 0?Wr(r):void 0,a=e||s||!t.focusable;return i&&a?(this.setToInput(i,this.positions.END),!0):n!==null&&a?(this.setToBlock(n,this.positions.END),!0):!1}createShadow(e){const t=document.createElement("span");t.classList.add(Za.CSS.shadowCaret),e.insertAdjacentElement("beforeend",t)}restoreCaret(e){const t=e.querySelector(`.${Za.CSS.shadowCaret}`);if(!t)return;new _e().expandToTag(t);const n=document.createRange();n.selectNode(t),n.extractContents()}insertContentAtCaretPosition(e){const t=document.createDocumentFragment(),n=document.createElement("div"),i=_e.get(),r=_e.range;n.innerHTML=e,Array.from(n.childNodes).forEach(c=>t.appendChild(c)),t.childNodes.length===0&&t.appendChild(new Text);const s=t.lastChild;r.deleteContents(),r.insertNode(t);const a=document.createRange(),l=s.nodeType===Node.TEXT_NODE?s:s.firstChild;l!==null&&l.textContent!==null&&a.setStart(l,l.textContent.length),i.removeAllRanges(),i.addRange(a)}};class mw extends ze{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=e=>{const{BlockManager:t,BlockSelection:n}=this.Editor;if(e.relatedTarget===null&&e.target===null)return;const i=t.getBlockByChildNode(e.relatedTarget)||this.lastSelectedBlock,r=t.getBlockByChildNode(e.target);if(!(!i||!r)&&r!==i){if(i===this.firstSelectedBlock){_e.get().removeAllRanges(),i.selected=!0,r.selected=!0,n.clearCache();return}if(r===this.firstSelectedBlock){i.selected=!1,r.selected=!1,n.clearCache();return}this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(i,r),this.lastSelectedBlock=r}}}async prepare(){this.listeners.on(document,"mousedown",e=>{this.enableCrossBlockSelection(e)})}watchSelection(e){if(e.button!==om.LEFT)return;const{BlockManager:t}=this.Editor;this.firstSelectedBlock=t.getBlock(e.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock&&this.firstSelectedBlock!==this.lastSelectedBlock}toggleBlockSelectedState(e=!0){const{BlockManager:t,BlockSelection:n}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=t.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,n.clearCache(),_e.get().removeAllRanges());const i=t.blocks.indexOf(this.lastSelectedBlock)+(e?1:-1),r=t.blocks[i];r&&(this.lastSelectedBlock.selected!==r.selected?(r.selected=!0,n.clearCache()):(this.lastSelectedBlock.selected=!1,n.clearCache()),this.lastSelectedBlock=r,this.Editor.InlineToolbar.close(),r.holder.scrollIntoView({block:"nearest"}))}clear(e){const{BlockManager:t,BlockSelection:n,Caret:i}=this.Editor,r=t.blocks.indexOf(this.firstSelectedBlock),s=t.blocks.indexOf(this.lastSelectedBlock);if(n.anyBlockSelected&&r>-1&&s>-1&&e&&e instanceof KeyboardEvent)switch(e.keyCode){case Oe.DOWN:case Oe.RIGHT:i.setToBlock(t.blocks[Math.max(r,s)],i.positions.END);break;case Oe.UP:case Oe.LEFT:i.setToBlock(t.blocks[Math.min(r,s)],i.positions.START);break;default:i.setToBlock(t.blocks[Math.max(r,s)],i.positions.END)}this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(e){const{UI:t}=this.Editor;_e.isCollapsed||this.Editor.BlockSelection.clearSelection(e),t.nodes.redactor.contains(e.target)?this.watchSelection(e):this.Editor.BlockSelection.clearSelection(e)}toggleBlocksSelectedState(e,t){const{BlockManager:n,BlockSelection:i}=this.Editor,r=n.blocks.indexOf(e),s=n.blocks.indexOf(t),a=e.selected!==t.selected;for(let l=Math.min(r,s);l<=Math.max(r,s);l++){const c=n.blocks[l];c!==this.firstSelectedBlock&&c!==(a?e:t)&&(n.blocks[l].selected=!n.blocks[l].selected,i.clearCache())}}}class bw extends ze{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:e}=this.Editor;this.readOnlyMutableListeners.on(e.nodes.holder,"drop",async t=>{await this.processDrop(t)},!0),this.readOnlyMutableListeners.on(e.nodes.holder,"dragstart",()=>{this.processDragStart()}),this.readOnlyMutableListeners.on(e.nodes.holder,"dragover",t=>{this.processDragOver(t)},!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(e){const{BlockManager:t,Paste:n,Caret:i}=this.Editor;e.preventDefault(),t.blocks.forEach(s=>{s.dropTarget=!1}),_e.isAtEditor&&!_e.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const r=t.setCurrentBlockByChildNode(e.target);if(r)this.Editor.Caret.setToBlock(r,i.positions.END);else{const s=t.setCurrentBlockByChildNode(t.lastBlock.holder);this.Editor.Caret.setToBlock(s,i.positions.END)}await n.processDataTransfer(e.dataTransfer,!0)}processDragStart(){_e.isAtEditor&&!_e.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(e){e.preventDefault()}}const yw=180,ww=400;class kw extends ze{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=ww,this.mutationObserver=new MutationObserver(n=>{this.redactorChanged(n)}),this.eventsDispatcher.on(Kh,n=>{this.particularBlockChanged(n.event)}),this.eventsDispatcher.on(Yh,()=>{this.disable()}),this.eventsDispatcher.on(Zh,()=>{this.enable()})}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(e){this.disabled||!ct(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${e.detail.target.id}:event:${e.type}`,e),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout(()=>{let t;this.batchingOnChangeQueue.size===1?t=this.batchingOnChangeQueue.values().next().value:t=Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,t),this.batchingOnChangeQueue.clear()},this.batchTime))}redactorChanged(e){this.eventsDispatcher.emit(qa,{mutations:e})}}const Up=class Wp extends ze{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=e=>{try{const t=e.create({},{},!1);if(e.pasteConfig===!1){this.exceptionList.push(e.name);return}if(!ct(t.onPaste))return;this.getTagsConfig(e),this.getFilesConfig(e),this.getPatternsConfig(e)}catch(t){Ve(`Paste handling for «${e.name}» Tool hasn't been set up because of the error`,"warn",t)}},this.handlePasteEvent=async e=>{const{BlockManager:t,Toolbar:n}=this.Editor,i=t.setCurrentBlockByChildNode(e.target);!i||this.isNativeBehaviour(e.target)&&!e.clipboardData.types.includes("Files")||i&&this.exceptionList.includes(i.name)||(e.preventDefault(),this.processDataTransfer(e.clipboardData),n.close())}}async prepare(){this.processTools()}toggleReadOnly(e){e?this.unsetCallback():this.setCallback()}async processDataTransfer(e,t=!1){const{Tools:n}=this.Editor,i=e.types;if((i.includes?i.includes("Files"):i.contains("Files"))&&!po(this.toolsFiles)){await this.processFiles(e.files);return}const r=e.getData(this.MIME_TYPE),s=e.getData("text/plain");let a=e.getData("text/html");if(r)try{this.insertEditorJSData(JSON.parse(r));return}catch{}t&&s.trim()&&a.trim()&&(a="<p>"+(a.trim()?a:s)+"</p>");const l=Object.keys(this.toolsTags).reduce((p,h)=>(p[h.toLowerCase()]=this.toolsTags[h].sanitizationConfig??{},p),{}),c=Object.assign({},l,n.getAllInlineToolsSanitizeConfig(),{br:{}}),u=Io(a,c);!u.trim()||u.trim()===s||!G.isHTMLString(u)?await this.processText(s):await this.processText(u,!0)}async processText(e,t=!1){const{Caret:n,BlockManager:i}=this.Editor,r=t?this.processHTML(e):this.processPlain(e);if(!r.length)return;if(r.length===1){r[0].isBlock?this.processSingleBlock(r.pop()):this.processInlinePaste(r.pop());return}const s=i.currentBlock&&i.currentBlock.tool.isDefault&&i.currentBlock.isEmpty;r.map(async(a,l)=>this.insertBlock(a,l===0&&s)),i.currentBlock&&n.setToBlock(i.currentBlock,n.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const e=this.Editor.Tools.blockTools;Array.from(e.values()).forEach(this.processTool)}collectTagNames(e){return Xo(e)?[e]:Tt(e)?Object.keys(e):[]}getTagsConfig(e){if(e.pasteConfig===!1)return;const t=e.pasteConfig.tags||[],n=[];t.forEach(i=>{const r=this.collectTagNames(i);n.push(...r),r.forEach(s=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,s)){Ve(`Paste handler for «${e.name}» Tool on «${s}» tag is skipped because it is already used by «${this.toolsTags[s].tool.name}» Tool.`,"warn");return}const a=Tt(i)?i[s]:null;this.toolsTags[s.toUpperCase()]={tool:e,sanitizationConfig:a}})}),this.tagsByTool[e.name]=n.map(i=>i.toUpperCase())}getFilesConfig(e){if(e.pasteConfig===!1)return;const{files:t={}}=e.pasteConfig;let{extensions:n,mimeTypes:i}=t;!n&&!i||(n&&!Array.isArray(n)&&(Ve(`«extensions» property of the onDrop config for «${e.name}» Tool should be an array`),n=[]),i&&!Array.isArray(i)&&(Ve(`«mimeTypes» property of the onDrop config for «${e.name}» Tool should be an array`),i=[]),i&&(i=i.filter(r=>am(r)?!0:(Ve(`MIME type value «${r}» for the «${e.name}» Tool is not a valid MIME type`,"warn"),!1))),this.toolsFiles[e.name]={extensions:n||[],mimeTypes:i||[]})}getPatternsConfig(e){e.pasteConfig===!1||!e.pasteConfig.patterns||po(e.pasteConfig.patterns)||Object.entries(e.pasteConfig.patterns).forEach(([t,n])=>{n instanceof RegExp||Ve(`Pattern ${n} for «${e.name}» Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:t,pattern:n,tool:e})})}isNativeBehaviour(e){return G.isNativeInput(e)}async processFiles(e){const{BlockManager:t}=this.Editor;let n;n=await Promise.all(Array.from(e).map(r=>this.processFile(r))),n=n.filter(r=>!!r);const i=t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty;n.forEach((r,s)=>{t.paste(r.type,r.event,s===0&&i)})}async processFile(e){const t=sm(e),n=Object.entries(this.toolsFiles).find(([r,{mimeTypes:s,extensions:a}])=>{const[l,c]=e.type.split("/"),u=a.find(h=>h.toLowerCase()===t.toLowerCase()),p=s.find(h=>{const[g,f]=h.split("/");return g===l&&(f===c||f==="*")});return!!u||!!p});if(!n)return;const[i]=n;return{event:this.composePasteEvent("file",{file:e}),type:i}}processHTML(e){const{Tools:t}=this.Editor,n=G.make("DIV");return n.innerHTML=e,this.getNodes(n).map(i=>{let r,s=t.defaultTool,a=!1;switch(i.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:r=G.make("div"),r.appendChild(i);break;case Node.ELEMENT_NODE:r=i,a=!0,this.toolsTags[r.tagName]&&(s=this.toolsTags[r.tagName].tool);break}const{tags:l}=s.pasteConfig||{tags:[]},c=l.reduce((h,g)=>(this.collectTagNames(g).forEach(f=>{const m=Tt(g)?g[f]:null;h[f.toLowerCase()]=m||{}}),h),{}),u=Object.assign({},c,s.baseSanitizeConfig);if(r.tagName.toLowerCase()==="table"){const h=Io(r.outerHTML,u);r=G.make("div",void 0,{innerHTML:h}).firstChild}else r.innerHTML=Io(r.innerHTML,u);const p=this.composePasteEvent("tag",{data:r});return{content:r,isBlock:a,tool:s.name,event:p}}).filter(i=>{const r=G.isEmpty(i.content),s=G.isSingleTag(i.content);return!r||s})}processPlain(e){const{defaultBlock:t}=this.config;if(!e)return[];const n=t;return e.split(/\r?\n/).filter(i=>i.trim()).map(i=>{const r=G.make("div");r.textContent=i;const s=this.composePasteEvent("tag",{data:r});return{content:r,tool:n,isBlock:!1,event:s}})}async processSingleBlock(e){const{Caret:t,BlockManager:n}=this.Editor,{currentBlock:i}=n;if(!i||e.tool!==i.name||!G.containsOnlyInlineElements(e.content.innerHTML)){this.insertBlock(e,i?.tool.isDefault&&i.isEmpty);return}t.insertContentAtCaretPosition(e.content.innerHTML)}async processInlinePaste(e){const{BlockManager:t,Caret:n}=this.Editor,{content:i}=e;if(t.currentBlock&&t.currentBlock.tool.isDefault&&i.textContent.length<Wp.PATTERN_PROCESSING_MAX_LENGTH){const r=await this.processPattern(i.textContent);if(r){const s=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty,a=t.paste(r.tool,r.event,s);n.setToBlock(a,n.positions.END);return}}if(t.currentBlock&&t.currentBlock.currentInput){const r=t.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,Io(i.innerHTML,r))}else this.insertBlock(e)}async processPattern(e){const t=this.toolsPatterns.find(n=>{const i=n.pattern.exec(e);return i?e===i.shift():!1});return t?{event:this.composePasteEvent("pattern",{key:t.key,data:e}),tool:t.tool.name}:void 0}insertBlock(e,t=!1){const{BlockManager:n,Caret:i}=this.Editor,{currentBlock:r}=n;let s;if(t&&r&&r.isEmpty){s=n.paste(e.tool,e.event,!0),i.setToBlock(s,i.positions.END);return}s=n.paste(e.tool,e.event),i.setToBlock(s,i.positions.END)}insertEditorJSData(e){const{BlockManager:t,Caret:n,Tools:i}=this.Editor;Sl(e,r=>i.blockTools.get(r).sanitizeConfig).forEach(({tool:r,data:s},a)=>{let l=!1;a===0&&(l=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty);const c=t.insert({tool:r,data:s,replace:l});n.setToBlock(c,n.positions.END)})}processElementNode(e,t,n){const i=Object.keys(this.toolsTags),r=e,{tool:s}=this.toolsTags[r.tagName]||{},a=this.tagsByTool[s?.name]||[],l=i.includes(r.tagName),c=G.blockElements.includes(r.tagName.toLowerCase()),u=Array.from(r.children).some(({tagName:h})=>i.includes(h)&&!a.includes(h)),p=Array.from(r.children).some(({tagName:h})=>G.blockElements.includes(h.toLowerCase()));if(!c&&!l&&!u)return n.appendChild(r),[...t,n];if(l&&!u||c&&!p&&!u)return[...t,n,r]}getNodes(e){const t=Array.from(e.childNodes);let n;const i=(r,s)=>{if(G.isEmpty(s)&&!G.isSingleTag(s))return r;const a=r[r.length-1];let l=new DocumentFragment;switch(a&&G.isFragment(a)&&(l=r.pop()),s.nodeType){case Node.ELEMENT_NODE:if(n=this.processElementNode(s,r,l),n)return n;break;case Node.TEXT_NODE:return l.appendChild(s),[...r,l];default:return[...r,l]}return[...r,...Array.from(s.childNodes).reduce(i,[])]};return t.reduce(i,[])}composePasteEvent(e,t){return new CustomEvent(e,{detail:t})}};Up.PATTERN_PROCESSING_MAX_LENGTH=450;let xw=Up;class _w extends ze{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:e}=this.Editor,{blockTools:t}=e,n=[];Array.from(t.entries()).forEach(([i,r])=>{r.isReadOnlySupported||n.push(i)}),this.toolsDontSupportReadOnly=n,this.config.readOnly&&n.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly,!0)}async toggle(e=!this.readOnlyEnabled,t=!1){e&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const n=this.readOnlyEnabled;this.readOnlyEnabled=e;for(const r in this.Editor)this.Editor[r].toggleReadOnly&&this.Editor[r].toggleReadOnly(e);if(n===e)return this.readOnlyEnabled;if(t)return this.readOnlyEnabled;this.Editor.ModificationsObserver.disable();const i=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(i.blocks),this.Editor.ModificationsObserver.enable(),this.readOnlyEnabled}throwCriticalError(){throw new Vh(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}}let Ew=class Gr extends ze{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(e,t){const n=document.elementFromPoint(e-window.pageXOffset,t-window.pageYOffset);n.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const i=[`.${qo.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],r=n.closest("."+this.Editor.UI.CSS.editorWrapper),s=i.some(a=>!!n.closest(a));!r||s||(this.mousedown=!0,this.startX=e,this.startY=t)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:e}=this.genHTML();this.listeners.on(e,"mousedown",t=>{this.processMouseDown(t)},!1),this.listeners.on(document.body,"mousemove",Ha(t=>{this.processMouseMove(t)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",()=>{this.processMouseLeave()}),this.listeners.on(window,"scroll",Ha(t=>{this.processScroll(t)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",()=>{this.processMouseUp()},!1)}processMouseDown(e){e.button===this.MAIN_MOUSE_BUTTON&&(e.target.closest(G.allInputsSelector)!==null||this.startSelection(e.pageX,e.pageY))}processMouseMove(e){this.changingRectangle(e),this.scrollByZones(e.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(e){this.changingRectangle(e)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(e){if(this.inScrollZone=null,e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),!this.inScrollZone){this.isScrolling=!1;return}this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0)}genHTML(){const{UI:e}=this.Editor,t=e.nodes.holder.querySelector("."+e.CSS.editorWrapper),n=G.make("div",Gr.CSS.overlay,{}),i=G.make("div",Gr.CSS.overlayContainer,{}),r=G.make("div",Gr.CSS.rect,{});return i.appendChild(r),n.appendChild(i),t.appendChild(n),this.overlayRectangle=r,{container:t,overlay:n}}scrollVertical(e){if(!(this.inScrollZone&&this.mousedown))return;const t=window.pageYOffset;window.scrollBy(0,e),this.mouseY+=window.pageYOffset-t,setTimeout(()=>{this.scrollVertical(e)},0)}changingRectangle(e){if(!this.mousedown)return;e.pageY!==void 0&&(this.mouseX=e.pageX,this.mouseY=e.pageY);const{rightPos:t,leftPos:n,index:i}=this.genInfoForMouseSelection(),r=this.startX>t&&this.mouseX>t,s=this.startX<n&&this.mouseX<n;this.rectCrossesBlocks=!(r||s),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),i!==void 0&&(this.trySelectNextBlock(i),this.inverseSelection(),_e.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){const e=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!e)for(const t of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(t);if(!this.rectCrossesBlocks&&e)for(const t of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(t)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=`${this.mouseY-window.pageYOffset}px`),this.mouseX>=this.startX?(this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=`${this.mouseX-window.pageXOffset}px`)}genInfoForMouseSelection(){const e=document.body.offsetWidth/2,t=this.mouseY-window.pageYOffset,n=document.elementFromPoint(e,t),i=this.Editor.BlockManager.getBlockByChildNode(n);let r;i!==void 0&&(r=this.Editor.BlockManager.blocks.findIndex(u=>u.holder===i.holder));const s=this.Editor.BlockManager.lastBlock.holder.querySelector("."+qo.CSS.content),a=Number.parseInt(window.getComputedStyle(s).width,10)/2,l=e-a,c=e+a;return{index:r,leftPos:l,rightPos:c}}addBlockInSelection(e){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(e),this.stackOfSelected.push(e)}trySelectNextBlock(e){const t=this.stackOfSelected[this.stackOfSelected.length-1]===e,n=this.stackOfSelected.length,i=1,r=-1,s=0;if(t)return;const a=this.stackOfSelected[n-1]-this.stackOfSelected[n-2]>0;let l=s;n>1&&(l=a?i:r);const c=e>this.stackOfSelected[n-1]&&l===i,u=e<this.stackOfSelected[n-1]&&l===r,p=!(c||u||l===s);if(!p&&(e>this.stackOfSelected[n-1]||this.stackOfSelected[n-1]===void 0)){let f=this.stackOfSelected[n-1]+1||e;for(f;f<=e;f++)this.addBlockInSelection(f);return}if(!p&&e<this.stackOfSelected[n-1]){for(let f=this.stackOfSelected[n-1]-1;f>=e;f--)this.addBlockInSelection(f);return}if(!p)return;let h=n-1,g;for(e>this.stackOfSelected[n-1]?g=()=>e>this.stackOfSelected[h]:g=()=>e<this.stackOfSelected[h];g();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[h]),this.stackOfSelected.pop(),h--}};class Cw extends ze{async render(e){return new Promise(t=>{const{Tools:n,BlockManager:i}=this.Editor;if(e.length===0)i.insert();else{const r=e.map(({type:s,data:a,tunes:l,id:c})=>{n.available.has(s)===!1&&(lo(`Tool «${s}» is not found. Check 'tools' property at the Editor.js config.`,"warn"),a=this.composeStubDataForTool(s,a,c),s=n.stubTool);let u;try{u=i.composeBlock({id:c,tool:s,data:a,tunes:l})}catch(p){Ve(`Block «${s}» skipped because of plugins error`,"error",{data:a,error:p}),a=this.composeStubDataForTool(s,a,c),s=n.stubTool,u=i.composeBlock({id:c,tool:s,data:a,tunes:l})}return u});i.insertMany(r)}window.requestIdleCallback(()=>{t()},{timeout:2e3})})}composeStubDataForTool(e,t,n){const{Tools:i}=this.Editor;let r=e;if(i.unavailable.has(e)){const s=i.unavailable.get(e).toolbox;s!==void 0&&s[0].title!==void 0&&(r=s[0].title)}return{savedData:{id:n,type:e,data:t},title:r}}}class Sw extends ze{async save(){const{BlockManager:e,Tools:t}=this.Editor,n=e.blocks,i=[];try{n.forEach(a=>{i.push(this.getSavedData(a))});const r=await Promise.all(i),s=await Sl(r,a=>t.blockTools.get(a).sanitizeConfig);return this.makeOutput(s)}catch(r){lo("Saving failed due to the Error %o","error",r)}}async getSavedData(e){const t=await e.save(),n=t&&await e.validate(t.data);return{...t,isValid:n}}makeOutput(e){const t=[];return e.forEach(({id:n,tool:i,data:r,tunes:s,isValid:a})=>{if(!a){Ve(`Block «${i}» skipped because saved data is invalid`);return}if(i===this.Editor.Tools.stubTool){t.push(r);return}const l={id:n,type:i,data:r,...!po(s)&&{tunes:s}};t.push(l)}),{time:+new Date,blocks:t,version:"2.31.0"}}}(function(){try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-block:only-of-type .ce-paragraph[data-placeholder-active]:empty:before,.ce-block:only-of-type .ce-paragraph[data-placeholder-active][data-empty=true]:before{content:attr(data-placeholder-active)}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(o)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Tw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';function Lw(o){const e=document.createElement("div");e.innerHTML=o.trim();const t=document.createDocumentFragment();return t.append(...Array.from(e.childNodes)),t}/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */class yc{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:e,config:t,api:n,readOnly:i}){this.api=n,this.readOnly=i,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=t.placeholder?t.placeholder:yc.DEFAULT_PLACEHOLDER,this._data=e??{},this._element=null,this._preserveBlank=t.preserveBlank??!1}onKeyUp(e){if(e.code!=="Backspace"&&e.code!=="Delete"||!this._element)return;const{textContent:t}=this._element;t===""&&(this._element.innerHTML="")}drawView(){const e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e.contentEditable="false",e.dataset.placeholderActive=this.api.i18n.t(this._placeholder),this._data.text&&(e.innerHTML=this._data.text),this.readOnly||(e.contentEditable="true",e.addEventListener("keyup",this.onKeyUp)),e}render(){return this._element=this.drawView(),this._element}merge(e){if(!this._element)return;this._data.text+=e.text;const t=Lw(e.text);this._element.appendChild(t),this._element.normalize()}validate(e){return!(e.text.trim()===""&&!this._preserveBlank)}save(e){return{text:e.innerHTML}}onPaste(e){const t={text:e.detail.data.innerHTML};this._data=t,window.requestAnimationFrame(()=>{this._element&&(this._element.innerHTML=this._data.text||"")})}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:Tw,title:"Text"}}}class wc{constructor(){this.commandName="bold"}static get sanitize(){return{b:{}}}render(){return{icon:eb,name:"bold",onActivate:()=>{document.execCommand(this.commandName)},isActive:()=>document.queryCommandState(this.commandName)}}get shortcut(){return"CMD+B"}}wc.isInline=!0;wc.title="Bold";class kc{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=ab,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+I"}}kc.isInline=!0;kc.title="Italic";class xc{constructor({api:e}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=e.toolbar,this.inlineToolbar=e.inlineToolbar,this.notifier=e.notifier,this.i18n=e.i18n,this.selection=new _e}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=fu,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.enterKeyHint="done",this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",e=>{e.keyCode===this.ENTER_KEY&&this.enterPressed(e)}),this.nodes.input}surround(e){if(e){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const t=this.selection.findParentTag("A");if(t){this.selection.expandToTag(t),this.unlink(),this.closeActions(),this.checkState(),this.toolbar.close();return}}this.toggleActions()}checkState(){const e=this.selection.findParentTag("A");if(e){this.nodes.button.innerHTML=ub,this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const t=e.getAttribute("href");this.nodes.input.value=t!=="null"?t:"",this.selection.save()}else this.nodes.button.innerHTML=fu,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!e}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(e=!1){this.nodes.input.classList.add(this.CSS.inputShowed),e&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(e=!0){if(this.selection.isFakeBackgroundEnabled){const t=new _e;t.save(),this.selection.restore(),this.selection.removeFakeBackground(),t.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",e&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(e){let t=this.nodes.input.value||"";if(!t.trim()){this.selection.restore(),this.unlink(),e.preventDefault(),this.closeActions();return}if(!this.validateURL(t)){this.notifier.show({message:"Pasted link is not valid.",style:"error"}),Ve("Incorrect Link pasted","warn",t);return}t=this.prepareLink(t),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(t),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),this.inlineToolbar.close()}validateURL(e){return!/\s/.test(e)}prepareLink(e){return e=e.trim(),e=this.addProtocol(e),e}addProtocol(e){if(/^(\w+):(\/\/)?/.test(e))return e;const t=/^\/[^/\s]/.test(e),n=e.substring(0,1)==="#",i=/^\/\/[^/\s]/.test(e);return!t&&!n&&!i&&(e="http://"+e),e}insertLink(e){const t=this.selection.findParentTag("A");t&&this.selection.expandToTag(t),document.execCommand(this.commandLink,!1,e)}unlink(){document.execCommand(this.commandUnlink)}}xc.isInline=!0;xc.title="Link";let qp=class{constructor({api:e}){this.i18nAPI=e.i18n,this.blocksAPI=e.blocks,this.selectionAPI=e.selection,this.toolsAPI=e.tools,this.caretAPI=e.caret}async render(){const e=_e.get(),t=this.blocksAPI.getBlockByElement(e.anchorNode);if(t===void 0)return[];const n=this.toolsAPI.getBlockTools(),i=await Jh(t,n);if(i.length===0)return[];const r=i.reduce((c,u)=>{var p;return(p=u.toolbox)==null||p.forEach(h=>{c.push({icon:h.icon,title:Dt.t(oo.toolNames,h.title),name:u.name,closeOnActivate:!0,onActivate:async()=>{const g=await this.blocksAPI.convert(t.id,u.name,h.data);this.caretAPI.setToBlock(g,"end")}})}),c},[]),s=await t.getActiveToolboxEntry(),a=s!==void 0?s.icon:rp,l=!Mi();return{icon:a,name:"convert-to",hint:{title:this.i18nAPI.t("Convert to")},children:{searchable:l,items:r,onOpen:()=>{l&&(this.selectionAPI.setFakeBackground(),this.selectionAPI.save())},onClose:()=>{l&&(this.selectionAPI.restore(),this.selectionAPI.removeFakeBackground())}}}}};qp.isInline=!0;let Vp=class{constructor({data:e,api:t}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=t,this.title=e.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=e.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const e=G.make("div",this.CSS.wrapper),t=hb,n=G.make("div",this.CSS.info),i=G.make("div",this.CSS.title,{textContent:this.title}),r=G.make("div",this.CSS.subtitle,{textContent:this.subtitle});return e.innerHTML=t,n.appendChild(i),n.appendChild(r),e.appendChild(n),e}};Vp.isReadOnlySupported=!0;class Bw extends Al{constructor(){super(...arguments),this.type=Nn.Inline}get title(){return this.constructable[ls.Title]}create(){return new this.constructable({api:this.api,config:this.settings})}get isReadOnlySupported(){return this.constructable[ls.IsReadOnlySupported]??!1}}class Ow extends Al{constructor(){super(...arguments),this.type=Nn.Tune}create(e,t){return new this.constructable({api:this.api,config:this.settings,block:t,data:e})}}let So=class si extends Map{get blockTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isBlock());return new si(e)}get inlineTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isInline());return new si(e)}get blockTunes(){const e=Array.from(this.entries()).filter(([,t])=>t.isTune());return new si(e)}get internalTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isInternal);return new si(e)}get externalTools(){const e=Array.from(this.entries()).filter(([,t])=>!t.isInternal);return new si(e)}};var Iw=Object.defineProperty,Aw=Object.getOwnPropertyDescriptor,Gp=(o,e,t,n)=>{for(var i=Aw(e,t),r=o.length-1,s;r>=0;r--)(s=o[r])&&(i=s(e,t,i)||i);return i&&Iw(e,t,i),i};class _c extends Al{constructor(){super(...arguments),this.type=Nn.Block,this.inlineTools=new So,this.tunes=new So}create(e,t,n){return new this.constructable({data:e,block:t,readOnly:n,api:this.api,config:this.settings})}get isReadOnlySupported(){return this.constructable[ri.IsReadOnlySupported]===!0}get isLineBreaksEnabled(){return this.constructable[ri.IsEnabledLineBreaks]}get toolbox(){const e=this.constructable[ri.Toolbox],t=this.config[Ur.Toolbox];if(!po(e)&&t!==!1)return t?Array.isArray(e)?Array.isArray(t)?t.map((n,i)=>{const r=e[i];return r?{...r,...n}:n}):[t]:Array.isArray(t)?t:[{...e,...t}]:Array.isArray(e)?e:[e]}get conversionConfig(){return this.constructable[ri.ConversionConfig]}get enabledInlineTools(){return this.config[Ur.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[Ur.EnabledBlockTunes]}get pasteConfig(){return this.constructable[ri.PasteConfig]??{}}get sanitizeConfig(){const e=super.sanitizeConfig,t=this.baseSanitizeConfig;if(po(e))return t;const n={};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const r=e[i];Tt(r)?n[i]=Object.assign({},t,r):n[i]=r}return n}get baseSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(t=>Object.assign(e,t.sanitizeConfig)),Array.from(this.tunes.values()).forEach(t=>Object.assign(e,t.sanitizeConfig)),e}}Gp([Pi],_c.prototype,"sanitizeConfig");Gp([Pi],_c.prototype,"baseSanitizeConfig");class Pw{constructor(e,t,n){this.api=n,this.config=e,this.editorConfig=t}get(e){const{class:t,isInternal:n=!1,...i}=this.config[e],r=this.getConstructor(t),s=t[Ka.IsTune];return new r({name:e,constructable:t,config:i,api:this.api.getMethodsForTool(e,s),isDefault:e===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:n})}getConstructor(e){switch(!0){case e[ls.IsInline]:return Bw;case e[Ka.IsTune]:return Ow;default:return _c}}}let Kp=class{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:tb,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e+1);if(!t)throw new Error("Unable to move Block down since it is already the last");const n=t.holder,i=n.getBoundingClientRect();let r=Math.abs(window.innerHeight-n.offsetHeight);i.top<window.innerHeight&&(r=window.scrollY+n.offsetHeight),window.scrollTo(0,r),this.api.blocks.move(e+1),this.api.toolbar.toggleBlockSettings(!0)}};Kp.isTune=!0;let Yp=class{constructor({api:e}){this.api=e}render(){return{icon:rb,title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}};Yp.isTune=!0;let Zp=class{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:ib,title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e),n=this.api.blocks.getBlockByIndex(e-1);if(e===0||!t||!n)throw new Error("Unable to move Block up since it is already the first");const i=t.holder,r=n.holder,s=i.getBoundingClientRect(),a=r.getBoundingClientRect();let l;a.top>0?l=Math.abs(s.top)-Math.abs(a.top):l=Math.abs(s.top)+a.height,window.scrollBy(0,-1*l),this.api.blocks.move(e-1),this.api.toolbar.toggleBlockSettings(!0)}};Zp.isTune=!0;var Mw=Object.defineProperty,Nw=Object.getOwnPropertyDescriptor,$w=(o,e,t,n)=>{for(var i=Nw(e,t),r=o.length-1,s;r>=0;r--)(s=o[r])&&(i=s(e,t,i)||i);return i&&Mw(e,t,i),i};let Xp=class extends ze{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new So,this.toolsUnavailable=new So}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=za({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||Object.keys(this.config.tools).length===0)throw Error("Can't start without tools");const e=this.prepareConfig();this.factory=new Pw(e,this.config,this.Editor.API);const t=this.getListOfPrepareFunctions(e);if(t.length===0)return Promise.resolve();await rm(t,n=>{this.toolPrepareMethodSuccess(n)},n=>{this.toolPrepareMethodFallback(n)}),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(t=>{Object.assign(e,t.sanitizeConfig)}),e}destroy(){Object.values(this.available).forEach(async e=>{ct(e.reset)&&await e.reset()})}get internalTools(){return{convertTo:{class:qp,isInternal:!0},link:{class:xc,isInternal:!0},bold:{class:wc,isInternal:!0},italic:{class:kc,isInternal:!0},paragraph:{class:yc,inlineToolbar:!0,isInternal:!0},stub:{class:Vp,isInternal:!0},moveUp:{class:Zp,isInternal:!0},delete:{class:Yp,isInternal:!0},moveDown:{class:Kp,isInternal:!0}}}toolPrepareMethodSuccess(e){const t=this.factory.get(e.toolName);if(t.isInline()){const n=["render"].filter(i=>!t.create()[i]);if(n.length){Ve(`Incorrect Inline Tool: ${t.name}. Some of required methods is not implemented %o`,"warn",n),this.toolsUnavailable.set(t.name,t);return}}this.toolsAvailable.set(t.name,t)}toolPrepareMethodFallback(e){this.toolsUnavailable.set(e.toolName,this.factory.get(e.toolName))}getListOfPrepareFunctions(e){const t=[];return Object.entries(e).forEach(([n,i])=>{t.push({function:ct(i.class.prepare)?i.class.prepare:()=>{},data:{toolName:n,config:i.config}})}),t}prepareBlockTools(){Array.from(this.blockTools.values()).forEach(e=>{this.assignInlineToolsToBlockTool(e),this.assignBlockTunesToBlockTool(e)})}assignInlineToolsToBlockTool(e){if(this.config.inlineToolbar!==!1){if(e.enabledInlineTools===!0){e.inlineTools=new So(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(t=>[t,this.inlineTools.get(t)]):Array.from(this.inlineTools.entries()));return}Array.isArray(e.enabledInlineTools)&&(e.inlineTools=new So(["convertTo",...e.enabledInlineTools].map(t=>[t,this.inlineTools.get(t)])))}}assignBlockTunesToBlockTool(e){if(e.enabledBlockTunes!==!1){if(Array.isArray(e.enabledBlockTunes)){const t=new So(e.enabledBlockTunes.map(n=>[n,this.blockTunes.get(n)]));e.tunes=new So([...t,...this.blockTunes.internalTools]);return}if(Array.isArray(this.config.tunes)){const t=new So(this.config.tunes.map(n=>[n,this.blockTunes.get(n)]));e.tunes=new So([...t,...this.blockTunes.internalTools]);return}e.tunes=this.blockTunes.internalTools}}validateTools(){for(const e in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,e)){if(e in this.internalTools)return;const t=this.config.tools[e];if(!ct(t)&&!ct(t.class))throw Error(`Tool «${e}» must be a constructor function or an object with function in the «class» property`)}}prepareConfig(){const e={};for(const t in this.config.tools)Tt(this.config.tools[t])?e[t]=this.config.tools[t]:e[t]={class:this.config.tools[t]};return e}};$w([Pi],Xp.prototype,"getAllInlineToolsSanitizeConfig");const Rw=`:root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;--color-background-icon-active: rgba(56, 138, 229, .1);--color-text-icon-active: #388AE5;--color-text-primary: black;position:absolute;visibility:hidden;-webkit-transition:opacity .25s ease;transition:opacity .25s ease;will-change:opacity,left,top;top:0;left:0;z-index:3;opacity:1;visibility:visible}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{color:var(--color-text-primary);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:0;border-radius:4px;line-height:normal;height:100%;padding:0;width:28px;background-color:transparent;cursor:pointer}@media (max-width: 650px){.ce-inline-tool{width:36px;height:36px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#f8f8f8}}.ce-inline-tool svg{display:block;width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:4px 8px;font-size:14px;line-height:22px;outline:none;margin:0;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-inline-tool--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #EFF0F1;--color-shadow: rgba(13, 20, 33, .1);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #F8F8F8;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;--popover-top: calc(100% + var(--offset-from-target));--popover-left: 0;--nested-popover-overlap: 4px;--icon-size: 20px;--item-padding: 3px;--item-height: calc(var(--icon-size) + 2 * var(--item-padding))}.ce-popover__container{min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0px 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:var(--popover-left);top:var(--popover-top);background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened>.ce-popover__container{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened>.ce-popover__container{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover--open-top .ce-popover__container{--popover-top: calc(-1 * (var(--offset-from-target) + var(--popover-height)))}.ce-popover--open-left .ce-popover__container{--popover-left: calc(-1 * var(--width) + 100%)}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}@media (max-width: 650px){.ce-popover .ce-popover__container{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}}.ce-popover__search{margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover--nested .ce-popover__container{--popover-left: calc(var(--nesting-level) * (var(--width) - var(--nested-popover-overlap)));top:calc(var(--trigger-item-top) - var(--nested-popover-overlap));position:absolute}.ce-popover--open-top.ce-popover--nested .ce-popover__container{top:calc(var(--trigger-item-top) - var(--popover-height) + var(--item-height) + var(--offset-from-target) + var(--nested-popover-overlap))}.ce-popover--open-left .ce-popover--nested .ce-popover__container{--popover-left: calc(-1 * (var(--nesting-level) + 1) * var(--width) + 100%)}.ce-popover-item-separator{padding:4px 3px}.ce-popover-item-separator--hidden{display:none}.ce-popover-item-separator__line{height:1px;background:var(--color-border);width:100%}.ce-popover-item-html--hidden{display:none}.ce-popover-item{--border-radius: 6px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--item-padding);color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;background:transparent}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:28px;height:28px}}.ce-popover-item__icon--tool{margin-right:4px}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-right:auto}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title,.ce-popover-item--confirmation .ce-popover-item__icon{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}.ce-popover-header{margin-bottom:8px;margin-top:4px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-popover-header__text{font-size:18px;font-weight:600}.ce-popover-header__back-button{border:0;background:transparent;width:36px;height:36px;color:var(--color-text-primary)}.ce-popover-header__back-button svg{display:block;width:28px;height:28px}.ce-popover--inline{--height: 38px;--height-mobile: 46px;--container-padding: 4px;position:relative}.ce-popover--inline .ce-popover__custom-content{margin-bottom:0}.ce-popover--inline .ce-popover__items{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-popover--inline .ce-popover__container{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding:var(--container-padding);height:var(--height);top:0;min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;width:-webkit-max-content;width:-moz-max-content;width:max-content;-webkit-animation:none;animation:none}@media (max-width: 650px){.ce-popover--inline .ce-popover__container{height:var(--height-mobile);position:absolute}}.ce-popover--inline .ce-popover-item-separator{padding:0 4px}.ce-popover--inline .ce-popover-item-separator__line{height:100%;width:1px}.ce-popover--inline .ce-popover-item{border-radius:4px;padding:4px}.ce-popover--inline .ce-popover-item__icon--tool{-webkit-box-shadow:none;box-shadow:none;background:transparent;margin-right:0}.ce-popover--inline .ce-popover-item__icon{width:auto;width:initial;height:auto;height:initial}.ce-popover--inline .ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover--inline .ce-popover-item__icon svg{width:28px;height:28px}}.ce-popover--inline .ce-popover-item:not(:last-of-type){margin-bottom:0;margin-bottom:initial}.ce-popover--inline .ce-popover-item-html{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-popover--inline .ce-popover-item__icon--chevron-right{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.ce-popover--inline .ce-popover--nested-level-1 .ce-popover__container{--offset: 3px;left:0;top:calc(var(--height) + var(--offset))}@media (max-width: 650px){.ce-popover--inline .ce-popover--nested-level-1 .ce-popover__container{top:calc(var(--height-mobile) + var(--offset))}}.ce-popover--inline .ce-popover--nested .ce-popover__container{min-width:var(--width);width:var(--width);height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding:6px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.ce-popover--inline .ce-popover--nested .ce-popover__items{display:block;width:100%}.ce-popover--inline .ce-popover--nested .ce-popover-item{border-radius:6px;padding:3px}@media (max-width: 650px){.ce-popover--inline .ce-popover--nested .ce-popover-item{padding:4px}}.ce-popover--inline .ce-popover--nested .ce-popover-item__icon--tool{margin-right:4px}.ce-popover--inline .ce-popover--nested .ce-popover-item__icon{width:26px;height:26px}.ce-popover--inline .ce-popover--nested .ce-popover-item-separator{padding:4px 3px}.ce-popover--inline .ce-popover--nested .ce-popover-item-separator__line{width:100%;height:1px}.codex-editor [data-placeholder]:empty:before,.codex-editor [data-placeholder][data-empty=true]:before{pointer-events:none;color:#707684;cursor:text;content:attr(data-placeholder)}.codex-editor [data-placeholder-active]:empty:before,.codex-editor [data-placeholder-active][data-empty=true]:before{pointer-events:none;color:#707684;cursor:text}.codex-editor [data-placeholder-active]:empty:focus:before,.codex-editor [data-placeholder-active][data-empty=true]:focus:before{content:attr(data-placeholder-active)}
`;class Dw extends ze{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=null,this.resizeDebouncer=uu(()=>{this.windowResize()},200),this.selectionChangeDebounced=uu(()=>{this.selectionChanged()},yw),this.documentTouchedListener=e=>{this.documentTouched(e)}}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache!==null)return this.contentRectCache;const e=this.nodes.wrapper.querySelector(`.${qo.CSS.content}`);return e?(this.contentRectCache=e.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.setIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(e){e?this.unbindReadOnlySensitiveListeners():window.requestIdleCallback(()=>{this.bindReadOnlySensitiveListeners()},{timeout:2e3})}checkEmptiness(){const{BlockManager:e}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,e.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:e,BlockSettings:t,InlineToolbar:n}=this.Editor;return!!(t.opened||n.opened||e.toolbox.opened)}get someFlipperButtonFocused(){return this.Editor.Toolbar.toolbox.hasFocus()?!0:Object.entries(this.Editor).filter(([e,t])=>t.flipper instanceof ss).some(([e,t])=>t.flipper.hasFocus())}destroy(){this.nodes.holder.innerHTML="",this.unbindReadOnlyInsensitiveListeners()}closeAllToolbars(){const{Toolbar:e,BlockSettings:t,InlineToolbar:n}=this.Editor;t.close(),n.close(),e.toolbox.close()}setIsMobile(){const e=window.innerWidth<zh;e!==this.isMobile&&this.eventsDispatcher.emit(dr,{isEnabled:this.isMobile}),this.isMobile=e}make(){this.nodes.holder=G.getHolder(this.config.holder),this.nodes.wrapper=G.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=G.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper),this.bindReadOnlyInsensitiveListeners()}loadStyles(){const e="editor-js-styles";if(G.get(e))return;const t=G.make("style",null,{id:e,textContent:Rw.toString()});this.config.style&&!po(this.config.style)&&this.config.style.nonce&&t.setAttribute("nonce",this.config.style.nonce),G.prepend(document.head,t)}bindReadOnlyInsensitiveListeners(){this.listeners.on(document,"selectionchange",this.selectionChangeDebounced),this.listeners.on(window,"resize",this.resizeDebouncer,{passive:!0}),this.listeners.on(this.nodes.redactor,"mousedown",this.documentTouchedListener,{capture:!0,passive:!0}),this.listeners.on(this.nodes.redactor,"touchstart",this.documentTouchedListener,{capture:!0,passive:!0})}unbindReadOnlyInsensitiveListeners(){this.listeners.off(document,"selectionchange",this.selectionChangeDebounced),this.listeners.off(window,"resize",this.resizeDebouncer),this.listeners.off(this.nodes.redactor,"mousedown",this.documentTouchedListener),this.listeners.off(this.nodes.redactor,"touchstart",this.documentTouchedListener)}bindReadOnlySensitiveListeners(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",e=>{this.redactorClicked(e)},!1),this.readOnlyMutableListeners.on(document,"keydown",e=>{this.documentKeydown(e)},!0),this.readOnlyMutableListeners.on(document,"mousedown",e=>{this.documentClicked(e)},!0),this.watchBlockHoveredEvents(),this.enableInputsEmptyMark()}watchBlockHoveredEvents(){let e;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",Ha(t=>{const n=t.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||n&&e!==n&&(e=n,this.eventsDispatcher.emit(gp,{block:this.Editor.BlockManager.getBlockByChildNode(n)}))},20),{passive:!0})}unbindReadOnlySensitiveListeners(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.setIsMobile()}documentKeydown(e){switch(e.keyCode){case Oe.ENTER:this.enterPressed(e);break;case Oe.BACKSPACE:case Oe.DELETE:this.backspacePressed(e);break;case Oe.ESC:this.escapePressed(e);break;default:this.defaultBehaviour(e);break}}defaultBehaviour(e){const{currentBlock:t}=this.Editor.BlockManager,n=e.target.closest(`.${this.CSS.editorWrapper}`),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(t!==void 0&&n===null){this.Editor.BlockEvents.keydown(e);return}n||t&&i||(this.Editor.BlockManager.unsetCurrentBlock(),this.Editor.Toolbar.close())}backspacePressed(e){const{BlockManager:t,BlockSelection:n,Caret:i}=this.Editor;if(n.anyBlockSelected&&!_e.isSelectionExists){const r=t.removeSelectedBlocks(),s=t.insertDefaultBlockAtIndex(r,!0);i.setToBlock(s,i.positions.START),n.clearSelection(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}escapePressed(e){this.Editor.BlockSelection.clearSelection(e),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(e){const{BlockManager:t,BlockSelection:n}=this.Editor;if(this.someToolbarOpened)return;const i=t.currentBlockIndex>=0;if(n.anyBlockSelected&&!_e.isSelectionExists){n.clearSelection(e),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();return}if(!this.someToolbarOpened&&i&&e.target.tagName==="BODY"){const r=this.Editor.BlockManager.insert();e.preventDefault(),this.Editor.Caret.setToBlock(r),this.Editor.Toolbar.moveAndOpen(r)}this.Editor.BlockSelection.clearSelection(e)}documentClicked(e){var t,n;if(!e.isTrusted)return;const i=e.target;this.nodes.holder.contains(i)||_e.isAtEditor||(this.Editor.BlockManager.unsetCurrentBlock(),this.Editor.Toolbar.close());const r=(t=this.Editor.BlockSettings.nodes.wrapper)==null?void 0:t.contains(i),s=(n=this.Editor.Toolbar.nodes.settingsToggler)==null?void 0:n.contains(i),a=r||s;if(this.Editor.BlockSettings.opened&&!a){this.Editor.BlockSettings.close();const l=this.Editor.BlockManager.getBlockByChildNode(i);this.Editor.Toolbar.moveAndOpen(l)}this.Editor.BlockSelection.clearSelection(e)}documentTouched(e){let t=e.target;if(t===this.nodes.redactor){const n=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;t=document.elementFromPoint(n,i)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(t)}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.ReadOnly.isEnabled||this.Editor.Toolbar.moveAndOpen()}redactorClicked(e){if(!_e.isCollapsed)return;const t=e.target,n=e.metaKey||e.ctrlKey;if(G.isAnchor(t)&&n){e.stopImmediatePropagation(),e.stopPropagation();const i=t.getAttribute("href"),r=cm(i);um(r);return}this.processBottomZoneClick(e)}processBottomZoneClick(e){const t=this.Editor.BlockManager.getBlockByIndex(-1),n=G.offset(t.holder).bottom,i=e.pageY,{BlockSelection:r}=this.Editor;if(e.target instanceof Element&&e.target.isEqualNode(this.nodes.redactor)&&!r.anyBlockSelected&&n<i){e.stopImmediatePropagation(),e.stopPropagation();const{BlockManager:s,Caret:a,Toolbar:l}=this.Editor;(!s.lastBlock.tool.isDefault||!s.lastBlock.isEmpty)&&s.insertAtEnd(),a.setToTheLastBlock(),l.moveAndOpen(s.lastBlock)}}selectionChanged(){const{CrossBlockSelection:e,BlockSelection:t}=this.Editor,n=_e.anchorElement;if(e.isCrossBlockSelectionStarted&&t.anyBlockSelected&&_e.get().removeAllRanges(),!n){_e.range||this.Editor.InlineToolbar.close();return}const i=n.closest(`.${qo.CSS.content}`);(i===null||i.closest(`.${_e.CSS.editorWrapper}`)!==this.nodes.wrapper)&&(this.Editor.InlineToolbar.containsNode(n)||this.Editor.InlineToolbar.close(),n.dataset.inlineToolbar!=="true")||(this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(n),this.Editor.InlineToolbar.tryToShow(!0))}enableInputsEmptyMark(){function e(t){const n=t.target;Uh(n)}this.readOnlyMutableListeners.on(this.nodes.wrapper,"input",e),this.readOnlyMutableListeners.on(this.nodes.wrapper,"focusin",e),this.readOnlyMutableListeners.on(this.nodes.wrapper,"focusout",e)}}const jw={BlocksAPI:xm,CaretAPI:Em,EventsAPI:Cm,I18nAPI:Sm,API:Tm,InlineToolbarAPI:Lm,ListenersAPI:Bm,NotifierAPI:Pm,ReadOnlyAPI:Mm,SanitizerAPI:Hm,SaverAPI:zm,SelectionAPI:Um,ToolsAPI:Wm,StylesAPI:qm,ToolbarAPI:Vm,TooltipAPI:Xm,UiAPI:Jm,BlockSettings:Eb,Toolbar:Ab,InlineToolbar:Pb,BlockEvents:uw,BlockManager:fw,BlockSelection:gw,Caret:vw,CrossBlockSelection:mw,DragNDrop:bw,ModificationsObserver:kw,Paste:xw,ReadOnly:_w,RectangleSelection:Ew,Renderer:Cw,Saver:Sw,Tools:Xp,UI:Dw};class Fw{constructor(e){this.moduleInstances={},this.eventsDispatcher=new wr;let t,n;this.isReady=new Promise((i,r)=>{t=i,n=r}),Promise.resolve().then(async()=>{this.configuration=e,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:i,Caret:r,UI:s,ModificationsObserver:a}=this.moduleInstances;s.checkEmptiness(),a.enable(),this.configuration.autofocus===!0&&this.configuration.readOnly!==!0&&r.setToBlock(i.blocks[0],r.positions.START),t()}).catch(i=>{Ve(`Editor.js is not ready because of ${i}`,"error"),n(i)})}set configuration(e){var t,n;Tt(e)?this.config={...e}:this.config={holder:e},Ua(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=jh.VERBOSE),nm(this.config.logLevel),Ua(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;const i={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=this.config.hideToolbar?this.config.hideToolbar:!1,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=this.config.inlineToolbar!==void 0?this.config.inlineToolbar:!0,(po(this.config.data)||!this.config.data.blocks||this.config.data.blocks.length===0)&&(this.config.data={blocks:[i]}),this.config.readOnly=this.config.readOnly||!1,(t=this.config.i18n)!=null&&t.messages&&Dt.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((n=this.config.i18n)==null?void 0:n.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:e,holder:t}=this.config;if(e&&t)throw Error("«holderId» and «holder» param can't assign at the same time.");if(Xo(t)&&!G.get(t))throw Error(`element with ID «${t}» is missing. Pass correct holder's ID.`);if(t&&Tt(t)&&!G.isElement(t))throw Error("«holder» value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce((e,t)=>e.then(async()=>{try{await this.moduleInstances[t].prepare()}catch(n){if(n instanceof Vh)throw new Error(n.message);Ve(`Module ${t} was skipped because of %o`,"warn",n)}}),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(jw).forEach(([e,t])=>{try{this.moduleInstances[e]=new t({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(n){Ve("[constructModules]",`Module ${e} skipped because`,"error",n)}})}configureModules(){for(const e in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,e)&&(this.moduleInstances[e].state=this.getModulesDiff(e))}getModulesDiff(e){const t={};for(const n in this.moduleInstances)n!==e&&(t[n]=this.moduleInstances[n]);return t}}/**
 * Editor.js
 *
 * @license Apache-2.0
 * @see Editor.js <https://editorjs.io>
 * @author CodeX Team <https://codex.so>
 */class cs{static get version(){return"2.31.0"}constructor(e){let t=()=>{};Tt(e)&&ct(e.onReady)&&(t=e.onReady);const n=new Fw(e);this.isReady=n.isReady.then(()=>{this.exportAPI(n),t()})}exportAPI(e){const t=["configuration"],n=()=>{Object.values(e.moduleInstances).forEach(i=>{ct(i.destroy)&&i.destroy(),i.listeners.removeAll()}),Zm(),e=null;for(const i in this)Object.prototype.hasOwnProperty.call(this,i)&&delete this[i];Object.setPrototypeOf(this,null)};t.forEach(i=>{this[i]=e[i]}),this.destroy=n,Object.setPrototypeOf(this,e.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(([i,r])=>{Object.entries(r).forEach(([s,a])=>{this[a]=e.moduleInstances.API.methods[i][s]})})}}const gt={top:25,left:0,height:90,width:140,z:100},Ci=()=>({newword:{...gt,top:115,height:810,width:280},lexicon:{...gt,top:115,left:280,width:1120,height:810},alphabet:{...gt,width:1400,height:90},pronunciation:{...gt,left:700,width:700,height:900},wordgenerator:{...gt,width:700,height:900},settings:{...gt,width:1400,height:900},files:{...gt,width:1400,height:900},phrasebook:{...gt,left:420,width:980,height:900},phrasecategories:{...gt,height:450,width:420},newphrase:{...gt,top:475,height:450,width:420},orthographytesting:{...gt,left:980,width:420,height:650},orthography:{...gt,width:980,height:900},romchangewizard:{...gt,top:650,left:980,height:250,width:420},etymologyselect:{...gt,width:280,height:900},etymologyeditor:{...gt,left:280,width:1120,height:900},documentation:{...gt,width:1400,height:900},changelog:{...gt,width:1400,height:900},inflections:{...gt,width:1400,height:900},help:{...gt,width:1400,height:900}}),Ps=()=>{const o=Ci(),e={};for(const t in Ci())e[t]={top:o[t].top/900,height:o[t].height/900,width:o[t].width/1400,left:o[t].left/1400};return e},Ms=()=>({x:140,y:90,rows:10,columns:10,proportional:!0}),yi=()=>({height:900,width:1400});function Jp(o,e){return o.hasOwnProperty("ratios")||(o.ratios={}),o.ratios[e]={top:Math.round((o.positions[e].top-25)/o.window.height*1e3)/1e3,height:Math.round(o.positions[e].height/(o.window.height-25)*1e3)/1e3,width:Math.round(o.positions[e].width/o.window.width*1e3)/1e3,left:Math.round(o.positions[e].left/o.window.width*1e3)/1e3},o.ratios}const Ce=kt({positions:Ci(),ratios:Ps(),snapping:Ms(),window:yi(),tabmode:"switch",opentabs:[0],showZ:!1}),Qp={Version:"2.1.15",FileVersion:"0",Name:"Unnamed Language",CaseSensitive:!1,IgnoreDiacritics:!0,ShowEtymology:!1,ShowInflection:!1,Inflections:[],UseLects:!1,HeaderTags:"",Alphabet:"a b c d e f g h i j k l m n o p q r s t u v w x y z",ShowAlphabet:!0,Lexicon:{},Etymologies:{},Relatives:{},SoundChangeEngine:"tadpole.lexc",Pronunciations:{General:`Use this field to write pronunciation rules to automatically transcribe your orthography in IPA. For example,
th > θ
This rule will automatically transcribe any ⟨th⟩ in your orthography as [θ].
Rules can be much more complex than this. You can read the section on pronunciation rules in the Help tab for more information.

The most common mistake has to do with the fact that rules are applied in order from top to bottom. For example, if you have the following rules,
e > ɛ
ae > æ
then the second rule will never be applied, because the first rule will always change ⟨e⟩ to [ɛ] before the second rule can be applied.
The solution in almost all cases like this is to change the order of the rules so that the ones with the longest patterns are applied first.
ae > æ
e > ɛ
Now both rules will be applied correctly. You can test this by removing the first set of rules from this demo.`},Orthographies:[{name:"Romanization",font:"Gentium",root:"rom",lect:"General",graphemy:!1,rules:"Your romanized orthography is the base form of input.",display:!0,displayInPhrasebook:!0}],ShowOrthography:!1,ShowPronunciation:!0,Phonotactics:{General:{Onsets:"",Medials:"",Codas:"",Vowels:"",Illegals:""}},UseAdvancedPhonotactics:!1,AdvancedPhonotactics:{Categories:{},Syllables:[],Constructs:[{enabled:!0,structures:""}],Illegals:[]},Lects:["General"],Phrasebook:{},ShowPhrasebook:!1,Docs:{blocks:[]},FileTheme:"default",Layouts:{tabmode:"switch",positions:Ci(),ratios:Ps(),snapping:Ms(),window:yi(),opentabs:[0],showZ:!1},SaveLocation:"",UploadToDatabase:!1},Ec=kt(Qp),W=kt(structuredClone(Qp)),lt=kt([0]),fn=kt(""),Nt=kt((()=>{const o={};for(const e of Ge(W).Lects)o[e]="";return o})()),ai=kt([{definition:"",tags:"",lects:[...Ge(W).Lects]}]),Qi=kt(""),Tn=kt((()=>{const o={};for(const e of Ge(W).Lects)o[e]="";return o})()),Wi=kt(""),hi=kt(""),Ro=kt(new cs),li=kt("styles/dark.css"),pi=kt(!0),ds=kt(0),Xa=kt(!1),Go=kt(""),Ko=kt(""),Hw=require("vex-js");function zw(o,e,t){const i=Ge(W).CaseSensitive?"g":"gi";let[r,s,a]=o.split("/");e=" "+e+" ";let l=e;const c=/\{(.+?)\}/g,u=/\^|#/g,p=/\{!(.+(?:\s+.+)*)\}/g,h=/\s*,\s*/g,g=/\s+/g,f=/[∅⦰]/g,m=["∆","∇","⊂","⊃","⊆","⊇","⊄","⊅","⊈","⊉","⊊","⊋","⊍","⊎","⊏","⊐","⊑","⊒","⊓","⊔","⊕","⊖","⊗","⊘","⊙","⊚","⊛","⊜","⊝","⊞","⊟","⊠","⊡","⊢","⊣","⊤","⊥","⊦","⊧","⊨","⊩","⊪","⊫","⊬","⊭","⊮","⊯","⊰","⊱","⊲","⊳","⊴","⊵","⊶","⊷","⊸","⊹","⊺","⊻","⊼","⊽","⊾","⊿","⋀","⋁","⋂","⋃","⋄","⋇","⋈","⋉","⋊","⋋","⋌","⋍","⋎","⋏","⋐","⋑","⋒","⋓","⋔","⋕","⋖","⋗","⋘","⋙","⋚","⋛","⋜","⋝","⋞","⋟","⋠","⋡","⋢","⋣","⋤","⋥","⋦","⋧","⋨","⋩","⋪","⋫","⋬","⋭","⋮","⋯","⋰","⋱","⋲","⋳","⋴","⋵","⋶","⋷","⋸","⋹","⋺","⋻","⋼","⋽","⋾","⌁","⌂","⌃","⌄","⌅","⌆","⌇","⌈","⌉","⌊","⌋","⌑","⌒","⌓","⌔","⌕","⌖","⌗","⌘","⌙"];let L=0;r.match(c)?.forEach(C=>{t[m[L]]=C.replace(c,"$1").split(h),r=r.replace(C,m[L]),L++}),s.match(c)?.forEach(C=>{t[m[L]]=C.replace(c,"$1").split(h),s=s.replace(C,m[L]),L++}),a.match(c)?.forEach(C=>{t[m[L]]=C.replace(c,"$1").split(h),a=a.replace(C,m[L]),L++}),r=r.replaceAll(u,"\\s").replaceAll(p,"(?:(?!$1).)").replaceAll(g,""),s=s.replaceAll(g,""),a=a.replaceAll(u,"\\s").replaceAll(p,"(?:(?!$1).)").replaceAll(g,"");let _="("+a.replace("_",`)${r}(`)+")";Object.entries(t).forEach(([C,w])=>{_=_.replaceAll(C,`(?:${w.join("|")})`)});const k=r.split("").filter(C=>C in t),N=s.split("").filter(C=>C in t),H=a.split("").filter(C=>C in t);function I(C){let w=a.replaceAll("\\b",""),A=[];H.length>0&&(H.forEach(T=>{const O=C.match(new RegExp(`(?:${t[T].join("|")})`,i));A.push([T,O])}),A=[...new Set(A)].sort((T,O)=>O.length-T.length)),A.forEach(([T,O])=>{O.forEach(b=>{w=w.replace(T,b)})}),w=w.replaceAll("\\s"," ");for(const T of w.match(/\(\?:(.*)\)\?/g)?w.match(/\(\?:(.*)\)\?/g):[]){const O=T.replace(/\(\?:(.*)\)\?/g,"$1"),b=w.replace(T,O);let x="("+b.replace("_",`)${r}(`)+")";Object.entries(t).forEach(([S,B])=>{x=x.replaceAll(S,`(?:${B.join("|")})`)}),e.match(new RegExp(x,i))?w=b:w=w.replace(T,"")}for(const T of w.match(/(.|\s)\?/g)?w.match(/(.|\s)\?/g):[]){const O=T.replace(/(.|\s)\?/g,"$1"),b=w.replace(T,O);let x="("+b.replace("_",`)${r}(`)+")";Object.entries(t).forEach(([S,B])=>{x=x.replaceAll(S,`(?:${B.join("|")})`)}),e.match(new RegExp(x,i))?w=b:w=w.replace(T,"")}const R=w.replaceAll("?","").indexOf("_"),M=k[0]?a==="_"?C.length:(()=>{let T=0;return Object.entries(t).filter(([O])=>k.includes(O)).forEach(([,O])=>{const b=O.find(x=>C.includes(x));T+=b?b.length:0}),T})():r.length;return C=C.slice(R,R+M),C}const D=e.match(new RegExp(_,i));if(D&&s.includes("_")?D.forEach(C=>{const w=I(C);l=l.replace(w,s.replaceAll("_",w))}):l=l.replaceAll(new RegExp(_,i),`$1${s}$2`),N[0]&&k[0]){let C=[];D&&(C=D.map(w=>{const A=I(w),R=[A,N[k.indexOf(Object.keys(t).find(M=>t[M].some(T=>T===A&&k.includes(M))))]];return[R[0],R[1],t[R[1]][t[k[N.indexOf(R[1])]].indexOf(R[0])]?t[R[1]][t[k[N.indexOf(R[1])]].indexOf(R[0])]:R[0]]}),D.forEach((w,A)=>{l=l.replace(w.replace(C[A][0],C[A][1]),w.replace(C[A][0],C[A][2]))}))}return l.replaceAll(f,"").replaceAll("␠"," ").trim()}let xa=!1;function xr(o,e,t){let n=e;return o.forEach(i=>{try{n=zw(i,n,t)}catch(r){const s=r;console.error(`Attempted to apply rule '${i}' to '${e}'`,s),xa||(xa=!0,Hw.dialog.alert({message:`An error occurred while trying to apply rule '${i}' to '${e}'. The rule may be invalid. If you think this is a bug, please contact the developer.`,callback:()=>{xa=!1}}))}}),n}function Si(o){return{rules:o.split(/\n|;/).map(t=>t.trim()).filter(t=>t.match(/^.*(?:\/|>).*/)).map(t=>t.match(/\/.*_.*$/)?t:t.match(/\/\s*$/)?t+"_":t+"/_").map(t=>t.split(/(?:\/|>)/).map(n=>n.trim()).join("/")).filter(t=>t.match(/^.+?\/.*?\/.*?_.*?$/)||t.match(/^.*?\/.+?\/.*?_.*?$/)),categories:Object.fromEntries(o.split(`
`).map(t=>t.trim()).filter(t=>t.match(/^.*::.*$/)).map(t=>t.split("::")).map(([t,n])=>[t.trim(),n.split(",").map(i=>i.trim())]))}}const{ipcRenderer:Uw}=require("electron");async function ef(o,...e){try{return await Uw.invoke("ffi",o,...e)}catch(t){console.log(t)}}async function tf(o,e,t=100,n=100){return o?e?(t||(t=100),n||(n=100),await ef("graphemify",o,e,t,n)):"Invalid or empty input.":"No Graphemy engine loaded."}async function Cc(o,e,t){let n="";switch(o){case"legacy":return"<< error: wrong parser function >>";case"tadpole.lexc":n="lexc",t+=`
.>.`;break;case"tadpole.tadpole":n="tadpole";break}return await ef("tadpole",n,e,t)}const mt=()=>Ge(W);async function St(o,e){const t=mt().Pronunciations[e];if(mt().SoundChangeEngine==="legacy"){const n=Si(t);return xr(n.rules,o,n.categories)}return await Cc(mt().SoundChangeEngine,o,t)}async function Ns(o){Ge(Nt)[o]=await St(Ge(fn),o);const e=mt().Lexicon;for(const n in e)e[n].pronunciations.hasOwnProperty(o)&&e[n].pronunciations[o].irregular===!1&&(e[n].pronunciations[o].ipa=await St(n,o));mt().Lexicon=e,Ge(Tn)[o]=await St(Ge(Qi),o);const t=mt().Phrasebook;for(const n in t)for(const i in t[n])if(t[n][i].pronunciations.hasOwnProperty(o)){t[n][i].pronunciations[o].irregular===!1&&(t[n][i].pronunciations[o].ipa=await St(i,o));for(const r in t[n][i].variants)t[n][i].variants[r].pronunciations[o].ipa=await St(r,o)}mt().Phrasebook=t}function Ww(o){const e=()=>Math.floor(Math.random()*2)===0,t=a=>a[Math.floor(Math.random()*a.length)],n={Onsets:mt().Phonotactics.General.Onsets.split(/\s+/g),Medials:mt().Phonotactics.General.Medials.split(/\s+/g),Codas:mt().Phonotactics.General.Codas.split(/\s+/g),Vowels:mt().Phonotactics.General.Vowels.split(/\s+/g),Illegals:mt().Phonotactics.General.Illegals.split(/\s+/g)};let i="^"+o;const r=a=>(a+="^",!n.Illegals.some(l=>a.includes(l))||!n.Illegals[0]?a.replace(/\^/g,""):"");let s=!1;for(const a of n.Vowels)if(i.includes(a)&&i.lastIndexOf(a)===i.length-a.length)if(e()){i+=t(n.Medials)+t(n.Vowels),s=!0;break}else return i+=t(n.Codas),r(i);return!s&&(i+=t(n.Vowels),e())?(e()&&(i+=t(n.Codas)),r(i)):(e()?i+=t(n.Codas):(i+=t(n.Medials)+t(n.Vowels),e()&&(i+=t(n.Codas))),r(i))}async function Ja(o,e,t=null){const n=t?e.root==="rom"?o:t.pronunciations[e.lect].ipa:o;if(mt().SoundChangeEngine==="legacy"){const i=Si(e.rules);return xr(i.rules,n,i.categories)}return await Cc(mt().SoundChangeEngine,n,e.rules)}function qw(){const o=()=>{const e={Onsets:mt().Phonotactics.General.Onsets.split(/\s+/g),Medials:mt().Phonotactics.General.Medials.split(/\s+/g),Codas:mt().Phonotactics.General.Codas.split(/\s+/g),Vowels:mt().Phonotactics.General.Vowels.split(/\s+/g),Illegals:mt().Phonotactics.General.Illegals.split(/\s+/g)},t=()=>Math.floor(Math.random()*2)===0,n=r=>r[Math.floor(Math.random()*r.length)];let i="^";t()||(i+=n(e.Onsets)),i+=n(e.Vowels);for(let r=0;r<2;r++)(t()||i.length===2)&&(i+=n(e.Medials),i+=n(e.Vowels));return t()&&(i+=n(e.Codas)),i+="^",!e.Illegals.some(r=>i.includes(r))||!e.Illegals[0]?i.replace(/\^/g,""):""};for(let e=0;e<50;e++){const t=o();if(t)return t}return""}(function(){try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode(".ce-header{padding:.6em 0 3px;margin:0;line-height:1.25em;outline:none}.ce-header p,.ce-header div{padding:0!important;margin:0!important}")),document.head.appendChild(o)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Vw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 17V10.2135C19 10.1287 18.9011 10.0824 18.836 10.1367L16 12.5"/></svg>',Gw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10 19 9.5 19 12C19 13.9771 16.0684 13.9997 16.0012 16.8981C15.9999 16.9533 16.0448 17 16.1 17L19.3 17"/></svg>',Kw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10.5 16.8323 10 17.6 10C18.3677 10 19.5 10.311 19.5 11.5C19.5 12.5315 18.7474 12.9022 18.548 12.9823C18.5378 12.9864 18.5395 13.0047 18.5503 13.0063C18.8115 13.0456 20 13.3065 20 14.8C20 16 19.5 17 17.8 17C17.8 17 16 17 16 16.3"/></svg>',Yw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 10L15.2834 14.8511C15.246 14.9178 15.294 15 15.3704 15C16.8489 15 18.7561 15 20.2 15M19 17C19 15.7187 19 14.8813 19 13.6"/></svg>',Zw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 15.9C16 15.9 16.3768 17 17.8 17C19.5 17 20 15.6199 20 14.7C20 12.7323 17.6745 12.0486 16.1635 12.9894C16.094 13.0327 16 12.9846 16 12.9027V10.1C16 10.0448 16.0448 10 16.1 10H19.8"/></svg>',Xw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19.5 10C16.5 10.5 16 13.3285 16 15M16 15V15C16 16.1046 16.8954 17 18 17H18.3246C19.3251 17 20.3191 16.3492 20.2522 15.3509C20.0612 12.4958 16 12.6611 16 15Z"/></svg>',Jw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 7L9 12M9 17V12M9 12L15 12M15 7V12M15 17L15 12"/></svg>';/**
 * Header block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license MIT
 * @version 2.0.0
 */let Qa=class{constructor({data:e,config:t,api:n,readOnly:i}){this.api=n,this.readOnly=i,this._settings=t,this._data=this.normalizeData(e),this._element=this.getTag()}get _CSS(){return{block:this.api.styles.block,wrapper:"ce-header"}}isHeaderData(e){return e.text!==void 0}normalizeData(e){const t={text:"",level:this.defaultLevel.number};return this.isHeaderData(e)&&(t.text=e.text||"",e.level!==void 0&&!isNaN(parseInt(e.level.toString()))&&(t.level=parseInt(e.level.toString()))),t}render(){return this._element}renderSettings(){return this.levels.map(e=>({icon:e.svg,label:this.api.i18n.t(`Heading ${e.number}`),onActivate:()=>this.setLevel(e.number),closeOnActivate:!0,isActive:this.currentLevel.number===e.number,render:()=>document.createElement("div")}))}setLevel(e){this.data={level:e,text:this.data.text}}merge(e){this._element.insertAdjacentHTML("beforeend",e.text)}validate(e){return e.text.trim()!==""}save(e){return{text:e.innerHTML,level:this.currentLevel.number}}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{level:!1,text:{}}}static get isReadOnlySupported(){return!0}get data(){return this._data.text=this._element.innerHTML,this._data.level=this.currentLevel.number,this._data}set data(e){if(this._data=this.normalizeData(e),e.level!==void 0&&this._element.parentNode){const t=this.getTag();t.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(t,this._element),this._element=t}e.text!==void 0&&(this._element.innerHTML=this._data.text||"")}getTag(){const e=document.createElement(this.currentLevel.tag);return e.innerHTML=this._data.text||"",e.classList.add(this._CSS.wrapper),e.contentEditable=this.readOnly?"false":"true",e.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),e}get currentLevel(){let e=this.levels.find(t=>t.number===this._data.level);return e||(e=this.defaultLevel),e}get defaultLevel(){if(this._settings.defaultLevel){const e=this.levels.find(t=>t.number===this._settings.defaultLevel);if(e)return e;console.warn("(ง'̀-'́)ง Heading Tool: the default level specified was not found in available levels")}return this.levels[1]}get levels(){const e=[{number:1,tag:"H1",svg:Vw},{number:2,tag:"H2",svg:Gw},{number:3,tag:"H3",svg:Kw},{number:4,tag:"H4",svg:Yw},{number:5,tag:"H5",svg:Zw},{number:6,tag:"H6",svg:Xw}];return this._settings.levels?e.filter(t=>this._settings.levels.includes(t.number)):e}onPaste(e){const t=e.detail;if("data"in t){const n=t.data;let i=this.defaultLevel.number;switch(n.tagName){case"H1":i=1;break;case"H2":i=2;break;case"H3":i=3;break;case"H4":i=4;break;case"H5":i=5;break;case"H6":i=6;break}this._settings.levels&&(i=this._settings.levels.reduce((r,s)=>Math.abs(s-i)<Math.abs(r-i)?s:r)),this.data={level:i,text:n.innerHTML}}}static get pasteConfig(){return{tags:["H1","H2","H3","H4","H5","H6"]}}static get toolbox(){return{icon:Jw,title:"Heading"}}};(function(){try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-block:only-of-type .ce-paragraph[data-placeholder-active]:empty:before,.ce-block:only-of-type .ce-paragraph[data-placeholder-active][data-empty=true]:before{content:attr(data-placeholder-active)}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(o)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Qw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';function e1(o){const e=document.createElement("div");e.innerHTML=o.trim();const t=document.createDocumentFragment();return t.append(...Array.from(e.childNodes)),t}/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */class Sc{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:e,config:t,api:n,readOnly:i}){this.api=n,this.readOnly=i,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=t.placeholder?t.placeholder:Sc.DEFAULT_PLACEHOLDER,this._data=e??{},this._element=null,this._preserveBlank=t.preserveBlank??!1}onKeyUp(e){if(e.code!=="Backspace"&&e.code!=="Delete"||!this._element)return;const{textContent:t}=this._element;t===""&&(this._element.innerHTML="")}drawView(){const e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e.contentEditable="false",e.dataset.placeholderActive=this.api.i18n.t(this._placeholder),this._data.text&&(e.innerHTML=this._data.text),this.readOnly||(e.contentEditable="true",e.addEventListener("keyup",this.onKeyUp)),e}render(){return this._element=this.drawView(),this._element}merge(e){if(!this._element)return;this._data.text+=e.text;const t=e1(e.text);this._element.appendChild(t),this._element.normalize()}validate(e){return!(e.text.trim()===""&&!this._preserveBlank)}save(e){return{text:e.innerHTML}}onPaste(e){const t={text:e.detail.data.innerHTML};this._data=t,window.requestAnimationFrame(()=>{this._element&&(this._element.innerHTML=this._data.text||"")})}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:Qw,title:"Text"}}}(function(){var o;try{if(typeof document<"u"){var e=document.createElement("style");e.nonce=(o=document.head.querySelector("meta[property=csp-nonce]"))==null?void 0:o.content,e.appendChild(document.createTextNode('.tc-wrap{--color-background:#f9f9fb;--color-text-secondary:#7b7e89;--color-border:#e8e8eb;--cell-size:34px;--toolbox-icon-size:18px;--toolbox-padding:6px;--toolbox-aiming-field-size:calc(var(--toolbox-icon-size) + var(--toolbox-padding)*2);border-left:0;position:relative;height:100%;width:100%;margin-top:var(--toolbox-icon-size);box-sizing:border-box;display:grid;grid-template-columns:calc(100% - var(--cell-size)) var(--cell-size);z-index:0}.tc-wrap--readonly{grid-template-columns:100% var(--cell-size)}.tc-wrap svg{vertical-align:top}@media print{.tc-wrap{border-left-color:var(--color-border);border-left-style:solid;border-left-width:1px;grid-template-columns:100% var(--cell-size)}}@media print{.tc-wrap .tc-row:after{display:none}}.tc-table{position:relative;width:100%;height:100%;display:grid;font-size:14px;border-top:1px solid var(--color-border);line-height:1.4}.tc-table:after{width:calc(var(--cell-size));height:100%;left:calc(var(--cell-size)*-1);top:0}.tc-table:after,.tc-table:before{position:absolute;content:""}.tc-table:before{width:100%;height:var(--toolbox-aiming-field-size);top:calc(var(--toolbox-aiming-field-size)*-1);left:0}.tc-table--heading .tc-row:first-child{font-weight:600;border-bottom:2px solid var(--color-border);position:sticky;top:0;z-index:2;background:var(--color-background)}.tc-table--heading .tc-row:first-child [contenteditable]:empty:before{content:attr(heading);color:var(--color-text-secondary)}.tc-table--heading .tc-row:first-child:after{bottom:-2px;border-bottom:2px solid var(--color-border)}.tc-add-column,.tc-add-row{display:flex;color:var(--color-text-secondary)}@media print{.tc-add{display:none}}.tc-add-column{display:grid;border-top:1px solid var(--color-border);grid-template-columns:var(--cell-size);grid-auto-rows:var(--cell-size);place-items:center}.tc-add-column svg{padding:5px;position:sticky;top:0;background-color:var(--color-background)}.tc-add-column--disabled{visibility:hidden}@media print{.tc-add-column{display:none}}.tc-add-row{height:var(--cell-size);align-items:center;padding-left:4px;position:relative}.tc-add-row--disabled{display:none}.tc-add-row:before{content:"";position:absolute;right:calc(var(--cell-size)*-1);width:var(--cell-size);height:100%}@media print{.tc-add-row{display:none}}.tc-add-column,.tc-add-row{transition:0s;cursor:pointer;will-change:background-color}.tc-add-column:hover,.tc-add-row:hover{transition:background-color .1s ease;background-color:var(--color-background)}.tc-add-row{margin-top:1px}.tc-add-row:hover:before{transition:.1s;background-color:var(--color-background)}.tc-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(10px,1fr));position:relative;border-bottom:1px solid var(--color-border)}.tc-row:after{content:"";pointer-events:none;position:absolute;width:var(--cell-size);height:100%;bottom:-1px;right:calc(var(--cell-size)*-1);border-bottom:1px solid var(--color-border)}.tc-row--selected{background:var(--color-background)}.tc-row--selected:after{background:var(--color-background)}.tc-cell{border-right:1px solid var(--color-border);padding:6px 12px;overflow:hidden;outline:none;line-break:normal}.tc-cell--selected{background:var(--color-background)}.tc-wrap--readonly .tc-row:after{display:none}.tc-toolbox{--toolbox-padding:6px;--popover-margin:30px;--toggler-click-zone-size:30px;--toggler-dots-color:#7b7e89;--toggler-dots-color-hovered:#1d202b;position:absolute;cursor:pointer;z-index:1;opacity:0;transition:opacity .1s;will-change:left,opacity}.tc-toolbox--column{top:calc(var(--toggler-click-zone-size)*-1);transform:translate(calc(var(--toggler-click-zone-size)*-1/2));will-change:left,opacity}.tc-toolbox--row{left:calc(var(--popover-margin)*-1);transform:translateY(calc(var(--toggler-click-zone-size)*-1/2));margin-top:-1px;will-change:top,opacity}.tc-toolbox--showed{opacity:1}.tc-toolbox .tc-popover{position:absolute;top:0;left:var(--popover-margin)}.tc-toolbox__toggler{display:flex;align-items:center;justify-content:center;width:var(--toggler-click-zone-size);height:var(--toggler-click-zone-size);color:var(--toggler-dots-color);opacity:0;transition:opacity .15s ease;will-change:opacity}.tc-toolbox__toggler:hover{color:var(--toggler-dots-color-hovered)}.tc-toolbox__toggler svg{fill:currentColor}.tc-wrap:hover .tc-toolbox__toggler{opacity:1}.tc-settings .cdx-settings-button{width:50%;margin:0}.tc-popover{--color-border:#eaeaea;--color-background:#fff;--color-background-hover:rgba(232,232,235,.49);--color-background-confirm:#e24a4a;--color-background-confirm-hover:#d54040;--color-text-confirm:#fff;background:var(--color-background);border:1px solid var(--color-border);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;padding:6px;display:none;will-change:opacity,transform}.tc-popover--opened{display:block;animation:menuShowing .1s cubic-bezier(.215,.61,.355,1) forwards}.tc-popover__item{display:flex;align-items:center;padding:2px 14px 2px 2px;border-radius:5px;cursor:pointer;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tc-popover__item:hover{background:var(--color-background-hover)}.tc-popover__item:not(:last-of-type){margin-bottom:2px}.tc-popover__item-icon{display:inline-flex;width:26px;height:26px;align-items:center;justify-content:center;background:var(--color-background);border-radius:5px;border:1px solid var(--color-border);margin-right:8px}.tc-popover__item-label{line-height:22px;font-size:14px;font-weight:500}.tc-popover__item--confirm{background:var(--color-background-confirm);color:var(--color-text-confirm)}.tc-popover__item--confirm:hover{background-color:var(--color-background-confirm-hover)}.tc-popover__item--confirm .tc-popover__item-icon{background:var(--color-background-confirm);border-color:#0000001a}.tc-popover__item--confirm .tc-popover__item-icon svg{transition:transform .2s ease-in;transform:rotate(90deg) scale(1.2)}.tc-popover__item--hidden{display:none}@keyframes menuShowing{0%{opacity:0;transform:translateY(-8px) scale(.9)}70%{opacity:1;transform:translateY(2px)}to{transform:translateY(0)}}')),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();function to(o,e,t={}){const n=document.createElement(o);Array.isArray(e)?n.classList.add(...e):e&&n.classList.add(e);for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function xu(o){const e=o.getBoundingClientRect();return{y1:Math.floor(e.top+window.pageYOffset),x1:Math.floor(e.left+window.pageXOffset),x2:Math.floor(e.right+window.pageXOffset),y2:Math.floor(e.bottom+window.pageYOffset)}}function _u(o,e){const t=xu(o),n=xu(e);return{fromTopBorder:n.y1-t.y1,fromLeftBorder:n.x1-t.x1,fromRightBorder:t.x2-n.x2,fromBottomBorder:t.y2-n.y2}}function t1(o,e){const t=o.getBoundingClientRect(),{width:n,height:i,x:r,y:s}=t,{clientX:a,clientY:l}=e;return{width:n,height:i,x:a-r,y:l-s}}function Eu(o,e){return e.parentNode.insertBefore(o,e)}function Cu(o,e=!0){const t=document.createRange(),n=window.getSelection();t.selectNodeContents(o),t.collapse(e),n.removeAllRanges(),n.addRange(t)}let o1=class Jt{constructor({items:e}){this.items=e,this.wrapper=void 0,this.itemEls=[]}static get CSS(){return{popover:"tc-popover",popoverOpened:"tc-popover--opened",item:"tc-popover__item",itemHidden:"tc-popover__item--hidden",itemConfirmState:"tc-popover__item--confirm",itemIcon:"tc-popover__item-icon",itemLabel:"tc-popover__item-label"}}render(){return this.wrapper=to("div",Jt.CSS.popover),this.items.forEach((e,t)=>{const n=to("div",Jt.CSS.item),i=to("div",Jt.CSS.itemIcon,{innerHTML:e.icon}),r=to("div",Jt.CSS.itemLabel,{textContent:e.label});n.dataset.index=t,n.appendChild(i),n.appendChild(r),this.wrapper.appendChild(n),this.itemEls.push(n)}),this.wrapper.addEventListener("click",e=>{this.popoverClicked(e)}),this.wrapper}popoverClicked(e){const t=e.target.closest(`.${Jt.CSS.item}`);if(!t)return;const n=t.dataset.index,i=this.items[n];if(i.confirmationRequired&&!this.hasConfirmationState(t)){this.setConfirmationState(t);return}i.onClick()}setConfirmationState(e){e.classList.add(Jt.CSS.itemConfirmState)}clearConfirmationState(e){e.classList.remove(Jt.CSS.itemConfirmState)}hasConfirmationState(e){return e.classList.contains(Jt.CSS.itemConfirmState)}get opened(){return this.wrapper.classList.contains(Jt.CSS.popoverOpened)}open(){this.items.forEach((e,t)=>{typeof e.hideIf=="function"&&this.itemEls[t].classList.toggle(Jt.CSS.itemHidden,e.hideIf())}),this.wrapper.classList.add(Jt.CSS.popoverOpened)}close(){this.wrapper.classList.remove(Jt.CSS.popoverOpened),this.itemEls.forEach(e=>{this.clearConfirmationState(e)})}};const n1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L10 12M10 12L7 15M10 12H4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L14 12M14 12L17 15M14 12H20"/></svg>',Su='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',i1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 9.16666L18.2167 12.5M18.2167 12.5L14.8833 15.8333M18.2167 12.5H10.05C9.16594 12.5 8.31809 12.1488 7.69297 11.5237C7.06785 10.8986 6.71666 10.0507 6.71666 9.16666"/></svg>',r1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.9167 14.9167L11.5833 18.25M11.5833 18.25L8.25 14.9167M11.5833 18.25L11.5833 10.0833C11.5833 9.19928 11.9345 8.35143 12.5596 7.72631C13.1848 7.10119 14.0326 6.75 14.9167 6.75"/></svg>',s1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.13333 14.9167L12.4667 18.25M12.4667 18.25L15.8 14.9167M12.4667 18.25L12.4667 10.0833C12.4667 9.19928 12.1155 8.35143 11.4904 7.72631C10.8652 7.10119 10.0174 6.75 9.13333 6.75"/></svg>',a1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 15.8333L18.2167 12.5M18.2167 12.5L14.8833 9.16667M18.2167 12.5L10.05 12.5C9.16595 12.5 8.31811 12.8512 7.69299 13.4763C7.06787 14.1014 6.71667 14.9493 6.71667 15.8333"/></svg>',l1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.41 9.66H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 9.66H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.31 14.36H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 14.36H14.59"/></svg>',Tu='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',c1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>',d1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',u1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M14 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><path stroke="currentColor" stroke-width="2" d="M5 14H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',h1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>';let Lu=class ci{constructor({api:e,items:t,onOpen:n,onClose:i,cssModifier:r=""}){this.api=e,this.items=t,this.onOpen=n,this.onClose=i,this.cssModifier=r,this.popover=null,this.wrapper=this.createToolbox()}static get CSS(){return{toolbox:"tc-toolbox",toolboxShowed:"tc-toolbox--showed",toggler:"tc-toolbox__toggler"}}get element(){return this.wrapper}createToolbox(){const e=to("div",[ci.CSS.toolbox,this.cssModifier?`${ci.CSS.toolbox}--${this.cssModifier}`:""]);e.dataset.mutationFree="true";const t=this.createPopover(),n=this.createToggler();return e.appendChild(n),e.appendChild(t),e}createToggler(){const e=to("div",ci.CSS.toggler,{innerHTML:l1});return e.addEventListener("click",()=>{this.togglerClicked()}),e}createPopover(){return this.popover=new o1({items:this.items}),this.popover.render()}togglerClicked(){this.popover.opened?(this.popover.close(),this.onClose()):(this.popover.open(),this.onOpen())}show(e){const t=e();Object.entries(t).forEach(([n,i])=>{this.wrapper.style[n]=i}),this.wrapper.classList.add(ci.CSS.toolboxShowed)}hide(){this.popover.close(),this.wrapper.classList.remove(ci.CSS.toolboxShowed)}};function p1(o,e){let t=0;return function(...n){const i=new Date().getTime();if(!(i-t<o))return t=i,e(...n)}}const De={wrapper:"tc-wrap",wrapperReadOnly:"tc-wrap--readonly",table:"tc-table",row:"tc-row",withHeadings:"tc-table--heading",rowSelected:"tc-row--selected",cell:"tc-cell",cellSelected:"tc-cell--selected",addRow:"tc-add-row",addRowDisabled:"tc-add-row--disabled",addColumn:"tc-add-column",addColumnDisabled:"tc-add-column--disabled"};let f1=class{constructor(e,t,n,i){this.readOnly=e,this.api=t,this.data=n,this.config=i,this.wrapper=null,this.table=null,this.toolboxColumn=this.createColumnToolbox(),this.toolboxRow=this.createRowToolbox(),this.createTableWrapper(),this.hoveredRow=0,this.hoveredColumn=0,this.selectedRow=0,this.selectedColumn=0,this.tunes={withHeadings:!1},this.resize(),this.fill(),this.focusedCell={row:0,column:0},this.documentClicked=r=>{const s=r.target.closest(`.${De.table}`)!==null,a=r.target.closest(`.${De.wrapper}`)===null;(s||a)&&this.hideToolboxes();const l=r.target.closest(`.${De.addRow}`),c=r.target.closest(`.${De.addColumn}`);l&&l.parentNode===this.wrapper?(this.addRow(void 0,!0),this.hideToolboxes()):c&&c.parentNode===this.wrapper&&(this.addColumn(void 0,!0),this.hideToolboxes())},this.readOnly||this.bindEvents()}getWrapper(){return this.wrapper}bindEvents(){document.addEventListener("click",this.documentClicked),this.table.addEventListener("mousemove",p1(150,e=>this.onMouseMoveInTable(e)),{passive:!0}),this.table.onkeypress=e=>this.onKeyPressListener(e),this.table.addEventListener("keydown",e=>this.onKeyDownListener(e)),this.table.addEventListener("focusin",e=>this.focusInTableListener(e))}createColumnToolbox(){return new Lu({api:this.api,cssModifier:"column",items:[{label:this.api.i18n.t("Add column to left"),icon:r1,hideIf:()=>this.numberOfColumns===this.config.maxcols,onClick:()=>{this.addColumn(this.selectedColumn,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add column to right"),icon:s1,hideIf:()=>this.numberOfColumns===this.config.maxcols,onClick:()=>{this.addColumn(this.selectedColumn+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete column"),icon:Su,hideIf:()=>this.numberOfColumns===1,confirmationRequired:!0,onClick:()=>{this.deleteColumn(this.selectedColumn),this.hideToolboxes()}}],onOpen:()=>{this.selectColumn(this.hoveredColumn),this.hideRowToolbox()},onClose:()=>{this.unselectColumn()}})}createRowToolbox(){return new Lu({api:this.api,cssModifier:"row",items:[{label:this.api.i18n.t("Add row above"),icon:a1,hideIf:()=>this.numberOfRows===this.config.maxrows,onClick:()=>{this.addRow(this.selectedRow,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add row below"),icon:i1,hideIf:()=>this.numberOfRows===this.config.maxrows,onClick:()=>{this.addRow(this.selectedRow+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete row"),icon:Su,hideIf:()=>this.numberOfRows===1,confirmationRequired:!0,onClick:()=>{this.deleteRow(this.selectedRow),this.hideToolboxes()}}],onOpen:()=>{this.selectRow(this.hoveredRow),this.hideColumnToolbox()},onClose:()=>{this.unselectRow()}})}moveCursorToNextRow(){this.focusedCell.row!==this.numberOfRows?(this.focusedCell.row+=1,this.focusCell(this.focusedCell)):(this.addRow(),this.focusedCell.row+=1,this.focusCell(this.focusedCell),this.updateToolboxesPosition(0,0))}getCell(e,t){return this.table.querySelectorAll(`.${De.row}:nth-child(${e}) .${De.cell}`)[t-1]}getRow(e){return this.table.querySelector(`.${De.row}:nth-child(${e})`)}getRowByCell(e){return e.parentElement}getRowFirstCell(e){return e.querySelector(`.${De.cell}:first-child`)}setCellContent(e,t,n){const i=this.getCell(e,t);i.innerHTML=n}addColumn(e=-1,t=!1){var n;let i=this.numberOfColumns;if(this.config&&this.config.maxcols&&this.numberOfColumns>=this.config.maxcols)return;for(let s=1;s<=this.numberOfRows;s++){let a;const l=this.createCell();if(e>0&&e<=i?(a=this.getCell(s,e),Eu(l,a)):a=this.getRow(s).appendChild(l),s===1){const c=this.getCell(s,e>0?e:i+1);c&&t&&Cu(c)}}const r=this.wrapper.querySelector(`.${De.addColumn}`);(n=this.config)!=null&&n.maxcols&&this.numberOfColumns>this.config.maxcols-1&&r&&r.classList.add(De.addColumnDisabled),this.addHeadingAttrToFirstRow()}addRow(e=-1,t=!1){let n,i=to("div",De.row);this.tunes.withHeadings&&this.removeHeadingAttrFromFirstRow();let r=this.numberOfColumns;if(this.config&&this.config.maxrows&&this.numberOfRows>=this.config.maxrows&&a)return;if(e>0&&e<=this.numberOfRows){let l=this.getRow(e);n=Eu(i,l)}else n=this.table.appendChild(i);this.fillRow(n,r),this.tunes.withHeadings&&this.addHeadingAttrToFirstRow();const s=this.getRowFirstCell(n);s&&t&&Cu(s);const a=this.wrapper.querySelector(`.${De.addRow}`);return this.config&&this.config.maxrows&&this.numberOfRows>=this.config.maxrows&&a&&a.classList.add(De.addRowDisabled),n}deleteColumn(e){for(let n=1;n<=this.numberOfRows;n++){const i=this.getCell(n,e);if(!i)return;i.remove()}const t=this.wrapper.querySelector(`.${De.addColumn}`);t&&t.classList.remove(De.addColumnDisabled)}deleteRow(e){this.getRow(e).remove();const t=this.wrapper.querySelector(`.${De.addRow}`);t&&t.classList.remove(De.addRowDisabled),this.addHeadingAttrToFirstRow()}createTableWrapper(){if(this.wrapper=to("div",De.wrapper),this.table=to("div",De.table),this.readOnly&&this.wrapper.classList.add(De.wrapperReadOnly),this.wrapper.appendChild(this.toolboxRow.element),this.wrapper.appendChild(this.toolboxColumn.element),this.wrapper.appendChild(this.table),!this.readOnly){const e=to("div",De.addColumn,{innerHTML:Tu}),t=to("div",De.addRow,{innerHTML:Tu});this.wrapper.appendChild(e),this.wrapper.appendChild(t)}}computeInitialSize(){const e=this.data&&this.data.content,t=Array.isArray(e),n=t?e.length:!1,i=t?e.length:void 0,r=n?e[0].length:void 0,s=Number.parseInt(this.config&&this.config.rows),a=Number.parseInt(this.config&&this.config.cols),l=!isNaN(s)&&s>0?s:void 0,c=!isNaN(a)&&a>0?a:void 0;return{rows:i||l||2,cols:r||c||2}}resize(){const{rows:e,cols:t}=this.computeInitialSize();for(let n=0;n<e;n++)this.addRow();for(let n=0;n<t;n++)this.addColumn()}fill(){const e=this.data;if(e&&e.content)for(let t=0;t<e.content.length;t++)for(let n=0;n<e.content[t].length;n++)this.setCellContent(t+1,n+1,e.content[t][n])}fillRow(e,t){for(let n=1;n<=t;n++){const i=this.createCell();e.appendChild(i)}}createCell(){return to("div",De.cell,{contentEditable:!this.readOnly})}get numberOfRows(){return this.table.childElementCount}get numberOfColumns(){return this.numberOfRows?this.table.querySelectorAll(`.${De.row}:first-child .${De.cell}`).length:0}get isColumnMenuShowing(){return this.selectedColumn!==0}get isRowMenuShowing(){return this.selectedRow!==0}onMouseMoveInTable(e){const{row:t,column:n}=this.getHoveredCell(e);this.hoveredColumn=n,this.hoveredRow=t,this.updateToolboxesPosition()}onKeyPressListener(e){if(e.key==="Enter"){if(e.shiftKey)return!0;this.moveCursorToNextRow()}return e.key!=="Enter"}onKeyDownListener(e){e.key==="Tab"&&e.stopPropagation()}focusInTableListener(e){const t=e.target,n=this.getRowByCell(t);this.focusedCell={row:Array.from(this.table.querySelectorAll(`.${De.row}`)).indexOf(n)+1,column:Array.from(n.querySelectorAll(`.${De.cell}`)).indexOf(t)+1}}hideToolboxes(){this.hideRowToolbox(),this.hideColumnToolbox(),this.updateToolboxesPosition()}hideRowToolbox(){this.unselectRow(),this.toolboxRow.hide()}hideColumnToolbox(){this.unselectColumn(),this.toolboxColumn.hide()}focusCell(){this.focusedCellElem.focus()}get focusedCellElem(){const{row:e,column:t}=this.focusedCell;return this.getCell(e,t)}updateToolboxesPosition(e=this.hoveredRow,t=this.hoveredColumn){this.isColumnMenuShowing||t>0&&t<=this.numberOfColumns&&this.toolboxColumn.show(()=>({left:`calc((100% - var(--cell-size)) / (${this.numberOfColumns} * 2) * (1 + (${t} - 1) * 2))`})),this.isRowMenuShowing||e>0&&e<=this.numberOfRows&&this.toolboxRow.show(()=>{const n=this.getRow(e),{fromTopBorder:i}=_u(this.table,n),{height:r}=n.getBoundingClientRect();return{top:`${Math.ceil(i+r/2)}px`}})}setHeadingsSetting(e){this.tunes.withHeadings=e,e?(this.table.classList.add(De.withHeadings),this.addHeadingAttrToFirstRow()):(this.table.classList.remove(De.withHeadings),this.removeHeadingAttrFromFirstRow())}addHeadingAttrToFirstRow(){for(let e=1;e<=this.numberOfColumns;e++){let t=this.getCell(1,e);t&&t.setAttribute("heading",this.api.i18n.t("Heading"))}}removeHeadingAttrFromFirstRow(){for(let e=1;e<=this.numberOfColumns;e++){let t=this.getCell(1,e);t&&t.removeAttribute("heading")}}selectRow(e){const t=this.getRow(e);t&&(this.selectedRow=e,t.classList.add(De.rowSelected))}unselectRow(){if(this.selectedRow<=0)return;const e=this.table.querySelector(`.${De.rowSelected}`);e&&e.classList.remove(De.rowSelected),this.selectedRow=0}selectColumn(e){for(let t=1;t<=this.numberOfRows;t++){const n=this.getCell(t,e);n&&n.classList.add(De.cellSelected)}this.selectedColumn=e}unselectColumn(){if(this.selectedColumn<=0)return;let e=this.table.querySelectorAll(`.${De.cellSelected}`);Array.from(e).forEach(t=>{t.classList.remove(De.cellSelected)}),this.selectedColumn=0}getHoveredCell(e){let t=this.hoveredRow,n=this.hoveredColumn;const{width:i,height:r,x:s,y:a}=t1(this.table,e);return s>=0&&(n=this.binSearch(this.numberOfColumns,l=>this.getCell(1,l),({fromLeftBorder:l})=>s<l,({fromRightBorder:l})=>s>i-l)),a>=0&&(t=this.binSearch(this.numberOfRows,l=>this.getCell(l,1),({fromTopBorder:l})=>a<l,({fromBottomBorder:l})=>a>r-l)),{row:t||this.hoveredRow,column:n||this.hoveredColumn}}binSearch(e,t,n,i){let r=0,s=e+1,a=0,l;for(;r<s-1&&a<10;){l=Math.ceil((r+s)/2);const c=t(l),u=_u(this.table,c);if(n(u))s=l;else if(i(u))r=l;else break;a++}return l}getData(){const e=[];for(let t=1;t<=this.numberOfRows;t++){const n=this.table.querySelector(`.${De.row}:nth-child(${t})`),i=Array.from(n.querySelectorAll(`.${De.cell}`));i.every(r=>!r.textContent.trim())||e.push(i.map(r=>r.innerHTML))}return e}destroy(){document.removeEventListener("click",this.documentClicked)}},el=class{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}constructor({data:e,config:t,api:n,readOnly:i,block:r}){this.api=n,this.readOnly=i,this.config=t,this.data={withHeadings:this.getConfig("withHeadings",!1,e),stretched:this.getConfig("stretched",!1,e),content:e&&e.content?e.content:[]},this.table=null,this.block=r}static get toolbox(){return{icon:h1,title:"Table"}}render(){return this.table=new f1(this.readOnly,this.api,this.data,this.config),this.container=to("div",this.api.styles.block),this.container.appendChild(this.table.getWrapper()),this.table.setHeadingsSetting(this.data.withHeadings),this.container}renderSettings(){return[{label:this.api.i18n.t("With headings"),icon:d1,isActive:this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!0,this.table.setHeadingsSetting(this.data.withHeadings)}},{label:this.api.i18n.t("Without headings"),icon:u1,isActive:!this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!1,this.table.setHeadingsSetting(this.data.withHeadings)}},{label:this.data.stretched?this.api.i18n.t("Collapse"):this.api.i18n.t("Stretch"),icon:this.data.stretched?n1:c1,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.stretched=!this.data.stretched,this.block.stretched=this.data.stretched}}]}save(){const e=this.table.getData();return{withHeadings:this.data.withHeadings,stretched:this.data.stretched,content:e}}destroy(){this.table.destroy()}getConfig(e,t=void 0,n=void 0){const i=this.data||n;return i?i[e]?i[e]:t:this.config&&this.config[e]?this.config[e]:t}static get pasteConfig(){return{tags:["TABLE","TR","TH","TD"]}}onPaste(e){const t=e.detail.data,n=t.querySelector(":scope > thead, tr:first-of-type th"),i=Array.from(t.querySelectorAll("tr")).map(r=>Array.from(r.querySelectorAll("th, td")).map(s=>s.innerHTML));this.data={withHeadings:n!==null,content:i},this.table.wrapper&&this.table.wrapper.replaceWith(this.render())}};(function(){try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode(".cdx-underline{text-decoration:underline}")),document.head.appendChild(o)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const g1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7.5V11.5C9 12.2956 9.31607 13.0587 9.87868 13.6213C10.4413 14.1839 11.2044 14.5 12 14.5C12.7956 14.5 13.5587 14.1839 14.1213 13.6213C14.6839 13.0587 15 12.2956 15 11.5V7.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7.71429 18H16.2857"/></svg>',of=class er{constructor(e){this.tag="U",this.api=e.api,this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}static get CSS(){return"cdx-underline"}render(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}surround(e){if(!e)return;const t=this.api.selection.findParentTag(this.tag,er.CSS);t?this.unwrap(t):this.wrap(e)}wrap(e){const t=document.createElement(this.tag);t.classList.add(er.CSS),t.appendChild(e.extractContents()),e.insertNode(t),this.api.selection.expandToTag(t)}unwrap(e){var t;this.api.selection.expandToTag(e);const n=window.getSelection();if(!n)return;const i=n.getRangeAt(0);if(!i)return;const r=i.extractContents();r&&((t=e.parentNode)==null||t.removeChild(e),i.insertNode(r),n.removeAllRanges(),n.addRange(i))}checkState(){var e;const t=this.api.selection.findParentTag(this.tag,er.CSS);return(e=this.button)==null||e.classList.toggle(this.iconClasses.active,!!t),!!t}get toolboxIcon(){return g1}static get sanitize(){return{u:{class:er.CSS}}}};of.isInline=!0;let tl=of;(function(){try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode('.cdx-list{margin:0;padding:0;outline:none;display:grid;counter-reset:item;gap:var(--spacing-s);padding:var(--spacing-xs);--spacing-s: 8px;--spacing-xs: 6px;--list-counter-type: numeric;--radius-border: 5px;--checkbox-background: #fff;--color-border: #C9C9C9;--color-bg-checked: #369FFF;--line-height: 1.45em;--color-bg-checked-hover: #0059AB;--color-tick: #fff;--size-checkbox: 1.2em}.cdx-list__item{line-height:var(--line-height);display:grid;grid-template-columns:auto 1fr;grid-template-rows:auto auto;grid-template-areas:"checkbox content" ". child"}.cdx-list__item-children{display:grid;grid-area:child;gap:var(--spacing-s);padding-top:var(--spacing-s)}.cdx-list__item [contenteditable]{outline:none}.cdx-list__item-content{word-break:break-word;white-space:pre-wrap;grid-area:content;padding-left:var(--spacing-s)}.cdx-list__item:before{counter-increment:item;white-space:nowrap}.cdx-list-ordered .cdx-list__item:before{content:counters(item,".",var(--list-counter-type)) "."}.cdx-list-ordered{counter-reset:item}.cdx-list-unordered .cdx-list__item:before{content:"•"}.cdx-list-checklist .cdx-list__item:before{content:""}.cdx-list__settings .cdx-settings-button{width:50%}.cdx-list__checkbox{padding-top:calc((var(--line-height) - var(--size-checkbox)) / 2);grid-area:checkbox;width:var(--size-checkbox);height:var(--size-checkbox);display:flex;cursor:pointer}.cdx-list__checkbox svg{opacity:0;height:var(--size-checkbox);width:var(--size-checkbox);left:-1px;top:-1px;position:absolute}@media (hover: hover){.cdx-list__checkbox:not(.cdx-list__checkbox--no-hover):hover .cdx-list__checkbox-check svg{opacity:1}}.cdx-list__checkbox--checked{line-height:var(--line-height)}@media (hover: hover){.cdx-list__checkbox--checked:not(.cdx-list__checkbox--checked--no-hover):hover .cdx-checklist__checkbox-check{background:var(--color-bg-checked-hover);border-color:var(--color-bg-checked-hover)}}.cdx-list__checkbox--checked .cdx-list__checkbox-check{background:var(--color-bg-checked);border-color:var(--color-bg-checked)}.cdx-list__checkbox--checked .cdx-list__checkbox-check svg{opacity:1}.cdx-list__checkbox--checked .cdx-list__checkbox-check svg path{stroke:var(--color-tick)}.cdx-list__checkbox--checked .cdx-list__checkbox-check:before{opacity:0;visibility:visible;transform:scale(2.5)}.cdx-list__checkbox-check{cursor:pointer;display:inline-block;position:relative;margin:0 auto;width:var(--size-checkbox);height:var(--size-checkbox);box-sizing:border-box;border-radius:var(--radius-border);border:1px solid var(--color-border);background:var(--checkbox-background)}.cdx-list__checkbox-check:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;border-radius:100%;background-color:var(--color-bg-checked);visibility:hidden;pointer-events:none;transform:scale(1);transition:transform .4s ease-out,opacity .4s}.cdx-list-start-with-field{background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-list-start-with-field--invalid{background:#FFECED;border:1px solid #E13F3F}.cdx-list-start-with-field--invalid .cdx-list-start-with-field__input{color:#e13f3f}.cdx-list-start-with-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - var(--toolbox-buttons-size) - var(--icon-margin-right))}.cdx-list-start-with-field__input::placeholder{color:var(--grayText);font-weight:500}')),document.head.appendChild(o)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const v1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 12L10.4884 15.8372C10.5677 15.9245 10.705 15.9245 10.7844 15.8372L17 9"/></svg>',Bu='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.2 12L11.0586 13.8586C11.1367 13.9367 11.2633 13.9367 11.3414 13.8586L14.7 10.5"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',Ou='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>',Iu='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>',m1='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 14.2L10 7.4135C10 7.32872 9.90111 7.28241 9.83598 7.33668L7 9.7" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',b1='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 14.2L10 9.5" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 7.01L10 7" stroke="black" stroke-width="1.8" stroke-linecap="round"/></svg>',y1='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 14.2L10 7.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',w1='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.0087 14.2H16" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M7 14.2L7.78865 12M13 14.2L12.1377 12M7.78865 12C7.78865 12 9.68362 7 10 7C10.3065 7 12.1377 12 12.1377 12M7.78865 12L12.1377 12" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',k1='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.2087 14.2H14.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M11.5 14.5C11.5 14.5 11 13.281 11 12.5M7 9.5C7 9.5 7.5 8.5 9 8.5C10.5 8.5 11 9.5 11 10.5L11 11.5M11 11.5L11 12.5M11 11.5C11 11.5 7 11 7 13C7 15.3031 11 15 11 12.5" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',x1='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 14.2L8 7.4135C8 7.32872 7.90111 7.28241 7.83598 7.33668L5 9.7" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M14 13L16.4167 10.7778M16.4167 10.7778L14 8.5M16.4167 10.7778H11.6562" stroke="black" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>';var us=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _1(o){if(o.__esModule)return o;var e=o.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(o).forEach(function(n){var i=Object.getOwnPropertyDescriptor(o,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return o[n]}})}),t}var tt={},Tc={},Lc={};Object.defineProperty(Lc,"__esModule",{value:!0});Lc.allInputsSelector=E1;function E1(){var o=["text","password","email","number","search","tel","url"];return"[contenteditable=true], textarea, input:not([type]), "+o.map(function(e){return'input[type="'.concat(e,'"]')}).join(", ")}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.allInputsSelector=void 0;var e=Lc;Object.defineProperty(o,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}})})(Tc);var Kn={},Bc={};Object.defineProperty(Bc,"__esModule",{value:!0});Bc.isNativeInput=C1;function C1(o){var e=["INPUT","TEXTAREA"];return o&&o.tagName?e.includes(o.tagName):!1}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isNativeInput=void 0;var e=Bc;Object.defineProperty(o,"isNativeInput",{enumerable:!0,get:function(){return e.isNativeInput}})})(Kn);var nf={},Oc={};Object.defineProperty(Oc,"__esModule",{value:!0});Oc.append=S1;function S1(o,e){Array.isArray(e)?e.forEach(function(t){o.appendChild(t)}):o.appendChild(e)}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.append=void 0;var e=Oc;Object.defineProperty(o,"append",{enumerable:!0,get:function(){return e.append}})})(nf);var Ic={},Ac={};Object.defineProperty(Ac,"__esModule",{value:!0});Ac.blockElements=T1;function T1(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.blockElements=void 0;var e=Ac;Object.defineProperty(o,"blockElements",{enumerable:!0,get:function(){return e.blockElements}})})(Ic);var rf={},Pc={};Object.defineProperty(Pc,"__esModule",{value:!0});Pc.calculateBaseline=L1;function L1(o){var e=window.getComputedStyle(o),t=parseFloat(e.fontSize),n=parseFloat(e.lineHeight)||t*1.2,i=parseFloat(e.paddingTop),r=parseFloat(e.borderTopWidth),s=parseFloat(e.marginTop),a=t*.8,l=(n-t)/2,c=s+r+i+l+a;return c}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.calculateBaseline=void 0;var e=Pc;Object.defineProperty(o,"calculateBaseline",{enumerable:!0,get:function(){return e.calculateBaseline}})})(rf);var sf={},Mc={},Nc={},$c={};Object.defineProperty($c,"__esModule",{value:!0});$c.isContentEditable=B1;function B1(o){return o.contentEditable==="true"}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isContentEditable=void 0;var e=$c;Object.defineProperty(o,"isContentEditable",{enumerable:!0,get:function(){return e.isContentEditable}})})(Nc);Object.defineProperty(Mc,"__esModule",{value:!0});Mc.canSetCaret=A1;var O1=Kn,I1=Nc;function A1(o){var e=!0;if((0,O1.isNativeInput)(o))switch(o.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":e=!1;break}else e=(0,I1.isContentEditable)(o);return e}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.canSetCaret=void 0;var e=Mc;Object.defineProperty(o,"canSetCaret",{enumerable:!0,get:function(){return e.canSetCaret}})})(sf);var $s={},Rc={};function P1(o,e,t){const n=t.value!==void 0?"value":"get",i=t[n],r=`#${e}Cache`;if(t[n]=function(...s){return this[r]===void 0&&(this[r]=i.apply(this,s)),this[r]},n==="get"&&t.set){const s=t.set;t.set=function(a){delete o[r],s.apply(this,a)}}return t}function af(){const o={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(o).find(t=>window.navigator.appVersion.toLowerCase().indexOf(t)!==-1);return e!==void 0&&(o[e]=!0),o}function Dc(o){return o!=null&&o!==""&&(typeof o!="object"||Object.keys(o).length>0)}function M1(o){return!Dc(o)}const N1=()=>typeof window<"u"&&window.navigator!==null&&Dc(window.navigator.platform)&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function $1(o){const e=af();return o=o.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi,"+"),e.mac?o=o.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):o=o.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),o}function R1(o){return o[0].toUpperCase()+o.slice(1)}function D1(o){const e=document.createElement("div");e.style.position="absolute",e.style.left="-999px",e.style.bottom="-999px",e.innerHTML=o,document.body.appendChild(e);const t=window.getSelection(),n=document.createRange();if(n.selectNode(e),t===null)throw new Error("Cannot copy text to clipboard");t.removeAllRanges(),t.addRange(n),document.execCommand("copy"),document.body.removeChild(e)}function j1(o,e,t){let n;return(...i)=>{const r=this,s=()=>{n=void 0,t!==!0&&o.apply(r,i)},a=t===!0&&n!==void 0;window.clearTimeout(n),n=window.setTimeout(s,e),a&&o.apply(r,i)}}function bn(o){return Object.prototype.toString.call(o).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function F1(o){return bn(o)==="boolean"}function lf(o){return bn(o)==="function"||bn(o)==="asyncfunction"}function H1(o){return lf(o)&&/^\s*class\s+/.test(o.toString())}function z1(o){return bn(o)==="number"}function Kr(o){return bn(o)==="object"}function U1(o){return Promise.resolve(o)===o}function W1(o){return bn(o)==="string"}function q1(o){return bn(o)==="undefined"}function ol(o,...e){if(!e.length)return o;const t=e.shift();if(Kr(o)&&Kr(t))for(const n in t)Kr(t[n])?(o[n]===void 0&&Object.assign(o,{[n]:{}}),ol(o[n],t[n])):Object.assign(o,{[n]:t[n]});return ol(o,...e)}function V1(o,e,t){const n=`«${e}» is deprecated and will be removed in the next major release. Please use the «${t}» instead.`;o&&console.warn(n)}function G1(o){try{return new URL(o).href}catch{}return o.substring(0,2)==="//"?window.location.protocol+o:window.location.origin+o}function K1(o){return o>47&&o<58||o===32||o===13||o===229||o>64&&o<91||o>95&&o<112||o>185&&o<193||o>218&&o<223}const Y1={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},Z1={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};class X1{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((t,n)=>{this.completed=this.completed.then(e).then(t).catch(n)})}}function J1(o,e,t=void 0){let n,i,r,s=null,a=0;t||(t={});const l=function(){a=t.leading===!1?0:Date.now(),s=null,r=o.apply(n,i),s===null&&(n=i=null)};return function(){const c=Date.now();!a&&t.leading===!1&&(a=c);const u=e-(c-a);return n=this,i=arguments,u<=0||u>e?(s&&(clearTimeout(s),s=null),a=c,r=o.apply(n,i),s===null&&(n=i=null)):!s&&t.trailing!==!1&&(s=setTimeout(l,u)),r}}const Q1=Object.freeze(Object.defineProperty({__proto__:null,PromiseQueue:X1,beautifyShortcut:$1,cacheable:P1,capitalize:R1,copyTextToClipboard:D1,debounce:j1,deepMerge:ol,deprecationAssert:V1,getUserOS:af,getValidUrl:G1,isBoolean:F1,isClass:H1,isEmpty:M1,isFunction:lf,isIosDevice:N1,isNumber:z1,isObject:Kr,isPrintableKey:K1,isPromise:U1,isString:W1,isUndefined:q1,keyCodes:Y1,mouseButtons:Z1,notEmpty:Dc,throttle:J1,typeOf:bn},Symbol.toStringTag,{value:"Module"})),jc=_1(Q1);Object.defineProperty(Rc,"__esModule",{value:!0});Rc.containsOnlyInlineElements=ok;var ek=jc,tk=Ic;function ok(o){var e;(0,ek.isString)(o)?(e=document.createElement("div"),e.innerHTML=o):e=o;var t=function(n){return!(0,tk.blockElements)().includes(n.tagName.toLowerCase())&&Array.from(n.children).every(t)};return Array.from(e.children).every(t)}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.containsOnlyInlineElements=void 0;var e=Rc;Object.defineProperty(o,"containsOnlyInlineElements",{enumerable:!0,get:function(){return e.containsOnlyInlineElements}})})($s);var cf={},Fc={},Rs={},Hc={};Object.defineProperty(Hc,"__esModule",{value:!0});Hc.make=nk;function nk(o,e,t){var n;e===void 0&&(e=null),t===void 0&&(t={});var i=document.createElement(o);if(Array.isArray(e)){var r=e.filter(function(a){return a!==void 0});(n=i.classList).add.apply(n,r)}else e!==null&&i.classList.add(e);for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s]);return i}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.make=void 0;var e=Hc;Object.defineProperty(o,"make",{enumerable:!0,get:function(){return e.make}})})(Rs);Object.defineProperty(Fc,"__esModule",{value:!0});Fc.fragmentToString=rk;var ik=Rs;function rk(o){var e=(0,ik.make)("div");return e.appendChild(o),e.innerHTML}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.fragmentToString=void 0;var e=Fc;Object.defineProperty(o,"fragmentToString",{enumerable:!0,get:function(){return e.fragmentToString}})})(cf);var df={},zc={};Object.defineProperty(zc,"__esModule",{value:!0});zc.getContentLength=ak;var sk=Kn;function ak(o){var e,t;return(0,sk.isNativeInput)(o)?o.value.length:o.nodeType===Node.TEXT_NODE?o.length:(t=(e=o.textContent)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.getContentLength=void 0;var e=zc;Object.defineProperty(o,"getContentLength",{enumerable:!0,get:function(){return e.getContentLength}})})(df);var Uc={},Wc={},Au=us&&us.__spreadArray||function(o,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,r;n<i;n++)(r||!(n in e))&&(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return o.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(Wc,"__esModule",{value:!0});Wc.getDeepestBlockElements=uf;var lk=$s;function uf(o){return(0,lk.containsOnlyInlineElements)(o)?[o]:Array.from(o.children).reduce(function(e,t){return Au(Au([],e,!0),uf(t),!0)},[])}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.getDeepestBlockElements=void 0;var e=Wc;Object.defineProperty(o,"getDeepestBlockElements",{enumerable:!0,get:function(){return e.getDeepestBlockElements}})})(Uc);var hf={},qc={},Ds={},Vc={};Object.defineProperty(Vc,"__esModule",{value:!0});Vc.isLineBreakTag=ck;function ck(o){return["BR","WBR"].includes(o.tagName)}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isLineBreakTag=void 0;var e=Vc;Object.defineProperty(o,"isLineBreakTag",{enumerable:!0,get:function(){return e.isLineBreakTag}})})(Ds);var js={},Gc={};Object.defineProperty(Gc,"__esModule",{value:!0});Gc.isSingleTag=dk;function dk(o){return["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(o.tagName)}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isSingleTag=void 0;var e=Gc;Object.defineProperty(o,"isSingleTag",{enumerable:!0,get:function(){return e.isSingleTag}})})(js);Object.defineProperty(qc,"__esModule",{value:!0});qc.getDeepestNode=pf;var uk=Kn,hk=Ds,pk=js;function pf(o,e){e===void 0&&(e=!1);var t=e?"lastChild":"firstChild",n=e?"previousSibling":"nextSibling";if(o.nodeType===Node.ELEMENT_NODE&&o[t]){var i=o[t];if((0,pk.isSingleTag)(i)&&!(0,uk.isNativeInput)(i)&&!(0,hk.isLineBreakTag)(i))if(i[n])i=i[n];else if(i.parentNode!==null&&i.parentNode[n])i=i.parentNode[n];else return i.parentNode;return pf(i,e)}return o}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.getDeepestNode=void 0;var e=qc;Object.defineProperty(o,"getDeepestNode",{enumerable:!0,get:function(){return e.getDeepestNode}})})(hf);var ff={},Kc={},Dr=us&&us.__spreadArray||function(o,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,r;n<i;n++)(r||!(n in e))&&(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return o.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(Kc,"__esModule",{value:!0});Kc.findAllInputs=bk;var fk=$s,gk=Uc,vk=Tc,mk=Kn;function bk(o){return Array.from(o.querySelectorAll((0,vk.allInputsSelector)())).reduce(function(e,t){return(0,mk.isNativeInput)(t)||(0,fk.containsOnlyInlineElements)(t)?Dr(Dr([],e,!0),[t],!1):Dr(Dr([],e,!0),(0,gk.getDeepestBlockElements)(t),!0)},[])}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.findAllInputs=void 0;var e=Kc;Object.defineProperty(o,"findAllInputs",{enumerable:!0,get:function(){return e.findAllInputs}})})(ff);var gf={},Yc={};Object.defineProperty(Yc,"__esModule",{value:!0});Yc.isCollapsedWhitespaces=yk;function yk(o){return!/[^\t\n\r ]/.test(o)}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isCollapsedWhitespaces=void 0;var e=Yc;Object.defineProperty(o,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return e.isCollapsedWhitespaces}})})(gf);var Zc={},Xc={};Object.defineProperty(Xc,"__esModule",{value:!0});Xc.isElement=kk;var wk=jc;function kk(o){return(0,wk.isNumber)(o)?!1:!!o&&!!o.nodeType&&o.nodeType===Node.ELEMENT_NODE}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isElement=void 0;var e=Xc;Object.defineProperty(o,"isElement",{enumerable:!0,get:function(){return e.isElement}})})(Zc);var vf={},Jc={},Qc={},ed={};Object.defineProperty(ed,"__esModule",{value:!0});ed.isLeaf=xk;function xk(o){return o===null?!1:o.childNodes.length===0}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isLeaf=void 0;var e=ed;Object.defineProperty(o,"isLeaf",{enumerable:!0,get:function(){return e.isLeaf}})})(Qc);var td={},od={};Object.defineProperty(od,"__esModule",{value:!0});od.isNodeEmpty=Tk;var _k=Ds,Ek=Zc,Ck=Kn,Sk=js;function Tk(o,e){var t="";return(0,Sk.isSingleTag)(o)&&!(0,_k.isLineBreakTag)(o)?!1:((0,Ek.isElement)(o)&&(0,Ck.isNativeInput)(o)?t=o.value:o.textContent!==null&&(t=o.textContent.replace("​","")),e!==void 0&&(t=t.replace(new RegExp(e,"g"),"")),t.trim().length===0)}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isNodeEmpty=void 0;var e=od;Object.defineProperty(o,"isNodeEmpty",{enumerable:!0,get:function(){return e.isNodeEmpty}})})(td);Object.defineProperty(Jc,"__esModule",{value:!0});Jc.isEmpty=Ok;var Lk=Qc,Bk=td;function Ok(o,e){o.normalize();for(var t=[o];t.length>0;){var n=t.shift();if(n){if(o=n,(0,Lk.isLeaf)(o)&&!(0,Bk.isNodeEmpty)(o,e))return!1;t.push.apply(t,Array.from(o.childNodes))}}return!0}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isEmpty=void 0;var e=Jc;Object.defineProperty(o,"isEmpty",{enumerable:!0,get:function(){return e.isEmpty}})})(vf);var mf={},nd={};Object.defineProperty(nd,"__esModule",{value:!0});nd.isFragment=Ak;var Ik=jc;function Ak(o){return(0,Ik.isNumber)(o)?!1:!!o&&!!o.nodeType&&o.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isFragment=void 0;var e=nd;Object.defineProperty(o,"isFragment",{enumerable:!0,get:function(){return e.isFragment}})})(mf);var bf={},id={};Object.defineProperty(id,"__esModule",{value:!0});id.isHTMLString=Mk;var Pk=Rs;function Mk(o){var e=(0,Pk.make)("div");return e.innerHTML=o,e.childElementCount>0}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isHTMLString=void 0;var e=id;Object.defineProperty(o,"isHTMLString",{enumerable:!0,get:function(){return e.isHTMLString}})})(bf);var yf={},rd={};Object.defineProperty(rd,"__esModule",{value:!0});rd.offset=Nk;function Nk(o){var e=o.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop,i=e.top+n,r=e.left+t;return{top:i,left:r,bottom:i+e.height,right:r+e.width}}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.offset=void 0;var e=rd;Object.defineProperty(o,"offset",{enumerable:!0,get:function(){return e.offset}})})(yf);var wf={},sd={};Object.defineProperty(sd,"__esModule",{value:!0});sd.prepend=$k;function $k(o,e){Array.isArray(e)?(e=e.reverse(),e.forEach(function(t){return o.prepend(t)})):o.prepend(e)}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.prepend=void 0;var e=sd;Object.defineProperty(o,"prepend",{enumerable:!0,get:function(){return e.prepend}})})(wf);(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.prepend=o.offset=o.make=o.isLineBreakTag=o.isSingleTag=o.isNodeEmpty=o.isLeaf=o.isHTMLString=o.isFragment=o.isEmpty=o.isElement=o.isContentEditable=o.isCollapsedWhitespaces=o.findAllInputs=o.isNativeInput=o.allInputsSelector=o.getDeepestNode=o.getDeepestBlockElements=o.getContentLength=o.fragmentToString=o.containsOnlyInlineElements=o.canSetCaret=o.calculateBaseline=o.blockElements=o.append=void 0;var e=Tc;Object.defineProperty(o,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}});var t=Kn;Object.defineProperty(o,"isNativeInput",{enumerable:!0,get:function(){return t.isNativeInput}});var n=nf;Object.defineProperty(o,"append",{enumerable:!0,get:function(){return n.append}});var i=Ic;Object.defineProperty(o,"blockElements",{enumerable:!0,get:function(){return i.blockElements}});var r=rf;Object.defineProperty(o,"calculateBaseline",{enumerable:!0,get:function(){return r.calculateBaseline}});var s=sf;Object.defineProperty(o,"canSetCaret",{enumerable:!0,get:function(){return s.canSetCaret}});var a=$s;Object.defineProperty(o,"containsOnlyInlineElements",{enumerable:!0,get:function(){return a.containsOnlyInlineElements}});var l=cf;Object.defineProperty(o,"fragmentToString",{enumerable:!0,get:function(){return l.fragmentToString}});var c=df;Object.defineProperty(o,"getContentLength",{enumerable:!0,get:function(){return c.getContentLength}});var u=Uc;Object.defineProperty(o,"getDeepestBlockElements",{enumerable:!0,get:function(){return u.getDeepestBlockElements}});var p=hf;Object.defineProperty(o,"getDeepestNode",{enumerable:!0,get:function(){return p.getDeepestNode}});var h=ff;Object.defineProperty(o,"findAllInputs",{enumerable:!0,get:function(){return h.findAllInputs}});var g=gf;Object.defineProperty(o,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return g.isCollapsedWhitespaces}});var f=Nc;Object.defineProperty(o,"isContentEditable",{enumerable:!0,get:function(){return f.isContentEditable}});var m=Zc;Object.defineProperty(o,"isElement",{enumerable:!0,get:function(){return m.isElement}});var L=vf;Object.defineProperty(o,"isEmpty",{enumerable:!0,get:function(){return L.isEmpty}});var _=mf;Object.defineProperty(o,"isFragment",{enumerable:!0,get:function(){return _.isFragment}});var k=bf;Object.defineProperty(o,"isHTMLString",{enumerable:!0,get:function(){return k.isHTMLString}});var N=Qc;Object.defineProperty(o,"isLeaf",{enumerable:!0,get:function(){return N.isLeaf}});var H=td;Object.defineProperty(o,"isNodeEmpty",{enumerable:!0,get:function(){return H.isNodeEmpty}});var I=Ds;Object.defineProperty(o,"isLineBreakTag",{enumerable:!0,get:function(){return I.isLineBreakTag}});var D=js;Object.defineProperty(o,"isSingleTag",{enumerable:!0,get:function(){return D.isSingleTag}});var C=Rs;Object.defineProperty(o,"make",{enumerable:!0,get:function(){return C.make}});var w=yf;Object.defineProperty(o,"offset",{enumerable:!0,get:function(){return w.offset}});var A=wf;Object.defineProperty(o,"prepend",{enumerable:!0,get:function(){return A.prepend}})})(tt);const Gt="cdx-list",Bt={wrapper:Gt,item:`${Gt}__item`,itemContent:`${Gt}__item-content`,itemChildren:`${Gt}__item-children`};let kf=class sn{static get CSS(){return{...Bt,orderedList:`${Gt}-ordered`}}constructor(e,t){this.config=t,this.readOnly=e}renderWrapper(e){let t;return e===!0?t=tt.make("ol",[sn.CSS.wrapper,sn.CSS.orderedList]):t=tt.make("ol",[sn.CSS.orderedList,sn.CSS.itemChildren]),t}renderItem(e,t){const n=tt.make("li",sn.CSS.item),i=tt.make("div",sn.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()});return n.appendChild(i),n}getItemContent(e){const t=e.querySelector(`.${sn.CSS.itemContent}`);return!t||tt.isEmpty(t)?"":t.innerHTML}getItemMeta(){return{}}composeDefaultMeta(){return{}}},xf=class an{static get CSS(){return{...Bt,unorderedList:`${Gt}-unordered`}}constructor(e,t){this.config=t,this.readOnly=e}renderWrapper(e){let t;return e===!0?t=tt.make("ul",[an.CSS.wrapper,an.CSS.unorderedList]):t=tt.make("ul",[an.CSS.unorderedList,an.CSS.itemChildren]),t}renderItem(e,t){const n=tt.make("li",an.CSS.item),i=tt.make("div",an.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()});return n.appendChild(i),n}getItemContent(e){const t=e.querySelector(`.${an.CSS.itemContent}`);return!t||tt.isEmpty(t)?"":t.innerHTML}getItemMeta(){return{}}composeDefaultMeta(){return{}}};function Cn(o){return o.nodeType===Node.ELEMENT_NODE}var rr={},ad={},Fs={},Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.getContenteditableSlice=Dk;var Rk=tt;function Dk(o,e,t,n,i){var r;i===void 0&&(i=!1);var s=document.createRange();if(n==="left"?(s.setStart(o,0),s.setEnd(e,t)):(s.setStart(e,t),s.setEnd(o,o.childNodes.length)),i===!0){var a=s.extractContents();return(0,Rk.fragmentToString)(a)}var l=s.cloneContents(),c=document.createElement("div");c.appendChild(l);var u=(r=c.textContent)!==null&&r!==void 0?r:"";return u}Object.defineProperty(Fs,"__esModule",{value:!0});Fs.checkContenteditableSliceForEmptiness=Hk;var jk=tt,Fk=Hs;function Hk(o,e,t,n){var i=(0,Fk.getContenteditableSlice)(o,e,t,n);return(0,jk.isCollapsedWhitespaces)(i)}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.checkContenteditableSliceForEmptiness=void 0;var e=Fs;Object.defineProperty(o,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}})})(ad);var _f={};(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.getContenteditableSlice=void 0;var e=Hs;Object.defineProperty(o,"getContenteditableSlice",{enumerable:!0,get:function(){return e.getContenteditableSlice}})})(_f);var Ef={},ld={};Object.defineProperty(ld,"__esModule",{value:!0});ld.focus=Uk;var zk=tt;function Uk(o,e){var t,n;if(e===void 0&&(e=!0),(0,zk.isNativeInput)(o)){o.focus();var i=e?0:o.value.length;o.setSelectionRange(i,i)}else{var r=document.createRange(),s=window.getSelection();if(!s)return;var a=function(h,g){g===void 0&&(g=!1);var f=document.createTextNode("");g?h.insertBefore(f,h.firstChild):h.appendChild(f),r.setStart(f,0),r.setEnd(f,0)},l=function(h){return h!=null},c=o.childNodes,u=e?c[0]:c[c.length-1];if(l(u)){for(;l(u)&&u.nodeType!==Node.TEXT_NODE;)u=e?u.firstChild:u.lastChild;if(l(u)&&u.nodeType===Node.TEXT_NODE){var p=(n=(t=u.textContent)===null||t===void 0?void 0:t.length)!==null&&n!==void 0?n:0,i=e?0:p;r.setStart(u,i),r.setEnd(u,i)}else a(o,e)}else a(o);s.removeAllRanges(),s.addRange(r)}}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.focus=void 0;var e=ld;Object.defineProperty(o,"focus",{enumerable:!0,get:function(){return e.focus}})})(Ef);var cd={},zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.getCaretNodeAndOffset=Wk;function Wk(){var o=window.getSelection();if(o===null)return[null,0];var e=o.focusNode,t=o.focusOffset;return e===null?[null,0]:(e.nodeType!==Node.TEXT_NODE&&e.childNodes.length>0&&(e.childNodes[t]!==void 0?(e=e.childNodes[t],t=0):(e=e.childNodes[t-1],e.textContent!==null&&(t=e.textContent.length))),[e,t])}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.getCaretNodeAndOffset=void 0;var e=zs;Object.defineProperty(o,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return e.getCaretNodeAndOffset}})})(cd);var Cf={},Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.getRange=qk;function qk(){var o=window.getSelection();return o&&o.rangeCount?o.getRangeAt(0):null}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.getRange=void 0;var e=Us;Object.defineProperty(o,"getRange",{enumerable:!0,get:function(){return e.getRange}})})(Cf);var Sf={},dd={};Object.defineProperty(dd,"__esModule",{value:!0});dd.isCaretAtEndOfInput=Kk;var Pu=tt,Vk=cd,Gk=ad;function Kk(o){var e=(0,Pu.getDeepestNode)(o,!0);if(e===null)return!0;if((0,Pu.isNativeInput)(e))return e.selectionEnd===e.value.length;var t=(0,Vk.getCaretNodeAndOffset)(),n=t[0],i=t[1];return n===null?!1:(0,Gk.checkContenteditableSliceForEmptiness)(o,n,i,"right")}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isCaretAtEndOfInput=void 0;var e=dd;Object.defineProperty(o,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return e.isCaretAtEndOfInput}})})(Sf);var Tf={},ud={};Object.defineProperty(ud,"__esModule",{value:!0});ud.isCaretAtStartOfInput=Xk;var jr=tt,Yk=zs,Zk=Fs;function Xk(o){var e=(0,jr.getDeepestNode)(o);if(e===null||(0,jr.isEmpty)(o))return!0;if((0,jr.isNativeInput)(e))return e.selectionEnd===0;if((0,jr.isEmpty)(o))return!0;var t=(0,Yk.getCaretNodeAndOffset)(),n=t[0],i=t[1];return n===null?!1:(0,Zk.checkContenteditableSliceForEmptiness)(o,n,i,"left")}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.isCaretAtStartOfInput=void 0;var e=ud;Object.defineProperty(o,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return e.isCaretAtStartOfInput}})})(Tf);var Lf={},hd={};Object.defineProperty(hd,"__esModule",{value:!0});hd.save=e0;var Jk=tt,Qk=Us;function e0(){var o=(0,Qk.getRange)(),e=(0,Jk.make)("span");if(e.id="cursor",e.hidden=!0,!!o)return o.insertNode(e),function(){var t=window.getSelection();t&&(o.setStartAfter(e),o.setEndAfter(e),t.removeAllRanges(),t.addRange(o),setTimeout(function(){e.remove()},150))}}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.save=void 0;var e=hd;Object.defineProperty(o,"save",{enumerable:!0,get:function(){return e.save}})})(Lf);(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.save=o.isCaretAtStartOfInput=o.isCaretAtEndOfInput=o.getRange=o.getCaretNodeAndOffset=o.focus=o.getContenteditableSlice=o.checkContenteditableSliceForEmptiness=void 0;var e=ad;Object.defineProperty(o,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}});var t=_f;Object.defineProperty(o,"getContenteditableSlice",{enumerable:!0,get:function(){return t.getContenteditableSlice}});var n=Ef;Object.defineProperty(o,"focus",{enumerable:!0,get:function(){return n.focus}});var i=cd;Object.defineProperty(o,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return i.getCaretNodeAndOffset}});var r=Cf;Object.defineProperty(o,"getRange",{enumerable:!0,get:function(){return r.getRange}});var s=Sf;Object.defineProperty(o,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return s.isCaretAtEndOfInput}});var a=Tf;Object.defineProperty(o,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return a.isCaretAtStartOfInput}});var l=Lf;Object.defineProperty(o,"save",{enumerable:!0,get:function(){return l.save}})})(rr);class vt{static get CSS(){return{...Bt,checklist:`${Gt}-checklist`,itemChecked:`${Gt}__checkbox--checked`,noHover:`${Gt}__checkbox--no-hover`,checkbox:`${Gt}__checkbox-check`,checkboxContainer:`${Gt}__checkbox`}}constructor(e,t){this.config=t,this.readOnly=e}renderWrapper(e){let t;return e===!0?(t=tt.make("ul",[vt.CSS.wrapper,vt.CSS.checklist]),t.addEventListener("click",n=>{const i=n.target;if(i){const r=i.closest(`.${vt.CSS.checkboxContainer}`);r&&r.contains(i)&&this.toggleCheckbox(r)}})):t=tt.make("ul",[vt.CSS.checklist,vt.CSS.itemChildren]),t}renderItem(e,t){const n=tt.make("li",[vt.CSS.item,vt.CSS.item]),i=tt.make("div",vt.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()}),r=tt.make("span",vt.CSS.checkbox),s=tt.make("div",vt.CSS.checkboxContainer);return t.checked===!0&&s.classList.add(vt.CSS.itemChecked),r.innerHTML=v1,s.appendChild(r),n.appendChild(s),n.appendChild(i),n}getItemContent(e){const t=e.querySelector(`.${vt.CSS.itemContent}`);return!t||tt.isEmpty(t)?"":t.innerHTML}getItemMeta(e){const t=e.querySelector(`.${vt.CSS.checkboxContainer}`);return{checked:t?t.classList.contains(vt.CSS.itemChecked):!1}}composeDefaultMeta(){return{checked:!1}}toggleCheckbox(e){e.classList.toggle(vt.CSS.itemChecked),e.classList.add(vt.CSS.noHover),e.addEventListener("mouseleave",()=>this.removeSpecialHoverBehavior(e),{once:!0})}removeSpecialHoverBehavior(e){e.classList.remove(vt.CSS.noHover)}}function _a(o,e="after"){const t=[];let n;function i(r){switch(e){case"after":return r.nextElementSibling;case"before":return r.previousElementSibling}}for(n=i(o);n!==null;)t.push(n),n=i(n);return t.length!==0?t:null}function Ho(o,e=!0){let t=o;return o.classList.contains(Bt.item)&&(t=o.querySelector(`.${Bt.itemChildren}`)),t===null?[]:Array.from(e?t.querySelectorAll(`:scope > .${Bt.item}`):t.querySelectorAll(`.${Bt.item}`))}function t0(o){return o.nextElementSibling===null}function o0(o){return o.querySelector(`.${Bt.itemChildren}`)!==null}function ln(o){return o.querySelector(`.${Bt.itemChildren}`)}function Ea(o){let e=o;o.classList.contains(Bt.item)&&(e=ln(o)),e!==null&&Ho(e).length===0&&e.remove()}function Yr(o){return o.querySelector(`.${Bt.itemContent}`)}function ti(o,e=!0){const t=Yr(o);t&&rr.focus(t,e)}let Ca=class{get currentItem(){const e=window.getSelection();if(!e)return null;let t=e.anchorNode;return!t||(Cn(t)||(t=t.parentNode),!t)||!Cn(t)?null:t.closest(`.${Bt.item}`)}get currentItemLevel(){const e=this.currentItem;if(e===null)return null;let t=e.parentNode,n=0;for(;t!==null&&t!==this.listWrapper;)Cn(t)&&t.classList.contains(Bt.item)&&(n+=1),t=t.parentNode;return n+1}constructor({data:e,config:t,api:n,readOnly:i,block:r},s){this.config=t,this.data=e,this.readOnly=i,this.api=n,this.block=r,this.renderer=s}render(){return this.listWrapper=this.renderer.renderWrapper(!0),this.data.items.length?this.appendItems(this.data.items,this.listWrapper):this.appendItems([{content:"",meta:{},items:[]}],this.listWrapper),this.readOnly||this.listWrapper.addEventListener("keydown",e=>{switch(e.key){case"Enter":e.shiftKey||this.enterPressed(e);break;case"Backspace":this.backspace(e);break;case"Tab":e.shiftKey?this.shiftTab(e):this.addTab(e);break}},!1),"start"in this.data.meta&&this.data.meta.start!==void 0&&this.changeStartWith(this.data.meta.start),"counterType"in this.data.meta&&this.data.meta.counterType!==void 0&&this.changeCounters(this.data.meta.counterType),this.listWrapper}save(e){const t=e??this.listWrapper,n=s=>Ho(s).map(a=>{const l=ln(a),c=this.renderer.getItemContent(a),u=this.renderer.getItemMeta(a),p=l?n(l):[];return{content:c,meta:u,items:p}}),i=t?n(t):[];let r={style:this.data.style,meta:{},items:i};return this.data.style==="ordered"&&(r.meta={start:this.data.meta.start,counterType:this.data.meta.counterType}),r}static get pasteConfig(){return{tags:["OL","UL","LI"]}}merge(e){const t=this.block.holder.querySelectorAll(`.${Bt.item}`),n=t[t.length-1],i=Yr(n);if(n===null||i===null||(i.insertAdjacentHTML("beforeend",e.items[0].content),this.listWrapper===void 0))return;const r=Ho(this.listWrapper);if(r.length===0)return;const s=r[r.length-1];let a=ln(s);const l=e.items.shift();l!==void 0&&(l.items.length!==0&&(a===null&&(a=this.renderer.renderWrapper(!1)),this.appendItems(l.items,a)),e.items.length>0&&this.appendItems(e.items,this.listWrapper))}onPaste(e){const t=e.detail.data;this.data=this.pasteHandler(t);const n=this.listWrapper;n&&n.parentNode&&n.parentNode.replaceChild(this.render(),n)}pasteHandler(e){const{tagName:t}=e;let n="unordered",i;switch(t){case"OL":n="ordered",i="ol";break;case"UL":case"LI":n="unordered",i="ul"}const r={style:n,meta:{},items:[]};n==="ordered"&&(this.data.meta.counterType="numeric",this.data.meta.start=1);const s=a=>Array.from(a.querySelectorAll(":scope > li")).map(l=>{const c=l.querySelector(`:scope > ${i}`),u=c?s(c):[];return{content:l.innerHTML??"",meta:{},items:u}});return r.items=s(e),r}changeStartWith(e){this.listWrapper.style.setProperty("counter-reset",`item ${e-1}`),this.data.meta.start=e}changeCounters(e){this.listWrapper.style.setProperty("--list-counter-type",e),this.data.meta.counterType=e}enterPressed(e){var t;const n=this.currentItem;if(e.stopPropagation(),e.preventDefault(),e.isComposing||n===null)return;const i=((t=this.renderer)==null?void 0:t.getItemContent(n).trim().length)===0,r=n.parentNode===this.listWrapper,s=n.previousElementSibling===null,a=this.api.blocks.getCurrentBlockIndex();if(r&&i)if(t0(n)&&!o0(n)){s?this.convertItemToDefaultBlock(a,!0):this.convertItemToDefaultBlock();return}else{this.splitList(n);return}else if(i){this.unshiftItem(n);return}else this.splitItem(n)}backspace(e){var t;const n=this.currentItem;if(n!==null&&rr.isCaretAtStartOfInput(n)&&((t=window.getSelection())==null?void 0:t.isCollapsed)!==!1){if(e.stopPropagation(),n.parentNode===this.listWrapper&&n.previousElementSibling===null){this.convertFirstItemToDefaultBlock();return}e.preventDefault(),this.mergeItemWithPrevious(n)}}shiftTab(e){e.stopPropagation(),e.preventDefault(),this.currentItem!==null&&this.unshiftItem(this.currentItem)}unshiftItem(e){if(!e.parentNode||!Cn(e.parentNode))return;const t=e.parentNode.closest(`.${Bt.item}`);if(!t)return;let n=ln(e);if(e.parentElement===null)return;const i=_a(e);i!==null&&(n===null&&(n=this.renderer.renderWrapper(!1)),i.forEach(r=>{n.appendChild(r)}),e.appendChild(n)),t.after(e),ti(e,!1),Ea(t)}splitList(e){const t=Ho(e),n=this.block,i=this.api.blocks.getCurrentBlockIndex();if(t.length!==0){const l=t[0];this.unshiftItem(l),ti(e,!1)}if(e.previousElementSibling===null&&e.parentNode===this.listWrapper){this.convertItemToDefaultBlock(i);return}const r=_a(e);if(r===null)return;const s=this.renderer.renderWrapper(!0);r.forEach(l=>{s.appendChild(l)});const a=this.save(s);a.meta.start=this.data.style=="ordered"?1:void 0,this.api.blocks.insert(n?.name,a,this.config,i+1),this.convertItemToDefaultBlock(i+1),s.remove()}splitItem(e){const[t,n]=rr.getCaretNodeAndOffset();if(t===null)return;const i=Yr(e);let r;i===null?r="":r=rr.getContenteditableSlice(i,t,n,"right",!0);const s=ln(e),a=this.renderItem(r);e?.after(a),s&&a.appendChild(s),ti(a)}mergeItemWithPrevious(e){const t=e.previousElementSibling,n=e.parentNode;if(n===null||!Cn(n))return;const i=n.closest(`.${Bt.item}`);if(!t&&!i||t&&!Cn(t))return;let r;if(t){const p=Ho(t,!1);p.length!==0&&p.length!==0?r=p[p.length-1]:r=t}else r=i;const s=this.renderer.getItemContent(e);if(!r)return;ti(r,!1);const a=Yr(r);if(a===null)return;a.insertAdjacentHTML("beforeend",s);const l=Ho(e);if(l.length===0){e.remove(),Ea(r);return}const c=t||i,u=ln(c)??this.renderer.renderWrapper(!1);t?l.forEach(p=>{u.appendChild(p)}):l.forEach(p=>{u.prepend(p)}),ln(c)===null&&r.appendChild(u),e.remove()}addTab(e){var t;e.stopPropagation(),e.preventDefault();const n=this.currentItem;if(!n)return;if(((t=this.config)==null?void 0:t.maxLevel)!==void 0){const s=this.currentItemLevel;if(s!==null&&s===this.config.maxLevel)return}const i=n.previousSibling;if(i===null||!Cn(i))return;const r=ln(i);if(r)r.appendChild(n),Ho(n).forEach(s=>{r.appendChild(s)});else{const s=this.renderer.renderWrapper(!1);s.appendChild(n),Ho(n).forEach(a=>{s.appendChild(a)}),i.appendChild(s)}Ea(n),ti(n,!1)}convertItemToDefaultBlock(e,t){let n;const i=this.currentItem,r=i!==null?this.renderer.getItemContent(i):"";t===!0&&this.api.blocks.delete(),e!==void 0?n=this.api.blocks.insert(void 0,{text:r},void 0,e):n=this.api.blocks.insert(),i?.remove(),this.api.caret.setToBlock(n,"start")}convertFirstItemToDefaultBlock(){const e=this.currentItem;if(e===null)return;const t=Ho(e);if(t.length!==0){const s=t[0];this.unshiftItem(s),ti(e)}const n=_a(e),i=this.api.blocks.getCurrentBlockIndex(),r=n===null;this.convertItemToDefaultBlock(i,r)}renderItem(e,t){const n=t??this.renderer.composeDefaultMeta();switch(!0){case this.renderer instanceof kf:return this.renderer.renderItem(e,n);case this.renderer instanceof xf:return this.renderer.renderItem(e,n);default:return this.renderer.renderItem(e,n)}}appendItems(e,t){e.forEach(n=>{var i;const r=this.renderItem(n.content,n.meta);if(t.appendChild(r),n.items.length){const s=(i=this.renderer)==null?void 0:i.renderWrapper(!1);this.appendItems(n.items,s),r.appendChild(s)}})}};const oi={wrapper:`${Gt}-start-with-field`,input:`${Gt}-start-with-field__input`,startWithElementWrapperInvalid:`${Gt}-start-with-field--invalid`};function n0(o,{value:e,placeholder:t,attributes:n,sanitize:i}){const r=tt.make("div",oi.wrapper),s=tt.make("input",oi.input,{placeholder:t,tabIndex:-1,value:e});for(const a in n)s.setAttribute(a,n[a]);return r.appendChild(s),s.addEventListener("input",()=>{i!==void 0&&(s.value=i(s.value));const a=s.checkValidity();!a&&!r.classList.contains(oi.startWithElementWrapperInvalid)&&r.classList.add(oi.startWithElementWrapperInvalid),a&&r.classList.contains(oi.startWithElementWrapperInvalid)&&r.classList.remove(oi.startWithElementWrapperInvalid),a&&o(s.value)}),r}const qi=new Map([["Numeric","numeric"],["Lower Roman","lower-roman"],["Upper Roman","upper-roman"],["Lower Alpha","lower-alpha"],["Upper Alpha","upper-alpha"]]),Mu=new Map([["numeric",m1],["lower-roman",b1],["upper-roman",y1],["lower-alpha",k1],["upper-alpha",w1]]);function i0(o){return o.replace(/\D+/g,"")}function r0(o){return typeof o.items[0]=="string"}function s0(o){return!("meta"in o)}function a0(o){return typeof o.items[0]!="string"&&"text"in o.items[0]&&"checked"in o.items[0]&&typeof o.items[0].text=="string"&&typeof o.items[0].checked=="boolean"}function l0(o){const e=[];return r0(o)?(o.items.forEach(t=>{e.push({content:t,meta:{},items:[]})}),{style:o.style,meta:{},items:e}):a0(o)?(o.items.forEach(t=>{e.push({content:t.text,meta:{checked:t.checked},items:[]})}),{style:"checklist",meta:{},items:e}):s0(o)?{style:o.style,meta:{},items:o.items}:structuredClone(o)}let c0=class nl{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return[{icon:Ou,title:"Unordered List",data:{style:"unordered"}},{icon:Iu,title:"Ordered List",data:{style:"ordered"}},{icon:Bu,title:"Checklist",data:{style:"checklist"}}]}static get pasteConfig(){return{tags:["OL","UL","LI"]}}static get conversionConfig(){return{export:e=>nl.joinRecursive(e),import:(e,t)=>({meta:{},items:[{content:e,meta:{},items:[]}],style:t?.defaultStyle!==void 0?t.defaultStyle:"unordered"})}}get listStyle(){return this.data.style||this.defaultListStyle}set listStyle(e){var t;this.data.style=e,this.changeTabulatorByStyle();const n=this.list.render();(t=this.listElement)==null||t.replaceWith(n),this.listElement=n}constructor({data:e,config:t,api:n,readOnly:i,block:r}){var s;this.api=n,this.readOnly=i,this.config=t,this.block=r,this.defaultListStyle=((s=this.config)==null?void 0:s.defaultStyle)||"unordered",this.defaultCounterTypes=this.config.counterTypes||Array.from(qi.values());const a={style:this.defaultListStyle,meta:{},items:[]};this.data=Object.keys(e).length?l0(e):a,this.listStyle==="ordered"&&this.data.meta.counterType===void 0&&(this.data.meta.counterType="numeric"),this.changeTabulatorByStyle()}static joinRecursive(e){return e.items.map(t=>`${t.content} ${nl.joinRecursive(t)}`).join("")}render(){return this.listElement=this.list.render(),this.listElement}save(){return this.data=this.list.save(),this.data}merge(e){this.list.merge(e)}renderSettings(){const e=[{label:this.api.i18n.t("Unordered"),icon:Ou,closeOnActivate:!0,isActive:this.listStyle=="unordered",onActivate:()=>{this.listStyle="unordered"}},{label:this.api.i18n.t("Ordered"),icon:Iu,closeOnActivate:!0,isActive:this.listStyle=="ordered",onActivate:()=>{this.listStyle="ordered"}},{label:this.api.i18n.t("Checklist"),icon:Bu,closeOnActivate:!0,isActive:this.listStyle=="checklist",onActivate:()=>{this.listStyle="checklist"}}];if(this.listStyle==="ordered"){const t=n0(r=>this.changeStartWith(Number(r)),{value:String(this.data.meta.start??1),placeholder:"",attributes:{required:"true"},sanitize:r=>i0(r)}),n=[{label:this.api.i18n.t("Start with"),icon:x1,children:{items:[{element:t,type:"html"}]}}],i={label:this.api.i18n.t("Counter type"),icon:Mu.get(this.data.meta.counterType),children:{items:[]}};qi.forEach((r,s)=>{const a=qi.get(s);this.defaultCounterTypes.includes(a)&&i.children.items.push({title:this.api.i18n.t(s),icon:Mu.get(a),isActive:this.data.meta.counterType===qi.get(s),closeOnActivate:!0,onActivate:()=>{this.changeCounters(qi.get(s))}})}),i.children.items.length>1&&n.push(i),e.push({type:"separator"},...n)}return e}onPaste(e){const{tagName:t}=e.detail.data;switch(t){case"OL":this.listStyle="ordered";break;case"UL":case"LI":this.listStyle="unordered"}this.list.onPaste(e)}pasteHandler(e){return this.list.pasteHandler(e)}changeCounters(e){var t;(t=this.list)==null||t.changeCounters(e),this.data.meta.counterType=e}changeStartWith(e){var t;(t=this.list)==null||t.changeStartWith(e),this.data.meta.start=e}changeTabulatorByStyle(){switch(this.listStyle){case"ordered":this.list=new Ca({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new kf(this.readOnly,this.config));break;case"unordered":this.list=new Ca({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new xf(this.readOnly,this.config));break;case"checklist":this.list=new Ca({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new vt(this.readOnly,this.config));break}}};function Ws(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Sa={exports:{}},Nu;function d0(){return Nu||(Nu=1,(function(o,e){(function(t,n){o.exports=n()})(self,(function(){return(function(){var t={966:function(r,s,a){function l(p,h){for(var g=0;g<h.length;g++){var f=h[g];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(p,f.key,f)}}a(548).toString();var c=a(630).make,u=(function(){function p(m){var L=m.api,_=m.data,k=m.config,N=m.block;(function(H,I){if(!(H instanceof I))throw new TypeError("Cannot call a class as a function")})(this,p),this.api=L,this.block=N,this.settings=k,this.data=_||{alignment:this.getAlignment()},this.alignmentSettings=[{name:"left",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m10 23h28c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m10 45h28c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/></svg>'},{name:"center",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m46 23c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m46 45c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/></svg>'},{name:"right",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 19h-28c-1.104 0-2 .896-2 2s.896 2 2 2h28c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 41h-28c-1.104 0-2 .896-2 2s.896 2 2 2h28c1.104 0 2-.896 2-2s-.896-2-2-2z"/></svg>'}],this._CSS={alignment:{left:"ce-tune-alignment--left",center:"ce-tune-alignment--center",right:"ce-tune-alignment--right"}}}var h,g,f;return h=p,f=[{key:"DEFAULT_ALIGNMENT",get:function(){return"left"}},{key:"isTune",get:function(){return!0}}],(g=[{key:"getAlignment",value:function(){var m,L;return(m=this.settings)!==null&&m!==void 0&&m.blocks&&this.settings.blocks.hasOwnProperty(this.block.name)?this.settings.blocks[this.block.name]:(L=this.settings)!==null&&L!==void 0&&L.default?this.settings.default:p.DEFAULT_ALIGNMENT}},{key:"wrap",value:function(m){return this.wrapper=c("div"),this.wrapper.classList.toggle(this._CSS.alignment[this.data.alignment]),this.wrapper.append(m),this.wrapper}},{key:"render",value:function(){var m=this,L=c("div");return this.alignmentSettings.map((function(_){var k=document.createElement("button");return k.classList.add(m.api.styles.settingsButton),k.innerHTML=_.icon,k.type="button",k.classList.toggle(m.api.styles.settingsButtonActive,_.name===m.data.alignment),L.appendChild(k),k})).forEach((function(_,k,N){_.addEventListener("click",(function(){m.data={alignment:m.alignmentSettings[k].name},N.forEach((function(H,I){var D=m.alignmentSettings[I].name;H.classList.toggle(m.api.styles.settingsButtonActive,D===m.data.alignment),m.wrapper.classList.toggle(m._CSS.alignment[D],D===m.data.alignment)}))}))})),L}},{key:"save",value:function(){return this.data}}])&&l(h.prototype,g),f&&l(h,f),p})();r.exports=u},630:function(r,s,a){function l(p){return(function(h){if(Array.isArray(h))return c(h)})(p)||(function(h){if(typeof Symbol<"u"&&Symbol.iterator in Object(h))return Array.from(h)})(p)||(function(h,g){if(h){if(typeof h=="string")return c(h,g);var f=Object.prototype.toString.call(h).slice(8,-1);return f==="Object"&&h.constructor&&(f=h.constructor.name),f==="Map"||f==="Set"?Array.from(h):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?c(h,g):void 0}})(p)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function c(p,h){(h==null||h>p.length)&&(h=p.length);for(var g=0,f=new Array(h);g<h;g++)f[g]=p[g];return f}function u(p){var h,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=document.createElement(p);for(var L in Array.isArray(g)?(h=m.classList).add.apply(h,l(g)):g&&m.classList.add(g),f)m[L]=f[L];return m}a.r(s),a.d(s,{make:function(){return u}})},424:function(r,s,a){var l=a(645),c=a.n(l)()((function(u){return u[1]}));c.push([r.id,`.ce-tune-alignment--right {
    text-align: right;
}
.ce-tune-alignment--center {
    text-align: center;
}
.ce-tune-alignment--left {
    text-align: left;
}`,""]),s.Z=c},645:function(r){r.exports=function(s){var a=[];return a.toString=function(){return this.map((function(l){var c=s(l);return l[2]?"@media ".concat(l[2]," {").concat(c,"}"):c})).join("")},a.i=function(l,c,u){typeof l=="string"&&(l=[[null,l,""]]);var p={};if(u)for(var h=0;h<this.length;h++){var g=this[h][0];g!=null&&(p[g]=!0)}for(var f=0;f<l.length;f++){var m=[].concat(l[f]);u&&p[m[0]]||(c&&(m[2]?m[2]="".concat(c," and ").concat(m[2]):m[2]=c),a.push(m))}},a}},548:function(r,s,a){var l=a(379),c=a.n(l),u=a(424);c()(u.Z,{insert:"head",singleton:!1}),u.Z.locals},379:function(r,s,a){var l,c=(function(){var I={};return function(D){if(I[D]===void 0){var C=document.querySelector(D);if(window.HTMLIFrameElement&&C instanceof window.HTMLIFrameElement)try{C=C.contentDocument.head}catch{C=null}I[D]=C}return I[D]}})(),u=[];function p(I){for(var D=-1,C=0;C<u.length;C++)if(u[C].identifier===I){D=C;break}return D}function h(I,D){for(var C={},w=[],A=0;A<I.length;A++){var R=I[A],M=D.base?R[0]+D.base:R[0],T=C[M]||0,O="".concat(M," ").concat(T);C[M]=T+1;var b=p(O),x={css:R[1],media:R[2],sourceMap:R[3]};b!==-1?(u[b].references++,u[b].updater(x)):u.push({identifier:O,updater:H(x,D),references:1}),w.push(O)}return w}function g(I){var D=document.createElement("style"),C=I.attributes||{};if(C.nonce===void 0){var w=a.nc;w&&(C.nonce=w)}if(Object.keys(C).forEach((function(R){D.setAttribute(R,C[R])})),typeof I.insert=="function")I.insert(D);else{var A=c(I.insert||"head");if(!A)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");A.appendChild(D)}return D}var f,m=(f=[],function(I,D){return f[I]=D,f.filter(Boolean).join(`
`)});function L(I,D,C,w){var A=C?"":w.media?"@media ".concat(w.media," {").concat(w.css,"}"):w.css;if(I.styleSheet)I.styleSheet.cssText=m(D,A);else{var R=document.createTextNode(A),M=I.childNodes;M[D]&&I.removeChild(M[D]),M.length?I.insertBefore(R,M[D]):I.appendChild(R)}}function _(I,D,C){var w=C.css,A=C.media,R=C.sourceMap;if(A?I.setAttribute("media",A):I.removeAttribute("media"),R&&typeof btoa<"u"&&(w+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(R))))," */")),I.styleSheet)I.styleSheet.cssText=w;else{for(;I.firstChild;)I.removeChild(I.firstChild);I.appendChild(document.createTextNode(w))}}var k=null,N=0;function H(I,D){var C,w,A;if(D.singleton){var R=N++;C=k||(k=g(D)),w=L.bind(null,C,R,!1),A=L.bind(null,C,R,!0)}else C=g(D),w=_.bind(null,C,D),A=function(){(function(M){if(M.parentNode===null)return!1;M.parentNode.removeChild(M)})(C)};return w(I),function(M){if(M){if(M.css===I.css&&M.media===I.media&&M.sourceMap===I.sourceMap)return;w(I=M)}else A()}}r.exports=function(I,D){(D=D||{}).singleton||typeof D.singleton=="boolean"||(D.singleton=(l===void 0&&(l=!!(window&&document&&document.all&&!window.atob)),l));var C=h(I=I||[],D);return function(w){if(w=w||[],Object.prototype.toString.call(w)==="[object Array]"){for(var A=0;A<C.length;A++){var R=p(C[A]);u[R].references--}for(var M=h(w,D),T=0;T<C.length;T++){var O=p(C[T]);u[O].references===0&&(u[O].updater(),u.splice(O,1))}C=M}}}}},n={};function i(r){var s=n[r];if(s!==void 0)return s.exports;var a=n[r]={id:r,exports:{}};return t[r](a,a.exports,i),a.exports}return i.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(s,{a:s}),s},i.d=function(r,s){for(var a in s)i.o(s,a)&&!i.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:s[a]})},i.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},i.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i(966)})()}))})(Sa)),Sa.exports}var u0=d0();const h0=Ws(u0);var Ta={exports:{}},$u;function p0(){return $u||($u=1,(function(o,e){(function(t,n){o.exports=n()})(self,(()=>(()=>{var t={208:(s,a,l)=>{l.d(a,{A:()=>g});var c=l(601),u=l.n(c),p=l(314),h=l.n(p)()(u());h.push([s.id,`.cdx-text-variant--call-out .ce-block__content {
  border: 1px solid rgb(255, 135, 135);
  padding: 8px 16px;
  border-radius: 6px;
  box-shadow: 0 0 0 5px rgba(255, 120, 84, 0.16);
  margin-top: 0.6em;
  margin-bottom: 0.6em;
}

.cdx-text-variant--citation {
  font-style: italic;
}

.cdx-text-variant--details {
  font-size: 0.84em;
}

.cdx-text-variant__toggler svg {
  width: 20px;
  height: 20px;
}
`,""]);const g=h},314:s=>{s.exports=function(a){var l=[];return l.toString=function(){return this.map((function(c){var u="",p=c[5]!==void 0;return c[4]&&(u+="@supports (".concat(c[4],") {")),c[2]&&(u+="@media ".concat(c[2]," {")),p&&(u+="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {")),u+=a(c),p&&(u+="}"),c[2]&&(u+="}"),c[4]&&(u+="}"),u})).join("")},l.i=function(c,u,p,h,g){typeof c=="string"&&(c=[[null,c,void 0]]);var f={};if(p)for(var m=0;m<this.length;m++){var L=this[m][0];L!=null&&(f[L]=!0)}for(var _=0;_<c.length;_++){var k=[].concat(c[_]);p&&f[k[0]]||(g!==void 0&&(k[5]===void 0||(k[1]="@layer".concat(k[5].length>0?" ".concat(k[5]):""," {").concat(k[1],"}")),k[5]=g),u&&(k[2]&&(k[1]="@media ".concat(k[2]," {").concat(k[1],"}")),k[2]=u),h&&(k[4]?(k[1]="@supports (".concat(k[4],") {").concat(k[1],"}"),k[4]=h):k[4]="".concat(h)),l.push(k))}},l}},601:s=>{s.exports=function(a){return a[1]}},72:s=>{var a=[];function l(p){for(var h=-1,g=0;g<a.length;g++)if(a[g].identifier===p){h=g;break}return h}function c(p,h){for(var g={},f=[],m=0;m<p.length;m++){var L=p[m],_=h.base?L[0]+h.base:L[0],k=g[_]||0,N="".concat(_," ").concat(k);g[_]=k+1;var H=l(N),I={css:L[1],media:L[2],sourceMap:L[3],supports:L[4],layer:L[5]};if(H!==-1)a[H].references++,a[H].updater(I);else{var D=u(I,h);h.byIndex=m,a.splice(m,0,{identifier:N,updater:D,references:1})}f.push(N)}return f}function u(p,h){var g=h.domAPI(h);return g.update(p),function(f){if(f){if(f.css===p.css&&f.media===p.media&&f.sourceMap===p.sourceMap&&f.supports===p.supports&&f.layer===p.layer)return;g.update(p=f)}else g.remove()}}s.exports=function(p,h){var g=c(p=p||[],h=h||{});return function(f){f=f||[];for(var m=0;m<g.length;m++){var L=l(g[m]);a[L].references--}for(var _=c(f,h),k=0;k<g.length;k++){var N=l(g[k]);a[N].references===0&&(a[N].updater(),a.splice(N,1))}g=_}}},659:s=>{var a={};s.exports=function(l,c){var u=(function(p){if(a[p]===void 0){var h=document.querySelector(p);if(window.HTMLIFrameElement&&h instanceof window.HTMLIFrameElement)try{h=h.contentDocument.head}catch{h=null}a[p]=h}return a[p]})(l);if(!u)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");u.appendChild(c)}},540:s=>{s.exports=function(a){var l=document.createElement("style");return a.setAttributes(l,a.attributes),a.insert(l,a.options),l}},56:(s,a,l)=>{s.exports=function(c){var u=l.nc;u&&c.setAttribute("nonce",u)}},825:s=>{s.exports=function(a){if(typeof document>"u")return{update:function(){},remove:function(){}};var l=a.insertStyleElement(a);return{update:function(c){(function(u,p,h){var g="";h.supports&&(g+="@supports (".concat(h.supports,") {")),h.media&&(g+="@media ".concat(h.media," {"));var f=h.layer!==void 0;f&&(g+="@layer".concat(h.layer.length>0?" ".concat(h.layer):""," {")),g+=h.css,f&&(g+="}"),h.media&&(g+="}"),h.supports&&(g+="}");var m=h.sourceMap;m&&typeof btoa<"u"&&(g+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(m))))," */")),p.styleTagTransform(g,u,p.options)})(l,a,c)},remove:function(){(function(c){if(c.parentNode===null)return!1;c.parentNode.removeChild(c)})(l)}}}},113:s=>{s.exports=function(a,l){if(l.styleSheet)l.styleSheet.cssText=a;else{for(;l.firstChild;)l.removeChild(l.firstChild);l.appendChild(document.createTextNode(a))}}},152:s=>{s.exports='<svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg"><path d="M200.48 53c10.359 0 19.704 2.99 27.99 7.933 5.625 3.356 10.563 7.492 15.193 12.354 6.735 7.072 13.08 15.997 19.645 27.12l.142.24 76.986 134.194c6.553 10.46 11.425 19.799 14.654 28.577 2.216 6.027 3.735 11.967 4.393 18.103.963 8.977.067 18.035-3.552 26.98-7.933 19.612-24.283 33.336-45.054 37.586l-4.464.913h-204.65l-2.817-.357c-10.267-1.3-19.764-4.163-28.422-9.16-11.051-6.377-19.82-15.823-25.055-27.664-4.432-10.03-5.235-19.952-3.914-29.887.821-6.175 2.486-12.239 4.864-18.58 3.616-9.64 9.159-20.55 16.718-33.309l74.632-127.44c6.469-11.125 12.743-20.061 19.436-27.158 4.62-4.899 9.562-9.07 15.206-12.456 8.301-4.979 17.68-7.989 28.07-7.989zm0 45c-6.102 0-14.05 8.427-23.842 25.28l-74.73 127.605c-12.713 21.444-17.806 35.025-15.28 40.742 2.527 5.717 8.519 9.175 17.974 10.373h197.255c5.932-1.214 10.051-4.671 12.357-10.373 2.307-5.702-1.812-16.903-12.357-33.603l-77.302-134.743C214.608 106.427 206.583 98 200.48 98zm.02 135c14.636 0 26.5 11.864 26.5 26.5S215.136 286 200.5 286 174 274.136 174 259.5s11.864-26.5 26.5-26.5zm0-83c12.426 0 22.5 10.074 22.5 22.5v28c0 12.426-10.074 22.5-22.5 22.5S178 212.926 178 200.5v-28c0-12.426 10.074-22.5 22.5-22.5z"></path></svg>'},188:s=>{s.exports='<svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg"><path d="M281.488 301c6.388 0 12.311-1.14 17.768-3.42 5.457-2.28 10.315-5.433 14.574-9.456a43.696 43.696 0 009.983-14.084c2.395-5.365 3.593-11.133 3.593-17.303 0-10.999-2.994-20.388-8.984-28.167-5.99-7.78-14.707-11.67-26.153-11.67-5.324 0-10.249.805-14.774 2.415-4.526 1.61-7.587 3.085-9.184 4.426a165.146 165.146 0 01-1.997-9.054 46.483 46.483 0 01-.798-8.651c0-9.658 1.664-18.242 4.991-25.753 3.328-7.511 7.92-14.486 13.776-20.924 5.856-6.439 12.777-12.609 20.763-18.51 7.986-5.902 16.637-11.938 25.954-18.108L313.032 99c-12.778 6.975-24.89 14.352-36.336 22.131-11.446 7.78-21.562 16.9-30.346 27.363-8.785 10.462-15.706 22.534-20.763 36.215-5.058 13.681-7.587 29.777-7.587 48.287 0 7.511 1.264 15.29 3.793 23.339 2.53 8.047 6.389 15.358 11.58 21.93 5.19 6.572 11.779 12.005 19.765 16.297 7.986 4.292 17.436 6.438 28.35 6.438zm-148 0c6.388 0 12.311-1.14 17.768-3.42 5.457-2.28 10.315-5.433 14.574-9.456a43.696 43.696 0 009.983-14.084c2.395-5.365 3.593-11.133 3.593-17.303 0-10.999-2.994-20.388-8.984-28.167-5.99-7.78-14.707-11.67-26.153-11.67-5.324 0-10.249.805-14.774 2.415-4.526 1.61-7.587 3.085-9.184 4.426a165.146 165.146 0 01-1.997-9.054 46.483 46.483 0 01-.798-8.651c0-9.658 1.664-18.242 4.991-25.753 3.328-7.511 7.92-14.486 13.776-20.924 5.856-6.439 12.777-12.609 20.763-18.51 7.986-5.902 16.637-11.938 25.954-18.108L165.032 99c-12.778 6.975-24.89 14.352-36.336 22.131-11.446 7.78-21.562 16.9-30.346 27.363-8.785 10.462-15.706 22.534-20.763 36.215C72.529 198.39 70 214.486 70 232.996c0 7.511 1.264 15.29 3.793 23.339 2.53 8.047 6.389 15.358 11.58 21.93 5.19 6.572 11.779 12.005 19.765 16.297 7.986 4.292 17.436 6.438 28.35 6.438z"></path></svg>'},687:s=>{s.exports='<svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg"><path d="M204.615 84L288 320h-53.354l-15.175-48.513h-86.74L116.437 320H65l84.024-236h55.59zm-28.275 53.957l-30.35 92.863h59.743l-29.393-92.863zm211.05-36.018l.256.25c5.579 5.578 5.662 14.57.25 20.25l-.25.256-45.49 45.49c-5.577 5.578-14.57 5.66-20.25.25l-.255-.25-45.49-45.49c-5.663-5.663-5.663-14.844 0-20.506 5.578-5.578 14.57-5.662 20.25-.25l.256.25 35.236 35.236 35.237-35.236c5.578-5.578 14.57-5.662 20.25-.25z"></path></svg>'}},n={};function i(s){var a=n[s];if(a!==void 0)return a.exports;var l=n[s]={id:s,exports:{}};return t[s](l,l.exports,i),l.exports}i.n=s=>{var a=s&&s.__esModule?()=>s.default:()=>s;return i.d(a,{a}),a},i.d=(s,a)=>{for(var l in a)i.o(a,l)&&!i.o(s,l)&&Object.defineProperty(s,l,{enumerable:!0,get:a[l]})},i.o=(s,a)=>Object.prototype.hasOwnProperty.call(s,a),i.nc=void 0;var r={};return(()=>{i.d(r,{default:()=>M});var s=i(72),a=i.n(s),l=i(825),c=i.n(l),u=i(659),p=i.n(u),h=i(56),g=i.n(h),f=i(540),m=i.n(f),L=i(113),_=i.n(L),k=i(208),N={};function H(T,O=null,b={}){const x=document.createElement(T);Array.isArray(O)?x.classList.add(...O):O&&x.classList.add(O);for(const S in b)x[S]=b[S];return x}N.styleTagTransform=_(),N.setAttributes=g(),N.insert=p().bind(null,"head"),N.domAPI=c(),N.insertStyleElement=m(),a()(k.A,N),k.A&&k.A.locals&&k.A.locals;var I=i(152),D=i.n(I),C=i(188),w=i.n(C),A=i(687),R=i.n(A);class M{constructor({api:O,data:b,config:x,block:S}){this.api=O,this.data=b,this.config=x,this.block=S,this.variants=[{name:"call-out",icon:D(),title:this.api.i18n.t("Call-out")},{name:"citation",icon:w(),title:this.api.i18n.t("Citation")},{name:"details",icon:R(),title:this.api.i18n.t("Details")}],this.wrapper=void 0}static get isTune(){return!0}static get CSS(){return{toggler:"cdx-text-variant__toggler"}}render(){const O=H("div","");return this.variants.forEach((({name:b,icon:x,title:S})=>{const B=H("div",[this.api.styles.settingsButton,M.CSS.toggler],{innerHTML:x});B.dataset.name=b,this.api.tooltip.onHover(B,S,{placement:"top",hidingDelay:500}),O.appendChild(B)})),this.api.listeners.on(O,"click",(b=>{this.tuneClicked(b)})),O}tuneClicked(O){const b=O.target.closest(`.${this.api.styles.settingsButton}`),x=b.classList.contains(this.api.styles.settingsButtonActive);b.classList.toggle(this.api.styles.settingsButtonActive,!x),this.variant=x?"":b.dataset.name,this.block.dispatchChange()}wrap(O){return this.wrapper=H("div"),this.variant=this.data,this.wrapper.appendChild(O),this.wrapper}set variant(O){this.data=O,this.variants.forEach((b=>{this.wrapper.classList.toggle(`cdx-text-variant--${b.name}`,b.name===this.data)}))}save(){return this.data||""}}})(),r.default})()))})(Ta)),Ta.exports}var f0=p0();const g0=Ws(f0);var La={exports:{}},Ru;function v0(){return Ru||(Ru=1,(function(o,e){(function(t,n){o.exports=n()})(self,(()=>(()=>{var t={424:(s,a,l)=>{l.d(a,{Z:()=>g});var c=l(81),u=l.n(c),p=l(645),h=l.n(p)()(u());h.push([s.id,`.toggle-block__selector > div {
  vertical-align: middle;
  display: inline-block;
  padding: 1% 0 1% 0;
  outline: none;
  border: none;
  width: 90%;
}

.toggle-block__selector br {
  display: none;
}

.toggle-block__icon > svg {
  vertical-align: middle;
  width: 15px;
  height: auto;
}

.toggle-block__icon:hover {
  color: #388ae5;
  cursor: pointer;
}

.bi-play-fill {
  width: 34px;
  height: 34px;
}

.toggle-block__input {
  margin-left: 5px;
}

.toggle-block__input:empty:before {
  content: attr(placeholder);
  color: gray;
  background-color: transparent;
}

.toggle-block__content-default {
  margin-left: 20px;
}

.toggle-block__item {
  margin-left: 39px;
}

.toggle-block__content-default {
  color: gray;
  border-radius: 5px;
}

.toggle-block__content-default:hover {
  cursor: pointer;
  background: rgba(55, 53, 47, 0.08);
}

div.toggle-block__hidden {
  display: none;
}
`,""]);const g=h},645:s=>{s.exports=function(a){var l=[];return l.toString=function(){return this.map((function(c){var u="",p=c[5]!==void 0;return c[4]&&(u+="@supports (".concat(c[4],") {")),c[2]&&(u+="@media ".concat(c[2]," {")),p&&(u+="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {")),u+=a(c),p&&(u+="}"),c[2]&&(u+="}"),c[4]&&(u+="}"),u})).join("")},l.i=function(c,u,p,h,g){typeof c=="string"&&(c=[[null,c,void 0]]);var f={};if(p)for(var m=0;m<this.length;m++){var L=this[m][0];L!=null&&(f[L]=!0)}for(var _=0;_<c.length;_++){var k=[].concat(c[_]);p&&f[k[0]]||(g!==void 0&&(k[5]===void 0||(k[1]="@layer".concat(k[5].length>0?" ".concat(k[5]):""," {").concat(k[1],"}")),k[5]=g),u&&(k[2]&&(k[1]="@media ".concat(k[2]," {").concat(k[1],"}")),k[2]=u),h&&(k[4]?(k[1]="@supports (".concat(k[4],") {").concat(k[1],"}"),k[4]=h):k[4]="".concat(h)),l.push(k))}},l}},81:s=>{s.exports=function(a){return a[1]}},379:s=>{var a=[];function l(p){for(var h=-1,g=0;g<a.length;g++)if(a[g].identifier===p){h=g;break}return h}function c(p,h){for(var g={},f=[],m=0;m<p.length;m++){var L=p[m],_=h.base?L[0]+h.base:L[0],k=g[_]||0,N="".concat(_," ").concat(k);g[_]=k+1;var H=l(N),I={css:L[1],media:L[2],sourceMap:L[3],supports:L[4],layer:L[5]};if(H!==-1)a[H].references++,a[H].updater(I);else{var D=u(I,h);h.byIndex=m,a.splice(m,0,{identifier:N,updater:D,references:1})}f.push(N)}return f}function u(p,h){var g=h.domAPI(h);return g.update(p),function(f){if(f){if(f.css===p.css&&f.media===p.media&&f.sourceMap===p.sourceMap&&f.supports===p.supports&&f.layer===p.layer)return;g.update(p=f)}else g.remove()}}s.exports=function(p,h){var g=c(p=p||[],h=h||{});return function(f){f=f||[];for(var m=0;m<g.length;m++){var L=l(g[m]);a[L].references--}for(var _=c(f,h),k=0;k<g.length;k++){var N=l(g[k]);a[N].references===0&&(a[N].updater(),a.splice(N,1))}g=_}}},569:s=>{var a={};s.exports=function(l,c){var u=(function(p){if(a[p]===void 0){var h=document.querySelector(p);if(window.HTMLIFrameElement&&h instanceof window.HTMLIFrameElement)try{h=h.contentDocument.head}catch{h=null}a[p]=h}return a[p]})(l);if(!u)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");u.appendChild(c)}},216:s=>{s.exports=function(a){var l=document.createElement("style");return a.setAttributes(l,a.attributes),a.insert(l,a.options),l}},565:(s,a,l)=>{s.exports=function(c){var u=l.nc;u&&c.setAttribute("nonce",u)}},795:s=>{s.exports=function(a){if(typeof document>"u")return{update:function(){},remove:function(){}};var l=a.insertStyleElement(a);return{update:function(c){(function(u,p,h){var g="";h.supports&&(g+="@supports (".concat(h.supports,") {")),h.media&&(g+="@media ".concat(h.media," {"));var f=h.layer!==void 0;f&&(g+="@layer".concat(h.layer.length>0?" ".concat(h.layer):""," {")),g+=h.css,f&&(g+="}"),h.media&&(g+="}"),h.supports&&(g+="}");var m=h.sourceMap;m&&typeof btoa<"u"&&(g+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(m))))," */")),p.styleTagTransform(g,u,p.options)})(l,a,c)},remove:function(){(function(c){if(c.parentNode===null)return!1;c.parentNode.removeChild(c)})(l)}}}},589:s=>{s.exports=function(a,l){if(l.styleSheet)l.styleSheet.cssText=a;else{for(;l.firstChild;)l.removeChild(l.firstChild);l.appendChild(document.createTextNode(a))}}},370:s=>{s.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16"><path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path></svg>'}},n={};function i(s){var a=n[s];if(a!==void 0)return a.exports;var l=n[s]={id:s,exports:{}};return t[s](l,l.exports,i),l.exports}i.n=s=>{var a=s&&s.__esModule?()=>s.default:()=>s;return i.d(a,{a}),a},i.d=(s,a)=>{for(var l in a)i.o(a,l)&&!i.o(s,l)&&Object.defineProperty(s,l,{enumerable:!0,get:a[l]})},i.o=(s,a)=>Object.prototype.hasOwnProperty.call(s,a),i.nc=void 0;var r={};return(()=>{i.d(r,{default:()=>T});var s=i(379),a=i.n(s),l=i(795),c=i.n(l),u=i(569),p=i.n(u),h=i(565),g=i.n(h),f=i(216),m=i.n(f),L=i(589),_=i.n(L),k=i(424),N={};N.styleTagTransform=_(),N.setAttributes=g(),N.insert=p().bind(null,"head"),N.domAPI=c(),N.insertStyleElement=m(),a()(k.Z,N),k.Z&&k.Z.locals&&k.Z.locals;const H={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let I;const D=new Uint8Array(16);function C(){if(!I&&(I=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!I))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return I(D)}const w=[];for(let O=0;O<256;++O)w.push((O+256).toString(16).slice(1));const A=function(O,b,x){if(H.randomUUID&&!b&&!O)return H.randomUUID();const S=(O=O||{}).random||(O.rng||C)();return S[6]=15&S[6]|64,S[8]=63&S[8]|128,(function(B,j=0){return(w[B[j+0]]+w[B[j+1]]+w[B[j+2]]+w[B[j+3]]+"-"+w[B[j+4]]+w[B[j+5]]+"-"+w[B[j+6]]+w[B[j+7]]+"-"+w[B[j+8]]+w[B[j+9]]+"-"+w[B[j+10]]+w[B[j+11]]+w[B[j+12]]+w[B[j+13]]+w[B[j+14]]+w[B[j+15]]).toLowerCase()})(S)};var R=i(370),M=i.n(R);class T{static get toolbox(){return{title:"Toggle",icon:M()}}static get enableLineBreaks(){return!0}static get isReadOnlySupported(){return!0}constructor({data:b,api:x,readOnly:S,config:B}){this.data={text:b.text||"",status:b.status||"open",fk:b.fk||`fk-${A()}`,items:b.items||0},this.itemsId=[],this.api=x;const{toolbar:{close:j},blocks:{getCurrentBlockIndex:q,getBlockByIndex:P,getBlocksCount:U,move:K}}=this.api;this.close=j,this.getCurrentBlockIndex=q,this.getBlocksCount=U,this.getBlockByIndex=P,this.move=K,this.wrapper=void 0,this.readOnly=S||!1,this.placeholder=B?.placeholder??"Toggle",this.defaultContent=B?.defaultContent??"Empty toggle. Click or drop blocks inside.",this.addListeners(),this.addSupportForUndoAndRedoActions(),this.addSupportForDragAndDropActions(),this.addSupportForCopyAndPasteAction()}isAToggleItem(b){return b.classList.contains("toggle-block__item")}isAToggleRoot(b){return b.classList.contains("toggle-block__selector")||!!b.querySelector(".toggle-block__selector")}createParagraphFromToggleRoot(b){if(b.code==="Enter"){const x=document.getSelection().focusOffset,S=this.api.blocks.getCurrentBlockIndex(),B=this.api.blocks.getBlockByIndex(S),{holder:j}=B,q=j.firstChild.firstChild,P=q.children[1].innerHTML,U=P.indexOf("<br>"),K=U===-1?P.length:U;this.data.status==="closed"&&(this.resolveToggleAction(),this.hideAndShowBlocks());const X=P.slice(K+4,x.focusOffset);q.children[1].innerHTML=P.slice(x.focusOffset,K),this.api.blocks.insert("paragraph",{text:X},{},S+1,1),this.setAttributesToNewBlock()}}createParagraphFromIt(){this.setAttributesToNewBlock()}setAttributesToNewBlock(b=null,x=this.wrapper.id,S=null){const B=b===null?this.api.blocks.getCurrentBlockIndex():b,j=S||this.api.blocks.getBlockByIndex(B),q=A();this.itemsId.includes(j.id)||this.itemsId.splice(B-1,0,j.id);const{holder:P}=j,U=P.firstChild.firstChild;P.setAttribute("foreignKey",x),P.setAttribute("id",q),setTimeout((()=>P.classList.add("toggle-block__item"))),this.readOnly||(P.onkeydown=this.setEventsToNestedBlock.bind(this),U.focus())}setEventsToNestedBlock(b){if(b.code==="Enter")setTimeout((()=>this.createParagraphFromIt()));else{const x=this.getCurrentBlockIndex(),S=this.getBlockByIndex(x),{holder:B}=S;if(b.code==="Tab"&&b.shiftKey&&this.extractBlock(x),b.code==="Backspace"){const j=document.getSelection().focusOffset;this.removeBlock(B,S.id,j)}}}removeBlock(b,x,S){if(S===0){const B=this.itemsId.indexOf(x);this.itemsId.splice(B,1)}}removeAttributesFromNewBlock(b){const x=this.api.blocks.getBlockByIndex(b),{holder:S}=x;if(!this.itemsId.includes(x.id)){const B=this.itemsId.indexOf(x.id);this.itemsId.splice(B,1)}S.removeAttribute("foreignKey"),S.removeAttribute("id"),S.onkeydown={},S.onkeyup={},S.classList.remove("toggle-block__item")}createToggle(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("toggle-block__selector"),this.wrapper.id=this.data.fk;const b=document.createElement("span"),x=document.createElement("div"),S=document.createElement("div");b.classList.add("toggle-block__icon"),b.innerHTML=M(),x.classList.add("toggle-block__input"),x.setAttribute("contentEditable",!this.readOnly),x.innerHTML=this.data.text||"",this.readOnly||(x.addEventListener("keyup",this.createParagraphFromToggleRoot.bind(this)),x.addEventListener("keydown",this.removeToggle.bind(this)),x.addEventListener("focusin",(()=>this.setFocusToggleRootAtTheEnd())),x.addEventListener("keyup",this.setPlaceHolder.bind(this)),x.setAttribute("placeholder",this.placeholder),x.addEventListener("focus",this.setDefaultContent.bind(this)),x.addEventListener("focusout",this.setDefaultContent.bind(this)),S.addEventListener("click",this.clickInDefaultContent.bind(this)),x.addEventListener("focus",this.setNestedBlockAttributes.bind(this))),S.classList.add("toggle-block__content-default","toggle-block__hidden"),S.innerHTML=this.defaultContent,this.wrapper.appendChild(b),this.wrapper.appendChild(x),this.wrapper.appendChild(S)}setFocusToggleRootAtTheEnd(){const b=document.activeElement,x=window.getSelection(),S=document.createRange();x.removeAllRanges(),S.selectNodeContents(b),S.collapse(!1),x.addRange(S),b.focus()}clickInDefaultContent(){this.api.blocks.insert(),this.setAttributesToNewBlock(),this.setDefaultContent()}setDefaultContent(){const b=document.querySelectorAll(`div[foreignKey="${this.wrapper.id}"]`),{firstChild:x,lastChild:S}=this.wrapper,{status:B}=this.data,j=b.length>0||B==="closed";S.classList.toggle("toggle-block__hidden",j),x.style.color=b.length===0?"gray":"black"}removeToggle(b){if(b.code==="Backspace"){const{children:x}=this.wrapper,S=x[1].innerHTML;if(document.getSelection().focusOffset===0){const B=this.api.blocks.getCurrentBlockIndex(),j=S.indexOf("<br>"),q=j===-1?S.length:j,P=document.querySelectorAll(`div[foreignKey="${this.wrapper.id}"]`);for(let U=1;U<P.length+1;U+=1)this.removeAttributesFromNewBlock(B+U);this.api.blocks.delete(B),this.api.blocks.insert("paragraph",{text:S.slice(0,q)},{},B,1),this.api.caret.setToBlock(B)}}}findToggleRootIndex(b,x){const S=this.getBlockByIndex(b),{holder:B}=S;return this.isAToggleRoot(B)&&x===B.querySelector(".toggle-block__selector").getAttribute("id")?b:b-1>=0?this.findToggleRootIndex(b-1,x):-1}extractBlock(b){const x=this.getBlockByIndex(b),{holder:S}=x;if(this.isAToggleItem(S)){const B=S.getAttribute("foreignKey"),j=this.findToggleRootIndex(b,B);if(j>=0){const q=this.getDescendantsNumber(B),P=j+q;q>1&&this.api.blocks.move(P,b),setTimeout((()=>this.removeAttributesFromNewBlock(P)),200)}}this.api.caret.setToBlock(b),this.api.toolbar.close()}setPlaceHolder(b){if(b.code==="Backspace"||b.code==="Enter"){const{children:x}=this.wrapper,{length:S}=x[1].textContent;S===0&&(x[1].textContent="")}}render(){return this.createToggle(),setTimeout((()=>this.renderItems())),setTimeout((()=>this.setInitialTransition())),this.wrapper}setInitialTransition(){const{status:b}=this.data,x=this.wrapper.firstChild.firstChild;x.style.transition="0.1s",x.style.transform=`rotate(${b==="closed"?0:90}deg)`}renderItems(){const b=this.api.blocks.getBlocksCount(),x=this.wrapper.firstChild;let S;if(this.readOnly){const B=document.getElementsByClassName("codex-editor__redactor")[0],{children:j}=B,{length:q}=j;for(let P=0;P<q;P+=1){const U=j[P].firstChild.firstChild,{id:K}=U;if(K===this.wrapper.id){S=P;break}}}else{const B=this.wrapper.children[1];let j={},q=this.api.blocks.getCurrentBlockIndex();const P=q===b-1?-1:1;for(;j[1]!==B;){S=q;const U=this.api.blocks.getBlockByIndex(S);if(!U)break;const{holder:K}=U;j=K.firstChild.firstChild.children,q+=P}}if(S+this.data.items<b)for(let B=S+1,j=0;B<=S+this.data.items;B+=1){const q=this.api.blocks.getBlockByIndex(B),{holder:P}=q,U=P.firstChild.firstChild;if(this.isPartOfAToggle(U)){this.data.items=j;break}this.setAttributesToNewBlock(B),j+=1}else this.data.items=0;x.addEventListener("click",(()=>{this.resolveToggleAction(),setTimeout((()=>{this.hideAndShowBlocks()}))})),this.hideAndShowBlocks()}resolveToggleAction(){const b=this.wrapper.firstChild.firstChild;this.data.status==="closed"?(this.data.status="open",b.style.transform="rotate(90deg)"):(this.data.status="closed",b.style.transform="rotate(0deg)"),this.api.blocks.getBlockByIndex(this.api.blocks.getCurrentBlockIndex()).holder.setAttribute("status",this.data.status)}hideAndShowBlocks(b=this.wrapper.id,x=this.data.status){const S=document.querySelectorAll(`div[foreignKey="${b}"]`),{length:B}=S;if(B>0)S.forEach((j=>{j.hidden=x==="closed";const q=j.querySelectorAll(".toggle-block__selector");if(q.length>0){const P=x==="closed"?x:j.getAttribute("status");this.hideAndShowBlocks(q[0].getAttribute("id"),P)}}));else if(b===this.wrapper.id){const{lastChild:j}=this.wrapper;j.classList.toggle("toggle-block__hidden",x)}}save(b){const x=b.getAttribute("id"),{children:S}=b,B=S[1].innerHTML,j=document.querySelectorAll(`div[foreignKey="${x}"]`);return this.data.fk=x,Object.assign(this.data,{text:B,items:j.length})}getDescendantsNumber(b){let x=0;return document.querySelectorAll(`div[foreignKey="${b}"]`).forEach((S=>{if(S.hasAttribute("status")){const B=S.querySelector(".toggle-block__selector").getAttribute("id");x+=this.getDescendantsNumber(B)}x+=1})),x}highlightToggleItems(b){document.querySelectorAll(`div[foreignKey="${b}"]`).forEach((x=>{if(x.classList.add("ce-block--selected"),x.hasAttribute("status")){const S=x.querySelector(".toggle-block__selector").getAttribute("id");this.highlightToggleItems(S)}}))}renderSettings(){const b=document.getElementsByClassName("ce-settings")[0];return setTimeout((()=>{const x=b.lastChild,S=this.api.blocks.getCurrentBlockIndex();this.highlightToggleItems(this.wrapper.id);const B=x.querySelector('[data-item-name="move-up"]')||x.getElementsByClassName("ce-tune-move-up")[0],j=x.querySelector('[data-item-name="move-down"]')||x.getElementsByClassName("ce-tune-move-down")[0],q=x.querySelector('[data-item-name="delete"]')||x.getElementsByClassName("ce-settings__button--delete")[0];this.addEventsMoveButtons(j,0,S),this.addEventsMoveButtons(B,1,S),this.addEventDeleteButton(q,S)})),document.createElement("div")}addEventsMoveButtons(b,x,S){b&&b.addEventListener("click",(()=>{this.moveToggle(S,x)}))}addEventDeleteButton(b,x){b&&b.addEventListener("click",(()=>{const S=b.classList;Object.values(S).indexOf("clicked-to-destroy-toggle")===-1?b.classList.add("clicked-to-destroy-toggle"):this.removeFullToggle(x)}))}moveToggle(b,x){if(!this.readOnly){this.close();const S=this.getCurrentBlockIndex(),B=this.getDescendantsNumber(this.wrapper.id),j=this.getBlocksCount(),q=b+B;this.move(b,S),b>=0&&q<=j-1&&(x===0?this.moveDown(b,q):this.moveUp(b,q))}}moveDown(b,x){const S=x+1,B=this.getBlockByIndex(S),{holder:j}=B;if(this.move(b,S),B.name==="toggle"){const q=j.querySelector(".toggle-block__selector").getAttribute("id"),P=this.getDescendantsNumber(q);this.moveDescendants(P,b+1,S+1,0)}}moveUp(b,x){const S=b-1,B=this.getBlockByIndex(S);if(B.name==="toggle")return;const{holder:j}=B;if(j.hasAttribute("foreignKey")){const q=this.getBlockByIndex(b).holder.getAttribute("foreignKey"),P=j.getAttribute("foreignKey");if(P!==q){const U=this.findIndexOfParentBlock(q,P,b),K=this.getBlockByIndex(U).holder.querySelector(".toggle-block__selector").getAttribute("id"),X=this.getDescendantsNumber(K);return this.move(x,U),void this.moveDescendants(X,x,U,1)}}this.move(x,S)}findIndexOfParentBlock(b,x,S){const B=S-(this.getDescendantsNumber(x)+1),j=this.getBlockByIndex(B).holder;if(j.hasAttribute("foreignKey")){const q=j.getAttribute("foreignKey");if(q!==b){const P=this.getBlockByIndex(B-1).holder;if(P.hasAttribute("foreignKey")){const U=P.getAttribute("foreignKey");if(U!==q)return this.findIndexOfParentBlock(b,U,B)}}}return B}moveDescendants(b,x,S,B){let j=S,q=x;for(;b;)this.move(q,j),B===0&&(j+=1,q+=1),b-=1}removeFullToggle(b){const x=document.querySelectorAll(`div[foreignKey="${this.wrapper.id}"]`),{length:S}=x;for(let B=b;B<b+S;B+=1)setTimeout((()=>this.api.blocks.delete(b)))}addListeners(){this.readOnly||document.activeElement.addEventListener("keyup",(b=>{const x=document.activeElement,S=this.getCurrentBlockIndex(),{holder:B}=this.getBlockByIndex(S);b.code==="Space"?this.createToggleWithShortcut(x):S>0&&!this.isPartOfAToggle(B)&&b.code==="Tab"&&this.nestBlock(B)}))}addSupportForUndoAndRedoActions(){if(!this.readOnly){const b=document.querySelector("div.codex-editor__redactor"),x={attributes:!0,childList:!0,characterData:!0};new MutationObserver((S=>{S.forEach((B=>{B.type==="childList"&&setTimeout(this.restoreItemAttributes.bind(this,B))}))})).observe(b,x)}}getIndex=b=>Array.from(b.parentNode.children).indexOf(b);isChild=(b,x)=>!(!b||!x)&&(b===x||[...document.querySelectorAll(`div[foreignKey="${b}"]`)].some((S=>{const B=S.querySelector(".toggle-block__selector");return!!B&&this.isChild(B.getAttribute("id"),x)})));addSupportForDragAndDropActions(){if(!this.readOnly){if(this.wrapper===void 0)return void setTimeout((()=>this.addSupportForDragAndDropActions()),250);document.querySelector(`#${this.wrapper.id}`).parentNode.parentNode.setAttribute("status",this.data.status);const b=document.querySelector(".ce-toolbar__settings-btn");b.setAttribute("draggable","true"),b.addEventListener("dragstart",(()=>{this.startBlock=this.api.blocks.getCurrentBlockIndex(),this.nameDragged=this.api.blocks.getBlockByIndex(this.startBlock).name,this.holderDragged=this.api.blocks.getBlockByIndex(this.startBlock).holder})),document.addEventListener("drop",(x=>{const{target:S}=x;if(document.contains(S)){const B=S.classList.contains("ce-block")?S:S.closest(".ce-block");if(B&&B!==this.holderDragged){let j=this.getIndex(B);j=this.startBlock<j?j+1:j;const q=B.querySelectorAll(".toggle-block__selector").length>0||B.getAttribute("foreignKey")!==null;setTimeout((()=>{if(this.nameDragged==="toggle"){const P=this.holderDragged.querySelector(`#${this.wrapper.id}`);if(P)if(this.isChild(P.getAttribute("id"),B.getAttribute("foreignKey"))){if(this.startBlock===j?this.api.blocks.move(this.startBlock+1,j):this.api.blocks.move(this.startBlock,j),!q){const U=this.getIndex(this.holderDragged);this.removeAttributesFromNewBlock(U)}}else this.assignToggleItemAttributes(q,B),this.moveChildren(j)}else this.nameDragged&&this.assignToggleItemAttributes(q,B);if(!q){const P=this.getIndex(this.holderDragged);this.removeAttributesFromNewBlock(P)}}))}}}))}}assignToggleItemAttributes(b,x){if(b){const S=x.getAttribute("foreignKey")??x.querySelector(".toggle-block__selector").getAttribute("id"),B=this.getIndex(this.holderDragged);this.setAttributesToNewBlock(B,S)}}moveChildren(b,x=this.wrapper.id){let S=document.querySelectorAll(`div[foreignKey="${x}"]`);S=this.startBlock>=b?[...S].reverse():S,S.forEach((B=>{const j=this.getIndex(B);this.api.blocks.move(b,j);const q=B.querySelectorAll(".toggle-block__selector");if(q.length>0){const P=this.getIndex(B),U=this.startBlock<b?0:1;q.forEach((X=>this.moveChildren(P+U,X.getAttribute("id"))));const K=Math.abs(b-P);b=this.startBlock<b?b+K:b-K}}))}restoreItemAttributes(b){if(this.wrapper!==void 0){const x=this.api.blocks.getCurrentBlockIndex(),S=this.api.blocks.getBlockByIndex(x),{holder:B}=S,j=!this.isPartOfAToggle(B),{length:q}=this.itemsId,{length:P}=document.querySelectorAll(`div[foreignKey="${this.data.fk}"]`);if(this.itemsId.includes(S.id)&&j)this.setAttributesToNewBlock(x);else if(b.addedNodes[0]&&b?.previousSibling&&this.isPartOfAToggle(b.previousSibling)&&!this.isPartOfAToggle(b.addedNodes[0])&&q>P){const{id:U}=b.addedNodes[0],K=this.api.blocks.getById(U);this.setAttributesToNewBlock(null,this.wrapper.id,K),this.itemsId[x]=S.id}}}createToggleWithShortcut(b){const x=b.textContent;if(x[0]===">"&&!this.isPartOfAToggle(b)){const S=this.api.blocks.getCurrentBlockIndex();this.api.blocks.insert("toggle",{text:x.slice(2)},this.api,S,!0),this.api.blocks.delete(S+1),this.api.caret.setToBlock(S)}}nestBlock(b){const x=b.previousElementSibling,S=x.firstChild.firstChild;if(this.isPartOfAToggle(S)||this.isPartOfAToggle(x)){const B=x.getAttribute("foreignKey"),j=S.getAttribute("id"),q=B||j;b.setAttribute("will-be-a-nested-block",!0),document.getElementById(q).children[1].focus()}}setNestedBlockAttributes(){const b=this.api.blocks.getCurrentBlockIndex(),x=this.api.blocks.getBlockByIndex(b),{holder:S}=x;S.getAttribute("will-be-a-nested-block")&&(S.removeAttribute("will-be-a-nested-block"),this.setAttributesToNewBlock(b),this.api.toolbar.close())}isPartOfAToggle(b){const x=Array.from(b.classList),S=["toggle-block__item","toggle-block__input","toggle-block__selector"],B=S.some((j=>b.getElementsByClassName(j).length!==0));return S.some((j=>x.includes(j)))||B}addSupportForCopyAndPasteAction(){if(!this.readOnly){const b=document.querySelector("div.codex-editor__redactor"),x={attributes:!0,childList:!0,characterData:!0};new MutationObserver((S=>{S.forEach((B=>{B.type==="childList"&&setTimeout(this.resetIdToCopiedBlock.bind(this,B))}))})).observe(b,x)}}resetIdToCopiedBlock(){if(this.wrapper!==void 0){const b=this.api.blocks.getCurrentBlockIndex(),{holder:x}=this.api.blocks.getBlockByIndex(b);if(this.isPartOfAToggle(x)){const S=x.getAttribute("foreignKey");if(document.querySelectorAll(`#${S}`).length>1){const B=this.findToggleRootIndex(b,S),j=A();for(let q=B;q<=b;q+=1){const P=this.api.blocks.getBlockByIndex(q),{holder:U}=P;q===B?U.firstChild.firstChild.setAttribute("id",`fk-${j}`):U.setAttribute("foreignKey",`fk-${j}`)}}}}}}})(),r.default})()))})(La)),La.exports}var m0=v0();const b0=Ws(m0);function Ti(o,e="docs-tab"){const t={holder:e,data:o||null,tools:{underline:tl,header:{class:Qa,inlineToolbar:!0},paragraph:{class:Sc,inlineToolbar:!0,config:{placeholder:"This panel can be used to document and describe your languge’s features in greater detail."}},table:{class:el,inlineToolbar:!0,config:{rows:3,cols:3,withHeadings:!0}},list:{class:c0,inlineToolbar:!0},toggle:{class:b0,inlineToolbar:!0},alignment:{class:h0,config:{default:"left"}},textVariant:g0},tunes:["alignment","textVariant"],logLevel:"ERROR",readOnly:e==="ref-docs"},n=new cs(t);e==="docs-tab"&&Ro.set(n)}const In=()=>Ge(W);function Ao(o){let e=In().HeaderTags.toLowerCase().trim().split(/\s+/);e[0]||(e=[]);let t=In().Alphabet;const n=In().IgnoreDiacritics,i=In().CaseSensitive,r=structuredClone(o),s=[];for(const p of e){s.push([]);for(const h in r)(()=>{const g=[];return r[h].Senses.forEach(f=>{g.push(...f.tags)}),g})().includes(p)&&s[s.length-1].push(h);for(const h of s[s.length-1])delete r[h]}const a=[];for(const p in r)a.push(p);s.push(a),t=i?t.trim():t.trim().toLowerCase();const l=t.split(/\s+/),c=Array.from(new Set(l)).sort((p,h)=>h.length-p.length),u=[];for(const p of s){const h={},g=[];for(const m of p){let L=i?m:m.toLowerCase();L=n?L.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),""):L;for(const k of c)L=L.replace(new RegExp(`${k.replace(/[-[\]{}()*+?.,\\/^$|#\s]/g,"\\$&")}`,"g"),`${l.indexOf(k)}.`);const _=L.split(".");for(const k of _)_[_.indexOf(k)]=+k||0;h[m]=_,g.push(_)}g.sort((m,L)=>{for(const _ of m){const k=L[m.indexOf(_)];if(_!==k)return _-k}return 0});const f=[];for(const m in h)f.push([m,g.indexOf(h[m])]);f.sort((m,L)=>m[1]-L[1]);for(let m=0;m<f.length;m++)f[m]=f[m][0];for(const m of f)u.push(m)}return u}function y0(o){const e=In().Alphabet.trim().split(/\s+/).sort((t,n)=>n.length-t.length);return o=In().CaseSensitive?o:o.toLowerCase(),o=In().IgnoreDiacritics?o.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),""):o,e.forEach(t=>{o=o.replaceAll(t,"")}),!o.replaceAll(/\s+/g,"")}function pd(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Yn=pd();function Bf(o){Yn=o}var sr={exec:()=>null};function qe(o,e=""){let t=typeof o=="string"?o:o.source,n={replace:(i,r)=>{let s=typeof r=="string"?r:r.source;return s=s.replace(jt.caret,"$1"),t=t.replace(i,s),n},getRegex:()=>new RegExp(t,e)};return n}var jt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:o=>new RegExp(`^( {0,3}${o})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}#`),htmlBeginRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}<(?:[a-z].*>|!--)`,"i")},w0=/^(?:[ \t]*(?:\n|$))+/,k0=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,x0=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,_r=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,_0=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,fd=/(?:[*+-]|\d{1,9}[.)])/,Of=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,If=qe(Of).replace(/bull/g,fd).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),E0=qe(Of).replace(/bull/g,fd).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),gd=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,C0=/^[^\n]+/,vd=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,S0=qe(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",vd).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),T0=qe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,fd).getRegex(),qs="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",md=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,L0=qe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",md).replace("tag",qs).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Af=qe(gd).replace("hr",_r).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qs).getRegex(),B0=qe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Af).getRegex(),bd={blockquote:B0,code:k0,def:S0,fences:x0,heading:_0,hr:_r,html:L0,lheading:If,list:T0,newline:w0,paragraph:Af,table:sr,text:C0},Du=qe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",_r).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qs).getRegex(),O0={...bd,lheading:E0,table:Du,paragraph:qe(gd).replace("hr",_r).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Du).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qs).getRegex()},I0={...bd,html:qe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",md).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:sr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:qe(gd).replace("hr",_r).replace("heading",` *#{1,6} *[^
]`).replace("lheading",If).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},A0=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,P0=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Pf=/^( {2,}|\\)\n(?!\s*$)/,M0=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Vs=/[\p{P}\p{S}]/u,yd=/[\s\p{P}\p{S}]/u,Mf=/[^\s\p{P}\p{S}]/u,N0=qe(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,yd).getRegex(),Nf=/(?!~)[\p{P}\p{S}]/u,$0=/(?!~)[\s\p{P}\p{S}]/u,R0=/(?:[^\s\p{P}\p{S}]|~)/u,D0=qe(/link|code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<!`)(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("code",/(?<!`)(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),$f=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,j0=qe($f,"u").replace(/punct/g,Vs).getRegex(),F0=qe($f,"u").replace(/punct/g,Nf).getRegex(),Rf="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",H0=qe(Rf,"gu").replace(/notPunctSpace/g,Mf).replace(/punctSpace/g,yd).replace(/punct/g,Vs).getRegex(),z0=qe(Rf,"gu").replace(/notPunctSpace/g,R0).replace(/punctSpace/g,$0).replace(/punct/g,Nf).getRegex(),U0=qe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Mf).replace(/punctSpace/g,yd).replace(/punct/g,Vs).getRegex(),W0=qe(/\\(punct)/,"gu").replace(/punct/g,Vs).getRegex(),q0=qe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),V0=qe(md).replace("(?:-->|$)","-->").getRegex(),G0=qe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",V0).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),hs=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,K0=qe(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",hs).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Df=qe(/^!?\[(label)\]\[(ref)\]/).replace("label",hs).replace("ref",vd).getRegex(),jf=qe(/^!?\[(ref)\](?:\[\])?/).replace("ref",vd).getRegex(),Y0=qe("reflink|nolink(?!\\()","g").replace("reflink",Df).replace("nolink",jf).getRegex(),ju=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,wd={_backpedal:sr,anyPunctuation:W0,autolink:q0,blockSkip:D0,br:Pf,code:P0,del:sr,emStrongLDelim:j0,emStrongRDelimAst:H0,emStrongRDelimUnd:U0,escape:A0,link:K0,nolink:jf,punctuation:N0,reflink:Df,reflinkSearch:Y0,tag:G0,text:M0,url:sr},Z0={...wd,link:qe(/^!?\[(label)\]\((.*?)\)/).replace("label",hs).getRegex(),reflink:qe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",hs).getRegex()},il={...wd,emStrongRDelimAst:z0,emStrongLDelim:F0,url:qe(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",ju).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:qe(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",ju).getRegex()},X0={...il,br:qe(Pf).replace("{2,}","*").getRegex(),text:qe(il.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Fr={normal:bd,gfm:O0,pedantic:I0},Vi={normal:wd,gfm:il,breaks:X0,pedantic:Z0},J0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Fu=o=>J0[o];function Eo(o,e){if(e){if(jt.escapeTest.test(o))return o.replace(jt.escapeReplace,Fu)}else if(jt.escapeTestNoEncode.test(o))return o.replace(jt.escapeReplaceNoEncode,Fu);return o}function Hu(o){try{o=encodeURI(o).replace(jt.percentDecode,"%")}catch{return null}return o}function zu(o,e){let t=o.replace(jt.findPipe,(r,s,a)=>{let l=!1,c=s;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),n=t.split(jt.splitPipe),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(jt.slashPipe,"|");return n}function Gi(o,e,t){let n=o.length;if(n===0)return"";let i=0;for(;i<n&&o.charAt(n-i-1)===e;)i++;return o.slice(0,n-i)}function Q0(o,e){if(o.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<o.length;n++)if(o[n]==="\\")n++;else if(o[n]===e[0])t++;else if(o[n]===e[1]&&(t--,t<0))return n;return t>0?-2:-1}function Uu(o,e,t,n,i){let r=e.href,s=e.title||null,a=o[1].replace(i.other.outputLinkReplace,"$1");n.state.inLink=!0;let l={type:o[0].charAt(0)==="!"?"image":"link",raw:t,href:r,title:s,text:a,tokens:n.inlineTokens(a)};return n.state.inLink=!1,l}function ex(o,e,t){let n=o.match(t.other.indentCodeCompensation);if(n===null)return e;let i=n[1];return e.split(`
`).map(r=>{let s=r.match(t.other.beginningSpace);if(s===null)return r;let[a]=s;return a.length>=i.length?r.slice(i.length):r}).join(`
`)}var ps=class{options;rules;lexer;constructor(o){this.options=o||Yn}space(o){let e=this.rules.block.newline.exec(o);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(o){let e=this.rules.block.code.exec(o);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Gi(t,`
`)}}}fences(o){let e=this.rules.block.fences.exec(o);if(e){let t=e[0],n=ex(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(o){let e=this.rules.block.heading.exec(o);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let n=Gi(t,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(t=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(o){let e=this.rules.block.hr.exec(o);if(e)return{type:"hr",raw:Gi(e[0],`
`)}}blockquote(o){let e=this.rules.block.blockquote.exec(o);if(e){let t=Gi(e[0],`
`).split(`
`),n="",i="",r=[];for(;t.length>0;){let s=!1,a=[],l;for(l=0;l<t.length;l++)if(this.rules.other.blockquoteStart.test(t[l]))a.push(t[l]),s=!0;else if(!s)a.push(t[l]);else break;t=t.slice(l);let c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${c}`:c,i=i?`${i}
${u}`:u;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,r,!0),this.lexer.state.top=p,t.length===0)break;let h=r.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let g=h,f=g.raw+`
`+t.join(`
`),m=this.blockquote(f);r[r.length-1]=m,n=n.substring(0,n.length-g.raw.length)+m.raw,i=i.substring(0,i.length-g.text.length)+m.text;break}else if(h?.type==="list"){let g=h,f=g.raw+`
`+t.join(`
`),m=this.list(f);r[r.length-1]=m,n=n.substring(0,n.length-h.raw.length)+m.raw,i=i.substring(0,i.length-g.raw.length)+m.raw,t=f.substring(r.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:r,text:i}}}list(o){let e=this.rules.block.list.exec(o);if(e){let t=e[1].trim(),n=t.length>1,i={type:"list",raw:"",ordered:n,start:n?+t.slice(0,-1):"",loose:!1,items:[]};t=n?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=n?t:"[*+-]");let r=this.rules.other.listItemRegex(t),s=!1;for(;o;){let l=!1,c="",u="";if(!(e=r.exec(o))||this.rules.block.hr.test(o))break;c=e[0],o=o.substring(c.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,_=>" ".repeat(3*_.length)),h=o.split(`
`,1)[0],g=!p.trim(),f=0;if(this.options.pedantic?(f=2,u=p.trimStart()):g?f=e[1].length+1:(f=e[2].search(this.rules.other.nonSpaceChar),f=f>4?1:f,u=p.slice(f),f+=e[1].length),g&&this.rules.other.blankLine.test(h)&&(c+=h+`
`,o=o.substring(h.length+1),l=!0),!l){let _=this.rules.other.nextBulletRegex(f),k=this.rules.other.hrRegex(f),N=this.rules.other.fencesBeginRegex(f),H=this.rules.other.headingBeginRegex(f),I=this.rules.other.htmlBeginRegex(f);for(;o;){let D=o.split(`
`,1)[0],C;if(h=D,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),C=h):C=h.replace(this.rules.other.tabCharGlobal,"    "),N.test(h)||H.test(h)||I.test(h)||_.test(h)||k.test(h))break;if(C.search(this.rules.other.nonSpaceChar)>=f||!h.trim())u+=`
`+C.slice(f);else{if(g||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||N.test(p)||H.test(p)||k.test(p))break;u+=`
`+h}!g&&!h.trim()&&(g=!0),c+=D+`
`,o=o.substring(D.length+1),p=C.slice(f)}}i.loose||(s?i.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(s=!0));let m=null,L;this.options.gfm&&(m=this.rules.other.listIsTask.exec(u),m&&(L=m[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:c,task:!!m,checked:L,loose:!1,text:u,tokens:[]}),i.raw+=c}let a=i.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){let c=i.items[l].tokens.filter(p=>p.type==="space"),u=c.length>0&&c.some(p=>this.rules.other.anyLine.test(p.raw));i.loose=u}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(o){let e=this.rules.block.html.exec(o);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(o){let e=this.rules.block.def.exec(o);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:n,title:i}}}table(o){let e=this.rules.block.table.exec(o);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=zu(e[1]),n=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],r={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===n.length){for(let s of n)this.rules.other.tableAlignRight.test(s)?r.align.push("right"):this.rules.other.tableAlignCenter.test(s)?r.align.push("center"):this.rules.other.tableAlignLeft.test(s)?r.align.push("left"):r.align.push(null);for(let s=0;s<t.length;s++)r.header.push({text:t[s],tokens:this.lexer.inline(t[s]),header:!0,align:r.align[s]});for(let s of i)r.rows.push(zu(s,r.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:r.align[l]})));return r}}lheading(o){let e=this.rules.block.lheading.exec(o);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(o){let e=this.rules.block.paragraph.exec(o);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(o){let e=this.rules.block.text.exec(o);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(o){let e=this.rules.inline.escape.exec(o);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(o){let e=this.rules.inline.tag.exec(o);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(o){let e=this.rules.inline.link.exec(o);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let r=Gi(t.slice(0,-1),"\\");if((t.length-r.length)%2===0)return}else{let r=Q0(e[2],"()");if(r===-2)return;if(r>-1){let s=(e[0].indexOf("!")===0?5:4)+e[1].length+r;e[2]=e[2].substring(0,r),e[0]=e[0].substring(0,s).trim(),e[3]=""}}let n=e[2],i="";if(this.options.pedantic){let r=this.rules.other.pedanticHrefTitle.exec(n);r&&(n=r[1],i=r[3])}else i=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?n=n.slice(1):n=n.slice(1,-1)),Uu(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(o,e){let t;if((t=this.rules.inline.reflink.exec(o))||(t=this.rules.inline.nolink.exec(o))){let n=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=e[n.toLowerCase()];if(!i){let r=t[0].charAt(0);return{type:"text",raw:r,text:r}}return Uu(t,i,t[0],this.lexer,this.rules)}}emStrong(o,e,t=""){let n=this.rules.inline.emStrongLDelim.exec(o);if(!(!n||n[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!t||this.rules.inline.punctuation.exec(t))){let i=[...n[0]].length-1,r,s,a=i,l=0,c=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*o.length+i);(n=c.exec(e))!=null;){if(r=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!r)continue;if(s=[...r].length,n[3]||n[4]){a+=s;continue}else if((n[5]||n[6])&&i%3&&!((i+s)%3)){l+=s;continue}if(a-=s,a>0)continue;s=Math.min(s,s+a+l);let u=[...n[0]][0].length,p=o.slice(0,i+n.index+u+s);if(Math.min(i,s)%2){let g=p.slice(1,-1);return{type:"em",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}let h=p.slice(2,-2);return{type:"strong",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(o){let e=this.rules.inline.code.exec(o);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(t),i=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return n&&i&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(o){let e=this.rules.inline.br.exec(o);if(e)return{type:"br",raw:e[0]}}del(o){let e=this.rules.inline.del.exec(o);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(o){let e=this.rules.inline.autolink.exec(o);if(e){let t,n;return e[2]==="@"?(t=e[1],n="mailto:"+t):(t=e[1],n=t),{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(o){let e;if(e=this.rules.inline.url.exec(o)){let t,n;if(e[2]==="@")t=e[0],n="mailto:"+t;else{let i;do i=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(i!==e[0]);t=e[0],e[1]==="www."?n="http://"+e[0]:n=e[0]}return{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(o){let e=this.rules.inline.text.exec(o);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},go=class rl{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Yn,this.options.tokenizer=this.options.tokenizer||new ps,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:jt,block:Fr.normal,inline:Vi.normal};this.options.pedantic?(t.block=Fr.pedantic,t.inline=Vi.pedantic):this.options.gfm&&(t.block=Fr.gfm,this.options.breaks?t.inline=Vi.breaks:t.inline=Vi.gfm),this.tokenizer.rules=t}static get rules(){return{block:Fr,inline:Vi}}static lex(e,t){return new rl(t).lex(e)}static lexInline(e,t){return new rl(t).inlineTokens(e)}lex(e){e=e.replace(jt.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){for(this.options.pedantic&&(e=e.replace(jt.tabCharGlobal,"    ").replace(jt.spaceLine,""));e;){let i;if(this.options.extensions?.block?.some(s=>(i=s.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))continue;if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length);let s=t.at(-1);i.raw.length===1&&s!==void 0?s.raw+=`
`:t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length);let s=t.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+i.raw,s.text+=`
`+i.text,this.inlineQueue.at(-1).src=s.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length);let s=t.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+i.raw,s.text+=`
`+i.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title},t.push(i));continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}let r=e;if(this.options.extensions?.startBlock){let s=1/0,a=e.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},a),typeof l=="number"&&l>=0&&(s=Math.min(s,l))}),s<1/0&&s>=0&&(r=e.substring(0,s+1))}if(this.state.top&&(i=this.tokenizer.paragraph(r))){let s=t.at(-1);n&&s?.type==="paragraph"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):t.push(i),n=r.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length);let s=t.at(-1);s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):t.push(i);continue}if(e){let s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n=e,i=null;if(this.tokens.links){let a=Object.keys(this.tokens.links);if(a.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)a.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,i.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let r=!1,s="";for(;e;){r||(s=""),r=!1;let a;if(this.options.extensions?.inline?.some(c=>(a=c.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.escape(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.tag(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.link(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(a.raw.length);let c=t.at(-1);a.type==="text"&&c?.type==="text"?(c.raw+=a.raw,c.text+=a.text):t.push(a);continue}if(a=this.tokenizer.emStrong(e,n,s)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.codespan(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.br(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.del(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.autolink(e)){e=e.substring(a.raw.length),t.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(e))){e=e.substring(a.raw.length),t.push(a);continue}let l=e;if(this.options.extensions?.startInline){let c=1/0,u=e.slice(1),p;this.options.extensions.startInline.forEach(h=>{p=h.call({lexer:this},u),typeof p=="number"&&p>=0&&(c=Math.min(c,p))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(a=this.tokenizer.inlineText(l)){e=e.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(s=a.raw.slice(-1)),r=!0;let c=t.at(-1);c?.type==="text"?(c.raw+=a.raw,c.text+=a.text):t.push(a);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return t}},fs=class{options;parser;constructor(o){this.options=o||Yn}space(o){return""}code({text:o,lang:e,escaped:t}){let n=(e||"").match(jt.notSpaceStart)?.[0],i=o.replace(jt.endingNewline,"")+`
`;return n?'<pre><code class="language-'+Eo(n)+'">'+(t?i:Eo(i,!0))+`</code></pre>
`:"<pre><code>"+(t?i:Eo(i,!0))+`</code></pre>
`}blockquote({tokens:o}){return`<blockquote>
${this.parser.parse(o)}</blockquote>
`}html({text:o}){return o}def(o){return""}heading({tokens:o,depth:e}){return`<h${e}>${this.parser.parseInline(o)}</h${e}>
`}hr(o){return`<hr>
`}list(o){let e=o.ordered,t=o.start,n="";for(let s=0;s<o.items.length;s++){let a=o.items[s];n+=this.listitem(a)}let i=e?"ol":"ul",r=e&&t!==1?' start="'+t+'"':"";return"<"+i+r+`>
`+n+"</"+i+`>
`}listitem(o){let e="";if(o.task){let t=this.checkbox({checked:!!o.checked});o.loose?o.tokens[0]?.type==="paragraph"?(o.tokens[0].text=t+" "+o.tokens[0].text,o.tokens[0].tokens&&o.tokens[0].tokens.length>0&&o.tokens[0].tokens[0].type==="text"&&(o.tokens[0].tokens[0].text=t+" "+Eo(o.tokens[0].tokens[0].text),o.tokens[0].tokens[0].escaped=!0)):o.tokens.unshift({type:"text",raw:t+" ",text:t+" ",escaped:!0}):e+=t+" "}return e+=this.parser.parse(o.tokens,!!o.loose),`<li>${e}</li>
`}checkbox({checked:o}){return"<input "+(o?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:o}){return`<p>${this.parser.parseInline(o)}</p>
`}table(o){let e="",t="";for(let i=0;i<o.header.length;i++)t+=this.tablecell(o.header[i]);e+=this.tablerow({text:t});let n="";for(let i=0;i<o.rows.length;i++){let r=o.rows[i];t="";for(let s=0;s<r.length;s++)t+=this.tablecell(r[s]);n+=this.tablerow({text:t})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow({text:o}){return`<tr>
${o}</tr>
`}tablecell(o){let e=this.parser.parseInline(o.tokens),t=o.header?"th":"td";return(o.align?`<${t} align="${o.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:o}){return`<strong>${this.parser.parseInline(o)}</strong>`}em({tokens:o}){return`<em>${this.parser.parseInline(o)}</em>`}codespan({text:o}){return`<code>${Eo(o,!0)}</code>`}br(o){return"<br>"}del({tokens:o}){return`<del>${this.parser.parseInline(o)}</del>`}link({href:o,title:e,tokens:t}){let n=this.parser.parseInline(t),i=Hu(o);if(i===null)return n;o=i;let r='<a href="'+o+'"';return e&&(r+=' title="'+Eo(e)+'"'),r+=">"+n+"</a>",r}image({href:o,title:e,text:t,tokens:n}){n&&(t=this.parser.parseInline(n,this.parser.textRenderer));let i=Hu(o);if(i===null)return Eo(t);o=i;let r=`<img src="${o}" alt="${t}"`;return e&&(r+=` title="${Eo(e)}"`),r+=">",r}text(o){return"tokens"in o&&o.tokens?this.parser.parseInline(o.tokens):"escaped"in o&&o.escaped?o.text:Eo(o.text)}},kd=class{strong({text:o}){return o}em({text:o}){return o}codespan({text:o}){return o}del({text:o}){return o}html({text:o}){return o}text({text:o}){return o}link({text:o}){return""+o}image({text:o}){return""+o}br(){return""}},vo=class sl{options;renderer;textRenderer;constructor(e){this.options=e||Yn,this.options.renderer=this.options.renderer||new fs,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new kd}static parse(e,t){return new sl(t).parse(e)}static parseInline(e,t){return new sl(t).parseInline(e)}parse(e,t=!0){let n="";for(let i=0;i<e.length;i++){let r=e[i];if(this.options.extensions?.renderers?.[r.type]){let a=r,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(a.type)){n+=l||"";continue}}let s=r;switch(s.type){case"space":{n+=this.renderer.space(s);continue}case"hr":{n+=this.renderer.hr(s);continue}case"heading":{n+=this.renderer.heading(s);continue}case"code":{n+=this.renderer.code(s);continue}case"table":{n+=this.renderer.table(s);continue}case"blockquote":{n+=this.renderer.blockquote(s);continue}case"list":{n+=this.renderer.list(s);continue}case"html":{n+=this.renderer.html(s);continue}case"def":{n+=this.renderer.def(s);continue}case"paragraph":{n+=this.renderer.paragraph(s);continue}case"text":{let a=s,l=this.renderer.text(a);for(;i+1<e.length&&e[i+1].type==="text";)a=e[++i],l+=`
`+this.renderer.text(a);t?n+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):n+=l;continue}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}parseInline(e,t=this.renderer){let n="";for(let i=0;i<e.length;i++){let r=e[i];if(this.options.extensions?.renderers?.[r.type]){let a=this.options.extensions.renderers[r.type].call({parser:this},r);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){n+=a||"";continue}}let s=r;switch(s.type){case"escape":{n+=t.text(s);break}case"html":{n+=t.html(s);break}case"link":{n+=t.link(s);break}case"image":{n+=t.image(s);break}case"strong":{n+=t.strong(s);break}case"em":{n+=t.em(s);break}case"codespan":{n+=t.codespan(s);break}case"br":{n+=t.br(s);break}case"del":{n+=t.del(s);break}case"text":{n+=t.text(s);break}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}},tr=class{options;block;constructor(o){this.options=o||Yn}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(o){return o}postprocess(o){return o}processAllTokens(o){return o}emStrongMask(o){return o}provideLexer(){return this.block?go.lex:go.lexInline}provideParser(){return this.block?vo.parse:vo.parseInline}},tx=class{defaults=pd();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=vo;Renderer=fs;TextRenderer=kd;Lexer=go;Tokenizer=ps;Hooks=tr;constructor(...o){this.use(...o)}walkTokens(o,e){let t=[];for(let n of o)switch(t=t.concat(e.call(this,n)),n.type){case"table":{let i=n;for(let r of i.header)t=t.concat(this.walkTokens(r.tokens,e));for(let r of i.rows)for(let s of r)t=t.concat(this.walkTokens(s.tokens,e));break}case"list":{let i=n;t=t.concat(this.walkTokens(i.items,e));break}default:{let i=n;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(r=>{let s=i[r].flat(1/0);t=t.concat(this.walkTokens(s,e))}):i.tokens&&(t=t.concat(this.walkTokens(i.tokens,e)))}}return t}use(...o){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return o.forEach(t=>{let n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let r=e.renderers[i.name];r?e.renderers[i.name]=function(...s){let a=i.renderer.apply(this,s);return a===!1&&(a=r.apply(this,s)),a}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let r=e[i.level];r?r.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),n.extensions=e),t.renderer){let i=this.defaults.renderer||new fs(this.defaults);for(let r in t.renderer){if(!(r in i))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let s=r,a=t.renderer[s],l=i[s];i[s]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u||""}}n.renderer=i}if(t.tokenizer){let i=this.defaults.tokenizer||new ps(this.defaults);for(let r in t.tokenizer){if(!(r in i))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let s=r,a=t.tokenizer[s],l=i[s];i[s]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}n.tokenizer=i}if(t.hooks){let i=this.defaults.hooks||new tr;for(let r in t.hooks){if(!(r in i))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let s=r,a=t.hooks[s],l=i[s];tr.passThroughHooks.has(r)?i[s]=c=>{if(this.defaults.async&&tr.passThroughHooksRespectAsync.has(r))return(async()=>{let p=await a.call(i,c);return l.call(i,p)})();let u=a.call(i,c);return l.call(i,u)}:i[s]=(...c)=>{if(this.defaults.async)return(async()=>{let p=await a.apply(i,c);return p===!1&&(p=await l.apply(i,c)),p})();let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}n.hooks=i}if(t.walkTokens){let i=this.defaults.walkTokens,r=t.walkTokens;n.walkTokens=function(s){let a=[];return a.push(r.call(this,s)),i&&(a=a.concat(i.call(this,s))),a}}this.defaults={...this.defaults,...n}}),this}setOptions(o){return this.defaults={...this.defaults,...o},this}lexer(o,e){return go.lex(o,e??this.defaults)}parser(o,e){return vo.parse(o,e??this.defaults)}parseMarkdown(o){return(e,t)=>{let n={...t},i={...this.defaults,...n},r=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&n.async===!1)return r(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return r(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return r(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(i.hooks&&(i.hooks.options=i,i.hooks.block=o),i.async)return(async()=>{let s=i.hooks?await i.hooks.preprocess(e):e,a=await(i.hooks?await i.hooks.provideLexer():o?go.lex:go.lexInline)(s,i),l=i.hooks?await i.hooks.processAllTokens(a):a;i.walkTokens&&await Promise.all(this.walkTokens(l,i.walkTokens));let c=await(i.hooks?await i.hooks.provideParser():o?vo.parse:vo.parseInline)(l,i);return i.hooks?await i.hooks.postprocess(c):c})().catch(r);try{i.hooks&&(e=i.hooks.preprocess(e));let s=(i.hooks?i.hooks.provideLexer():o?go.lex:go.lexInline)(e,i);i.hooks&&(s=i.hooks.processAllTokens(s)),i.walkTokens&&this.walkTokens(s,i.walkTokens);let a=(i.hooks?i.hooks.provideParser():o?vo.parse:vo.parseInline)(s,i);return i.hooks&&(a=i.hooks.postprocess(a)),a}catch(s){return r(s)}}}onError(o,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,o){let n="<p>An error occurred:</p><pre>"+Eo(t.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(t);throw t}}},Fn=new tx;function Ye(o,e){return Fn.parse(o,e)}Ye.options=Ye.setOptions=function(o){return Fn.setOptions(o),Ye.defaults=Fn.defaults,Bf(Ye.defaults),Ye};Ye.getDefaults=pd;Ye.defaults=Yn;Ye.use=function(...o){return Fn.use(...o),Ye.defaults=Fn.defaults,Bf(Ye.defaults),Ye};Ye.walkTokens=function(o,e){return Fn.walkTokens(o,e)};Ye.parseInline=Fn.parseInline;Ye.Parser=vo;Ye.parser=vo.parse;Ye.Renderer=fs;Ye.TextRenderer=kd;Ye.Lexer=go;Ye.lexer=go.lex;Ye.Tokenizer=ps;Ye.Hooks=tr;Ye.parse=Ye;Ye.options;Ye.setOptions;Ye.use;Ye.walkTokens;Ye.parseInline;vo.parse;go.lex;function hr(o){return o=o.replaceAll(/__(.+)__/g,"<u>$1</u>"),o=Ye.parse(o,{breaks:!0,smartypants:!0}),o}const Gs="https://saturnine.xyz/api/lexicanter",Ks={method:"POST",headers:{"Content-Type":"application/json"}};async function pr(o,e){try{return(await(await fetch(Gs,{...Ks,body:JSON.stringify({userid:o,key:e,action:{type:"verify"}})})).json()).success}catch(t){return t?.hasOwnProperty("message")&&t.message==="Failed to fetch"?"no connection":(console.error("Failed to verify:",t),!1)}}async function ox(o,e,t){try{const i=await(await fetch(Gs,{...Ks,body:JSON.stringify({userid:o,key:e,action:{type:"download",file:t}})})).json();if(i.success)return i.file;throw new Error(i.error||"Failed to download file")}catch(n){throw console.error("Error downloading file:",n),n}}async function nx(o,e,t){try{const i=await(await fetch(Gs,{...Ks,body:JSON.stringify({userid:o,key:e,action:{type:"upload",file:t}})})).json();if(!i.success)throw new Error(i.error||"Failed to upload file")}catch(n){throw console.error("Error uploading file:",n),n}}async function ix(o,e,t){try{const i=await(await fetch(Gs,{...Ks,body:JSON.stringify({userid:o,key:e,action:{type:"delete",file:t}})})).json();if(!i.success)throw new Error(i.error||"Failed to delete file")}catch(n){throw console.error("Error deleting file:",n),n}}var Ba,Wu;function rx(){if(Wu)return Ba;Wu=1;const{Transform:o}=require("stream"),[e]=Buffer.from("\r"),[t]=Buffer.from(`
`),n={escape:'"',headers:null,mapHeaders:({header:r})=>r,mapValues:({value:r})=>r,newline:`
`,quote:'"',raw:!1,separator:",",skipComments:!1,skipLines:null,maxRowBytes:Number.MAX_SAFE_INTEGER,strict:!1,outputByteOffset:!1};class i extends o{constructor(s={}){super({objectMode:!0,highWaterMark:16}),Array.isArray(s)&&(s={headers:s});const a=Object.assign({},n,s);a.customNewline=a.newline!==n.newline;for(const l of["newline","quote","separator"])typeof a[l]<"u"&&([a[l]]=Buffer.from(a[l]));a.escape=(s||{}).escape?Buffer.from(a.escape)[0]:a.quote,this.state={empty:a.raw?Buffer.alloc(0):"",escaped:!1,first:!0,lineNumber:0,previousEnd:0,rowLength:0,quoted:!1},this._prev=null,a.headers===!1&&(a.strict=!1),(a.headers||a.headers===!1)&&(this.state.first=!1),this.options=a,this.headers=a.headers,this.bytesRead=0}parseCell(s,a,l){const{escape:c,quote:u}=this.options;s[a]===u&&s[l-1]===u&&(a++,l--);let p=a;for(let h=a;h<l;h++)s[h]===c&&h+1<l&&s[h+1]===u&&h++,p!==h&&(s[p]=s[h]),p++;return this.parseValue(s,a,p)}parseLine(s,a,l){const{customNewline:c,escape:u,mapHeaders:p,mapValues:h,quote:g,separator:f,skipComments:m,skipLines:L}=this.options;l--,!c&&s.length&&s[l-1]===e&&l--;const _=f,k=[];let N=!1,H=a;if(m){const C=typeof m=="string"?m:"#";if(s[a]===Buffer.from(C)[0])return}const I=C=>{if(this.state.first)return C;const w=k.length,A=this.headers[w];return h({header:A,index:w,value:C})};for(let C=a;C<l;C++){const w=!N&&s[C]===g,A=N&&s[C]===g&&C+1<=l&&s[C+1]===_,R=N&&s[C]===u&&C+1<l&&s[C+1]===g;if(w||A){N=!N;continue}else if(R){C++;continue}if(s[C]===_&&!N){let M=this.parseCell(s,H,C);M=I(M),k.push(M),H=C+1}}if(H<l){let C=this.parseCell(s,H,l);C=I(C),k.push(C)}s[l-1]===_&&k.push(I(this.state.empty));const D=L&&L>this.state.lineNumber;if(this.state.lineNumber++,this.state.first&&!D){this.state.first=!1,this.headers=k.map((C,w)=>p({header:C,index:w})),this.emit("headers",this.headers);return}if(!D&&this.options.strict&&k.length!==this.headers.length){const C=new RangeError("Row length does not match headers");this.emit("error",C)}else if(!D){const C=this.bytesRead-s.length+a;this.writeRow(k,C)}}parseValue(s,a,l){return this.options.raw?s.slice(a,l):s.toString("utf-8",a,l)}writeRow(s,a){const l=this.headers===!1?s.map((u,p)=>p):this.headers,c=s.reduce((u,p,h)=>{const g=l[h];return g===null||(g!==void 0?u[g]=p:u[`_${h}`]=p),u},{});this.options.outputByteOffset?this.push({row:c,byteOffset:a}):this.push(c)}_flush(s){if(this.state.escaped||!this._prev)return s();this.parseLine(this._prev,this.state.previousEnd,this._prev.length+1),s()}_transform(s,a,l){typeof s=="string"&&(s=Buffer.from(s));const{escape:c,quote:u}=this.options;let p=0,h=s;this.bytesRead+=s.byteLength,this._prev&&(p=this._prev.length,h=Buffer.concat([this._prev,s]),this._prev=null);const g=h.length;for(let f=p;f<g;f++){const m=h[f],L=f+1<g?h[f+1]:null;if(this.state.rowLength++,this.state.rowLength>this.options.maxRowBytes)return l(new Error("Row exceeds the maximum size"));if(!this.state.escaped&&m===c&&L===u&&f!==p){this.state.escaped=!0;continue}else if(m===u){this.state.escaped?this.state.escaped=!1:this.state.quoted=!this.state.quoted;continue}this.state.quoted||(this.state.first&&!this.options.customNewline&&(m===t?this.options.newline=t:m===e&&L!==t&&(this.options.newline=e)),m===this.options.newline&&(this.parseLine(h,this.state.previousEnd,f+1),this.state.previousEnd=f+1,this.state.rowLength=0))}if(this.state.previousEnd===g)return this.state.previousEnd=0,l();if(g-this.state.previousEnd<s.length)return this._prev=s,this.state.previousEnd-=g-s.length,l();this._prev=h,l()}}return Ba=r=>new i(r),Ba}var sx=rx();const ax=Ws(sx),{ipcRenderer:xd}=require("electron"),cn=require("fs"),Ki=require("path"),To=require("vex-js"),ue=()=>Ge(W),lx=Ge(Ec);async function Po(o){let e;await xd.invoke("getUserDataPath").then(t=>{e=t,o(e)})}async function Li(o,e){let t;await xd.invoke("showOpenDialog",o).then(n=>{t=n,e(t)})}async function al(){return typeof Ge(Ro).save=="function"?await Ge(Ro).save().then(o=>{ue().Docs=o}):console.log("No save function found for docs editor.",Ge(Ro)),ue().Version=await xd.invoke("getVersion"),ue().FileVersion=(parseInt(ue().FileVersion,36)+1).toString(36),ue().Layouts=Ge(Ce),ue().Layouts.opentabs=Ge(lt),JSON.stringify(ue())}function qu(o,e){for(const t of o.blocks)switch(t.type){case"header":{const n=document.createElement(`h${t.data.level}`);n.style.textAlign=t.tunes?.alignment?.alignment||"left",n.innerHTML=t.data.text,e.appendChild(n);break}case"paragraph":{const n=document.createElement("p");n.style.textAlign=t.tunes?.alignment?.alignment||"left",n.innerHTML=t.data.text,e.appendChild(n);break}case"table":{const n=document.createElement("table");n.style.textAlign=t.tunes?.alignment?.alignment||"left";const i=document.createElement("tbody");t.data.content.forEach(r=>{const s=document.createElement("tr");r.forEach(a=>{const l=document.createElement("td");l.innerHTML=a,s.appendChild(l)}),i.appendChild(s)}),n.appendChild(i),e.appendChild(n),e.appendChild(document.createElement("br"));break}case"list":{let n=function(r,s){r.forEach(a=>{const l=document.createElement("li");if(l.innerHTML=a.content,a.items&&a.items.length>0){const c=document.createElement("ul");n(a.items,c),l.appendChild(c)}s.appendChild(l)})};const i=t.data.style==="ordered"?document.createElement("ol"):document.createElement("ul");i.style.textAlign=t.tunes?.alignment?.alignment||"left",n(t.data.items,i),e.appendChild(i);break}default:console.warn("Unhandled element type:",t)}return e}async function $n(){const o=async()=>{const e=await al();try{Po(t=>{const n=`${t}${Ki.sep}Lexicons${Ki.sep}`,i=`${t}${Ki.sep}Backups${Ki.sep}`,r=new Date().toString().split(" GMT")[0].replaceAll(":","꞉");cn.existsSync(n)||cn.mkdirSync(n),cn.existsSync(i)||cn.mkdirSync(i),cn.writeFileSync(`${n}${ue().Name}.lexc`,e,"utf8"),cn.writeFileSync(`${i}${ue().Name} @ ${r}.lexc`,e,"utf8"),ue().SaveLocation!==""&&cn.writeFileSync(`${ue().SaveLocation}${Ki.sep}${ue().Name}.lexc`,e,"utf8")}),Ge(pi)?new Notification(`The ${ue().Name} file has been saved.`):To.dialog.alert(`The ${ue().Name} file has been saved.`),console.log("Saved file:"),console.dir(JSON.parse(e))}catch(t){console.log(t),To.dialog.alert("There was a problem saving your file. The error has been printed to the console. Please contact the developer.")}ue().UploadToDatabase&&Ge(Go)!==""&&Ge(Ko)!==""&&await nx(Ge(Go),Ge(Ko),e)};ue().Name.trim()?o():To.dialog.prompt({message:"Please enter a file name before saving.",callback:e=>{e&&(ue().Name=e.trim(),o())}})}const on={lexc:async()=>{const o=new Blob([await al()]),e=await window.showSaveFilePicker({suggestedName:`${ue().Name}.lexc`});await e.requestPermission({mode:"readwrite"});const t=await e.createWritable();try{await t.write(o)}catch(n){window.alert("The file failed to save. Please contact the developer for assistance."),console.log(n),await t.close();return}await t.close(),window.alert("The file saved successfully.")},txt:async()=>{let o="";const e=ue().Lexicon;for(const r of Ao(e))o+=`${r}
`+(ue().UseLects?ue().Lects.map(s=>`${s}: ${e[r].pronunciations[s].ipa}`).join(`
`):`${e[r].pronunciations.General.ipa}
`)+e[r].Senses.map((s,a)=>`${a+1}. ${s.tags.join(", ")}
${s.definition}`).join(`

`)+`

`;const t=new Blob([o]),n=await window.showSaveFilePicker({suggestedName:`${ue().Name}.txt`});await n.requestPermission({mode:"readwrite"});const i=await n.createWritable();try{await i.write(t)}catch(r){console.error(r),window.alert("The file failed to export.")}await i.close(),window.alert("The file exported successfully.")},md:async()=>{let o=`# ${ue().Name} Lexicon

`;const e=ue().Lexicon;for(const r of Ao(e))o+=`### ${r}
`,ue().UseLects?o+=ue().Lects.map(s=>`> *${s}:* \`${e[r].pronunciations[s].ipa}\``).join(`
`)+`
`:o+=`> /${e[r].pronunciations.General.ipa}/
`,o+=e[r].Senses.map((s,a)=>{const l=s.tags.length?`\`${s.tags.join("`  `").toUpperCase()}\``:"";return`${a+1}. ${l}
${s.definition}`}).join(`
`)+`

---

`;const t=new Blob([o]),n=await window.showSaveFilePicker({suggestedName:`${ue().Name}.md`});await n.requestPermission({mode:"readwrite"});const i=await n.createWritable();try{await i.write(t)}catch(r){console.error(r),window.alert("The file failed to export.")}await i.close(),window.alert("The file exported successfully.")},csv:async()=>{const o=ue().Lexicon,e=a=>a.map(l=>l.map(String).map(c=>c.replaceAll('"','""')).map(c=>`"${c}"`).join(",")).join(`\r
`),t=[["Word","Pronunciations","Definitions"]];for(const a in o)t.push([a,Object.entries(o[a].pronunciations).map(([l,{ipa:c}])=>l+": "+c).join(" — "),o[a].Senses.map(l=>l.definition).join(" — ")]);const n=e(t),i=new Blob([n]),r=await window.showSaveFilePicker({suggestedName:`${ue().Name}.csv`});await r.requestPermission({mode:"readwrite"});const s=await r.createWritable();try{await s.write(i)}catch(a){window.alert("The file failed to export. Please contact the developer for assistance."),console.log(a)}await s.close(),window.alert("The file exported successfully.")},json:async()=>{const o=new Blob([await al()]),e=await window.showSaveFilePicker({suggestedName:`${ue().Name}.json`});await e.requestPermission({mode:"readwrite"});const t=await e.createWritable();try{await t.write(o)}catch(n){console.error(n),window.alert("The file failed to export.")}await t.close(),window.alert("The file exported successfully.")},html:{lexicon:async()=>{const o=document.createElement("html"),e=document.createElement("head");e.innerHTML=`
                <meta charset="UTF-8" />
                <title>${ue().Name}</title>
                <link rel="preconnect" href="https://fonts.googleapis.com">
                <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                <link href="https://fonts.googleapis.com/css2?family=Gentium+Book+Plus:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
            `;const t=document.createElement("style");t.innerHTML=Ia;const n=document.createElement("style");n.innerHTML=Oa;const i=document.createElement("body");i.innerHTML+=`<h1>${ue().Name}</h1>`;const r=Ao(ue().Lexicon);i.innerHTML+="<hr/><h2>Lexicon</h2>",i.append(Vu(r)),e.append(t,n),o.append(e,i);const s=o.outerHTML,a=new Blob(["\uFEFF",s],{type:"tex/html; charset=utf-8;"}),l=await window.showSaveFilePicker({suggestedName:`${ue().Name}_Lexicon.html`});await l.requestPermission({mode:"readwrite"});const c=await l.createWritable();try{await c.write(a)}catch(u){To.dialog.alert("The file failed to export. Please contact the developer for assistance."),console.log(u),await c.close();return}await c.close(),To.dialog.alert("The file exported successfully.")},all:async()=>{const o=document.createElement("html"),e=document.createElement("head");e.innerHTML=`
                <meta charset="UTF-8" />
                <title>${ue().Name}</title>
                <link rel="preconnect" href="https://fonts.googleapis.com">
                <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                <link href="https://fonts.googleapis.com/css2?family=Gentium+Book+Plus:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
            `;const t=document.createElement("style");t.innerHTML=Ia;const n=document.createElement("style");n.innerHTML=Oa;let i=document.createElement("div");await Ge(Ro).save().then(p=>{i=qu(p,i)});const r=document.createElement("body");r.innerHTML+=`<h1>${ue().Name}</h1>`,r.innerHTML+=i.outerHTML;const s=Ao(ue().Lexicon);r.innerHTML+="<hr/><h2>Lexicon</h2>",r.append(Vu(s)),e.append(t,n),o.append(e,r);const a=o.outerHTML,l=new Blob(["\uFEFF",a],{type:"tex/html; charset=utf-8;"}),c=await window.showSaveFilePicker({suggestedName:`${ue().Name}.html`});await c.requestPermission({mode:"readwrite"});const u=await c.createWritable();try{await u.write(l)}catch(p){To.dialog.alert("The file failed to export. Please contact the developer for assistance."),console.log(p),await u.close();return}await u.close(),To.dialog.alert("The file exported successfully.")},docs:async()=>{const o=document.createElement("html"),e=document.createElement("head");e.innerHTML=`
                <meta charset="UTF-8" />
                <title>${ue().Name} Docs</title>
                <link rel="preconnect" href="https://fonts.googleapis.com">
                <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                <link href="https://fonts.googleapis.com/css2?family=Gentium+Book+Plus:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
            `;const t=document.createElement("style");t.innerHTML=Ia;const n=document.createElement("style");n.innerHTML=Oa,e.append(t,n),o.appendChild(e);let i=document.createElement("body");await Ge(Ro).save().then(c=>{i=qu(c,i)}),i.style.padding="12em",i.classList.add("container"),o.appendChild(i);const r=o.outerHTML,s=new Blob(["\uFEFF",r],{type:"tex/html; charset=utf-8;"}),a=await window.showSaveFilePicker({suggestedName:`${ue().Name}_Docs.html`});await a.requestPermission({mode:"readwrite"});const l=await a.createWritable();try{await l.write(s)}catch(c){To.dialog.alert("The file failed to export. Please contact the developer."),console.log(c),await l.close();return}await l.close(),To.dialog.alert("The file exported successfully.")}}};function Vu(o){const e=document.createElement("div");e.classList.add("row");const t=document.createElement("div");t.classList.add("column");const n=document.createElement("div");n.classList.add("column");let i=!1;return o.forEach(r=>{let s="";const a=ue().Lexicon[r].pronunciations;Object.entries(a).forEach(([c,u])=>{s+=`<p class="lect">${ue().UseLects?c+": ":""}<span class='pronunciation'>${u.ipa}</span></p>`}),ue().Lexicon[r].Senses.forEach(({lects:c,definition:u,tags:p},h)=>{ue().UseLects&&(s+=`<p class="lect">${c.join(", ")}</p>`),s+=`<div class='sense'>${h+1}.</div>`,p.forEach(g=>{s+=`<div class='tag-item'>${g}</div>`}),s+=`<p>${hr(u)}</p>`}),i?n.innerHTML+=`<div class="lex-entry"><p>${r}</p>${s}</div>`:t.innerHTML+=`<div class="lex-entry"><p>${r}</p>${s}</div>`,i=!i}),e.append(t,n),e}const cx={1.9:o=>{W.set(lx);try{for(const e in o.Lexicon)ue().Lexicon[e]={pronunciations:{General:{ipa:o.Lexicon[e][0],irregular:o.Lexicon[e][2]}},Senses:[{definition:o.Lexicon[e][1],lects:["General"],tags:o.Lexicon[e][3]}]}}catch(e){console.error(e),window.alert("There was a problem loading the contents of the lexicon. Please contact the developer.")}try{ue().Alphabet=o.Alphabet}catch(e){console.error(e),window.alert("There was a problem loading the alphabetical order. Please contact the developer for assistance.")}try{ue().Pronunciations.General=o.Romanization,Ns("General")}catch(e){console.error(e),window.alert("There was a problem loading the romanizations. Please contact the developer for assistance.")}try{for(const e in o.Phrasebook)ue().Phrasebook[e]=(()=>{const t={};for(const n in o.Phrasebook[e])t[n]={description:o.Phrasebook[e][n].description,lects:["General"],pronunciations:{General:{ipa:o.Phrasebook[e][n].pronunciation,irregular:!1}},variants:(()=>{const i={};for(const r in o.Phrasebook[e][n].variants)i[r]={description:o.Phrasebook[e][n].variants[r].description,pronunciations:{General:{ipa:o.Phrasebook[e][n].variants[r].pronunciation,irregular:!1}}};return i})(),tags:[]};return t})()}catch(e){console.error(e),window.alert("There was a problem loading the phrasebook. Please contact the developer for assistance.")}try{ue().Phonotactics.General.Onsets=o.Phonotactics.Initial.join(" "),ue().Phonotactics.General.Medials=o.Phonotactics.Middle.join(" "),ue().Phonotactics.General.Codas=o.Phonotactics.Final.join(" "),ue().Phonotactics.General.Vowels=o.Phonotactics.Vowel.join(" "),ue().Phonotactics.General.Illegals=o.Phonotactics.Illegal.join(" ")}catch(e){console.error(e),window.alert("There was a problem loading the phonotactics data. Please contact the developer for assistance.")}try{Ge(Ro).destroy(),Ti(o.Docs)}catch(e){console.error(e),window.alert("There was a problem loading the documentation data. Please contact the developer for assistance.")}try{ue().HeaderTags=o.HeaderTags}catch(e){console.error(e),window.alert("There was a problem loading the header tags.")}ue().IgnoreDiacritics=o.IgnoreDiacritics,ue().CaseSensitive=o.CaseSensitive}};async function dx(o,e,t,n,i,r=","){const s=[];let a;e-=1,t-=1,n&&(n-=1),i&&(i-=1),Li({title:"Open CSV File",properties:["openFile"]},l=>{if(l!==void 0){if(!["csv","tsv"].includes(l[0].split(".").pop()||"")){To.dialog.alert("A CSV file was not selected.");return}a=l,cn.createReadStream(l[0]).pipe(ax({headers:!1,skipLines:o?1:0,separator:r})).on("data",c=>{s.push(c)}).on("end",()=>{const c={};s.forEach(u=>{c[u[e]]={pronunciations:{General:{ipa:n?u[n]:St(u[e],ue().Lects[0]),irregular:!1}},Senses:[{definition:u[t],lects:[ue().Lects[0]],tags:i?u[i].split(/\s+/).map(p=>p.trim()):[]}]}}),console.log(c),ue().Lexicon=c,ue().Name=a[0].split("/")[a[0].split("/").length-1].split(".")[0]})}})}async function _d(o=ue().Name){const e=await ox(Ge(Go),Ge(Ko),o);return e||!1}async function ux(o=ue().Name){try{return await ix(Ge(Go),Ge(Ko),o),{success:!0}}catch(e){return{success:!1,error:e.message}}}const Oa=`
    @import url("https://fonts.googleapis.com/css2?family=Gentium+Book+Plus:ital,wght@0,4000,7001,4001,700&display=swap");
    body {
        overflow-y: auto;
        text-align: center;
        margin-left: 15vw;
        margin-right: 15vw;
        background-color: #333;
        color: #ccc;
    }
    
    .container {
        overflow-x: clip;
        overflow-y: auto;
    }
    
    .lex-body {
        font-family: "Gentium Book Plus", serif;
    }
    
    .tag-item {
        font-family: serif;
    }
    
    .search {
        font-family: "Gentium Book Plus", serif;
    }
    
    .phonology, .pronunciation {
        font-family: "Gentium Book Plus", serif !important;
    }
    
    [id=entry-counter] {
        font-family: serif;
    }
    
    td {
        text-align: center;
        border: 2px solid #ccc;
    }
    
    tr {
        background-color: transparent !important;
    }
    
    table {
        border-collapse: collapse;
        margin: auto;
    }
    
    .table-container, .table-title {
        font-family: "Gentium Book Plus", serif;
        align-items: center;
    }
    
    button {
        display: none;
    }
    
    .info {
        display: none;
    }
    
    .search-row {
        display: inline-flex;
    }
    
    @media only screen and (min-device-width: 601px) {
        .sidebar {
            max-width: 18% !important;
        }
    }
    @media only screen and (max-device-width: 600px) {
        body {
            width: 100vw !important;
            font-size: 12pt;
            padding: 2vw;
        }
        body > h1 {
            font-size: 36pt;
        }
        div.container {
            height: 60vh !important;
        }
        div.column {
            display: block;
        }
        div.sidebar {
            max-height: 18vh;
        }
        div.row {
            display: block;
            min-width: 96vw !important;
            margin-bottom: 36vh;
        }
        div.variants {
            margin-bottom: 4rem;
        }
        .lex-entry, .lex-body {
            font-size: 16pt !important;
        }
        .capitalize {
            font-size: 24pt !important;
        }
        .tag-item, [id=entry-counter] {
            font-size: 16pt;
        }
        .search, .sidebar p {
            font-size: 24pt;
        }
        td {
            font-size: 18pt !important;
        }
    }
    `,Ia=`
    @charset "UTF-8";
    html, body {
        align-items: center;
    }
    
    body {
        font-family: serif;
        font-size: 11pt;
        min-width: 400px;
        min-height: 400px;
        margin: 0px;
        overflow: hidden;
        -webkit-app-region: drag;
    }
    
    button {
        font-family: serif;
        font-size: 11pt;
        transition-duration: 0.33s;
        cursor: pointer;
        -webkit-app-region: no-drag;
        -webkit-user-select: none;
    }
    button[id=overwrite] {
        font-weight: bold;
    }
    button.collapser {
        max-width: 1em;
        height: 100%;
        border-color: transparent !important;
        background-color: rgba(17, 17, 17, 0.0666666667);
        display: flex;
        float: right;
        margin: 0px;
        padding: 0px;
    }
    button.collapser:hover {
        border-color: rgba(255, 255, 255, 0.2666666667) !important;
        background-color: rgba(0, 0, 0, 0.2);
    }
    button.collapser::after {
        content: "‖";
        margin: auto;
    }
    button.collapser-h {
        max-height: 1.33em;
        width: 100% !important;
        border-color: transparent !important;
        background-color: rgba(17, 17, 17, 0.0666666667);
        display: flex;
        margin: 0px;
        padding: 0px;
    }
    button.collapser-h:hover {
        border-color: rgba(255, 255, 255, 0.2666666667) !important;
        background-color: rgba(0, 0, 0, 0.2);
    }
    button.collapser-h::after {
        content: "═";
        margin: auto;
    }
    
    .tab-container {
        width: 100vw;
        height: 100vh;
        -webkit-user-select: none;
    }
    .tab-container .button-container {
        width: 100%;
        text-align: center;
    }
    .tab-container .button-container button {
        border: none;
        outline: none;
        padding: 4px;
        height: 100%;
        width: fit-content;
    }
    .tab-container .window-control {
        text-align: left;
        height: 0px;
        overflow: visible;
    }
    .tab-container .window-control button {
        border: none;
        outline: none;
        background-color: transparent;
    }
    .tab-container .window-control button.close:hover {
        background-color: #9e0f0f;
    }
    .tab-container .window-control button.minimize:hover {
        background-color: #c9c911;
    }
    .tab-container .window-control button.maximize:hover {
        background-color: #4eb94e;
    }
    .tab-container .tab-pane {
        height: 80%;
        box-sizing: border-box;
        -webkit-app-region: no-drag;
        -webkit-user-select: text;
    }
    
    .row {
        display: flex;
        margin: auto;
    }
    .row:has(~ .collapsible-row .collapsed) {
        height: 90vh !important;
    }
    
    .column {
        width: 100%;
    }
    
    .collapsible-column {
        min-width: 2%;
        width: fit-content;
    }
    
    .collapsible-row:has(.collapsed) {
        height: 3vh !important;
    }
    
    .collapsed {
        display: none;
    }
    
    .text-left {
        text-align: left;
    }
    .text-right {
        text-align: right;
    }
    .text-center {
        text-align: center;
    }
    
    .prelined {
        white-space: pre-line;
        /* This is solely to make the 
 character work from the JS side */
    }
    
    p {
        margin: 0px;
    }
    
    div[id=tables-pane] {
        font-family: Gentium;
        font-size: 11pt;
    }
    
    h1, h2, h3, h4, h5, h6 {
        font-style: italic;
        padding-top: 1em !important;
    }
    
    .info {
        font-family: serif;
        font-size: 11pt;
        font-style: italic;
        line-height: 1.5em;
        -webkit-user-select: none;
    }
    
    .phonology {
        font-family: Gentium;
        font-size: 11pt;
        width: 95%;
    }
    
    .version-info {
        font-family: serif;
        font-size: 7pt;
        text-align: left;
        display: inline;
        float: right;
        -webkit-user-select: none;
    }
    
    .lex-body {
        white-space: pre-line;
    }
    .lex-entry {
        font-family: Gentium;
        font-size: 11pt;
        transition: 0.3s;
        padding: 1em;
    }
    
    .variants {
        font-family: Gentium;
        font-size: 11pt;
    }
    .variants div.column {
        margin: 0.6em;
    }
    
    .capitalize {
        text-transform: capitalize;
    }
    
    .tag-item {
        font-family: serif;
        font-size: 7pt;
        border-radius: 7%;
        width: fit-content;
        padding: 0.2em;
        margin: 0.2em;
        text-transform: uppercase;
        display: inline-block;
    }
    
    .sense {
        font-family: Gentium;
        font-size: 9pt;
        border-radius: 7%;
        width: fit-content;
        padding: 0.2em;
        margin: 0.2em;
        font-weight: bold;
        font-style: italic;
        display: inline-block;
        background-color: transparent;
        margin-top: 1em;
    }
    
    .lect {
        font-family: serif;
        font-size: 9pt;
        font-style: italic;
        margin-top: 0.1em;
    }
    
    [id=entry-counter] {
        font-family: serif;
        font-size: 7pt;
        border-radius: 7%;
        width: fit-content;
        padding: 0.2em;
        margin: 0.2em;
        text-transform: uppercase;
        font-weight: bold;
        margin: auto;
    }
    
    .scrolled {
        overflow-y: auto;
        overflow-x: wrap;
    }
    
    .container {
        border-radius: 6px;
        text-align: center;
        margin: 6px;
        padding: 6px;
    }
    
    .row button {
        padding: 2px 10px 2px 10px;
        margin: 4px auto 4px auto;
        display: flex;
        width: fit-content;
        border: 1px solid black;
        border-radius: 8px;
    }
    
    label {
        font-family: serif;
        font-size: 11pt;
        -webkit-user-select: none;
    }
    
    .pronunciation {
        font-family: Gentium;
        font-size: 9pt;
    }
    
    textarea, input {
        font-family: Gentium;
        font-size: 11pt;
        display: flex;
        text-align: center;
        padding: 4px;
        margin: 1px auto 1px auto;
        border: none;
        border-radius: 3px;
        width: 80%;
        resize: vertical;
        transition: 0.2s;
    }
    textarea .pronunciation, input .pronunciation {
        font-family: Gentium;
        font-size: 9pt;
    }
    textarea[type=number], input[type=number] {
        padding: 1px;
        width: 4em;
    }
    textarea[type=checkbox], input[type=checkbox] {
        appearance: none;
        margin: auto;
        font: inherit;
        width: 1rem;
        height: 1rem;
        border-radius: 0.15em;
        transform: translateY(-0.075em);
        display: grid;
        place-content: center;
    }
    textarea[type=checkbox]::before, input[type=checkbox]::before {
        content: "";
        width: 0.65em;
        height: 0.65em;
        transform: scale(0);
        transition: 120ms transform ease-in-out;
    }
    textarea[type=checkbox]:checked::before, input[type=checkbox]:checked::before {
        transform: scale(1);
        clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
    }
    
    .header input {
        width: 70%;
    }
    
    .narrow {
        width: 50%;
        margin: auto;
    }
    .narrow-col {
        width: 15%;
    }
    
    .search {
        text-align: left;
        width: 100%;
        margin: 2px auto 2px auto;
    }
    
    .search-container {
        padding: 0 0.5em 0 0.5em;
        position: relative;
    }
    
    table {
        border-collapse: collapse;
        width: 95%;
    }
    table-container {
        font-family: Gentium;
        font-size: 11pt;
        margin: auto;
        padding: 30px 5%;
    }
    table-title {
        font-family: Gentium;
        font-size: 14pt;
        font-style: italic;
    }
    
    td {
        padding: 2px 6px 2px 6px;
        text-align: center;
        user-select: none;
    }
    
    .inflection {
        font-family: Gentium;
        font-size: 7pt;
    }
    .inflection h1, .inflection h2, .inflection h3, .inflection h4, .inflection h5, .inflection h6 {
        padding-top: 0.2em;
    }
    .inflection h1 {
        font-size: 1.5em;
    }
    .inflection h2 {
        font-size: 1.3em;
    }
    .inflection h3 {
        font-size: 1.1em;
    }
    .inflection h4 {
        font-size: 1em;
    }
    .inflection h5 {
        font-size: 0.9em;
    }
    .inflection h6 {
        font-size: 0.8em;
    }
    
    ::-webkit-scrollbar {
        width: 9px;
    }
    ::-webkit-scrollbar-thumb {
        border-radius: 6px;
        transition: 0.2s;
    }
    ::-webkit-scrollbar-button {
        display: none;
    }
    ::-webkit-scrollbar-corner {
        border-radius: 6px 0px 0px 0px;
    }
    ::-webkit-resizer {
        border-radius: 6px 0px 0px 0px;
    }
    
    hr {
        margin-bottom: 0.2em;
        margin-top: 0.2em;
        max-width: 66.66%;
        padding: 0px;
    }
    
    .milkyWay {
        width: 100px;
        height: 100px;
        background: transparent;
        margin: auto;
        position: relative;
        border-radius: 50%;
    }
    .milkyWay .planet {
        border: 1px solid white;
        animation-name: orbit;
        animation-iteration-count: infinite;
        animation-timing-function: linear;
        animation-play-state: paused;
    }
    .milkyWay .planet::before, .milkyWay .planet::after {
        position: absolute;
        content: "";
        display: block;
        border-radius: 50%;
    }
    .milkyWay > div {
        position: absolute;
        border-radius: 50%;
    }
    
    .sun {
        background: #faca09;
        width: 10%;
        height: 10%;
        top: 45%;
        left: 45%;
    }
    
    .mercury {
        width: 20%;
        height: 20%;
        top: calc(40% - 1px);
        left: calc(40% - 1px);
        animation-duration: 2s;
    }
    .mercury::before {
        background: #9fb5b6;
        width: 16%;
        height: 16%;
        top: -8%;
        left: 42%;
    }
    
    .venus {
        width: 30%;
        height: 30%;
        top: calc(35% - 1px);
        left: calc(35% - 1px);
        animation-duration: 3s;
    }
    .venus::before {
        background: #ECC98E;
        width: 10%;
        height: 10%;
        top: -5%;
        left: 45%;
    }
    
    .earth {
        width: 40%;
        height: 40%;
        top: calc(30% - 1px);
        left: calc(30% - 1px);
        animation-duration: 4s;
    }
    .earth::before {
        background: #208fd8;
        width: 10%;
        height: 10%;
        top: -5%;
        left: 45%;
    }
    .earth::after {
        background: #33c470;
        width: 10%;
        height: 6%;
        top: -3%;
        left: 45%;
        transform: rotate(45deg);
    }
    
    .mars {
        width: 50%;
        height: 50%;
        top: calc(25% - 1px);
        left: calc(25% - 1px);
        animation-duration: 5s;
    }
    .mars::before {
        background: #d35400;
        width: 6%;
        height: 6%;
        top: -3%;
        left: 47%;
    }
    
    .jupiter {
        width: 60%;
        height: 60%;
        top: calc(20% - 1px);
        left: calc(20% - 1px);
        animation-duration: 6s;
    }
    .jupiter::before {
        background: #d4975a;
        width: 10%;
        height: 10%;
        top: -5%;
        left: 45%;
    }
    
    .saturn {
        width: 70%;
        height: 70%;
        top: calc(15% - 1px);
        left: calc(15% - 1px);
        animation-duration: 7s;
    }
    .saturn::before {
        background: #E4D191;
        width: 7%;
        height: 7%;
        top: -4%;
        left: 48%;
    }
    .saturn::after {
        background: #F0E4C1;
        width: 12%;
        height: 1%;
        top: -1%;
        left: 45.5%;
        transform: rotate(-15deg);
    }
    
    .uranus {
        width: 80%;
        height: 80%;
        top: calc(10% - 1px);
        left: calc(10% - 1px);
        animation-duration: 8s;
    }
    .uranus::before {
        background: #3498db;
        width: 5%;
        height: 5%;
        top: -2%;
        left: 48%;
    }
    .uranus::after {
        background: #b0d0e5;
        width: 8%;
        height: 0.5%;
        top: 0%;
        left: 46.25%;
        transform: rotate(-15deg);
    }
    
    .neptune {
        width: 90%;
        height: 90%;
        top: calc(5% - 1px);
        left: calc(5% - 1px);
        animation-duration: 9s;
    }
    .neptune::before {
        background: #1269a3;
        width: 4%;
        height: 4%;
        top: -1%;
        left: 49%;
    }
    .neptune::after {
        background: #91cbf2;
        width: 6%;
        height: 0.5%;
        top: 0.5%;
        left: 48%;
        transform: rotate(-15deg);
    }
    
    .pluto {
        width: 100%;
        height: 100%;
        top: calc(0% - 1px);
        left: calc(0% - 1px);
        animation-duration: 10s;
    }
    .pluto::before {
        background: #b78c7a;
        width: 1%;
        height: 1%;
        top: -0.5%;
        left: 49.5%;
    }
    
    @keyframes orbit {
        0% {
            transform: rotate(-180deg);
        }
        100% {
            transform: rotate(180deg);
        }
    }
    /* EditorJS Overrides */
    .ce-toolbar__plus {
        transition: 0.33s;
    }
    .ce-toolbar__content {
        max-width: 90% !important;
    }
    .ce-block__content {
        max-width: 80% !important;
    }
    .ce-block--selected .ce-block__content {
        background-color: rgba(255, 255, 255, 0.3333333333) !important;
    }
    
    ::selection {
        background-color: rgba(255, 255, 255, 0.3333333333) !important;
    }
    
    /*# sourceMappingURL=index.css.map */
    
    `;function hx(o,e,t){V(e,!0),V(t,!0)}var px=F('<div class="shadow svelte-wjep5f"></div>'),fx=(o,e,t,n)=>{e(),z(Ce,v(t).positions[n.panel].z+=1e3,v(t))},gx=(o,e,t,n)=>{z(Ce,v(e).positions[t.panel].z-=1e3,v(e)),n()},vx=(o,e,t)=>{z(Ce,v(e).positions[t.panel].height=20,v(e)),z(Ce,v(e).positions[t.panel].width=60,v(e))},mx=(o,e,t,n)=>{e(),z(Ce,v(t).positions[n.panel].z+=1,v(t))},bx=(o,e,t)=>{z(Ce,v(e).positions[t.panel].z-=1,v(e))},yx=F('<button class="svelte-wjep5f"></button>'),wx=F('<p class="info"> </p>'),kx=F('<!> <section class="draggable svelte-wjep5f"><div class="dragbar svelte-wjep5f"><button class="svelte-wjep5f"></button> <button class="svelte-wjep5f"></button> <button class="svelte-wjep5f"></button> <!> <!> </div> <!></section>',1);function bt(o,e){Qe(e,!0);const t=()=>ne(Ce,"$CurrentLayouts",i),n=()=>ne(W,"$Language",i),[i,r]=rt();let s=Ct(e,"auto_maximize",3,!1),a=He(!1),l=He(!1),c=qt(()=>t().positions[e.panel].width>=.98*window.innerWidth&&t().positions[e.panel].height>=.98*window.innerHeight-25);function u(b){d(a)&&(z(Ce,v(t).positions[e.panel].left+=b.movementX,v(t)),z(Ce,v(t).positions[e.panel].top+=b.movementY,v(t)),z(Ce,v(t).positions[e.panel].top=t().positions[e.panel].top<25?25:t().positions[e.panel].top,v(t)),z(Ce,v(t).positions[e.panel].top=t().positions[e.panel].top>window.innerHeight-t().positions[e.panel].height?window.innerHeight-t().positions[e.panel].height:t().positions[e.panel].top,v(t)),z(Ce,v(t).positions[e.panel].left=t().positions[e.panel].left<0?0:t().positions[e.panel].left,v(t)),z(Ce,v(t).positions[e.panel].left=t().positions[e.panel].left>window.innerWidth-t().positions[e.panel].width?window.innerWidth-t().positions[e.panel].width:t().positions[e.panel].left,v(t))),s()&&!d(c)&&f()}function p(){Object.keys(t().positions).forEach(b=>{z(Ce,v(t).positions[b].left=h("left",b),v(t)),z(Ce,v(t).positions[b].top=h("top",b),v(t)),g(b)}),V(a,!1),V(l,!1),s()&&!d(c)&&f()}function h(b,x=!1){let S={left:t().snapping.x,width:t().snapping.x,top:t().snapping.y,height:t().snapping.y}[b],B=x||e.panel;return Math.round((t().positions[B][b]-(b==="top"?10:0))/S)*S+(b==="top"?25:0)}function g(b=!1){V(l,!0);let x=b||e.panel;t().positions[x].left>=window.innerWidth&&z(Ce,v(t).positions[x].left-=t().positions[x].left-window.innerWidth+t().positions[x].width,v(t)),t().positions[x].top>=window.innerHeight&&z(Ce,v(t).positions[x].top-=t().positions[x].top-window.innerHeight+t().positions[x].height,v(t)),!(t().positions[x].width===60&&t().positions[x].height===20)&&(z(Ce,v(t).positions[x].width=Math.max(h("width",b),60),v(t)),z(Ce,v(t).positions[x].height=Math.max(h("height",b),20),v(t)),z(Ce,v(t).positions[x].width-=Math.max(t().positions[x].left+t().positions[x].width-window.innerWidth,0),v(t)),z(Ce,v(t).positions[x].height-=Math.max(t().positions[x].top+t().positions[x].height-window.innerHeight,0),v(t)),z(Ce,v(t).ratios=Jp(t(),x),v(t)))}function f(){z(Ce,v(t).positions[e.panel].left=0,v(t)),z(Ce,v(t).positions[e.panel].top=25,v(t)),z(Ce,v(t).positions[e.panel].height=window.innerHeight-25,v(t)),z(Ce,v(t).positions[e.panel].width=window.innerWidth,v(t)),g(),V(l,!1)}function m(b=100){([void 0,NaN,null].includes(t().positions[e.panel].z)||t().positions[e.panel].z<0)&&z(Ce,v(t).positions[e.panel].z=b,v(t))}m(),Yv(p);var L=kx();Te("resize",vi,p),Te("mouseup",vi,p),Te("mousemove",vi,u);var _=ie(L);{var k=b=>{var x=px();Q((S,B,j,q)=>Et(x,`
            left: ${S??""}px;
            top: ${B??""}px;
            width: ${j??""}px;
            height: ${q??""}px;
        `),[()=>h("left"),()=>h("top"),()=>h("width"),()=>h("height")]),$(b,x)};ee(_,b=>{d(l)&&b(k)})}var N=y(_,2);N.__focusin=[fx,m,t,e],N.__focusout=[gx,t,e,m];var H=E(N);H.__mousedown=[hx,a,l];var I=E(H);I.__click=[vx,t,e],I.textContent="–";var D=y(I,2);D.__click=f,D.textContent="+";var C=y(D,2);C.__click=[mx,m,t,e],C.textContent="↥";var w=y(C,2);{var A=b=>{var x=yx();x.__click=[bx,t,e],x.textContent="↧",$(b,x)};ee(w,b=>{t().positions[e.panel].z>0&&b(A)})}var R=y(w,2);{var M=b=>{var x=wx(),S=E(x);Q(()=>ce(S,"z"+t().positions[e.panel].z)),$(b,x)};ee(R,b=>{n().Layouts.showZ&&b(M)})}var T=y(R);T.nodeValue=" ";var O=y(H,2);Iv(O,()=>e.children),Q(()=>Et(N,`
        left: ${t().positions[e.panel].left??""}px;
        top: ${t().positions[e.panel].top??""}px;
        height: ${t().positions[e.panel].height??""}px;
        width: ${t().positions[e.panel].width??""}px;
        z-index: ${t().positions[e.panel].z??""};
    `)),Te("resize",N,()=>g()),_i(N,"clientHeight",b=>z(Ce,v(t).positions[e.panel].height=b,v(t))),_i(N,"clientWidth",b=>z(Ce,v(t).positions[e.panel].width=b,v(t))),$(o,L),et(),r()}Yt(["focusin","focusout","mousedown","click"]);var xx=F("<option> </option>"),_x=F("<br/> <label>Lect <select></select></label>",1),Ex=F('<textarea rows="3" class="pronunciation" readonly=""></textarea>'),Cx=F('<textarea rows="3" class="pronunciation" value="…" readonly=""></textarea>'),Sx=F('<div class="column narrow"><label>New Language Name <input type="text"/></label></div> <br/> <div class="row narrow"><div class="column"><label>Sound Changes <br/> <textarea rows="5" class="text-left"></textarea> <label><span style="display: flex; align-items: center;"><input type="checkbox"/> Base from pronunciations</span> <!></label></label></div> <div class="column"><label>Test Changes <textarea rows="3"></textarea> <!></label></div></div> <br/> <button class="hover-highlight hover-shadow">Save File and Evolve Lexicon</button>',1);function Tx(o,e){Qe(e,!1);const t=()=>ne(W,"$Language",r),n=()=>ne(Ec,"$defaultLanguage",r),i=()=>ne(Ro,"$docsEditor",r),[r,s]=rt(),a=require("vex-js");let l=me(""),c=me(""),u=me(""),p=me(!1),h=me(t().Lects[0]);async function g(S){if(t().SoundChangeEngine==="legacy"){const B=Si(d(l));return xr(B.rules,S,B.categories)}return await Cc(t().SoundChangeEngine,S,d(l))}jo();var f=Sx(),m=ie(f),L=E(m),_=y(E(L)),k=y(m,4),N=E(k),H=E(N),I=y(E(H),3),D=y(I,2),C=E(D),w=E(C),A=y(C,2);{var R=S=>{var B=_x(),j=y(ie(B),2),q=y(E(j));Q(()=>{d(h),wo(()=>{t()})}),we(q,5,()=>t().Lects,ye,(P,U)=>{var K=xx(),X=E(K),de={};Q(()=>{ce(X,d(U)),de!==(de=d(U))&&(K.value=(K.__value=d(U))??"")}),$(P,K)}),Rt(q,()=>d(h),P=>V(h,P)),$(S,B)};ee(A,S=>{d(p)&&t().UseLects&&S(R)})}var M=y(N,2),T=E(M),O=y(E(T)),b=y(O,2);Mn(b,()=>g(d(c)),S=>{var B=Cx();$(S,B)},(S,B)=>{var j=Ex();Q(()=>un(j,d(B))),$(S,j)});var x=y(k,4);pe(_,()=>d(u),S=>V(u,S)),pe(I,()=>d(l),S=>V(l,S)),st(w,()=>d(p),S=>V(p,S)),pe(O,()=>d(c),S=>V(c,S)),Te("click",x,()=>{if(d(u)===t().Name){a.dialog.alert("The new language must have a different name.");return}$n(),window.setTimeout(()=>{const S=structuredClone(n());S.Name=d(u),S.ShowEtymology=!0,Object.keys(t().Lexicon).forEach(async B=>{let j=`${B}`;if(d(p))if(t().Lexicon[B].pronunciations.hasOwnProperty(d(h)))j=t().Lexicon[B].pronunciations[d(h)].ipa;else return;const q=await g(j);S.Lexicon[q]=structuredClone(t().Lexicon[B]),S.Lexicon[q].pronunciations={General:{ipa:q,irregular:!1}},S.Lexicon[q].Senses.forEach(P=>{P.lects=["General"]}),S.Relatives[t().Name]=structuredClone(t().Lexicon),t().Etymologies[B]?(S.Etymologies[B]=t().Etymologies[B],S.Etymologies[B].source=t().Name,S.Etymologies[B].descendants.forEach(P=>{P.source==="<< THIS LANGUAGE >>"&&(P.source=t().Name)})):S.Etymologies[B]={descendants:[],source:t().Name},S.Etymologies[q]={descendants:[],source:"<< THIS LANGUAGE >>"},S.Etymologies[B].descendants.push({name:q,source:"<< THIS LANGUAGE >>"})}),i().destroy(),Ti(!1),fe(W,S),$n()},333)}),$(o,f),et(),s()}var Lx=F("<div></div>"),Bx=F('<div class="column"><label>Pronunciations Column <input type="number"/></label></div>'),Ox=F('<div class="column"><label>Tags Column <input type="number"/></label></div>'),Ix=F('<div class="glasspane container" style="overflow-y:auto"><label for="file-name">Language Name</label> <input type="text" id="file-name"/> <br/> <div class="narrow row" style="max-width: 600px;"><div class="column"><button class="hover-highlight hover-shadow">Save…</button> <button class="hover-highlight hover-shadow">Open…</button> <p class="info">Save your lexicon or open a previously saved one.</p></div> <div class="column"><div class="milkyWay"><div class="sun"></div> <!></div> <p> </p></div> <div class="column"><button class="hover-highlight hover-shadow">Export…</button> <button class="hover-highlight hover-shadow">Import…</button> <p class="info">Export and import your own copies of the .lexc file.</p></div></div> <div class="narrow"><label for="save-locations">Secondary Save Locations</label> <button id="save-locations" class="hover-highlight hover-shadow">Choose Location…</button> <p>Selected location: <u> </u></p></div> <br/> <hr/> <br/> <p>Export to Other Formats</p> <div class="row narrow" style="max-width: 500px;"><div class="column"><button class="hover-highlight hover-shadow">Plain Text<br/>Lexicon Only</button> <button class="hover-highlight hover-shadow">Markdown<br/>Lexicon Only</button></div> <div class="column"><button class="hover-highlight hover-shadow">HTML<br/>Lexicon Only</button> <button class="hover-highlight hover-shadow">HTML<br/>Lexicon + Docs</button> <button class="hover-highlight hover-shadow">HTML<br/>Documentation</button></div> <div class="column"><button class="hover-highlight hover-shadow">CSV<br/>Lexicon Only</button> <button class="hover-highlight hover-shadow">JSON<br/>Entire File</button></div></div> <br/> <hr/> <br/> <p>Lexicon Header Tags</p> <p class="info">Entries with these tags will be sorted separately at the top of the lexicon.</p> <div class="narrow"><textarea></textarea></div> <br/> <hr/> <br/> <p>Evolve Language</p> <p class="info narrow">Evolve the current lexicon by applying a series of sound changes, and save as a new file.</p><br/> <!> <br/> <hr/> <br/> <p>Import Lexicon from CSV</p> <div class="narrow" style="max-width: 500px;"><div class="row"><div class="column"><label>Words Column <input type="number"/></label></div> <!> <div class="column"><label>Definitions Column <input type="number"/></label></div> <!></div> <div class="row"><div class="column"><label>Include Pronunciations <input type="checkbox"/></label></div> <div class="column"><label>Include Tags <input type="checkbox"/></label></div></div></div> <label for="row-one-is-labels">First Row Is Column Labels <input type="checkbox" id="row-one-is-labels"/></label> <br/> <label>Delimiter: <select><option>Commas (CSV)</option><option>Tabs (TSV)</option><option>Semicolons</option></select></label> <br/><br/> <button class="hover-highlight hover-shadow">Import</button> <br/><br/><br/></div>'),Ax=F('<div class="tab-pane"><!></div>');function Px(o,e){Qe(e,!1);const t=()=>ne(W,"$Language",u),n=()=>ne(Ec,"$defaultLanguage",u),i=()=>ne(Ro,"$docsEditor",u),r=()=>ne(Ce,"$CurrentLayouts",u),s=()=>ne(lt,"$selectedTab",u),a=()=>ne(Go,"$dbid",u),l=()=>ne(Ko,"$dbkey",u),c=()=>ne(ds,"$fileLoadIncrement",u),[u,p]=rt(),h=me(),g=require("fs"),f=require("path"),m=require("vex-js");function L(){Li({properties:["openDirectory"]},w=>{w!==void 0&&z(W,v(t).SaveLocation=w[0],v(t))})}let _=me({headers:!0,words:1,pronunciations_bool:!1,pronunciations:2,definitions:3,tags_bool:!1,tags:4,delimiter:","});async function k(w){if(typeof w.Version=="number"||w.Version==="1.8.x"){m.dialog.alert(` 
                The file you attempted to open was saved by an old version of Lexicanter (Version ~${w.Version}), 
                which is no longer supported. Please contact the developer for assistance; the file is likely recoverable.
            `);return}if(w.Version==="1.9"){try{cx[w.Version](w)}catch{m.dialog.alert(` 
                    The file you attempted to open was saved by an old version of Lexicanter (Version ~${w.Version}), 
                    which is no longer supported. Please contact the developer for assistance; the file is likely recoverable.
                `)}return}let A;try{fe(W,structuredClone(n())),A="There was a problem loading the settings of the file.",z(W,v(t).CaseSensitive=w.CaseSensitive,v(t)),z(W,v(t).IgnoreDiacritics=w.IgnoreDiacritics,v(t)),z(W,v(t).HeaderTags=w.HeaderTags,v(t)),z(W,v(t).UseLects=w.UseLects,v(t)),z(W,v(t).ShowEtymology=w.ShowEtymology,v(t)),z(W,v(t).ShowInflection=w.ShowInflection,v(t)),w.hasOwnProperty("ShowPronunciation")&&z(W,v(t).ShowPronunciation=w.ShowPronunciation,v(t)),w.hasOwnProperty("SaveLocation")&&z(W,v(t).SaveLocation=w.SaveLocation,v(t)),w.hasOwnProperty("FileVersion")&&z(W,v(t).FileVersion=w.FileVersion,v(t)),w.hasOwnProperty("SoundChangeEngine")?z(W,v(t).SoundChangeEngine=w.SoundChangeEngine,v(t)):z(W,v(t).SoundChangeEngine="legacy",v(t)),A="There was a problem loading the alphabet from the file.",z(W,v(t).Alphabet=w.Alphabet,v(t)),w.hasOwnProperty("ShowAlphabet")&&z(W,v(t).ShowAlphabet=w.ShowAlphabet,v(t)),A="There was a problem loading the file’s lexicon data.",z(W,v(t).Lexicon=w.Lexicon,v(t)),z(W,v(t).Lects=w.Lects,v(t)),A="There was a problem loading the file’s phrasebook data.",z(W,v(t).Phrasebook=w.Phrasebook,v(t)),fe(hi,Object.keys(t().Phrasebook)[0]),w.hasOwnProperty("ShowPronunciation")?z(W,v(t).ShowPhrasebook=w.ShowPhrasebook,v(t)):z(W,v(t).ShowPhrasebook=!0,v(t)),A="There was a problem loading the file’s documentation data.";let R=w.Docs;z(W,v(t).Docs=R,v(t)),i()?.destroy(),Ti(R),A="There was a problem loading the pronunciations rules from the file.",z(W,v(t).Pronunciations=w.Pronunciations,v(t)),t().Lects.forEach(Ns),A="There was a problem loading the orthography data from the file.",w.hasOwnProperty("Orthographies")&&(z(W,v(t).Orthographies=w.Orthographies,v(t)),z(W,v(t).ShowOrthography=w.ShowOrthography,v(t)),t().Orthographies[0].hasOwnProperty("graphemy")||t().Orthographies.forEach((T,O)=>{z(W,v(t).Orthographies[O]={...t().Orthographies[O],graphemy:!1},v(t))})),A="There was a problem loading the phonotactics rules from the file.",z(W,v(t).Phonotactics=w.Phonotactics,v(t)),A="There was a problem loading the inflection rules from the file.";let M=w.Inflections;if(w.Inflections.some(T=>T.categories)||M.forEach(T=>T.categories=""),z(W,v(t).Inflections=w.Inflections,v(t)),A="There was a problem loading the etymology data from the file.",z(W,v(t).Etymologies=w.Etymologies,v(t)),A="There was a problem loading the advanced phonotactics.",w.hasOwnProperty("AdvancedPhonotactics")&&(z(W,v(t).UseAdvancedPhonotactics=w.UseAdvancedPhonotactics,v(t)),w.AdvancedPhonotactics.hasOwnProperty("Constructs")||(w.AdvancedPhonotactics.Constructs=[{enabled:!0,structures:""}],w.AdvancedPhonotactics.Illegals=[]),z(W,v(t).AdvancedPhonotactics=w.AdvancedPhonotactics,v(t))),A="There was a problem loading the file’s theme.",w.hasOwnProperty("FileTheme")&&z(W,v(t).FileTheme=w.FileTheme,v(t)),A="There was a problem loading the layout.",w.hasOwnProperty("Layouts")){if(w.Layouts.hasOwnProperty("showZ")||(w.Layouts.showZ=!1),!w.Layouts.hasOwnProperty("ratios")){w.Layouts.ratios={};for(const T in w.Layouts.positions)w.Layouts.ratios=Jp(w.Layouts,T)}z(W,v(t).Layouts=w.Layouts,v(t)),window.resizeTo(w.Layouts.window.width,w.Layouts.window.height),setTimeout(()=>{fe(Ce,w.Layouts),fe(lt,r().opentabs)},50)}else window.resizeTo(yi().width,yi().height),z(W,v(t).Layouts={tabmode:"switch",opentabs:[7],window:yi(),positions:Ci(),ratios:Ps(),snapping:Ms(),showZ:!1},v(t)),fe(lt,[7]),fe(Ce,t().Layouts);if(A="There was a problem syncing with the database.",w.hasOwnProperty("UploadToDatabase")&&(z(W,v(t).UploadToDatabase=w.UploadToDatabase,v(t)),t().UploadToDatabase)){if(a()===""||l()===""){m.dialog.alert("The file you opened has database syncing turned on, but your user ID or account key are blank.");return}pr(a(),l()).then(T=>{T==="no connection"?m.dialog.alert("This file has cloud sync enabled, but you are not connected to the internet."):T?_d(w.Name).then(O=>{O!==!1?O.FileVersion===void 0?m.dialog.confirm({message:"The file in the database has no FileVersion number. Would you like to overwrite it with your local version?",yesText:"Upload Local Version",callback:b=>{b&&($n(),m.dialog.alert("Saved and uploaded local file."))}}):parseInt(t().FileVersion,36)<parseInt(O.FileVersion,36)&&m.dialog.confirm({message:`Detected a newer version of the file in the database (local: ${t().FileVersion} | online: ${O.FileVersion}). Would you like to download the changes?`,yesText:"Download Changes",callback:(b,x=O)=>{b?(fe(W,x),Ti(x.Docs),$n(),m.dialog.alert("Downloaded changes and saved.")):m.dialog.alert("Did not download changes. If you change your mind, click the Sync From Database button in the Settings tab. This will overwrite local changes.")}}):m.dialog.alert("No file of this name was found in your ownership in the database.")}):m.dialog.alert("One or both of your User ID and Key is invalid.")})}}catch(R){m.dialog.alert("An error has occurred and has been logged to the console. Please contact the developer for assistance."),console.error(R),console.log(w)}finally{Gv(ds,c())}}async function N(){let w,A=R=>{Li({title:"Open Lexicon",defaultPath:`${R}${f.sep}Lexicons${f.sep}`,properties:["openFile"]},M=>{if(M===void 0){document.querySelectorAll(".planet").forEach(T=>{T.style.animationPlayState="paused"}),V(h,"No file selected."),window.setTimeout(()=>{V(h,"")},5e3);return}g.readFile(M[0],"utf8",(T,O)=>{if(T){console.log(T),window.alert("There was an issue loading your file. Please contact the developer."),console.error(T),document.querySelectorAll(".planet").forEach(b=>{b.style.animationPlayState="paused"}),V(h,"Couldn’t open file."),window.setTimeout(()=>{V(h,"")},5e3);return}w=JSON.parse(O),k(w),z(W,v(t).Name=f.basename(M[0],".lexc"),v(t)),document.querySelectorAll(".planet").forEach(b=>{b.style.animationPlayState="paused"}),V(h,"Done!"),window.setTimeout(()=>{V(h,"")},5e3)})})};document.querySelectorAll(".planet").forEach(R=>{R.style.animationPlayState="running"}),V(h,"Loading..."),await Po(R=>{g.existsSync(`${R}${f.sep}Lexicons${f.sep}`)?A(R):g.mkdir(`${R}${f.sep}Lexicons${f.sep}`,()=>{console.log(`Created the 'Lexicons' folder in the user data folder at '${R}'.`),A(R)})})}async function H(){document.querySelectorAll(".planet").forEach(T=>{T.style.animationPlayState="running"}),V(h,"Loading...");let[w]=await window.showOpenFilePicker();await w.requestPermission({mode:"read"});let A=await w.getFile();if(!A.name.includes(".lexc")){window.alert("The selected file was not a .lexc file."),document.querySelectorAll(".planet").forEach(T=>{T.style.animationPlayState="paused"}),V(h,"Incorrect file type."),window.setTimeout(()=>{V(h,"")},5e3);return}let R=await A.text(),M=JSON.parse(R);k(M),z(W,v(t).Name=A.name.split(".")[0],v(t)),document.querySelectorAll(".planet").forEach(T=>{T.style.animationPlayState="paused"}),V(h,"Done!"),window.setTimeout(()=>{V(h,"")},5e3)}ht(()=>{},()=>{V(h,"")}),ht(()=>d(_),()=>{d(_)}),Wn(),jo();var I=Ax(),D=E(I);{var C=w=>{bt(w,{panel:"files",children:(A,R)=>{var M=Ix(),T=y(E(M),2),O=y(T,4),b=E(O),x=E(b),S=y(x,2),B=y(b,2),j=E(B),q=y(E(j),2);we(q,0,()=>["mercury","venus","earth","mars","jupiter","saturn","uranus","neptune","pluto"],ye,(Be,_o)=>{var Fo=Lx();Q(()=>xo(Fo,1,`planet ${_o??""}`)),$(Be,Fo)});var P=y(j,2),U=E(P),K=y(B,2),X=E(K),de=y(X,2),re=y(O,2),se=y(E(re),2),ae=y(se,2),ge=y(E(ae)),Le=E(ge),Ie=y(re,10),Me=E(Ie),ot=E(Me),xe=y(ot,2),he=y(Me,2),Z=E(he),oe=y(Z,2),Re=y(oe,2),Ae=y(he,2),Fe=E(Ae),ve=y(Fe,2),Se=y(Ie,12),Xe=E(Se),J=y(Se,13);Tx(J,{});var te=y(J,10),Ne=E(te),ke=E(Ne),Pe=E(ke),Ee=y(E(Pe)),be=y(ke,2);{var Ke=Be=>{var _o=Bx(),Fo=E(_o),Xn=y(E(Fo));pe(Xn,()=>d(_).pronunciations,Fi=>Ut(_,d(_).pronunciations=Fi)),$(Be,_o)};ee(be,Be=>{d(_),v(()=>d(_).pronunciations_bool)&&Be(Ke)})}var nt=y(be,2),io=E(nt),ro=y(E(io)),so=y(nt,2);{var fo=Be=>{var _o=Ox(),Fo=E(_o),Xn=y(E(Fo));pe(Xn,()=>d(_).tags,Fi=>Ut(_,d(_).tags=Fi)),$(Be,_o)};ee(so,Be=>{d(_),v(()=>d(_).tags_bool)&&Be(fo)})}var Ys=y(Ne,2),Er=E(Ys),Ni=E(Er),Zs=y(E(Ni)),Cr=y(Er,2),Sr=E(Cr),$i=y(E(Sr)),Ri=y(te,2),Tr=y(E(Ri)),Lr=y(Ri,4),Di=y(E(Lr));Q(()=>{d(_),wo(()=>{})});var ji=E(Di);ji.value=ji.__value=",";var Zn=y(ji);Zn.value=Zn.__value="\\t";var Br=y(Zn);Br.value=Br.__value=";";var Xs=y(Lr,5);Q(()=>{ce(U,d(h)),ce(Le,(t(),v(()=>t().SaveLocation||"None")))}),pe(T,()=>t().Name,Be=>z(W,v(t).Name=Be,v(t))),Te("click",x,function(...Be){$n?.apply(this,Be)}),Te("click",S,N),Te("click",X,function(...Be){on.lexc?.apply(this,Be)}),Te("click",de,H),Te("click",se,L),Te("click",ot,function(...Be){on.txt?.apply(this,Be)}),Te("click",xe,function(...Be){on.md?.apply(this,Be)}),Te("click",Z,function(...Be){on.html.lexicon?.apply(this,Be)}),Te("click",oe,function(...Be){on.html.all?.apply(this,Be)}),Te("click",Re,function(...Be){on.html.docs?.apply(this,Be)}),Te("click",Fe,function(...Be){on.csv?.apply(this,Be)}),Te("click",ve,function(...Be){on.json?.apply(this,Be)}),pe(Xe,()=>t().HeaderTags,Be=>z(W,v(t).HeaderTags=Be,v(t))),pe(Ee,()=>d(_).words,Be=>Ut(_,d(_).words=Be)),pe(ro,()=>d(_).definitions,Be=>Ut(_,d(_).definitions=Be)),st(Zs,()=>d(_).pronunciations_bool,Be=>Ut(_,d(_).pronunciations_bool=Be)),st($i,()=>d(_).tags_bool,Be=>Ut(_,d(_).tags_bool=Be)),st(Tr,()=>d(_).headers,Be=>Ut(_,d(_).headers=Be)),Rt(Di,()=>d(_).delimiter,Be=>Ut(_,d(_).delimiter=Be)),Te("click",Xs,()=>dx(d(_).headers,d(_).words,d(_).definitions,d(_).pronunciations_bool?d(_).pronunciations:!1,d(_).tags_bool?d(_).tags:!1,d(_).delimiter)),$(A,M)},$$slots:{default:!0}})};ee(D,w=>{s(),v(()=>s().includes(7))&&w(C)})}$(o,I),et(),p()}var Mx=F('<div class="container glasspane row"><div class="narrow-col"><label for="case-sensitive" style="margin: auto;">Case Sensitivity</label> <input type="checkbox" style="width: 15px; margin: auto;" id="case-sensitive"/></div> <div class="narrow-col"><label for="ignore-diacritic" style="margin: auto; text-align: right;">Ignore Diacritics</label> <input type="checkbox" style="width: 15px; margin: auto;" id="ignore-diacritic"/></div> <input id="alph-input" type="text" style="rows:1; height: fit-content"/></div>');function Nx(o,e){Qe(e,!1);const t=()=>ne(W,"$Language",i),n=()=>ne(lt,"$selectedTab",i),[i,r]=rt(),{ipcRenderer:s}=require("electron");let a=me(""),l=me(""),c=me(""),u=me(""),p=[],h=me(),g=me(),f=[{definition:"",tags:"",lects:[...t().Lects]}],m=me();function L(_){const k=document.getElementById(_);k&&(n()&&(t().Layouts.tabmode==="switch"?fe(lt,[0]):n().push(0)),V(l,""),V(c,""),V(a,""),V(u,""),k.scrollIntoView({behavior:"smooth",block:"center"}))}s.on("lexicon link",(_,k)=>{console.log("link:",k),L(k)}),ht(()=>(d(a),d(l),d(c),d(u)),()=>{d(a),d(l),d(c),d(u)}),ht(()=>t(),()=>{V(h,p.reduce((_,k)=>(k!==null&&k in t().Lexicon&&(_[k]=t().Lexicon[k]),_),{}))}),ht(()=>(t(),d(h)),()=>{t(),t().Lexicon,t().Pronunciations,t().ShowEtymology,t().Etymologies,t().ShowInflection,t().Inflections,t().Alphabet,t().Orthographies,V(g,Ao(p.length?d(h):t().Lexicon))}),ht(()=>t(),()=>{t().Lects,t().UseLects,V(m,Array.from(new Set(f.map(_=>[..._.lects]).flat().filter(_=>t().Lects.includes(_)))))}),Wn(),jo(),bt(o,{panel:"alphabet",children:(_,k)=>{var N=Mx(),H=E(N),I=y(E(H),2),D=y(H,2),C=y(E(D),2),w=y(D,2);st(I,()=>t().CaseSensitive,A=>z(W,v(t).CaseSensitive=A,v(t))),st(C,()=>t().IgnoreDiacritics,A=>z(W,v(t).IgnoreDiacritics=A,v(t))),pe(w,()=>t().Alphabet,A=>z(W,v(t).Alphabet=A,v(t))),$(_,N)},$$slots:{default:!0}}),et(),r()}var $x=F("<option> </option>"),Rx=F("<select><option>Choose Tags</option><!></select>");function Ff(o,e){Qe(e,!1);const t=()=>ne(W,"$Language",n),[n,i]=rt(),r=Xv();let s=Ct(e,"tagSelector",12,"existing tags"),a=me("");const l=()=>r("select",d(a));jo();var c=Rx();Q(()=>{s(),wo(()=>{d(a),t()})});var u=E(c);u.value=u.__value="existing tags";var p=y(u);we(p,1,()=>(t(),v(()=>Array.from(new Set(Object.keys(t().Lexicon).map(h=>t().Lexicon[h].Senses.map(g=>g.tags)).flat(1/0))).sort())),ye,(h,g,f,m)=>{var L=$x(),_=E(L),k={};Q(()=>{ce(_,d(g)),k!==(k=d(g))&&(L.value=(L.__value=d(g))??"")}),$(h,L)}),Rt(c,s),Te("change",c,()=>{V(a,s()==="existing tags"?"":`${s()}`),l(),s("existing tags")}),$(o,c),et(),i()}var Dx=F("<i> </i> <br/>",1),jx=(o,e)=>{o.key==="Enter"&&o.altKey&&e()()},Fx=(o,e,t)=>e(d(t)),Hx=F('<label><div style="display: inline-block"><input type="checkbox"/></div> <span style="display: inline-block"> </span></label><br/>',1),zx=F("<label>Lects<br/> <!></label> <br/>",1),Ux=(o,e)=>e()(),Wx=F('<button class="hover-highlight hover-shadow"> </button>'),qx=F('<label><!> <label>Definition <textarea rows="4"></textarea></label> <br/> <label>Tags <div><textarea rows="1"></textarea> <!></div></label> <br/> <!> <!> <br/></label>');function Hf(o,e){Qe(e,!0);const t=()=>ne(W,"$Language",r),n=()=>ne(Nt,"$pronunciations",r),i=()=>ne(fn,"$wordInput",r),[r,s]=rt();let a=Ct(e,"definition",15,""),l=Ct(e,"tags",15),c=Ct(e,"lects",15),u=Ct(e,"remove",3,()=>{}),p=Ct(e,"commit",3,()=>{});function h(){c().filter(M=>!t().Lects.includes(M)).length>0&&c().filter(M=>!t().Lects.includes(M)).forEach(M=>{c(c().filter(T=>T!==M))})}Zo(()=>{t().Lects,h()});async function g(M){c().includes(M)?c(c().filter(T=>T!==M)):(c([...c(),M]),z(Nt,v(n)[M]=await St(i(),M),v(n)))}var f=qx(),m=E(f);{var L=M=>{var T=Dx(),O=ie(T),b=E(O);Q(()=>ce(b,`Sense ${e.index+1}`)),$(M,T)};ee(m,M=>{e.index!=="hide"&&M(L)})}var _=y(m,2),k=y(E(_));k.__keydown=[jx,p];var N=y(_,4),H=y(E(N)),I=E(H),D=y(I,2);Ff(D,{$$events:{select:M=>l(l()+(M.detail?l()?" "+M.detail:M.detail:""))}});var C=y(N,4);{var w=M=>{var T=zx(),O=ie(T),b=y(E(O),3);we(b,1,()=>t().Lects,ye,(x,S)=>{var B=Hx(),j=ie(B),q=E(j),P=E(q);P.__change=[Fx,g,S];var U=y(q,2),K=E(U);Q(X=>{Ue(P,"id",d(S)),Fv(P,X),ce(K,d(S))},[()=>c().includes(d(S))]),$(x,B)}),$(M,T)};ee(C,M=>{t().UseLects&&M(w)})}var A=y(C,2);{var R=M=>{var T=Wx();T.__click=[Ux,u];var O=E(T);Q(()=>ce(O,`Remove Sense ${e.index+1}`)),$(M,T)};ee(A,M=>{e.index&&e.index!=="hide"&&M(R)})}pe(k,a),pe(I,l),$(o,f),et(),s()}Yt(["keydown","change","click"]);var Vx=F('<div class="row narrow"><div class="column text-right"><p class="lect"> </p></div> <div class="column text-left"><input type="text" class="pronunciation text-left"/></div></div>'),Gx=F('<input type="text" class="pronunciation"/>'),Kx=F('<button class="hover-highlight hover-shadow" id="add-word-button">Add Word</button>'),Yx=F('<div class="row" id="definition-exists"><button id="overwrite" class="hover-shadow">Overwrite Entry</button> <button id="append" class="hover-shadow hover-highlight">Append Definition</button></div>'),Zx=F('<div class="container scrolled glasspane"><label for="wrd-input">New Word</label> <input id="wrd-input" type="text"/> <!> <!> <button class="hover-highlight hover-shadow" id="add-sense-button">Add Sense</button> <!> <br/><br/></div>');function Xx(o,e){Qe(e,!1);const t=()=>ne(W,"$Language",s),n=()=>ne(ai,"$senses",s),i=()=>ne(Nt,"$pronunciations",s),r=()=>ne(fn,"$wordInput",s),[s,a]=rt(),{ipcRenderer:l}=require("electron"),c=require("vex-js");let u=[],p=me(),h=me(),g=me();async function f(_,k){const N=I=>ai[""]!==I&&!!I.definition,H=I=>({definition:I.definition,tags:I.tags.split(/\s+/g),lects:I.lects});k?t().Lexicon[_].Senses.push(...n().filter(N).map(H)):z(W,v(t).Lexicon[_]={pronunciations:await(async()=>{const I={},D=Object.keys(i()).filter(C=>n().map(w=>w.lects).flat().includes(C));for(let C of D){let w=await St(_,C);I[C]={ipa:i()[C].trim(),irregular:i()[C].trim()!==w}}return I})(),Senses:n().filter(N).map(H)},v(t)),z(W,v(t).Lexicon={...t().Lexicon},v(t)),window.setTimeout(()=>l.send("lexicon link",_),50),fe(fn,""),fe(Nt,(()=>{const I={};return t().Lects.forEach(D=>{I[D]=""}),I})()),fe(ai,[{definition:"",tags:"",lects:[...t().Lects]}])}function m(_){let k=r().trim();k&&n()[0].definition&&n().map(N=>N.lects).flat().length&&(y0(k)?f(k,_):c.dialog.confirm({message:"The word contains characters not present in the alphabet. Are you sure you want to add it?",callback:N=>{N&&f(k,_)}}))}async function L(_){z(Nt,v(i)[_]=await St(r(),_),v(i))}ht(()=>t(),()=>{V(p,u.reduce((_,k)=>(k!==null&&k in t().Lexicon&&(_[k]=t().Lexicon[k]),_),{}))}),ht(()=>(t(),d(p)),()=>{t(),t().Lexicon,t().Pronunciations,t().ShowEtymology,t().Etymologies,t().ShowInflection,t().Inflections,t().Alphabet,t().Orthographies,V(h,Ao(u.length?d(p):t().Lexicon))}),ht(()=>(n(),t()),()=>{n(),t().Lects,t().UseLects,V(g,Array.from(new Set(n().map(_=>[..._.lects]).flat().filter(_=>t().Lects.includes(_)))))}),Wn(),jo(),bt(o,{panel:"newword",children:(_,k)=>{var N=Zx(),H=y(E(N),2),I=y(H,2);{var D=O=>{var b=We(),x=ie(b);we(x,1,()=>d(g),ye,(S,B)=>{var j=Vx(),q=E(j),P=E(q),U=E(P),K=y(q,2),X=E(K);Q(()=>ce(U,d(B))),pe(X,()=>i()[d(B)],de=>z(Nt,v(i)[d(B)]=de,v(i))),$(S,j)}),$(O,b)},C=O=>{var b=Gx();pe(b,()=>i().General,x=>z(Nt,v(i).General=x,v(i))),$(O,b)};ee(I,O=>{t(),v(()=>t().UseLects)?O(D):O(C,!1)})}var w=y(I,2);we(w,1,n,ye,(O,b,x)=>{Hf(O,{index:x,remove:()=>{fe(ai,n().filter((S,B)=>B!==x))},commit:()=>{m(!1)},get definition(){return d(b).definition},set definition(S){d(b).definition=S,wo(()=>n()),Wt(s,"$senses")},get tags(){return d(b).tags},set tags(S){d(b).tags=S,wo(()=>n()),Wt(s,"$senses")},get lects(){return d(b).lects},set lects(S){d(b).lects=S,wo(()=>n()),Wt(s,"$senses")},$$legacy:!0})});var A=y(w,2),R=y(A,2);{var M=O=>{var b=Kx();Te("click",b,()=>m(!1)),$(O,b)},T=O=>{var b=Yx(),x=E(b),S=y(x,2);Te("click",x,()=>m(!1)),Te("click",S,()=>m(!0)),$(O,b)};ee(R,O=>{r(),t(),v(()=>!(r()in t().Lexicon))?O(M):O(T,!1)})}pe(H,r,O=>fe(fn,O)),Te("input",H,()=>{d(g).forEach(O=>L(O))}),Te("click",A,()=>{fe(ai,[...n(),{definition:"",tags:"",lects:[...t().Lects]}])}),$(_,N)},$$slots:{default:!0}}),et(),a()}var Jx=F(`<span style="
                    font-family: 'Fira Code', Courier, monospace;
                    text-align: left;
                    size: 12pt;
                "> </span>`),Qx=F('<span class="material-icons" style="font-size:0.75em; margin-right:-1em">lightbulb</span>'),e_=F('<p class="lect"><u> </u> <span class="pronunciation"> <!></span></p>'),t_=F(`<p style="
                font-family: 'Fira Code', Courier, monospace;
                text-align: left;
                font-size: 8pt;
            "> </p>`),o_=F('<span class="material-icons" style="font-size:0.75em; margin-right:-1em">lightbulb</span>'),n_=F('<p class="pronunciation"><span class="pronunciation"> </span> <!></p>');function ll(o,e){Qe(e,!1);const t=()=>ne(W,"$Language",n),[n,i]=rt();let r=Ct(e,"pronunciations",8);jo();var s=We(),a=ie(s);{var l=c=>{var u=We(),p=ie(u);{var h=f=>{var m=We(),L=ie(m);we(L,1,()=>(eo(r()),v(()=>Object.keys(r()))),ye,(_,k)=>{var N=We(),H=ie(N);{var I=C=>{var w=Jx(),A=E(w);Q(()=>ce(A,(eo(r()),d(k),v(()=>r()[d(k)].ipa)))),$(C,w)},D=C=>{var w=e_(),A=E(w),R=E(A),M=y(A,2),T=E(M),O=y(T);{var b=x=>{var S=Qx();$(x,S)};ee(O,x=>{eo(r()),d(k),v(()=>r()[d(k)].irregular)&&x(b)})}Q(()=>{ce(R,d(k)),ce(T,`${eo(r()),d(k),v(()=>r()[d(k)].ipa)??""} `)}),$(C,w)};ee(H,C=>{eo(r()),d(k),v(()=>r()[d(k)].ipa.startsWith("error"))?C(I):C(D,!1)})}$(_,N)}),$(f,m)},g=f=>{var m=We(),L=ie(m);{var _=N=>{var H=t_(),I=E(H);Q(()=>ce(I,(eo(r()),t(),v(()=>r()[t().Lects[0]].ipa)))),$(N,H)},k=N=>{var H=n_(),I=E(H),D=E(I),C=y(I,2);{var w=A=>{var R=o_();$(A,R)};ee(C,A=>{eo(r()),t(),v(()=>r()[t().Lects[0]].irregular)&&A(w)})}Q(()=>ce(D,(eo(r()),t(),v(()=>r()[t().Lects[0]].ipa)))),$(N,H)};ee(L,N=>{eo(r()),t(),v(()=>r()[t().Lects[0]].ipa.startsWith("error"))?N(_):N(k,!1)})}$(f,m)};ee(p,f=>{eo(r()),t(),v(()=>Object.keys(r()).length>1||t().UseLects||r().General===void 0)?f(h):f(g,!1)})}$(c,u)};ee(a,c=>{t(),v(()=>t().ShowPronunciation)&&c(l)})}$(o,s),et(),i()}function zf(o){return o<.5?4*o*o*o:.5*Math.pow(2*o-2,3)+1}function i_(o){const e=typeof o=="string"&&o.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[o,"px"]}function or(o,{delay:e=0,duration:t=400,easing:n=zf,amount:i=5,opacity:r=0}={}){const s=getComputedStyle(o),a=+s.opacity,l=s.filter==="none"?"":s.filter,c=a*(1-r),[u,p]=i_(i);return{delay:e,duration:t,easing:n,css:(h,g)=>`opacity: ${a-c*g}; filter: ${l} blur(${g*u}${p});`}}function Gu(o,{delay:e=0,speed:t,duration:n,easing:i=zf}={}){let r=o.getTotalLength();const s=getComputedStyle(o);return s.strokeLinecap!=="butt"&&(r+=parseInt(s.strokeWidth)),n===void 0?t===void 0?n=800:n=r/t:typeof n=="function"&&(n=n(r)),{delay:e,duration:n,easing:i,css:(a,l)=>`
			stroke-dasharray: ${r};
			stroke-dashoffset: ${l*r};
		`}}function r_(o,e){V(e,!d(e))}var s_=F(" <p>An error occurred while creating the inflections tables.</p>",1),a_=F("<td><!></td>"),l_=F("<tr></tr>"),c_=F('<table style="margin: auto"><tbody></tbody></table>'),d_=F("<p><!></p>"),u_=F("<!> <!> <!>",1),h_=F('<div class="inflection"></div>'),p_=F('<button class="inflection hover-highlight"> </button> <!>',1);function f_(o,e){Qe(e,!0);const t=()=>ne(W,"$Language",i),n=()=>ne(Xa,"$hideDropdowns",i),[i,r]=rt();let s=He(!1);function a(p){const h=document.createElement("div");return h.innerHTML=p,h.textContent??""}function l(p,h){const g=structuredClone(p.filter(L=>{let _;try{_=new RegExp(L.filter)}catch{_=/.+/}return(L.tags[0]?L.tags.some(k=>e.tags.includes(k)):!0)&&h.match(_)})),f=g.map(L=>L.tables.blocks),m=g.map(L=>L.categories+`
`).join();return f.forEach((L,_)=>{L.forEach((k,N)=>{k.type==="table"&&k.data.content.forEach((H,I)=>{H.forEach((D,C)=>{const w=Si(a(D)).rules,A=Si(m).categories;w[0]&&(f[_][N].data.content[I][C]=xr(w,e.word,A))})})})}),f}var c=We(),u=ie(c);ks(u,{failed:(h,g=Vt,f=Vt)=>{var m=s_(),L=ie(m);Q(_=>ce(L,`${_??""} `),[()=>console.dir(g())]),$(h,m)}},h=>{const g=qt(()=>l(t().Inflections,e.word));var f=We(),m=ie(f);{var L=_=>{var k=p_(),N=ie(k);N.__click=[r_,s];var H=E(N),I=y(N,2);{var D=C=>{var w=h_();we(w,21,()=>d(g).flat(),ye,(A,R)=>{var M=u_(),T=ie(M);{var O=j=>{var q=We(),P=ie(q);Pv(P,()=>`h${d(R).data.level}`,!1,(U,K)=>{var X=We(),de=ie(X);No(de,()=>d(R).data.text),$(K,X)}),$(j,q)};ee(T,j=>{d(R).type==="header"&&j(O)})}var b=y(T,2);{var x=j=>{var q=c_(),P=E(q);we(P,21,()=>d(R).data.content,ye,(U,K)=>{var X=l_();we(X,21,()=>d(K),ye,(de,re)=>{var se=a_(),ae=E(se);No(ae,()=>d(re)),$(de,se)}),$(U,X)}),$(j,q)};ee(b,j=>{d(R).type==="table"&&j(x)})}var S=y(b,2);{var B=j=>{var q=d_(),P=E(q);No(P,()=>d(R).data.text),$(j,q)};ee(S,j=>{d(R).type==="paragraph"&&j(B)})}$(A,M)}),Sn(3,w,()=>or,()=>({amount:10,duration:333})),$(C,w)};ee(I,C=>{d(s)&&!n()&&C(D)})}Q(()=>ce(H,`Inflections ${d(s)?"⏶":"⏷"}`)),$(_,k)};ee(m,_=>{d(g)[0]&&_(L)})}$(h,f)}),$(o,c),et(),r()}Yt(["click"]);var g_=F('<p style="font-style: italic"> </p>'),v_=F('<span class="grapheme-svg"><!></span>'),m_=F("<i>generating...</i>"),b_=F("<i>preprocessing...</i>"),y_=F("<i>preprocessing...</i>"),w_=F("<p><!></p>"),k_=F("<!> <!>",1);function cl(o,e){Qe(e,!0);const t=()=>ne(W,"$Language",n),[n,i]=rt();var r=k_(),s=ie(r);{var a=c=>{var u=g_(),p=E(u);Q(()=>ce(p,e.word)),$(c,u)};ee(s,c=>{t().Orthographies.find(u=>u.name==="Romanization")["description"in e.source?"displayInPhrasebook":"display"]&&c(a)})}var l=y(s,2);we(l,1,()=>t().Orthographies,ye,(c,u)=>{var p=We(),h=ie(p);{var g=f=>{var m=We(),L=ie(m);{var _=N=>{var H=We(),I=ie(H);ks(I,{},D=>{var C=We(),w=ie(C);Lv(w,()=>t().Lexicon,A=>{var R=We(),M=ie(R);Mn(M,()=>Ja(e.word,d(u),e.source),T=>{var O=b_();$(T,O)},(T,O)=>{var b=We(),x=ie(b);Mn(x,()=>tf(d(u).graphemy.engine,d(O),d(u).graphemy.bounds.width,d(u).graphemy.bounds.height),S=>{var B=m_();$(S,B)},(S,B)=>{var j=v_(),q=E(j);No(q,()=>d(B)),$(S,j)}),$(T,b)}),$(A,R)}),$(D,C)}),$(N,H)},k=N=>{var H=w_();let I;var D=E(H);Mn(D,()=>Ja(e.word,d(u),e.source),C=>{var w=y_();$(C,w)},(C,w)=>{var A=Qr();Q(()=>ce(A,d(w))),$(C,A)}),Q(C=>I=Et(H,"",I,C),[()=>({"font-family":t().Orthographies.find(C=>C.name===d(u).name)?.font})]),$(N,H)};ee(L,N=>{d(u).graphemy?N(_):N(k,!1)})}$(f,m)};ee(h,f=>{d(u).name!=="Romanization"&&(d(u).root==="rom"||d(u).lect in e.source.pronunciations)&&("description"in e.source?d(u).displayInPhrasebook:d(u).display)&&f(g)})}$(c,p)}),$(o,r),et(),i()}Yt(["click"]);var x_=(o,e)=>e()(),__=F('<div class="sense"></div>'),E_=F('<div class="tag-item"> </div>'),C_=F('<p class="lect"> </p>'),S_=F('<div class="tag-item">etymology</div> <p class="lex-body"><i> </i></p>',1),T_=F('<!> <!> <!> <p style="margin-bottom: -1em"><!></p> <!> <!>',1),L_=F('<div class="lex-entry prelined"><!> <!> <!></div>');function ar(o,e){Qe(e,!0);const t=()=>ne(W,"$Language",n),[n,i]=rt();let r=Ct(e,"showInflections",3,!1),s=Ct(e,"edit",3,()=>{});function a(){const g=[];let f=[e.word],m=6;for(;Object.keys(t().Etymologies).some(k=>t().Etymologies[k].descendants.some(N=>f.includes(N.name)))&&m;)m--,g.push(Object.keys(t().Etymologies).filter(k=>{const N=t().Etymologies[k].descendants.some(H=>f.includes(H.name));return(g.flat().includes(e.word)||k===e.word&&N)&&(m=0),N})),f=g[g.length-1];g.reverse();let L="",_="";return g.forEach(k=>{let N=k.join(", ");N!==_&&(L+=N+" → "),_=N}),L=L?L+e.word:"",L}let l=He("");Zo(()=>{t().Etymologies,t().Lexicon,e.word,e.source,V(l,a(),!0)});var c=L_();c.__contextmenu=[x_,s];var u=E(c);cl(u,{get word(){return e.word},get source(){return e.source}});var p=y(u,2);ll(p,{get pronunciations(){return e.source.pronunciations}});var h=y(p,2);we(h,17,()=>e.source.Senses,ye,(g,f,m)=>{var L=T_(),_=ie(L);{var k=T=>{var O=__();O.textContent=`${m+1}.`,$(T,O)};ee(_,T=>{e.source.Senses.length>1&&T(k)})}var N=y(_,2);we(N,17,()=>d(f).tags,ye,(T,O)=>{var b=We(),x=ie(b);{var S=B=>{var j=E_(),q=E(j);Q(()=>ce(q,d(O))),$(B,j)};ee(x,B=>{d(O)&&B(S)})}$(T,b)});var H=y(N,2);{var I=T=>{var O=C_(),b=E(O);Q(x=>ce(b,x),[()=>d(f).lects.join(", ")]),$(T,O)};ee(H,T=>{t().UseLects&&T(I)})}var D=y(H,2),C=E(D);No(C,()=>hr(d(f).definition));var w=y(D,2);{var A=T=>{f_(T,{get word(){return e.word},get tags(){return d(f).tags}})};ee(w,T=>{(t().ShowInflection||r())&&T(A)})}var R=y(w,2);{var M=T=>{var O=S_(),b=y(ie(O),2),x=E(b),S=E(x);Q(()=>ce(S,d(l))),$(T,O)};ee(R,T=>{t().ShowEtymology&&d(l)&&e.showEtymology&&T(M)})}$(g,L)}),Q(()=>Ue(c,"id",e.word)),$(o,c),et(),i()}Yt(["contextmenu"]);var B_=F('<label for="search-wrd" style="position: absolute; top: 0.5em; left: 1em">Search by word…</label>'),O_=F('<label for="search-tag" style="position: absolute; top: 0.5em; left: 1em">Search by tags…</label>'),I_=F('<label for="search-def" style="position: absolute; top: 0.33em; left: 1em">Search definitions…</label>'),A_=F("<option> </option>"),P_=F('<div class="column"><label>Filter by lect: <select><option>All</option><!></select></label></div>'),M_=F('<div class="column" style="width:33%; margin: auto"><!></div>'),N_=F('<div class="row" style="width: 72%"></div> <br/>',1),$_=F('<p class="info" id="lex-body">Add new words from the word editor panel</p>'),R_=F('<div class="column" style="width:50%; margin: auto"><!></div>'),D_=F('<div class="row" style="width: 72%"></div> <br/>',1),j_=F('<p class="info" id="lex-body">Add new words from the word editor panel</p>'),F_=F('<p class="info" id="lex-body">Add new words from the word editor panel</p>'),H_=F(`<div class="container glasspane" style="
        overflow: hidden;
        postion: relative;
        width: 100%;
    "><section id="search-filters"><div class="row"><div class="column search-container"><!> <input id="search-wrd" type="text" class="search"/></div> <div class="column search-container"><!> <input id="search-tag" type="text" class="search"/></div></div> <div class="row"><div class="search-container column"><!> <input id="search-def" type="text" class="search"/></div> <!></div></section> <div class="scrolled"><!></div> <p id="entry-counter"><!></p></div>`);function z_(o,e){Qe(e,!1);const t=()=>ne(W,"$Language",a),n=()=>ne(lt,"$selectedTab",a),i=()=>ne(fn,"$wordInput",a),r=()=>ne(Nt,"$pronunciations",a),s=()=>ne(Ce,"$CurrentLayouts",a),[a,l]=rt(),{ipcRenderer:c}=require("electron");let u=me(""),p=me(""),h=me(""),g=me(""),f=me([]),m=me(),L=me();function _(C){const w=document.getElementById(C);w&&(n()&&(t().Layouts.tabmode==="switch"?fe(lt,[0]):n().push(0)),V(p,""),V(h,""),V(u,""),V(g,""),w.scrollIntoView({behavior:"smooth",block:"center"}))}c.on("lexicon link",(C,w)=>{console.log("link:",w),_(w)});function k(C){let w=!0;if(i()&&(w=confirm("There is text in the word entry fields. Are you sure you want to overwrite it?")),w){fe(fn,C),fe(Nt,{}),Object.keys(t().Lexicon[C].pronunciations).forEach(M=>{z(Nt,v(r)[M]=t().Lexicon[C].pronunciations[M].ipa,v(r))}),fe(ai,[...t().Lexicon[C].Senses].map(M=>({definition:M.definition,tags:M.tags.join(" "),lects:M.lects}))),fe(Xa,!0);let{[C]:A,...R}=t().Lexicon;z(W,v(t).Lexicon=R,v(t)),fe(Xa,!1)}}function N(){let C=t().CaseSensitive?d(u).trim():d(u).toLowerCase().trim(),w=d(p).toLowerCase().trim(),A=d(h).toLowerCase().trim();if(V(f,[]),C||w||A||d(g)){for(let R in t().Lexicon){let M=t().Lexicon[R],T=!0;if(d(g)&&!M.Senses.some(O=>O.lects.includes(d(g)))){T=!1;continue}if(C){let O=t().CaseSensitive?R:R.toLowerCase();if(C[0]==="!"){if(O!==C.split("!")[1]){T=!1;continue}}else if(!("^"+O.replaceAll(/\s+/g,"^")+"^").includes(C.replaceAll(/\s+/g,"^"))){T=!1;continue}}if(w){if(w[0]==="!"){if(!M.Senses.some(O=>O.definition===w.split("!")[1])){T=!1;continue}}else if(!M.Senses.some(O=>["^",O.definition,"^"].join().replaceAll(/\s+/g,"^").toLowerCase().includes(w.replaceAll(/\s+/g,"^")))){T=!1;continue}}if(A){let O=A.split(/\s+/);for(let b of O)if(b[0]==="!"){if(!M.Senses.some(x=>x.tags.some(S=>S.toLowerCase()===b.split("!")[1]))){T=!1;continue}}else if(!M.Senses.some(x=>x.tags.some(S=>`^${S.toLowerCase()}^`.includes(b)))){T=!1;continue}}T&&V(f,[...d(f),R])}d(f).length||V(f,[null])}}function H(C,w){let A=[];for(let R=0;R<C.length;R+=w){let M=[];for(let T=0;T<w&&C[R+T];T+=1)M.push(C[R+T]);A.push(M)}return A}let I=me(),D=me();ht(()=>(d(u),d(p),d(h),d(g)),()=>{d(u),d(p),d(h),d(g)}),ht(()=>(d(f),t()),()=>{V(m,d(f).reduce((C,w)=>(w!==null&&w in t().Lexicon&&(C[w]=t().Lexicon[w]),C),{}))}),ht(()=>(t(),d(f),d(m)),()=>{t(),t().Lexicon,t().Pronunciations,t().ShowEtymology,t().Etymologies,t().ShowInflection,t().Inflections,t().Alphabet,t().Orthographies,d(f),V(L,Ao(d(f).length?d(m):t().Lexicon))}),Wn(),jo(),bt(o,{panel:"lexicon",children:(C,w)=>{var A=H_(),R=E(A),M=E(R),T=E(M),O=E(T);{var b=Z=>{var oe=B_();$(Z,oe)};ee(O,Z=>{d(u)||Z(b)})}var x=y(O,2),S=y(T,2),B=E(S);{var j=Z=>{var oe=O_();$(Z,oe)};ee(B,Z=>{d(h)||Z(j)})}var q=y(B,2),P=y(M,2),U=E(P),K=E(U);{var X=Z=>{var oe=I_();$(Z,oe)};ee(K,Z=>{d(p)||Z(X)})}var de=y(K,2),re=y(U,2);{var se=Z=>{var oe=P_(),Re=E(oe),Ae=y(E(Re));Q(()=>{d(g),wo(()=>{t()})});var Fe=E(Ae);Fe.value=Fe.__value="";var ve=y(Fe);we(ve,1,()=>(t(),v(()=>t().Lects)),ye,(Se,Xe)=>{var J=A_(),te=E(J),Ne={};Q(()=>{ce(te,d(Xe)),Ne!==(Ne=d(Xe))&&(J.value=(J.__value=d(Xe))??"")}),$(Se,J)}),Rt(Ae,()=>d(g),Se=>V(g,Se)),$(Z,oe)};ee(re,Z=>{t(),v(()=>t().UseLects)&&Z(se)})}var ae=y(R,2),ge=E(ae);{var Le=Z=>{var oe=We(),Re=ie(oe);we(Re,1,()=>(d(L),v(()=>H(d(L),3))),ye,(Ae,Fe)=>{var ve=N_(),Se=ie(ve);we(Se,5,()=>d(Fe),ye,(Xe,J)=>{var te=M_(),Ne=E(te);ar(Ne,{get word(){return d(J)},get source(){return t(),d(J),v(()=>t().Lexicon[d(J)])},showEtymology:!0,edit:()=>k(d(J))}),$(Xe,te)}),$(Ae,ve)},Ae=>{var Fe=$_();$(Ae,Fe)}),$(Z,oe)},Ie=Z=>{var oe=We(),Re=ie(oe);{var Ae=ve=>{var Se=We(),Xe=ie(Se);we(Xe,1,()=>(d(L),v(()=>H(d(L),2))),ye,(J,te)=>{var Ne=D_(),ke=ie(Ne);we(ke,5,()=>d(te),ye,(Pe,Ee)=>{var be=R_(),Ke=E(be);ar(Ke,{get word(){return d(Ee)},get source(){return t(),d(Ee),v(()=>t().Lexicon[d(Ee)])},showEtymology:!0,edit:()=>k(d(Ee))}),$(Pe,be)}),$(J,Ne)},J=>{var te=j_();$(J,te)}),$(ve,Se)},Fe=ve=>{var Se=We(),Xe=ie(Se);we(Xe,1,()=>d(L),ye,(J,te)=>{ar(J,{get word(){return d(te)},get source(){return t(),d(te),v(()=>t().Lexicon[d(te)])},showEtymology:!0,edit:()=>k(d(te))})},J=>{var te=F_();$(J,te)}),$(ve,Se)};ee(Re,ve=>{d(I)>600?ve(Ae):ve(Fe,!1)},!0)}$(Z,oe)};ee(ge,Z=>{d(I)>1200?Z(Le):Z(Ie,!1)})}var Me=y(ae,2),ot=E(Me);{var xe=Z=>{var oe=Qr();Q(()=>ce(oe,`${d(f),v(()=>d(f)[0]?d(f).length:"0")??""} ${d(f),v(()=>d(f).length===1&&d(f)[0]?"Match":"Matches")??""}`)),$(Z,oe)},he=Z=>{var oe=Qr();Q((Re,Ae)=>ce(oe,`${Re??""} ${Ae??""}`),[()=>(t(),v(()=>Object.keys(t().Lexicon).length)),()=>(t(),v(()=>Object.keys(t().Lexicon).length===1?"Entry":"Entries"))]),$(Z,oe)};ee(ot,Z=>{d(f),v(()=>!!d(f)[0])?Z(xe):Z(he,!1)})}Q(()=>{Et(R,`
            position: absolute;
            width: ${d(I)??""}px;
        `),Et(ae,`
            position: absolute;
            top: 95px;
            max-height: ${s(),v(()=>s().positions.lexicon.height-95)??""}px;
            width: ${d(I)??""}px;
        `),Et(Me,`
            position: absolute;
            top: ${s(),v(()=>s().positions.lexicon.height-30)??""}px;
            left: ${d(I)/2-d(D)/2}px;
        `)}),pe(x,()=>d(u),Z=>V(u,Z)),Te("input",x,N),pe(q,()=>d(h),Z=>V(h,Z)),Te("input",q,N),pe(de,()=>d(p),Z=>V(p,Z)),Te("input",de,N),_i(Me,"clientWidth",Z=>V(D,Z)),_i(A,"clientWidth",Z=>V(I,Z)),$(C,A)},$$slots:{default:!0}}),et(),l()}var U_=F("<!> <!> <!>",1),W_=F('<div class="tab-pane" style="overflow:hidden"><div class="row" style="height: 91vh"><!></div></div>');function q_(o,e){Qe(e,!1);const t=()=>ne(W,"$Language",i),n=()=>ne(lt,"$selectedTab",i),[i,r]=rt(),{ipcRenderer:s}=require("electron");let a=me(""),l=me(""),c=me(""),u=me(""),p=[],h=me(),g=me(),f=[{definition:"",tags:"",lects:[...t().Lects]}],m=me();function L(I){const D=document.getElementById(I);D&&(n()&&(t().Layouts.tabmode==="switch"?fe(lt,[0]):n().push(0)),V(l,""),V(c,""),V(a,""),V(u,""),D.scrollIntoView({behavior:"smooth",block:"center"}))}s.on("lexicon link",(I,D)=>{console.log("link:",D),L(D)}),ht(()=>(d(a),d(l),d(c),d(u)),()=>{d(a),d(l),d(c),d(u)}),ht(()=>t(),()=>{V(h,p.reduce((I,D)=>(D!==null&&D in t().Lexicon&&(I[D]=t().Lexicon[D]),I),{}))}),ht(()=>(t(),d(h)),()=>{t(),t().Lexicon,t().Pronunciations,t().ShowEtymology,t().Etymologies,t().ShowInflection,t().Inflections,t().Alphabet,t().Orthographies,V(g,Ao(p.length?d(h):t().Lexicon))}),ht(()=>t(),()=>{t().Lects,t().UseLects,V(m,Array.from(new Set(f.map(I=>[...I.lects]).flat().filter(I=>t().Lects.includes(I)))))}),Wn(),jo();var _=W_(),k=E(_),N=E(k);{var H=I=>{var D=U_(),C=ie(D);z_(C,{});var w=y(C,2);Xx(w,{});var A=y(w,2);{var R=M=>{Nx(M,{})};ee(A,M=>{t(),v(()=>t().ShowAlphabet)&&M(R)})}$(I,D)};ee(N,I=>{n(),v(()=>n().includes(0))&&I(H)})}$(o,_),et(),r()}var V_=(o,e,t)=>{e()(d(t).name)},G_=xl('<g><rect class="lex" width="120"></rect><text class="lex-entry" text-anchor="middle" dominant-baseline="middle"> </text><text class="tag-item" text-anchor="middle" dominant-baseline="middle"> </text><path fill="none"></path></g>'),K_=(o,e,t)=>{e()(d(t).name)},Y_=xl('<g><rect class="lex" width="120"></rect><text class="lex-entry" text-anchor="middle" dominant-baseline="middle"> </text><text class="tag-item" text-anchor="middle" dominant-baseline="middle"> </text><path fill="none"></path></g>'),Z_=xl('<svg><g><!><g><text class="lex-entry" text-anchor="middle" dominant-baseline="middle"> </text></g><!></g></svg>');function X_(o,e){Qe(e,!0);let t=Ct(e,"select",3,g=>{});function n(g){const f=g.length;if(f===0)return[];const m=[];for(let L=0;L<f;L++){const _=(L+.5)/f,k=1-4*Math.pow(_-.5,2);m.push(Math.round(k*Math.pow(f,2)))}return m}let i=qt(()=>n(e.tree.parents)),r=qt(()=>n(e.tree.children));var s=Z_(),a=E(s),l=E(a);we(l,17,()=>e.tree.parents,ye,(g,f,m)=>{var L=G_();L.__mousedown=[V_,t,f];var _=E(L),k=y(_),N=E(k),H=y(k),I=E(H),D=y(H);Q((C,w,A,R)=>{Ue(_,"x",e.width/(e.tree.parents.length+1)*(m+1)-60),Ue(_,"y",C),Ue(k,"x",e.width/(e.tree.parents.length+1)*(m+1)),Ue(k,"y",w),ce(N,d(f).name),Ue(H,"x",e.width/(e.tree.parents.length+1)*(m+1)),Ue(H,"y",A),ce(I,d(f).source),Ue(D,"d",R)},[()=>e.height/9-d(i)[m]-15+Math.max(...d(i)),()=>e.height/9-d(i)[m]+Math.max(...d(i)),()=>e.height/9-d(i)[m]+15+Math.max(...d(i)),()=>`M ${e.width/(e.tree.parents.length+1)*(m+1)}, ${e.height/9-d(i)[m]+20+Math.max(...d(i))} C ${e.width/(e.tree.parents.length+1)*(m+1)}, ${e.height/9-d(i)[m]+50+Math.max(...d(i))}  ${e.width/2}, ${e.height/2-40}  ${e.width/2}, ${e.height/2-10}`]),Sn(3,k,()=>or,()=>({amount:10,duration:999})),Sn(3,H,()=>or,()=>({amount:10,duration:999})),Sn(3,D,()=>Gu,()=>({duration:999})),$(g,L)});var c=y(l),u=E(c),p=E(u),h=y(c);we(h,17,()=>e.tree.children,ye,(g,f,m)=>{var L=Y_();L.__mousedown=[K_,t,f];var _=E(L),k=y(_),N=E(k),H=y(k),I=E(H),D=y(H);Q((C,w,A,R)=>{Ue(_,"x",e.width/(e.tree.children.length+1)*(m+1)-60),Ue(_,"y",C),Ue(k,"x",e.width/(e.tree.children.length+1)*(m+1)),Ue(k,"y",w),ce(N,d(f).name),Ue(H,"x",e.width/(e.tree.children.length+1)*(m+1)),Ue(H,"y",A),ce(I,d(f).source),Ue(D,"d",R)},[()=>e.height+d(r)[m]-e.height/9-15-Math.max(...d(r)),()=>e.height+d(r)[m]-e.height/9-Math.max(...d(r)),()=>e.height+d(r)[m]-e.height/9+15-Math.max(...d(r)),()=>`M ${e.width/2}, ${e.height/2+10} C ${e.width/2}, ${e.height/2+40}  ${e.width/(e.tree.children.length+1)*(m+1)}, ${e.height+d(r)[m]-e.height/9-40-Math.max(...d(r))}  ${e.width/(e.tree.children.length+1)*(m+1)}, ${e.height+d(r)[m]-e.height/9-10-Math.max(...d(r))}`]),Sn(3,k,()=>or,()=>({amount:10,duration:999})),Sn(3,H,()=>or,()=>({amount:10,duration:999})),Sn(3,D,()=>Gu,()=>({duration:999})),$(g,L)}),Q(()=>{Ue(s,"width",e.width),Ue(s,"height",e.height),Ue(u,"x",e.width/2),Ue(u,"y",e.height/2),ce(p,e.tree.name)}),$(o,s),et()}Yt(["mousedown"]);var J_=F("<!> <!>",1),Q_=F('<p class="info">Select an entry from the left to view and edit its etymology.</p>'),e2=(o,e,t)=>{const{[d(e)]:n,...i}=t().Etymologies;z(W,v(t).Etymologies=i,v(t)),V(e,"")},t2=F('<button class="hover-highlight hover-shadow">Delete Empty Etymology</button>'),o2=(o,e,t)=>d(e)[1]=t().Name,n2=F("<option> </option>"),i2=F("<option> </option>"),r2=F('<select><optgroup label="Internal"></optgroup><optgroup label="External"></optgroup></select>'),s2=F('<label>New Ancestor <input type="text"/></label> <label>Source Language <input type="text"/></label>',1),a2=(o,e,t,n)=>{d(e)[0]&&(d(e)[0]in t().Etymologies||z(W,v(t).Etymologies[d(e)[0]]={source:d(e)[1]===t().Name?"<< THIS LANGUAGE >>":d(e)[1],descendants:[]},v(t)),t().Etymologies[d(e)[0]].descendants.push({name:d(n),source:t().Etymologies[d(n)].source}),z(W,v(t).Etymologies={...t().Etymologies},v(t)),V(e,["",""],!0))},l2=(o,e,t,n)=>{z(W,v(e).Etymologies[d(t).name].descendants=e().Etymologies[d(t).name].descendants.filter(i=>i.name!==d(n)),v(e)),z(W,v(e).Etymologies={...e().Etymologies},v(e))},c2=F('<div class="row"><div class="column"><p class="lex-body"> </p> <p class="tag-item"> </p></div> <div class="column"><button class="hover-highlight hover-shadow">Sever</button></div></div>'),d2=F('<p class="info">This entry has no ancestors.</p>'),u2=(o,e,t)=>d(e)[1]=t().Name,h2=F("<option> </option>"),p2=F("<option> </option>"),f2=F('<select><optgroup label="Internal"></optgroup><optgroup label="External"></optgroup></select>'),g2=F('<label>New Descendant <input type="text"/></label> <label>Source Language <input type="text"/></label>',1),v2=(o,e,t,n)=>{d(e)[0]&&(d(e)[0]in t().Etymologies||z(W,v(t).Etymologies[d(e)[0]]={source:d(e)[1],descendants:[]},v(t)),t().Etymologies[d(n)].descendants.push({name:d(e)[0],source:d(e)[1]===t().Name?"<< THIS LANGUAGE >>":d(e)[1]}),z(W,v(t).Etymologies={...t().Etymologies},v(t)),V(e,["",""],!0))},m2=(o,e,t,n)=>{z(W,v(e).Etymologies[d(t)].descendants=e().Etymologies[d(t)].descendants.filter(i=>i.name!==d(n).name),v(e)),z(W,v(e).Etymologies={...e().Etymologies},v(e))},b2=F('<div class="row"><div class="column"><p class="lex-body"> </p> <p class="tag-item"> </p></div> <div class="column"><button class="hover-highlight hover-shadow">Sever</button></div></div>'),y2=F('<p class="info">This entry has no descendants.</p>'),w2=F('<div class="container glasspane scrolled"><!> <hr/> <!> <div class="row"><div class="column"><p>Ancestors</p> <label>Manual Entry <input type="checkbox"/></label> <!> <button class="hover-highlight hover-shadow">Link</button> <div class="column scrolled"></div></div> <div class="column"><p>Descendants</p> <label>Manual Entry <input type="checkbox"/></label> <!> <button class="hover-highlight hover-shadow">Link</button> <div class="column scrolled"><!></div></div></div> <br/><br/><br/></div>'),k2=F('<label for="search" style="position: absolute; top: 0.333em; left: 10%">Search…</label>'),x2=(o,e,t,n)=>{V(e,d(t),!0),d(t)in n().Etymologies||z(W,v(n).Etymologies[d(t)]={descendants:[],source:"<< THIS LANGUAGE >>"},v(n))},_2=F('<div role="button"> </div>'),E2=F('<p class="info">Lexicon entries will appear here.</p>'),C2=(o,e,t)=>{V(e,d(t),!0)},S2=F('<div role="button"> </div>'),T2=F('<p class="info">External-source etymology entries will appear here.</p>'),L2=F('<div class="container glasspane"><p>Entries</p> <hr/> <div class="search-container"><!> <input id="search" type="text" class="search" style="margin: auto; width: 90%"/></div> <p>⦓ <i>Internal</i> ⦔</p> <div class="column scrolled" style="max-height: 40%"></div> <br/> <p>⦔ <i>External</i> ⦓</p> <div class="column scrolled" style="max-height: 40%"></div></div> <br/><br/><br/>',1),B2=F("<!> <!>",1),O2=F('<div class="tab-pane"><!></div>');function I2(o,e){Qe(e,!0);const t=()=>ne(W,"$Language",i),n=()=>ne(lt,"$selectedTab",i),[i,r]=rt();let s=He($t(["",""])),a=He($t(["",""])),l=He(!1),c=He(!1),u=He(""),p=He($t([])),h=qt(()=>d(p).reduce((M,T)=>(T in t().Lexicon&&(M[T]=t().Lexicon[T]),M),{}));function g(M,T,O){const b={};return Object.keys(T).forEach(x=>{Object.keys(T[x]).forEach(S=>{S in M||(b[S]=T[x][S])})}),Object.keys(O).forEach(x=>{x in M||(b[x]={Senses:[],pronunciations:{}})}),b}let f=qt(()=>g(t().Lexicon,t().Relatives,t().Etymologies)),m=qt(()=>Ao(d(p).length?d(h):t().Lexicon)),L=qt(()=>d(p).reduce((M,T)=>(T in d(f)&&(M[T]=d(f)[T]),M),{})),_=qt(()=>Ao(d(p).length?d(L):d(f))),k=He("");function N(){let M={};for(const T in t().Relatives)M={...M,...t().Relatives[T]};M={...M,...t().Lexicon},V(p,Object.keys(M).filter(T=>{let O;O=t().CaseSensitive?T:T.toLowerCase(),O=t().IgnoreDiacritics?T.normalize("NFD"):T;let b;return b=t().CaseSensitive?d(k):d(k).toLowerCase(),b=t().IgnoreDiacritics?b.normalize("NFD"):b,`^${O.replaceAll(/\s+/g,"^")}^`.includes(b)}),!0)}function H(){const M=[];Object.keys(t().Etymologies).forEach(O=>{if(O!==d(u)&&t().Etymologies[O].descendants.some(b=>b.name===d(u))){const b=t().Etymologies[O].source==="<< THIS LANGUAGE >>"?t().Name:t().Etymologies[O].source;M.push([O,b])}});const T=[];return d(u)in t().Etymologies&&t().Etymologies[d(u)].descendants.forEach(O=>{T.push([O.name,O.source==="<< THIS LANGUAGE >>"?t().Name:O.source])}),{name:d(u),children:T.map(O=>({name:O[0],source:O[1]})),parents:M.map(O=>({name:O[0],source:O[1]}))}}let I=He($t(H())),D=He(window.innerWidth*.8),C=He(window.innerHeight*.5);Zo(()=>{d(u),t().Etymologies,V(I,H(),!0)});var w=O2(),A=E(w);{var R=M=>{var T=B2(),O=ie(T);bt(O,{panel:"etymologyeditor",children:(x,S)=>{var B=w2(),j=E(B);{var q=J=>{var te=J_(),Ne=ie(te);{let be=qt(()=>d(C)/3);X_(Ne,{get tree(){return d(I)},get width(){return d(D)},get height(){return d(be)},select:Ke=>V(u,Ke,!0)})}var ke=y(Ne,2);{var Pe=be=>{ar(be,{get word(){return d(u)},get source(){return t().Lexicon[d(u)]},showEtymology:!1})},Ee=be=>{var Ke=We(),nt=ie(Ke);{var io=ro=>{ar(ro,{get word(){return d(u)},get source(){return t().Relatives[Object.entries(t().Relatives).find(([so,fo])=>Object.keys(fo).includes(d(u)))[0]][d(u)]},showEtymology:!1})};ee(nt,ro=>{Object.entries(t().Relatives).some(([so,fo])=>Object.keys(fo).includes(d(u)))&&ro(io)},!0)}$(be,Ke)};ee(ke,be=>{d(u)in t().Lexicon?be(Pe):be(Ee,!1)})}$(J,te)},P=J=>{var te=Q_();$(J,te)};ee(j,J=>{d(u)?J(q):J(P,!1)})}var U=y(j,4);{var K=J=>{var te=t2();te.__click=[e2,u,t],$(J,te)};ee(U,J=>{!(d(I)?.parents&&d(I).parents[0])&&!(d(I)?.children&&d(I).children[0])&&d(u)&&J(K)})}var X=y(U,2),de=E(X),re=y(E(de),2),se=y(E(re)),ae=y(re,2);{var ge=J=>{var te=r2();te.__change=[o2,s,t];var Ne=E(te);we(Ne,21,()=>d(m),ye,(Pe,Ee)=>{var be=n2(),Ke=E(be),nt={};Q(()=>{ce(Ke,d(Ee)),nt!==(nt=d(Ee))&&(be.value=(be.__value=d(Ee))??"")}),$(Pe,be)});var ke=y(Ne);we(ke,21,()=>d(_),ye,(Pe,Ee)=>{var be=i2(),Ke=E(be),nt={};Q(()=>{ce(Ke,d(Ee)),nt!==(nt=d(Ee))&&(be.value=(be.__value=d(Ee))??"")}),$(Pe,be)}),Rt(te,()=>d(s)[0],Pe=>d(s)[0]=Pe),$(J,te)},Le=J=>{var te=s2(),Ne=ie(te),ke=y(E(Ne)),Pe=y(Ne,2),Ee=y(E(Pe));pe(ke,()=>d(s)[0],be=>d(s)[0]=be),pe(Ee,()=>d(s)[1],be=>d(s)[1]=be),$(J,te)};ee(ae,J=>{d(l)?J(Le,!1):J(ge)})}var Ie=y(ae,2);Ie.__click=[a2,s,t,u];var Me=y(Ie,2);we(Me,21,()=>d(I).parents,ye,(J,te)=>{var Ne=c2(),ke=E(Ne),Pe=E(ke),Ee=E(Pe),be=y(Pe,2),Ke=E(be),nt=y(ke,2),io=E(nt);io.__click=[l2,t,te,u],Q(()=>{ce(Ee,d(te).name),ce(Ke,d(te).source)}),$(J,Ne)},J=>{var te=d2();$(J,te)});var ot=y(de,2),xe=y(E(ot),2),he=y(E(xe)),Z=y(xe,2);{var oe=J=>{var te=f2();te.__change=[u2,a,t];var Ne=E(te);we(Ne,21,()=>d(m),ye,(Pe,Ee)=>{var be=h2(),Ke=E(be),nt={};Q(()=>{ce(Ke,d(Ee)),nt!==(nt=d(Ee))&&(be.value=(be.__value=d(Ee))??"")}),$(Pe,be)});var ke=y(Ne);we(ke,21,()=>d(_),ye,(Pe,Ee)=>{var be=p2(),Ke=E(be),nt={};Q(()=>{ce(Ke,d(Ee)),nt!==(nt=d(Ee))&&(be.value=(be.__value=d(Ee))??"")}),$(Pe,be)}),Rt(te,()=>d(a)[0],Pe=>d(a)[0]=Pe),$(J,te)},Re=J=>{var te=g2(),Ne=ie(te),ke=y(E(Ne)),Pe=y(Ne,2),Ee=y(E(Pe));pe(ke,()=>d(a)[0],be=>d(a)[0]=be),pe(Ee,()=>d(a)[1],be=>d(a)[1]=be),$(J,te)};ee(Z,J=>{d(c)?J(Re,!1):J(oe)})}var Ae=y(Z,2);Ae.__click=[v2,a,t,u];var Fe=y(Ae,2),ve=E(Fe);{var Se=J=>{var te=We(),Ne=ie(te);we(Ne,17,()=>d(I).children,ye,(ke,Pe)=>{var Ee=b2(),be=E(Ee),Ke=E(be),nt=E(Ke),io=y(Ke,2),ro=E(io),so=y(be,2),fo=E(so);fo.__click=[m2,t,u,Pe],Q(()=>{ce(nt,d(Pe).name),ce(ro,d(Pe).source)}),$(ke,Ee)},ke=>{var Pe=y2();$(ke,Pe)}),$(J,te)},Xe=J=>{var te=Qr();Q(Ne=>ce(te,Ne),[()=>(console.log(d(I)),"")]),$(J,te)};ee(ve,J=>{d(I)?J(Se):J(Xe,!1)})}st(se,()=>d(l),J=>V(l,J)),st(he,()=>d(c),J=>V(c,J)),_i(B,"clientWidth",J=>V(D,J)),_i(B,"clientHeight",J=>V(C,J)),$(x,B)},$$slots:{default:!0}});var b=y(O,2);bt(b,{panel:"etymologyselect",children:(x,S)=>{var B=L2(),j=ie(B),q=y(E(j),4),P=E(q);{var U=re=>{var se=k2();$(re,se)};ee(P,re=>{d(k)||re(U)})}var K=y(P,2);K.__input=N;var X=y(q,4);we(X,21,()=>d(m),ye,(re,se,ae)=>{var ge=_2();let Le;ge.__mousedown=[x2,u,se,t],Ue(ge,"tabindex",ae);var Ie=E(ge);Q(Me=>{Le=xo(ge,1,"lex-entry",null,Le,Me),ce(Ie,d(se))},[()=>({selected:d(se)===d(u)})]),$(re,ge)},re=>{var se=E2();$(re,se)});var de=y(X,6);we(de,21,()=>d(_),ye,(re,se,ae)=>{var ge=S2();let Le;ge.__mousedown=[C2,u,se],Ue(ge,"tabindex",ae);var Ie=E(ge);Q(Me=>{Le=xo(ge,1,"lex-entry",null,Le,Me),ce(Ie,d(se))},[()=>({selected:d(se)===d(u)})]),$(re,ge)},re=>{var se=T2();$(re,se)}),pe(K,()=>d(k),re=>V(k,re)),$(x,B)},$$slots:{default:!0}}),$(M,T)};ee(A,M=>{n().includes(1)&&M(R)})}$(o,w),et(),r()}Yt(["click","change","input","mousedown"]);var A2=(o,e)=>e()(),P2=F('<div class="tag-item"> </div>'),M2=F('<div class="column"><!> <!> <p class="prelined" style="margin: 0 1rem 0.5rem 1rem"><!></p></div>'),N2=F('<div class="row"><!> <br/></div>'),$2=F("<p>⋲ ᴠᴀʀɪᴀɴᴛꜱ ⋺</p> <!>",1),R2=F('<div class="lex-entry"><!> <!> <!> <p class="prelined"><!></p> <!></div>');function D2(o,e){Qe(e,!0);const t=()=>ne(W,"$Language",i),n=()=>ne(hi,"$selectedCategory",i),[i,r]=rt();let s=Ct(e,"edit",3,()=>{});const a=()=>t(),l=()=>n();var c=R2();c.__contextmenu=[A2,s];var u=E(c);cl(u,{get word(){return e.phrase},get source(){return a().Phrasebook[l()][e.phrase]}});var p=y(u,2);ll(p,{get pronunciations(){return a().Phrasebook[l()][e.phrase].pronunciations}});var h=y(p,2);{var g=k=>{var N=We(),H=ie(N);we(H,17,()=>a().Phrasebook[l()][e.phrase].tags,ye,(I,D)=>{var C=P2(),w=E(C);Q(()=>ce(w,d(D))),$(I,C)}),$(k,N)};ee(h,k=>{a().Phrasebook[l()][e.phrase].tags[0]&&k(g)})}var f=y(h,2),m=E(f);No(m,()=>hr(a().Phrasebook[l()][e.phrase].description));var L=y(f,2);{var _=k=>{var N=$2(),H=y(ie(N),2);we(H,17,()=>Array(Math.ceil(Object.keys(a().Phrasebook[l()][e.phrase].variants).length/3)),ye,(I,D,C)=>{var w=N2(),A=E(w);we(A,17,()=>Object.keys(a().Phrasebook[l()][e.phrase].variants).slice(C*3,C*3+3),ye,(R,M)=>{var T=M2(),O=E(T);cl(O,{get word(){return d(M)},get source(){return a().Phrasebook[l()][e.phrase].variants[d(M)]}});var b=y(O,2);ll(b,{get pronunciations(){return a().Phrasebook[l()][e.phrase].variants[d(M)].pronunciations}});var x=y(b,2),S=E(x);No(S,()=>hr(a().Phrasebook[l()][e.phrase].variants[d(M)].description)),$(R,T)}),$(I,w)}),$(k,N)};ee(L,k=>{Object.keys(a().Phrasebook[l()][e.phrase].variants).length&&k(_)})}Q(()=>Ue(c,"id",e.phrase)),$(o,c),et(),r()}Yt(["contextmenu"]);var j2=(o,e)=>e()(),F2=F('<div class="row"><div class="column text-right lect"> </div> <div class="column text-left"><input type="text" class="pronunciation text-left"/></div></div>'),H2=F('<input type="text" class="pronunciation"/>'),z2=F('<div class="variant-div"><input type="text"/> <!> <textarea></textarea> <br/></div>');function U2(o,e){Qe(e,!0);const t=()=>ne(W,"$Language",n),[n,i]=rt();let r=Ct(e,"phrase",15,""),s=Ct(e,"description",15,""),a=Ct(e,"lects",27,()=>$t([])),l=Ct(e,"pronunciations",31,()=>$t({})),c=Ct(e,"update",3,()=>{});Zo(()=>{a().forEach(async L=>{l(l()[L].ipa=await St(r(),L),!0)})});var u=z2(),p=E(u);p.__keyup=[j2,c];var h=y(p,2);{var g=L=>{var _=We(),k=ie(_);we(k,17,a,ye,(N,H)=>{var I=F2(),D=E(I),C=E(D),w=y(D,2),A=E(w);Q(()=>ce(C,d(H))),pe(A,()=>l()[d(H)].ipa,R=>l(l()[d(H)].ipa=R,!0)),$(N,I)}),$(L,_)},f=L=>{var _=H2();pe(_,()=>l().General.ipa,k=>l(l().General.ipa=k,!0)),$(L,_)};ee(h,L=>{t().UseLects?L(g):L(f,!1)})}var m=y(h,2);pe(p,r),pe(m,s),$(o,u),et(),i()}Yt(["keyup"]);var W2=F('<div role="option" aria-roledescription="Select category" tabindex="0"> </div>'),q2=F('<p class="info">Categories will appear here.</p>'),V2=F('<div class="container glasspane"><p>Categories</p> <hr/> <div class="column scrolled" style="max-height:90%" id="category-body"></div></div>'),G2=F('<label for="search-phrase" style="position: absolute; top: .5em; left: 1em">Search by phrase…</label>'),K2=F('<label for="search-tags" style="position: absolute; top: .5em; left: 1em">Search by tags…</label>'),Y2=F('<label for="search-description" style="position: absolute; top: .5em; left: 1em">Search descriptions…</label>'),Z2=F("<option> </option>"),X2=F('<div class="column"><label>Filter by lect: <select><option>All</option><!></select></label></div>'),J2=F('<p class="info">Select a category from the left or add your first phrase entry.</p>'),Q2=F('<div class="container glasspane" style="overflow: hidden"><div class="row"><div class="column search-container"><!> <input id="search-phrase" type="text" class="search"/></div> <div class="column search-container"><!> <input id="search-tags" type="text" class="search"/></div></div> <div class="row"><div class="column search-container"><!> <input id="search-description" type="text" class="search"/></div> <!></div> <div class="column scrolled" id="phrasebook-body" style="max-height: 88%;"><!></div></div>'),eE=F('<div class="row narrow"><div class="column text-right"><p class="lect"> </p></div> <div class="column text-left"><input type="text" class="pronunciation text-left"/></div></div>'),tE=F('<input type="text" class="pronunciation"/>'),oE=F('<p class="info">Click the button below to add a variation for this phrase</p>'),nE=F('<div class="container glasspane scrolled" style="height:94%"><div class="row"><div class="column scrolled"><label for="phrase">Phrase</label> <input type="text"/> <!> <!> <label>Category <input type="text"/></label> <button class="hover-shadow hover-highlight">Add Phrase</button></div> <div class="column scrolled" id="variants-body"><!> <button class="hover-shadow hover-highlight">+ Variant</button></div></div></div>'),iE=F("<!> <!> <!>",1),rE=F('<div class="tab-pane"><!></div>');function sE(o,e){Qe(e,!1);const t=()=>ne(Wi,"$categoryInput",l),n=()=>ne(hi,"$selectedCategory",l),i=()=>ne(W,"$Language",l),r=()=>ne(Qi,"$phraseInput",l),s=()=>ne(Tn,"$phrasePronunciations",l),a=()=>ne(lt,"$selectedTab",l),[l,c]=rt(),u=require("vex-js");fe(Wi,n());let p=me(""),h=me(""),g=me(""),f=me(""),m=me([]),L=me(""),_=me([]),k=me([...i().Lects]),N=me("");function H(){if(!n())return[];const T=i().Phrasebook[n()],O=d(p).trim(),b=d(h).toLowerCase().trim(),x=d(g).toLowerCase().trim();let S=[];for(let B in T){let j="^"+B.replaceAll(/\s+/g,"^")+"^";(!O||j.toLowerCase().includes(O))&&(!b||T[B].description.toLowerCase().includes(b))&&(!x||T[B].tags.join(" ").toLowerCase().includes(x))&&(!d(f)||T[B].lects.includes(d(f)))&&S.push(B);for(let q in T[B].variants){let P=T[B].variants[q],U="^"+q.replaceAll(/\s+/g,"^")+"^";(!O||U.toLowerCase().includes(O))&&(!b||P.description.toLowerCase().includes(b))&&S.push(B)}}return[...new Set(S)]}function I(T){fe(hi,T),fe(Wi,T)}function D(T){fe(Qi,T),fe(Wi,n()),fe(Tn,(()=>{let O={};return Object.keys(i().Phrasebook[n()][T].pronunciations).forEach(b=>{O[b]=i().Phrasebook[n()][T].pronunciations[b].ipa}),O})()),V(L,i().Phrasebook[n()][T].description),V(_,[]);for(let O in i().Phrasebook[n()][T].variants)V(_,[...d(_),{phrase:O,pronunciations:i().Phrasebook[n()][T].variants[O].pronunciations,description:i().Phrasebook[n()][T].variants[O].description}]);delete i().Phrasebook[n()][T],Object.keys(i().Phrasebook[n()]).length===0&&(delete i().Phrasebook[n()],fe(hi,"")),fe(W,{...i()})}function C(){V(_,[...d(_),{phrase:"",pronunciations:(()=>{let T={};return d(k).forEach(O=>T[O]=""),T})(),description:""}])}function w(){let T=r().trim();if(!T)return;let O=d(L).trim();if(!O)return;let b=t().trim();if(!b)return;let x={};console.log(s(),d(k)),Object.keys(s()).filter(B=>d(k).includes(B)).forEach(async B=>{console.log(B),x[B]={ipa:s()[B].trim(),irregular:s()[B].trim()!==await St(T,B)}});function S(){i().Phrasebook.hasOwnProperty(b)||z(W,v(i).Phrasebook[b]={},v(i)),z(W,v(i).Phrasebook[b][T]={pronunciations:x,lects:Object.keys(x),tags:d(N).split(/\s+/g),description:O,variants:(()=>{let B={};for(const j of d(_)){const q=j.phrase.trim();if(!q)continue;const P=j.description.trim();if(!P)continue;let U={};Object.keys(j.pronunciations).forEach(async K=>{U[K]={ipa:j.pronunciations[K].ipa.trim(),irregular:j.pronunciations[K].ipa.trim()!==await St(q,K)}}),B[q]={pronunciations:U,description:P}}return B})()},v(i)),fe(W,{...i()}),fe(Qi,""),fe(Tn,(()=>{let B={};return Object.keys(i().Pronunciations).forEach(j=>{B[j]=""}),B})()),V(L,""),V(_,[]),fe(hi,b)}i().Phrasebook.hasOwnProperty(b)&&i().Phrasebook[b].hasOwnProperty(T)?u.dialog.confirm({message:"This phrase already exists in this category. Are you sure you want to overwrite it?",callback:B=>{B&&S()}}):S()}ht(()=>(i(),n(),d(p),d(h),d(g),d(f)),()=>{i().Phrasebook,n(),d(p),d(h),d(g),d(f),V(m,H())}),Wn(),jo();var A=rE(),R=E(A);{var M=T=>{var O=iE(),b=ie(O);bt(b,{panel:"phrasecategories",children:(B,j)=>{var q=V2(),P=y(E(q),4);we(P,5,()=>(i(),v(()=>Object.keys(i().Phrasebook))),ye,(U,K)=>{var X=W2();let de;var re=E(X);Q(se=>{de=xo(X,1,"lex-entry capitalize",null,de,se),Ue(X,"aria-selected",d(K)===n()),ce(re,d(K))},[()=>({selected:d(K)===n()})]),Te("mousedown",X,()=>I(d(K))),$(U,X)},U=>{var K=q2();$(U,K)}),$(B,q)},$$slots:{default:!0}});var x=y(b,2);bt(x,{panel:"phrasebook",children:(B,j)=>{var q=Q2(),P=E(q),U=E(P),K=E(U);{var X=ve=>{var Se=G2();$(ve,Se)};ee(K,ve=>{d(p)||ve(X)})}var de=y(K,2),re=y(U,2),se=E(re);{var ae=ve=>{var Se=K2();$(ve,Se)};ee(se,ve=>{d(g)||ve(ae)})}var ge=y(se,2),Le=y(P,2),Ie=E(Le),Me=E(Ie);{var ot=ve=>{var Se=Y2();$(ve,Se)};ee(Me,ve=>{d(h)||ve(ot)})}var xe=y(Me,2),he=y(Ie,2);{var Z=ve=>{var Se=X2(),Xe=E(Se),J=y(E(Xe));Q(()=>{d(f),wo(()=>{i()})});var te=E(J);te.value=te.__value="";var Ne=y(te);we(Ne,1,()=>(i(),v(()=>i().Lects)),ye,(ke,Pe)=>{var Ee=Z2(),be=E(Ee),Ke={};Q(()=>{ce(be,d(Pe)),Ke!==(Ke=d(Pe))&&(Ee.value=(Ee.__value=d(Pe))??"")}),$(ke,Ee)}),Rt(J,()=>d(f),ke=>V(f,ke)),$(ve,Se)};ee(he,ve=>{i(),v(()=>i().UseLects)&&ve(Z)})}var oe=y(Le,2),Re=E(oe);{var Ae=ve=>{var Se=We(),Xe=ie(Se);we(Xe,1,()=>d(m),ye,(J,te)=>{D2(J,{get phrase(){return d(te)},edit:()=>D(d(te))})}),$(ve,Se)},Fe=ve=>{var Se=J2();$(ve,Se)};ee(Re,ve=>{i(),v(()=>!!Object.keys(i().Phrasebook).length)?ve(Ae):ve(Fe,!1)})}pe(de,()=>d(p),ve=>V(p,ve)),pe(ge,()=>d(g),ve=>V(g,ve)),pe(xe,()=>d(h),ve=>V(h,ve)),$(B,q)},$$slots:{default:!0}});var S=y(x,2);bt(S,{panel:"newphrase",children:(B,j)=>{var q=nE(),P=E(q),U=E(P),K=y(E(U),2),X=y(K,2);{var de=xe=>{var he=We(),Z=ie(he);we(Z,1,()=>d(k),ye,(oe,Re)=>{var Ae=eE(),Fe=E(Ae),ve=E(Fe),Se=E(ve),Xe=y(Fe,2),J=E(Xe);Q(()=>ce(Se,d(Re))),pe(J,()=>s()[d(Re)],te=>z(Tn,v(s)[d(Re)]=te,v(s))),$(oe,Ae)}),$(xe,he)},re=xe=>{var he=tE();pe(he,()=>s().General,Z=>z(Tn,v(s).General=Z,v(s))),$(xe,he)};ee(X,xe=>{i(),v(()=>i().UseLects)?xe(de):xe(re,!1)})}var se=y(X,2);Hf(se,{index:"hide",get definition(){return d(L)},set definition(xe){V(L,xe)},get tags(){return d(N)},set tags(xe){V(N,xe)},get lects(){return d(k)},set lects(xe){V(k,xe)},$$legacy:!0});var ae=y(se,2),ge=y(E(ae)),Le=y(ae,2),Ie=y(U,2),Me=E(Ie);we(Me,1,()=>d(_),ye,(xe,he,Z)=>{U2(xe,{get lects(){return d(k)},update:()=>{d(k).forEach(async oe=>{Ut(_,d(_)[Z].pronunciations[oe]={ipa:await St(d(_)[Z].phrase,oe),irregular:!1})})},get phrase(){return d(_)[Z].phrase},set phrase(oe){Ut(_,d(_)[Z].phrase=oe)},get pronunciations(){return d(_)[Z].pronunciations},set pronunciations(oe){Ut(_,d(_)[Z].pronunciations=oe)},get description(){return d(_)[Z].description},set description(oe){Ut(_,d(_)[Z].description=oe)},$$legacy:!0})},xe=>{var he=oE();$(xe,he)});var ot=y(Me,2);pe(K,r,xe=>fe(Qi,xe)),Te("input",K,()=>{d(k).forEach(async xe=>{z(Tn,v(s)[xe]=await St(r(),xe),v(s))})}),pe(ge,t,xe=>fe(Wi,xe)),Te("click",Le,w),Te("click",ot,C),$(B,q)},$$slots:{default:!0}}),$(T,O)};ee(R,T=>{a(),v(()=>a().includes(2))&&T(M)})}$(o,A),et(),c()}var aE=F('<div class="row"><div class="column narrow"><div class="row"><input type="checkbox"/></div> <div class="row"><button class="hover-highlight hover-shadow">-</button></div></div> <div class="column"><textarea class="phonology text-left" rows="3"></textarea></div></div>'),lE=F('<div class="row"><div class="column"><label>Categories <textarea class="phonology text-left" rows="8"></textarea></label></div> <div class="column"><label>Syllables <textarea class="phonology text-left" rows="8"></textarea></label></div></div> <div class="row"><div class="column"><label>Structures <!> <button class="hover-highlight hover-shadow">Add Set</button></label></div> <div class="column"><label>Illegals <textarea class="phonology text-left" rows="4"></textarea></label></div></div> <br/> <button class="hover-highlight hover-shadow">Generate Words</button>',1),cE=F('<label for="onsets">Onset Consonants</label> <textarea id="onsets" class="phonology"></textarea> <br/> <label for="medials">Medial Consonants</label> <textarea id="medials" class="phonology"></textarea> <br/> <label for="codas">Coda Consonants</label> <textarea id="codas" class="phonology"></textarea> <br/> <label for="vowels">Vowels</label> <textarea id="vowels" class="phonology"></textarea> <br/> <label for="illegals">Illegal Combinations</label> <textarea id="illegals" class="phonology"></textarea> <br/><br/> <label for="trial">Trial Words</label> <input type="text" id="trial"/> <p style="font-family: Gentium"> </p> <br/> <button class="hover-highlight hover-shadow">Generate Words</button>',1),dE=F('<div class="column"><p class="prelined" style="font-family: Gentium"> </p></div>'),uE=F('<div class="row"></div>'),hE=F('<div class="container glasspane scrolled"><label><input type="checkbox"/> Use Advanced Phonotactics</label> <br/><br/> <!> <!></div>'),pE=F("<option> </option>"),fE=F("<select></select>"),gE=F('<textarea readonly=""></textarea>'),vE=F('<textarea class="pronunciation" rows="2" readonly=""></textarea>'),mE=F('<div class="container glasspane scrolled"><label>Pronunciations <!> <textarea class="prelined" rows="24" id="pronunciations-input"></textarea></label> <br/><br/> <label>Rule Testing <textarea class="prelined" rows="2"></textarea></label> <!></div>'),bE=F("<!> <!>",1),yE=F('<div class="tab-pane"><!></div>');function wE(o,e){Qe(e,!1);const t=()=>ne(W,"$Language",r),n=()=>ne(ds,"$fileLoadIncrement",r),i=()=>ne(lt,"$selectedTab",r),[r,s]=rt(),a=me(),l=me();let c=me(""),u=me("");function p(T){const b=T.target.value.trim(),{[d(C)]:x,...S}=t().Pronunciations;z(W,v(t).Pronunciations={...S,[d(C)]:b},v(t))}let h=me(""),g=me(""),f=me([{enabled:!0,structures:""}]),m=me("");function L(){V(h,Object.keys(t().AdvancedPhonotactics.Categories).map(T=>`${T} :: ${t().AdvancedPhonotactics.Categories[T].join(" ")}`).join(`
`)),V(g,t().AdvancedPhonotactics.Syllables.join(`
`)),V(f,t().AdvancedPhonotactics.Constructs),V(m,t().AdvancedPhonotactics.Illegals.join(" "))}function _(){z(W,v(t).AdvancedPhonotactics.Categories={},v(t)),d(h).split(`
`).forEach(T=>{let O=T.split("::")[0].trim();t().AdvancedPhonotactics.Categories[O]||z(W,v(t).AdvancedPhonotactics.Categories[O]=[],v(t)),T.split("::")[1].trim().split(/\s+/g).forEach(b=>{t().AdvancedPhonotactics.Categories[O].push(b)})})}function k(){z(W,v(t).AdvancedPhonotactics.Syllables=[],v(t)),d(g).split(`
`).forEach(T=>{t().AdvancedPhonotactics.Syllables.push(T.trim())})}function N(){z(W,v(t).AdvancedPhonotactics.Constructs=[],v(t));for(let T of d(f))t().AdvancedPhonotactics.Constructs.push({enabled:T.enabled,structures:T.structures.trim()})}function H(){z(W,v(t).AdvancedPhonotactics.Illegals=[],v(t)),d(m).split(/\s+/g).forEach(T=>{t().AdvancedPhonotactics.Illegals.push(T.trim())})}function I(T=1){let O="";const b=P=>{for(let U of t().AdvancedPhonotactics.Illegals)if(P.includes(U)&&U!=="")return T<=20?I(T+1):"[ ∅ ]";return P};if(t().AdvancedPhonotactics.Constructs.every(P=>!P.enabled||P.structures.trim()==="")){for(let P=0;P<Math.floor(Math.random()*4)+1;P++){let U=t().AdvancedPhonotactics.Syllables[Math.floor(Math.random()*t().AdvancedPhonotactics.Syllables.length)];U.includes("::")&&(U=U.split("::")[1].trim().split(/\s+/g)[Math.floor(Math.random()*U.split("::")[1].trim().split(/\s+/g).length)]),U.split("").forEach(K=>{t().AdvancedPhonotactics.Categories[K]?O+=t().AdvancedPhonotactics.Categories[K][Math.floor(Math.random()*t().AdvancedPhonotactics.Categories[K].length)]:O+=K})}return b(O)}let x=[];for(let P of t().AdvancedPhonotactics.Constructs)P.enabled&&(x=x.concat(P.structures.split(/\s+/g)));let B=x[Math.floor(Math.random()*x.length)].split(""),j=new Array(B.length).fill([]);for(let P=0;P<B.length;P++){let U=B[P];for(let K=0;K<t().AdvancedPhonotactics.Syllables.length;K++)t().AdvancedPhonotactics.Syllables[K].replaceAll(/\s+/g,"").slice(0,3)===U+"::"&&(j[P]=j[P].concat(t().AdvancedPhonotactics.Syllables[K].split("::")[1].trim().split(/\s+/g)));j[P].length===0&&(j[P]=[U])}let q="";for(let P=0;P<j.length;P++){let U=j[P][Math.floor(Math.random()*j[P].length)];q+=U}for(let P=0;P<q.length;P++){let U=q[P];t().AdvancedPhonotactics.Categories[U]?O+=t().AdvancedPhonotactics.Categories[U][Math.floor(Math.random()*t().AdvancedPhonotactics.Categories[U].length)]:O+=U}return b(O)}function D(){document.getElementById("pronunciations-input").value=t().Pronunciations[d(C)]}let C=me(t().Lects[0]),w=me(Array(24).fill(""));ht(()=>n(),()=>{n()&&L()}),ht(()=>d(c),()=>{V(a,Ww(d(c)))}),ht(()=>(t(),d(C)),()=>{t().Lects,V(C,t().UseLects?d(C):t().Lects[0]),t().Lects.includes(d(C))||V(C,t().Lects[0])}),ht(()=>(d(u),d(C)),()=>{V(l,St(d(u),d(C)))}),Wn(),jo();var A=yE(),R=E(A);{var M=T=>{var O=bE(),b=ie(O);bt(b,{panel:"wordgenerator",children:(S,B)=>{var j=hE(),q=E(j),P=E(q),U=y(q,5);{var K=re=>{var se=lE(),ae=ie(se),ge=E(ae),Le=E(ge),Ie=y(E(Le)),Me=y(ge,2),ot=E(Me),xe=y(E(ot)),he=y(ae,2),Z=E(he),oe=E(Z),Re=y(E(oe));we(Re,1,()=>d(f),ye,(J,te,Ne)=>{var ke=aE(),Pe=E(ke),Ee=E(Pe),be=E(Ee),Ke=y(Ee,2),nt=E(Ke),io=y(Pe,2),ro=E(io);st(be,()=>d(te).enabled,so=>(d(te).enabled=so,wo(()=>d(f)))),Te("change",be,N),Te("click",nt,()=>{d(f).length>1&&(d(f).splice(Ne,1),d(f)[0].structures+"",Ut(f,d(f)[0].structures=d(f)[0].structures.trim()))}),pe(ro,()=>d(te).structures,so=>(d(te).structures=so,wo(()=>d(f)))),Te("blur",ro,N),$(J,ke)});var Ae=y(Re,2),Fe=y(Z,2),ve=E(Fe),Se=y(E(ve)),Xe=y(he,4);pe(Ie,()=>d(h),J=>V(h,J)),Te("blur",Ie,_),pe(xe,()=>d(g),J=>V(g,J)),Te("blur",xe,k),Te("click",Ae,()=>{d(f).push({enabled:!0,structures:" "}),d(f)[0].structures+"",Ut(f,d(f)[0].structures=d(f)[0].structures.trim())}),pe(Se,()=>d(m),J=>V(m,J)),Te("blur",Se,H),Te("click",Xe,()=>V(w,Array(24).fill(null).map(J=>I()))),$(re,se)},X=re=>{var se=cE(),ae=y(ie(se),2),ge=y(ae,6),Le=y(ge,6),Ie=y(Le,6),Me=y(Ie,6),ot=y(Me,7),xe=y(ot,2),he=E(xe),Z=y(xe,4);Q(()=>ce(he,d(a))),pe(ae,()=>t().Phonotactics.General.Onsets,oe=>z(W,v(t).Phonotactics.General.Onsets=oe,v(t))),pe(ge,()=>t().Phonotactics.General.Medials,oe=>z(W,v(t).Phonotactics.General.Medials=oe,v(t))),pe(Le,()=>t().Phonotactics.General.Codas,oe=>z(W,v(t).Phonotactics.General.Codas=oe,v(t))),pe(Ie,()=>t().Phonotactics.General.Vowels,oe=>z(W,v(t).Phonotactics.General.Vowels=oe,v(t))),pe(Me,()=>t().Phonotactics.General.Illegals,oe=>z(W,v(t).Phonotactics.General.Illegals=oe,v(t))),pe(ot,()=>d(c),oe=>V(c,oe)),Te("click",Z,()=>V(w,Array(24).fill(null).map(oe=>qw()))),$(re,se)};ee(U,re=>{t(),v(()=>t().UseAdvancedPhonotactics)?re(K):re(X,!1)})}var de=y(U,2);we(de,1,()=>(d(w),v(()=>Array(d(w).length/3).fill(null))),ye,(re,se,ae)=>{var ge=uE();we(ge,5,()=>(d(w),v(()=>d(w).slice(ae*3,ae*3+3))),ye,(Le,Ie)=>{var Me=dE(),ot=E(Me),xe=E(ot);Q(()=>ce(xe,d(Ie))),$(Le,Me)}),$(re,ge)}),st(P,()=>t().UseAdvancedPhonotactics,re=>z(W,v(t).UseAdvancedPhonotactics=re,v(t))),$(S,j)},$$slots:{default:!0}});var x=y(b,2);bt(x,{panel:"pronunciation",children:(S,B)=>{var j=mE(),q=E(j),P=y(E(q));{var U=ae=>{var ge=fE();Q(()=>{d(C),wo(()=>{t()})}),we(ge,5,()=>(t(),v(()=>t().Lects)),ye,(Le,Ie)=>{var Me=pE(),ot=E(Me),xe={};Q(()=>{ce(ot,d(Ie)),xe!==(xe=d(Ie))&&(Me.value=(Me.__value=d(Ie))??"")}),$(Le,Me)}),Rt(ge,()=>d(C),Le=>V(C,Le)),Te("change",ge,D),$(ae,ge)};ee(P,ae=>{t(),v(()=>t().UseLects)&&ae(U)})}var K=y(P,2);let X;var de=y(q,5),re=y(E(de)),se=y(de,2);Mn(se,()=>d(l),ae=>{var ge=vE();$(ae,ge)},(ae,ge)=>{var Le=gE();Q((Ie,Me)=>{xo(Le,1,Ie),Et(Le,Me),Ue(Le,"rows",(t(),v(()=>t().SoundChangeEngine==="tadpole.tadpole"?6:3))),un(Le,d(ge))},[()=>Nh((eo(d(ge)),v(()=>d(ge).startsWith("error")?"":"pronunciation"))),()=>(eo(d(ge)),v(()=>d(ge).startsWith("error")?'                                font-family: "Fira Code", Courier, monospace;                                text-align: left;                                font-size: 10pt;                            ':""))]),$(ae,Le)}),Q(ae=>{un(K,(t(),d(C),v(()=>t().Pronunciations[d(C)]))),X=Et(K,"",X,ae)},[()=>({"text-align":"left","font-family":(t(),v(()=>t().SoundChangeEngine==="tadpole.tadpole"?'"Fira Code", Courier, monospace':"Gentium"))})]),Te("blur",K,ae=>{p(ae),Ns(d(C))}),pe(re,()=>d(u),ae=>V(u,ae)),$(S,j)},$$slots:{default:!0}}),$(T,O)};ee(R,T=>{i(),v(()=>i().includes(4))&&T(M)})}$(o,A),et(),s()}var kE=F('<div class="container glasspane scrolled"><div class="column" style="font-family: Gentium" id="docs-tab"></div></div>'),xE=F('<div class="tab-pane"><div><!></div></div>');function _E(o,e){Qe(e,!0);const t=()=>ne(lt,"$selectedTab",i),n=()=>ne(W,"$Language",i),[i,r]=rt();Ti(!1);var s=xE();Ue(s,"spellcheck",!1);var a=E(s),l=E(a);{let c=qt(()=>t().includes(6)&&n().Layouts.tabmode==="switch");bt(l,{panel:"documentation",get auto_maximize(){return d(c)},children:(u,p)=>{var h=kE();$(u,h)},$$slots:{default:!0}})}Q(c=>Ue(a,"hidden",c),[()=>!t().includes(6)]),$(o,s),et(),r()}const EE=require,Y=EE("fs");Y.appendFile;Y.appendFileSync;Y.access;Y.accessSync;Y.chown;Y.chownSync;Y.chmod;Y.chmodSync;Y.close;Y.closeSync;Y.copyFile;Y.copyFileSync;Y.cp;Y.cpSync;Y.createReadStream;Y.createWriteStream;Y.exists;const Yi=Y.existsSync;Y.fchown;Y.fchownSync;Y.fchmod;Y.fchmodSync;Y.fdatasync;Y.fdatasyncSync;Y.fstat;Y.fstatSync;Y.fsync;Y.fsyncSync;Y.ftruncate;Y.ftruncateSync;Y.futimes;Y.futimesSync;Y.glob;Y.globSync;Y.lchown;Y.lchownSync;Y.lchmod;Y.lchmodSync;Y.link;Y.linkSync;Y.lstat;Y.lstatSync;Y.lutimes;Y.lutimesSync;const CE=Y.mkdir,SE=Y.mkdirSync;Y.mkdtemp;Y.mkdtempSync;Y.open;Y.openSync;Y.openAsBlob;Y.readdir;Y.readdirSync;Y.read;Y.readSync;Y.readv;Y.readvSync;const dl=Y.readFile,di=Y.readFileSync;Y.readlink;Y.readlinkSync;Y.realpath;Y.realpathSync;Y.rename;Y.renameSync;Y.rm;Y.rmSync;Y.rmdir;Y.rmdirSync;Y.stat;Y.statfs;Y.statSync;Y.statfsSync;Y.symlink;Y.symlinkSync;Y.truncate;Y.truncateSync;Y.unwatchFile;Y.unlink;const Ku=Y.unlinkSync;Y.utimes;Y.utimesSync;Y.watch;Y.watchFile;const Yu=Y.writeFile,Bi=Y.writeFileSync;Y.write;Y.writeSync;Y.writev;Y.writevSync;Y.Dirent;Y.Stats;Y.ReadStream;Y.WriteStream;Y.FileReadStream;Y.FileWriteStream;Y._toUnixTimestamp;Y.Dir;Y.opendir;Y.opendirSync;Y.F_OK;Y.R_OK;Y.W_OK;Y.X_OK;Y.constants;Y.promises;Y.default;const TE=require,yt=TE("path");yt.resolve;yt.normalize;yt.isAbsolute;yt.join;yt.relative;yt.toNamespacedPath;yt.dirname;yt.basename;yt.extname;yt.format;yt.parse;yt.matchesGlob;const Ze=yt.sep;yt.delimiter;yt.win32;yt.posix;yt._makeLong;const LE=yt.default||yt;function BE(o,e){Po(t=>{try{let n=JSON.parse(di(t+Ze+"alchemy.json").toString());n.allowAlchemy=!n.allowAlchemy,Bi(t+Ze+"alchemy.json",JSON.stringify(n))}catch(n){console.error(n),e.dialog.alert("Encountered an error while changing experimental setting. It has been logged to the console.")}})}async function OE(o,e,t,n,i,r,s,a){if(d(e)===""||d(t)===""){n.dialog.alert("Please enter both your User ID and Key.");return}const l=await pr(d(e),d(t));l==="no connection"?n.dialog.alert("This file has cloud sync enabled, but you are not connected to the internet."):l?(fe(Go,d(e)),fe(Ko,d(t)),Po(c=>{let u={autosave:s(),theme:a(),dbid:i(),dbkey:r()};Bi(c+Ze+"settings.json",JSON.stringify(u,null,4))}),n.dialog.alert("Successfully verified your User ID and Key.")):n.dialog.alert("One or both of the User ID and Key you entered is invalid.")}async function IE(o,e,t,n,i,r){if(e()===""||t()===""){n.dialog.alert("Please enter both your User ID and Key.");return}const s=await pr(e(),t());if(s==="no connection")n.dialog.alert("This file has cloud sync enabled, but you are not connected to the internet.");else if(s){const a=await _d();a!==!1?(fe(W,a),r().destroy(),Ti(a.Docs),n.dialog.alert("Successfully synced from database.")):n.dialog.alert("No file of this name was found in your ownership in the database.")}else n.dialog.alert("One or both of your User ID and Key is invalid.")}function AE(o,e,t,n,i){Po(r=>{let s={autosave:e(),theme:t(),dbid:n(),dbkey:i()};Bi(r+Ze+"settings.json",JSON.stringify(s,null,4))})}function PE(o,e,t,n,i){let r={autosave:e(),theme:t(),dbid:n(),dbkey:i()};Po(s=>{Bi(s+Ze+"settings.json",JSON.stringify(r,null,4))}),e()&&window.setInterval($n,6e5,!1)}function ME(o,e,t,n){e().UseLects||t.dialog.confirm({message:`Are you sure you want to disable lect features? Only the data for the lect "${e().Lects[0]}" will be kept.`,callback:i=>{if(i){let r=e().Lects[0];z(W,v(e).Lects=["General"],v(e)),Object.keys(e().Lexicon).forEach(s=>{z(W,v(e).Lexicon[s].Senses=e().Lexicon[s].Senses.filter(a=>a.lects.includes(r)),v(e)),e().Lexicon[s].Senses.forEach(a=>{a.lects=["General"]}),e().Lexicon[s].Senses||delete e().Lexicon[s],z(W,v(e).Lexicon[s].pronunciations={General:e().Lexicon[s].pronunciations[r]},v(e))}),z(W,v(e).Pronunciations={General:e().Pronunciations[r]},v(e)),fe(Nt,{General:n()[r]})}else z(W,v(e).UseLects=!0,v(e))}})}function NE(o,e,t){e.dialog.confirm({message:"Are you sure you want to delete this file from the database? This action cannot be undone. (This will NOT delete the file locally.)",callback:n=>{n&&t()}})}function $E(o,e,t){const n={window:yi(),positions:Ci(),ratios:Ps(),snapping:Ms(),tabmode:"switch",opentabs:[8],showZ:!1};fe(lt,[8]),window.resizeTo(1400,900),console.log(n),fe(Ce,n)}var RE=(o,e,t)=>{z(W,v(e).FileTheme=t(),v(e))},DE=(o,e)=>{z(W,v(e).FileTheme="default",v(e))},jE=(o,e)=>{e.emit("adjustGrid")},FE=(o,e)=>{e.emit("adjustGrid")},HE=F('<div class="row narrow"><div class="column"><input type="number"/> Rows</div> <div class="column"><input type="number"/> Columns</div></div>'),zE=async(o,e)=>await e(),UE=async(o,e)=>await e(),WE=F(' <br/> <br/> <button class="hover-highlight hover-shadow">Refresh</button>',1),qE=(o,e,t)=>{Object.keys(e().Lexicon).forEach(n=>{e().Lexicon[n].Senses.forEach((i,r)=>{i.tags.includes(d(t))&&e().Lexicon[n].Senses[r].tags.splice(i.tags.indexOf(d(t)),1)})}),V(t,"")},VE=(o,e,t,n)=>{e.dialog.prompt({message:"New tag name:",placeholder:d(t),callback(i){i&&(Object.keys(n().Lexicon).forEach(r=>{n().Lexicon[r].Senses.forEach((s,a)=>{s.tags.includes(d(t))&&(n().Lexicon[r].Senses[a].tags.splice(s.tags.indexOf(d(t)),1),n().Lexicon[r].Senses[a].tags.push(i))})}),V(t,i,!0))}})},GE=F('<button class="hover-highlight hover-shadow">Delete Tag</button> <button class="hover-highlight hover-shadow">Edit Tag</button>',1),KE=(o,e)=>e().Lects.forEach(t=>Ns(t)),YE=(o,e,t,n)=>{e.dialog.confirm({message:`Add all words in the lexicon to the lect ‘${d(t)}’?`,async callback(i){if(i){for(let r in n().Lexicon)z(W,v(n).Lexicon[r].pronunciations[d(t)]={ipa:await St(r,d(t)),irregular:!1},v(n)),n().Lexicon[r].Senses.forEach(s=>{s.lects.includes(d(t))||s.lects.push(d(t))});e.dialog.alert(`Added all senses of all words to the lect ‘${d(t)}’.`)}}})},ZE=F('<div class="narrow"><p style="display: inline-block"> </p> <button class="hover-highlight hover-shadow" style="display: inline-block">⌫</button> <button class="hover-highlight hover-shadow" style="display: inline-block">✎</button> <button class="hover-highlight hover-shadow" style="display: inline-block;">◎</button></div>'),XE=(o,e,t,n,i)=>{e.dialog.prompt({message:"Add a New Lect",placeholder:`New ${t().Name} Lect`,async callback(r){r!==!1&&(z(W,v(t).Lects=[...t().Lects,r],v(t)),z(W,v(t).Pronunciations[r]="place > holder",v(t)),z(Nt,v(n)[r]=await St(i(),r),v(n)))}})},JE=F('<!> <button class="hover-highlight hover-shadow">+ Lect</button>',1),QE=(o,e)=>{e()},eC=(o,e,t,n)=>{e.dialog.confirm({message:`Are you sure you want to delete "${d(t)}"? This will remove any etymology connections its entries may have.`,callback(i){i&&(z(W,v(n).Etymologies=Object.fromEntries(Object.entries(n().Etymologies).filter(([r,s])=>s.source!==d(t))),v(n)),delete n().Relatives[d(t)])}})},tC=F('<div class="narrow"><p style="display: inline-block;"> </p> <button class="hover-highlight hover-shadow" style="display: inline-block;">⌫</button></div>'),oC=F('<button class="hover-highlight hover-shadow">Import Related Lexicon</button> <!>',1),nC=F('<div class="row narrow"><div class="column"><div class="row"><div class="column"><input type="checkbox"/></div> <div class="column text-left"><p> </p></div></div></div> <div class="column"><div class="row"><div class="column"><input type="checkbox"/></div> <div class="column text-left"><p> </p></div></div></div></div>'),iC=F('<div class="row narrow"><div class="column">Show in Lexicon</div> <div class="column">Show in Phrasebook</div></div> <!>',1),rC=F(`<div class="container glasspane" style="overflow-y:auto"><p>Appearance Settings</p> <br/> <label>Color Theme <select name="theme-select" id="theme-select"><optgroup label="Simple Themes"><option>☾ Dark</option> <option>☀ Light</option></optgroup><optgroup label="The Saturnine Collection"><option>☾ Marine</option> <option>☾ Glade</option> <option>☾ Pomegranate</option> <option>☾ Magnolia</option> <option>☀ Juniper</option> <option>☀ Leatherbound</option> <option>☀ Wisteria</option></optgroup><optgroup label="The Maarz Collection"><option>☾ Purple Maar</option> <option>☾ Terminal</option> <option>☾ Midnight</option> <option>☾ Crabapple</option> <option>☀ Bone</option></optgroup><optgroup label="The Holiday Collection"><option>☀ Ēostre 2023</option> <option>☾ All Hallow's Eve 2023</option></optgroup></select></label> <br/> <button class="hover-highlight hover-shadow">Set Current Theme as Default for This File</button> <button class="hover-highlight hover-shadow">Clear File Theme</button> <br/> <button class="hover-highlight hover-shadow">Load Custom Theme…</button> <br/> <div class="narrow"><label>Floating Pane Position Grid Snap <br/><br/> <input type="checkbox"/> <p>Keep proportional to window size</p> <!> <br/> <div style="display:flex">x-axis: <input type="range" min="60" max="500"/> </div> <div style="display:flex">y-axis: <input type="range" min="60" max="500"/> </div></label> <br/> <label>Tab Mode <br/> <select><option>Switch</option><option>Toggle</option></select> <p class="info">The tab mode controls the behavior of clicking on the tab icons across the top of the window. In "Switch" mode,
                            tabs behave similarly to browser tabs. In "Toggle" mode, clicking on a tab shows or hides its associated panels without hiding already open panels.</p></label> <br/> <label>Show Z-Indices <input type="checkbox"/> <p class="info">This setting can be useful for those who want to finely tailor the display order of panels, or for debugging and figuring out display order issues.</p></label> <br/> <button>Reset Layout Settings</button> <p class="info">Layout settings are saved per-file.</p> <div class="row narrow"><div class="column"><button>Import Layout</button></div> <div class="column"><button>Export Layout</button></div></div></div> <br/><hr/><br/> <p>Save Settings</p> <br/> <label>Auto-Save <input type="checkbox"/></label> <br/> <div class="narrow"><label>Cloud Storage <p class="info">If you wish, your files can be saved to an online database so that you can sync your files across multiple
                            devices and the discord bot and online file viewer. To get your User ID and Key, please go to the Saturn's Sojourn discord
                            server and use the command <code>/account</code>.</p> <span> <input type="checkbox"/></span> <!> <br/> <span>User ID: <input type="text"/></span> <br/> <span>Key: <input type="text"/></span> <button>Authenticate</button> <p class="info">Your ID and Key are saved to the app's internal settings, not to your file, but turning on uploading is saved per-file.</p> <br/> <button class="hover-highlight hover-shadow">Sync From Cloud</button> <p class="info">This will overwrite the current file with the latest version of the file available in the cloud.</p> <button class="hover-highlight hover-shadow">Delete From Cloud</button> <p class="info">This will delete the current file from the cloud, and it will no longer be accessible to the discord bot or online file viewer.</p></label></div> <br/><hr/><br/> <p>Lexicon Settings</p> <br/> <label>Manage Tags<br/> <!> <p> </p> <!></label> <br/><hr/><br/> <p>Experimental</p> <br/> <label>Download Experimental Updates <input type="checkbox"/> <p class="info narrow">Turn this setting on if you would like the app to automatically update to experimental pre-release versions.
                        If you are running a pre-release version of the app, a <b>β</b> will appear in the top-right corner
                        before the version number, and you might see some additional settings below.</p></label> <br/> <label>Text Transform Engine <br/> <select><option>Tadpole</option><option>Tadpole.Lexc</option><option>Legacy</option></select> <p class="info narrow">Changing this setting changes how all of your text transform (i.e. pronunciations, sound change) rules are parsed. The default is <b>Tadpole.Lexc</b>, but files created before version 2.2.6 will default to <i>Legacy</i>. <br/><br/> It is possible that there may be some discrepancies between the results produced by <i>Tadpole.Lexc</i> and <i>Legacy</i>, but
                        for the most part, you should be able to switch between these two without issues. [As of the first 2.3.0 prerelease, <i>Tadpole.Lexc</i> does not support anonymous categories]. <br/><br/> However, <i>Tadpole</i> is <b>not</b> compatible with the legacy syntax; if you switch to this syntax, you will need to
                        rewrite any existing sound change notation (such as pronunciation rules or orthography conversion rules). Tadpole, however,
                        has many more features available which make it very useful for advanced users.</p></label> <br/><hr/><br/> <p>Advanced Settings</p> <br/> <label>Show Multi-Lect Features <input type="checkbox"/> <!></label> <br/> <label>Show Pronunciations <input type="checkbox"/></label> <br/> <label>Show Alphabetizer Settings in Lexicon <input type="checkbox"/></label> <br/> <label>Show Phrasebook Tab <input type="checkbox"/></label> <br/> <label>Show Etymology Features <input type="checkbox"/> <!></label> <br/> <label>Show Automatic Inflection Features <input type="checkbox"/></label> <br/> <label>Show Alternate Orthography Features <input type="checkbox"/> <!></label> <br/><br/><br/></div>`),sC=F('<div class="tab-pane"><!></div>');function aC(o,e){Qe(e,!0);const t=()=>ne(W,"$Language",h),n=()=>ne(Go,"$dbid",h),i=()=>ne(Ko,"$dbkey",h),r=()=>ne(pi,"$autosave",h),s=()=>ne(li,"$theme",h),a=()=>ne(Ro,"$docsEditor",h),l=()=>ne(Nt,"$pronunciations",h),c=()=>ne(lt,"$selectedTab",h),u=()=>ne(Ce,"$CurrentLayouts",h),p=()=>ne(fn,"$wordInput",h),[h,g]=rt(),{ipcRenderer:f}=require("electron"),m=require("vex-js");let L=He(""),_=He(""),k=He($t(t().FileVersion));async function N(){if(n()===""||i()==="")return null;const P=await pr(n(),i());if(P==="no connection")return null;if(P){let U=await _d();return U?U.FileVersion:null}else return m.dialog.alert("One or both of your User ID and Key is invalid."),null}async function H(){let P=!1;return await Po(U=>{P=JSON.parse(di(U+Ze+"alchemy.json").toString()).allowAlchemy}),console.log("allowAlchemy: ",P),P}let I=He(!1);H().then(P=>V(I,P,!0));async function D(){let P=null;n()!==""&&i()!==""&&t().UploadToDatabase&&t().Name!=="Unnamed Language"&&(P=await N()),V(_,P??"n/a",!0),V(k,t().FileVersion,!0)}Zo(()=>{D()}),Po(P=>{let U={autosave:!0,theme:"styles/dark.css",dbid:"",dbkey:""};Yi(P+Ze+"settings.json")?(U=JSON.parse(di(P+Ze+"settings.json","utf8")),fe(pi,U.autosave),fe(li,U.theme),fe(Go,U.dbid),V(C,U.dbid,!0),fe(Ko,U.dbkey),V(w,U.dbkey,!0)):(Yi(P+Ze+"autosave_pref.txt")?(U.autosave=di(P+Ze+"autosave_pref.txt","utf8")==="true",fe(pi,di(P+Ze+"autosave_pref.txt","utf8")==="true"),Ku(P+Ze+"autosave_pref.txt")):U.autosave=!0,Bi(P+Ze+"settings.json","styles/dark.css"),Yi(P+Ze+"theme.txt")?(U.theme=di(P+Ze+"theme.txt","utf8").toString(),fe(li,U.theme),Ku(P+Ze+"theme.txt")):U.theme="styles/dark.css",fe(Go,""),fe(Ko,""),Bi(P+Ze+"settings.json",JSON.stringify(U,null,4)))});let C=He(""),w=He(""),A=qt(()=>!t().UploadToDatabase);async function R(){let[P]=await window.showOpenFilePicker();await P.requestPermission({mode:"read"});let U=await P.getFile();if(!U.name.includes(".css")){m.dialog.alert("The selected file was not a .css file.");return}let K=await U.text(),X;await Po(de=>{let re=de+Ze+"user_themes"+Ze;Yi(re)||SE(re),X=de+Ze+"user_themes"+Ze+U.name,Yu(X,K,"utf8",se=>{if(se)throw se;fe(li,X)}),Yu(de+Ze+"theme.txt",X,se=>{if(se)throw se})})}function M(P,U,K){if(U===""){m.dialog.alert("The lect name cannot be blank.");return}if(U===P){m.dialog.alert("The lect name is unchanged.");return}if(t().Lects.includes(U)){m.dialog.alert("A lect with that name already exists.");return}z(W,v(t).Lects[K]=U,v(t)),z(W,v(t).Lects=[...t().Lects],v(t)),Object.keys(t().Lexicon).forEach(X=>{t().Lexicon[X].pronunciations.hasOwnProperty(P)&&(z(W,v(t).Lexicon[X].pronunciations[U]=t().Lexicon[X].pronunciations[P],v(t)),delete t().Lexicon[X].pronunciations[P]),t().Lexicon[X].Senses.forEach(de=>{de.lects.includes(P)&&(de.lects.splice(de.lects.indexOf(P),1),de.lects.push(U))})}),Object.keys(t().Phrasebook).forEach(X=>{Object.keys(t().Phrasebook[X]).forEach((de,re)=>{const se=t().Phrasebook[X][de];se.pronunciations.hasOwnProperty(P)&&(se.pronunciations[U]=se.pronunciations[P],delete se.pronunciations[P]),se.lects.includes(P)&&(t().Phrasebook[X][de].lects.splice(se.lects.indexOf(P),1),t().Phrasebook[X][de].lects.push(U))})}),t().Orthographies.forEach(X=>{X.lect===P&&(X.lect=U)}),z(W,v(t).Pronunciations[U]=t().Pronunciations[P],v(t)),l().hasOwnProperty(P)&&(z(Nt,v(l)[U]=l()[P],v(l)),delete l()[P]),delete t().Pronunciations[P]}function T(P,U){t().Lects.splice(U,1),z(W,v(t).Lects=[...t().Lects],v(t)),delete t().Pronunciations[P],delete l()[P],Object.keys(t().Lexicon).forEach(K=>{t().Lexicon[K].pronunciations[P]&&delete t().Lexicon[K].pronunciations[P],t().Lexicon[K].Senses.forEach((X,de)=>{X.lects.includes(P)&&X.lects.splice(X.lects.indexOf(P),1),X.lects||t().Lexicon[K].Senses.splice(de,1)})}),Object.keys(t().Phrasebook).forEach(K=>{Object.keys(t().Phrasebook[K]).forEach((X,de)=>{const re=t().Phrasebook[K][X];if(re.pronunciations[P]&&delete re.pronunciations[P],re.lects.includes(P)&&t().Phrasebook[K][X].lects.splice(re.lects.indexOf(P),1),!re.lects){const{[X]:se,...ae}=t().Phrasebook[K];z(W,v(t).Phrasebook[K]=ae,v(t))}})}),t().Orthographies.forEach(K=>{K.lect===P&&(K.lect=t().Lects[0])}),z(W,v(t).Lexicon={...t().Lexicon},v(t))}function O(){let P;const U=K=>{Li({title:"Import Related Lexicon",defaultPath:`${K}${Ze}Lexicons${Ze}`,properties:["openFile"]},X=>{X&&dl(X[0],"utf8",(de,re)=>{de&&(console.log(de),m.dialog.alert("There was an issue loading your file. Please contact the developer."));try{if(P=JSON.parse(re),!String(P.Version).match(/^2\.[0-9]*\.[0-9]*$/)){m.dialog.alert(`
                                    This file was saved with an old version of the app (~${P.Version})
                                    and is not compatible with the current version of Lexicanter. Please contact
                                    the developer; the file may be recoverable.
                                `);return}const se=ae=>{for(const ge in P.Lexicon)!t().Lexicon[ge]&&(!t().Etymologies[ge]||ae)&&z(W,v(t).Etymologies[ge]={descendants:[],source:P.Name},v(t))};P.Name in t().Relatives?m.dialog.confirm({message:`A relative lexicon with the name "${P.Name}" already exists. Would you like to overwrite it?`,callback:ae=>{ae&&(z(W,v(t).Relatives[P.Name]=P.Lexicon,v(t)),se(!0))}}):(z(W,v(t).Relatives={...t().Relatives,[P.Name]:P.Lexicon},v(t)),se(!1))}catch{m.dialog.alert("There was an issue loading the file. Please contact the developer.");return}})})};Po(K=>{Yi(`${K}${Ze}Lexicons${Ze}`)?U(K):CE(`${K}${Ze}Lexicons${Ze}`,()=>{U(K)})})}async function b(){if(n()===""||i()===""){m.dialog.alert("Please enter both your User ID and Key.");return}const P=await pr(n(),i());P==="no connection"?m.dialog.alert("This file has cloud sync enabled, but you are not connected to the internet."):P&&((await ux()).error?m.dialog.alert("The file does not exist in the database or is not registered to you."):m.dialog.alert("The file has been deleted from the database."))}async function x(){await Li({properties:["openFile"]},P=>{P&&dl(P[0],(U,K)=>{if(U){console.error(U),m.dialog.alert("An error occurred while trying to read the file.");return}try{JSON.parse(K.toString())}catch(de){console.error(de),m.dialog.alert("An error occurred while trying to parse the file.");return}const X=JSON.parse(K.toString());if(!X.positions||!X.snapping||!X.window){m.dialog.alert("There was a problem with the data in that file.");return}window.resizeTo(X.window.width,X.window.height),fe(Ce,X)})})}async function S(){const P=await window.showSaveFilePicker({suggestedName:"lexc-layouts.json"});await P.requestPermission({mode:"readwrite"});const U=await P.createWritable();await U.write(JSON.stringify(u())),U.close()}var B=sC(),j=E(B);{var q=P=>{bt(P,{panel:"settings",children:(U,K)=>{var X=rC(),de=y(E(X),4),re=y(E(de));re.__change=[AE,r,s,n,i];var se=E(re),ae=E(se);ae.value=ae.__value="styles/dark.css";var ge=y(ae,2);ge.value=ge.__value="styles/light.css";var Le=y(se),Ie=E(Le);Ie.value=Ie.__value="styles/marine.css";var Me=y(Ie,2);Me.value=Me.__value="styles/glade.css";var ot=y(Me,2);ot.value=ot.__value="styles/pomegranate.css";var xe=y(ot,2);xe.value=xe.__value="styles/magnolia.css";var he=y(xe,2);he.value=he.__value="styles/juniper.css";var Z=y(he,2);Z.value=Z.__value="styles/leatherbound.css";var oe=y(Z,2);oe.value=oe.__value="styles/wisteria.css";var Re=y(Le),Ae=E(Re);Ae.value=Ae.__value="styles/purple_maar.css";var Fe=y(Ae,2);Fe.value=Fe.__value="styles/terminal_green.css";var ve=y(Fe,2);ve.value=ve.__value="styles/midnight.css";var Se=y(ve,2);Se.value=Se.__value="styles/crabapple.css";var Xe=y(Se,2);Xe.value=Xe.__value="styles/bone.css";var J=y(Re),te=E(J);te.value=te.__value="styles/eostre2023.css";var Ne=y(te,2);Ne.value=Ne.__value="styles/hallowseve2023.css";var ke=y(de,4);ke.__click=[RE,t,s];var Pe=y(ke,2);Pe.__click=[DE,t];var Ee=y(Pe,4);Ee.__click=R;var be=y(Ee,4),Ke=E(be),nt=y(E(Ke),4),io=y(nt,4);{var ro=le=>{var ft=HE(),wt=E(ft),Lt=E(wt);Lt.__change=[jE,f];var Ht=y(wt,2),zt=E(Ht);zt.__change=[FE,f],Q(()=>{Lt.disabled=!u().snapping.proportional,zt.disabled=!u().snapping.proportional}),pe(Lt,()=>u().snapping.rows,Zt=>z(Ce,v(u).snapping.rows=Zt,v(u))),pe(zt,()=>u().snapping.columns,Zt=>z(Ce,v(u).snapping.columns=Zt,v(u))),$(le,ft)};ee(io,le=>{u().snapping.proportional&&le(ro)})}var so=y(io,4),fo=y(E(so)),Ys=y(fo),Er=y(so,2),Ni=y(E(Er)),Zs=y(Ni),Cr=y(Ke,4),Sr=y(E(Cr),3),$i=E(Sr);$i.value=$i.__value="switch";var Ri=y($i);Ri.value=Ri.__value="toggle";var Tr=y(Cr,4),Lr=y(E(Tr)),Di=y(Tr,4);Di.__click=[$E,c,u];var ji=y(Di,4),Zn=E(ji),Br=E(Zn);Br.__click=[zE,x];var Xs=y(Zn,2),Be=E(Xs);Be.__click=[UE,S];var _o=y(be,10),Fo=y(E(_o));Fo.__change=[PE,r,s,n,i];var Xn=y(_o,4),Fi=E(Xn),Ed=y(E(Fi),3),Cd=E(Ed),Uf=y(Cd),Sd=y(Ed,2);{var Wf=le=>{var ft=WE(),wt=ie(ft),Lt=y(wt,2),Ht=y(Lt,3);Ht.__click=D,Q(()=>{ce(wt,`Local File Version: ${d(k)??""} `),ce(Lt,` Online File Version: ${d(_)??""} `)}),$(le,ft)};ee(Sd,le=>{n()!==""&&i()!==""&&t().UploadToDatabase&&le(Wf)})}var Td=y(Sd,4),Js=y(E(Td));let Ld;var Bd=y(Td,4),Qs=y(E(Bd));let Od;var Id=y(Bd,2);Id.__click=[OE,C,w,m,n,i,r,s];var Ad=y(Id,6);Ad.__click=[IE,n,i,m,t,a];var qf=y(Ad,4);qf.__click=[NE,m,b];var Pd=y(Xn,10),Md=y(E(Pd),3);Ff(Md,{$$events:{select:le=>V(L,le.detail?le.detail.trim():"",!0)}});var Nd=y(Md,2),Vf=E(Nd),Gf=y(Nd,2);{var Kf=le=>{var ft=GE(),wt=ie(ft);wt.__click=[qE,t,L];var Lt=y(wt,2);Lt.__click=[VE,m,L,t],$(le,ft)};ee(Gf,le=>{d(L)&&le(Kf)})}var $d=y(Pd,10),Rd=y(E($d));Rd.__change=[BE,m];var Dd=y($d,4),ea=y(E(Dd),3);ea.__change=[KE,t];var ta=E(ea);ta.value=ta.__value="tadpole.tadpole";var oa=y(ta);oa.value=oa.__value="tadpole.lexc";var jd=y(oa);jd.value=jd.__value="legacy";var Fd=y(Dd,10),na=y(E(Fd));na.__change=[ME,t,m,l];var Yf=y(na,2);{var Zf=le=>{var ft=JE(),wt=ie(ft);we(wt,1,()=>t().Lects,ye,(Ht,zt,Zt)=>{var tn=ZE(),_n=E(tn);Ue(_n,"id",`${Zt}`);var En=E(_n),Or=y(_n,2);Or.__click=()=>{if(t().Lects.length===1){m.dialog.alert("You cannot delete the last lect.");return}m.dialog.confirm({message:`Are you sure you want to delete the lect "${d(zt)}"? This action cannot be undone.`,callback(Jn){Jn&&T(d(zt),Zt)}})};var Ir=y(Or,2);Ir.__click=()=>{m.dialog.prompt({message:"Edit Lect Name",placeholder:`${d(zt)}`,callback(Jn){Jn!==!1&&M(d(zt),Jn,Zt)}})};var ia=y(Ir,2);ia.__click=[YE,m,zt,t],Q(()=>ce(En,d(zt))),$(Ht,tn)});var Lt=y(wt,2);Lt.__click=[XE,m,t,l,p],$(le,ft)};ee(Yf,le=>{t().UseLects&&le(Zf)})}var Hd=y(Fd,4),Xf=y(E(Hd)),zd=y(Hd,4),Jf=y(E(zd)),Ud=y(zd,4),Qf=y(E(Ud)),Wd=y(Ud,4),qd=y(E(Wd)),eg=y(qd,2);{var tg=le=>{var ft=oC(),wt=ie(ft);wt.__click=[QE,O];var Lt=y(wt,2);we(Lt,1,()=>Object.keys(t().Relatives),ye,(Ht,zt)=>{var Zt=tC(),tn=E(Zt),_n=E(tn),En=y(tn,2);En.__click=[eC,m,zt,t],Q(()=>ce(_n,d(zt))),$(Ht,Zt)}),$(le,ft)};ee(eg,le=>{t().ShowEtymology&&le(tg)})}var Vd=y(Wd,4),og=y(E(Vd)),ng=y(Vd,4),Gd=y(E(ng)),ig=y(Gd,2);{var rg=le=>{var ft=iC(),wt=y(ie(ft),2);we(wt,1,()=>t().Orthographies,ye,(Lt,Ht,zt)=>{var Zt=nC(),tn=E(Zt),_n=E(tn),En=E(_n);Et(En,"",{},{align:"right"});var Or=E(En),Ir=y(En,2),ia=E(Ir),Jn=E(ia),sg=y(tn,2),ag=E(sg),ra=E(ag);Et(ra,"",{},{align:"right"});var lg=E(ra),cg=y(ra,2),dg=E(cg),ug=E(dg);Q(()=>{ce(Jn,d(Ht).name),ce(ug,d(Ht).name)}),st(Or,()=>d(Ht).display,sa=>(d(Ht).display=sa,Wt(h,"$Language"))),st(lg,()=>d(Ht).displayInPhrasebook,sa=>(d(Ht).displayInPhrasebook=sa,Wt(h,"$Language"))),$(Lt,Zt)}),$(le,ft)};ee(ig,le=>{t().ShowOrthography&&le(rg)})}Q((le,ft,wt,Lt)=>{fo.disabled=u().snapping.proportional,ce(Ys,` ${le??""}`),Ni.disabled=u().snapping.proportional,ce(Zs,` ${ft??""}`),ce(Cd,`Uploading is ${t().UploadToDatabase?"On":"Off"} for this file. `),Js.disabled=d(A),Ld=xo(Js,1,"",null,Ld,wt),Qs.disabled=d(A),Od=xo(Qs,1,"",null,Od,Lt),ce(Vf,`Selected: ${d(L)??""}`)},[()=>Math.round(u().snapping.x),()=>Math.round(u().snapping.y),()=>({pronunciation:d(A)}),()=>({pronunciation:d(A)})]),Rt(re,s,le=>fe(li,le)),st(nt,()=>u().snapping.proportional,le=>z(Ce,v(u).snapping.proportional=le,v(u))),pe(fo,()=>u().snapping.x,le=>z(Ce,v(u).snapping.x=le,v(u))),pe(Ni,()=>u().snapping.y,le=>z(Ce,v(u).snapping.y=le,v(u))),Rt(Sr,()=>t().Layouts.tabmode,le=>z(W,v(t).Layouts.tabmode=le,v(t))),st(Lr,()=>t().Layouts.showZ,le=>z(W,v(t).Layouts.showZ=le,v(t))),st(Fo,r,le=>fe(pi,le)),st(Uf,()=>t().UploadToDatabase,le=>z(W,v(t).UploadToDatabase=le,v(t))),pe(Js,()=>d(C),le=>V(C,le)),pe(Qs,()=>d(w),le=>V(w,le)),st(Rd,()=>d(I),le=>V(I,le)),Rt(ea,()=>t().SoundChangeEngine,le=>z(W,v(t).SoundChangeEngine=le,v(t))),st(na,()=>t().UseLects,le=>z(W,v(t).UseLects=le,v(t))),st(Xf,()=>t().ShowPronunciation,le=>z(W,v(t).ShowPronunciation=le,v(t))),st(Jf,()=>t().ShowAlphabet,le=>z(W,v(t).ShowAlphabet=le,v(t))),st(Qf,()=>t().ShowPhrasebook,le=>z(W,v(t).ShowPhrasebook=le,v(t))),st(qd,()=>t().ShowEtymology,le=>z(W,v(t).ShowEtymology=le,v(t))),st(og,()=>t().ShowInflection,le=>z(W,v(t).ShowInflection=le,v(t))),st(Gd,()=>t().ShowOrthography,le=>z(W,v(t).ShowOrthography=le,v(t))),$(U,X)},$$slots:{default:!0}})};ee(j,P=>{c().includes(8)&&P(q)})}$(o,B),et(),g()}Yt(["change","click"]);var lC=F("• <!> <br/>",1),cC=F('<p><u> </u></p> <p style="width: 70%; margin: auto; text-align: left; line-height: 1.6"></p> <br/>',1),dC=F(`<div class="container glasspane scrolled"><p class="info">Interested in testing the experimental versions, talking about languages, or worldbuilding? <br/> Join <a rel="noreferrer" target="_blank" href="https://discord.gg/uDk2XDhh8K">Saturn's Sojourn</a>,
                    the home of Lexicanter on <a rel="noreferrer" target="_blank" href="https://discord.gg/uDk2XDhh8K">Discord</a>!</p> <br/> <p class="info">Support the continued developement of the app as a <a rel="noreferrer" target="_blank" href="https://patreon.com/saturnine_softworks">patron</a>,</p> <p class="info">or by buying me a <a rel="noreferrer" target="_blank" href="https://ko-fi.com/saturnine_softworks">coffee</a>!</p> <br/><br/> Below is a list of all changes made to the app since version 1.8, which is when the changelog was first added.<br/> If you're looking for more information about how to use the app, check the Help tab or visit the <a rel="noreferrer" target="_blank" href="https://github.com/Saturnine-Softworks/Lexicanter/wiki">Wiki</a>.<br/> There is also
                an overview <a rel="noreferrer" target="_blank" href="https://www.youtube.com/watch?v=6_AwCC4XlvU&amp;t=151s">tutorial video</a> for release 2.0. <br/> If you're still having trouble, or need to contact the developer, visit us in the <a rel="noreferrer" target="_blank" href="https://discord.gg/uDk2XDhh8K">Discord server</a>. <br/><hr/><br/> <!> <br/><br/><br/><br/></div>`),uC=F('<div class="tab-pane"><!></div>');function hC(o,e){Qe(e,!0);const t=()=>ne(lt,"$selectedTab",n),[n,i]=rt(),[r,s,a,l]=[0,1,2,3],c={"2.3.0-1":{type:l,notes:["Improved proportional window sizing: rapidly scaling the window should no longer break layouts, even complex ones."]},"2.3.0-0":{type:l,notes:['Experimental implementation of the <a href="https://codeberg.org/zhuriel/tadpole/">Tadpole engine</a>.','Updated <a href="https://codeberg.org/zhuriel/graphemy/releases/tag/v0.6.0">Graphemy typesetter to v0.6.0</a>.',"Added ability to change the display order of panels (z-index).","Added tabs and semicolons as delimiter options for CSV/TSV import.","Fixed a minor display issue where the end of pages in the Help tab could not be read."]},"2.2.5":{type:a,notes:["Fixed another issue with the Inflections tab which caused issues with some UI elements perpetually losing focus and other elements overzealously updating themselves.","Fixed a minor issue with the automatic pronunciations parser which would occasionally cause it to freeze and stop working without giving any indication to the user."]},"2.2.4":{type:a,notes:["Fixed the Inflections tab (thank you to @EuphLover for looking into this issue!)","Updated the Graphemy typesetter to release 0.5.0."]},"2.2.3":{type:a,notes:["Fixed a display error with the lexicon introduced by a fix for another display error in the previous patch. Listen,                 UI is hard and I do this in my spare time."]},"2.2.2":{type:a,notes:["Added a toggle to Settings for whether or not to automatically download experimental updates.","Fixed a CSS issue with displaying Graphemy-rendered characters.","Fixed a couple of ways that a soft crash could be achieved via the Graphemy typesetter settings being set to null values.","Fixed a display bug causing some users to be unable to view the number of entries in their lexicons."]},"2.2.1":{type:a,notes:["Windows and Linux users can now actually use the Graphemy features added in the previous update. Before, a startup error prevented this                 without preventing the app itself from running. This has been resolved. "]},"2.2.0":{type:s,notes:["Integrated the typesetter from <a href='https://codeberg.org/zhuriel/graphemy'>Graphemy</a>, an app by Zhuriel for when fonts aren’t enough.                 You can now set up and display new orthographies using your Graphemy files.","You can now choose which orthographies display in the lexicon and phrasebook separately.","The Phrasebook tab can now be turned off in settings.","The Alphabetization settings can be completely hidden from the Lexicon panels in settings.","The UI has been largely overhauled. By default, you will see all the same familiar panels in the same tabs, but you may notice that they have                 their own window bars and can move them around, resize them, and minimize and maximize them now.",'There is a new mode for displaying the tabs: the defeault is now "Switch" mode, and you can change this to "Toggle" mode. This allows you to open                any panels you want all at once.',"You can export/import layouts as JSON files. Your layout settings are now saved per-file.","Fixed an issue where adding a new lect to all words via the button in the multi-lect settings would not properly update pronunciations.","Fixed an issue where files set to sync to the cloud would repeatedly falsely alert the user that their ID and Key are invalid when offline.","Made some adjustments to the Magnolia theme which I find more aesthetically pleasing. There have also been some small adjustments to the app-wide styling.",'Speed and stability improvements. (The majority of the app is now running Svelte 5 in "Runes" mode.)']},"2.1.22":{type:a,notes:["Fixed a bug introduced in the last patch which made it impossible to add entries to the lexicon with more than one sense.","Fixed a bug introduced in the last patch specific to macOS which caused the app to use the wrong dock icon."]},"2.1.21":{type:a,notes:["Security and accessibility improvements.","Back-end improvements for development cycle: Upgraded from Svelte 4 to Svelte 5, and migrated from Rollup to Vite","New markdown export option!","Updated/fixed plain text export; removed plain text import (outdated, impractical).","Updated/fixed CSV import/export.","Removed tooltips since they caused several issues and were generally not useful to users."]},"2.1.20":{type:a,notes:["Improved formatting options on the documentation tab, including the long-requested feature of paragraph alignment.                 Also, ordered and unordered lists, collapsible sections, callouts, citations, and annotations.","You can now delete files from the cloud. The app will prompt you to confirm this action, and it will not delete the file locally."]},"2.1.19":{type:a,notes:["Fixed a bug with the lexicon description search which caused the exact match <code>!</code> and begins-word <code>^</code> functions not to work.","Fixed a bug causing the alphabetizer to soft crash the app if you used parentheses in your alphabet. Other RegEx-reserved characters will work now as well."]},"2.1.18":{type:a,notes:["Fixed problems with the search bars in the Phrasebook tab which made them virtually useless.","Fixed another case where documentations would not be initialized when loading a database synced file on multiple devices.","Changes to how the changelog in managed under the hood (yes, really)."]},"2.1.17":{type:a,notes:["Fixed a bug with downloading lexicons on multiple devices and the documentation being left out."]},"2.1.16":{type:a,notes:["Fixed a bug that occurred with lexicon searching in some files, related to case-sensitivity."]},"2.1.15":{type:a,notes:["Fixed a reported bug which caused the search fields in the lexicon and phrasebook to find no matches in certain cases.","Changed the way that the app recognizes when changes have been made to the version of your file in the database.","A few quality of life features related to the previous change, including the ability to see the local and online file version numbers in Settings."]},"2.1.14":{type:a,notes:["Fixed a bug with the orthography pattern replacement features which caused it to only replace the first instance of a pattern in each word.","Added the ability to use ^ or # as word-end characters in the orthography pattern replacement fields.","Fixed a reported bug with the Illegals field of the Advanced Phonotactics word generator which caused that field not to save its contents.","Fixed a bug with database syncing which caused the setting to not save for files.","Files should now automatically detect when you have changes in the database on loading, and will prompt you to download the changes."]},"2.1.13":{type:a,notes:["Added an Illegals field to the Advanced Phonotactics word generator options.","Added the Structures inputs to the Advanced Phonotactics word generator options and the corresponding syllable category syntax for this feature.","(Finally) wrote the documentation on the word generator, which can be found in the Help tab."]},"2.1.12":{type:a,notes:["Added a new default text to the Pronunciations field in the Phonology tab to better guide beginners.","Added an indicator on entries in the lexicon tab to show if their pronunciation was manually edited and thus not automatically updated by pronunciation rules."]},"2.1.11":{type:a,notes:["Added secondary location file saving, for those of you who want your lexicon files to save to another location on your computer every time you save.","Added database syncing! Get your account credentials from the Lexicanter Discord bot, and then you can sync your files to the bot and between devices.","A minor change to how app settings are saved. The old app settings files are now deprecated and will eventually no longer be supported."]},"2.1.10":{type:a,notes:["New tooltips have been added throughout the app.","New All Hallow's Eve 2023 theme in the Holiday collection!"]},"2.1.9":{type:a,notes:["Hot fix for a bug which caused data saved by the advanced word generator not to be loaded open re-opening a file.","A new feature will be coming in 2.2 which requires a change to the way lexicon entries are formatted internally, which this update prepares for."]},"2.1":{type:s,notes:["Introduced a plain text import feature for convenient clonging on the move.","Added a reference window for loading secondary files in read-only mode.","Support for custom fonts via new Orthographies feature.","Under-the-hood file structure adjustments and read logic improvements.","New phonological evolution tools!","An alternative type of word generator for more advanced syllable structures.","The option to save theme preferences on a file-by-file basis.","New themes: Magnolia by Saturnine, Crabapple by Maarz, and Eostre 2023 (a holiday theme released for beta users earlier this year).","A number of bugs removed; probably some bugs added. Please report them if you find them!"]},"2.0.18":{type:a,notes:["By request, added a new dropdown to Tag inputs which allows you to select from pre-existing tags in your lexicon.","By request, added a new Help tab. It hosts the same information as the wiki, but is accessible offline.","The Settings, Changelog, and Help tabs, as well as the window control buttons, now use Material Icons."]},"2.0.17":{type:a,notes:["Fixed a reported bug with the inflections generation.","Fixed an issue with tag searching.","The font weight has been changed to an appropriate Book weight to improve readability on some systems and to many eyes."]},"2.0.16":{type:a,notes:["Fixed a small bug with the new sound change engine."]},"2.0.15":{type:a,notes:["Fixed a reported bug with HTML export.","Related to the above fix, technical limitations now prevent your theme from being exported with your HTML. Solutions are being investigated."]},"2.0.14":{type:a,notes:["Fixed CSV export.","Fixed a reported bug with HTML export.","Fixed some reported and unreported issues with the sound change engine.","There is now a text input designated for specifying categories for sound changes in an inflection group, to make everyone's life easier.","Minor optimizations and performance improvements."]},"2.0.13":{type:a,notes:["Linux support!"]},"2.0.12":{type:a,notes:["Fixed a reported bug which caused HTML export to fail. Expect expanded HTML export options in the future.","Minor optimizations."]},"2.0.11":{type:a,notes:["Fixed a reported bug which caused a semi-rare soft-crash in certain cases when dealing with multiple lects. Again."]},"2.0.10":{type:a,notes:["Fixed a reported bug which caused a semi-rare soft-crash in certain cases when dealing with multiple lects.","Fixed a reported bug which caused CSV import to fail, and improved CSV import options."]},"2.0.9":{type:a,notes:["You can now write multiple rules separated by a semicolon, which allows for multiple rules per table cell in the inflection tables.","Fixed a reported bug which caused a soft crash when attempting to edit the last word in the lexicon if it had an inflections dropdown open."]},"2.0":{type:r,notes:["There is now a new sound change engine under the hood. Your old rules may no longer work; for assistance, you can contact the developer.","Lexicon entries can now be separated into multiple Senses, each of which can have their own tags.","There are new features accessible via new Advanced Settings. These include:","New Lect features allow you to denote the ways your language may vary, particularly in semantics and pronunciation.","New Inflection features, which include a new tab, which allows you to create inflectional paradigms for your language.","New Etymology features, which include a new tab, allows you to create etymologies trees and view them in the lexicon.","Check out the new wiki page or tutorial video for more in-depth information!","New app icons by Lyiusa!","New themes: Juniper by Saturnine, and Midnight and Bone by Maarz!"]},"1.11.4":{type:a,notes:["Fixed a reported bug causing markdown not to work in variant descriptions of phrases."]},"1.11.3":{type:a,notes:["Fixed a reported bug causing the alphabetizer pre-check to send false alerts when certain combining diacritics on certain characters were in the alphabet in certain orders."]},"1.11.2":{type:a,notes:["The app now saves backup versions of your files in case things go wrong.","Fixed a reported bug that caused the app to sometimes exit too quickly and not save when autosave was enabled."]},"1.11.1":{type:a,notes:["Fixed a reported bug causing the Ignore Diacritics setting to be ignored during alphabet checks when adding words to the lexicon."]},"1.11":{type:s,notes:["When you attempt to add a word to the lexicon, there is now an alert if the word contains characters (or polygraphs) not present in your alphabet.","Fixed a reported bug causing external links to not display correctly in the Lexicon tab specifically.","Fixed a reported bug preventing the app from warning you that it will not save if there is no file name given.","Fixed a minor bug with the Terminal theme when exported for HTML."]},"1.10":{type:s,notes:["Added three new themes: Pomegranate, Wisteria, and Terminal.","The word entry panel in the Lexicon tab is now collapsible.","The Phrasebook now has active overwrite protection to prevent you from deleting your work by mistake.","You can now search for an exact whole-word match in definitions and tags fields by using ! as a prefix.","For HTML exports, the appearance on mobile devices has been improved.","Minor bug fixes for opening new windows from the File tab.","Lots of under-the-hood changes for the app's appearance in preparation for future features."]},"1.9.5":{type:a,notes:["Fixed a bug causing app-quit to be impossible sometimes.","Fixed some minor bugs with the styles.","Fixed a bug causing monospace toggle in the docs tab to be undoable.","Fixed a bug causing external hyperlinks not to use the preferred browser, and in some cases not open at all."]},"1.9.4":{type:a,notes:["You can now hyperlink to entries in the lexicon. The link format is lex::word.","The documentation tab would previously not adjust to the width of the window. That has been fixed."]},"1.9":{type:s,notes:["Overhauled the Documentation tab, which now uses integrated EditorJS technology. Markdown is no longer supported in this tab, in favor of the new WYSIWYG style with a toolbar visible when you highlight text.","Note: The first time you load a file from an older version, there may be some formatting quirks. Most of these should sort themselves out after saving in the new version and re-loading. Please contact the developer if you run into persistent issues.","Fixed a bug with the Open New Window button which caused it to fail to open new windows.","The button to edit phrasebook entries has been changed to right-click instead of left-click to make it more difficult to accidentally overwrite work in progress, and to allow for highlighting text.","An HTML Docs-Only export option has been added."]},"1.8.14":{type:a,notes:["Fixed a few minor bugs with markdown parsing.","Added monospace markdown with ``this`` syntax.","Fixed a reported bug which affected the orthography testing area."]},"1.8":{type:s,notes:["File storage has been migrated to make auto-save possible.","Categories can now be defined and used in your Pronunciations rules. See the docs page for more info.","Five new color themes: Light, Marine, Glade, Leatherbound, and Purple Maar (contributed by Maarz).","You can now load in your own custom CSS color themes.","Definitions, descriptions, and documentation sections now support simple markdown.","There's a new space in the Phonology tab to test your pronunciation rules.","Tag searches no longer require an exact match.","Several minor bug fixes, including one reported about tables being editable in the HTML export."]}};var u=uC(),p=E(u);{var h=g=>{bt(g,{panel:"changelog",children:(f,m)=>{var L=dC(),_=y(E(L),27);we(_,17,()=>Object.keys(c),ye,(k,N)=>{var H=cC(),I=ie(H),D=E(I),C=E(D),w=y(I,2);we(w,21,()=>c[d(N)].notes,ye,(A,R)=>{var M=lC(),T=y(ie(M));No(T,()=>d(R)),$(A,M)}),Q(()=>ce(C,`${["Overhaul","Update","Patch","Experiment"][c[d(N)].type]??""} ${d(N)??""}`)),$(k,H)}),$(f,L)},$$slots:{default:!0}})};ee(p,g=>{t().includes(9)&&g(h)})}$(o,u),et(),i()}var pC=F('<div class="row" style="width:66%"><div class="column"><label>Tags <div><textarea rows="1"></textarea></div></label> <label>RegEx Filter <div><p style="display: inline">/</p> <input style="display: inline" type="text"/> <p style="display: inline">/</p></div></label></div> <div class="column"><label>Rule Categories <div><textarea class="text-left" rows="3"></textarea></div></label></div></div> <div class="codex-editor" style="font-family: Gentium"></div> <div class="narrow"><button class="hover-highlight hover-shadow" style="display: inline">Delete</button></div> <br/><br/>',1),fC=(o,e,t,n)=>{e().then(()=>{z(W,v(t).Inflections=[...t().Inflections,{tags:[],filter:".+",categories:"",tables:{blocks:[{type:"header",data:{text:"New Inflections Group",level:1}},{type:"table",data:{withHeadings:!1,content:[["","",""],["","",""],["","",""]]}},{type:"paragraph",data:{text:"Table cells containing sound change rules will be used to generate inflected forms.                                                     Apply them to your words in your lexicon by providing the lexicon tags they apply to and an                                                     optional Regular Expression filter."}}]}}],v(t)),n()})},gC=F('<div class="row" style="height:97%"><div class="container column scrolled"><!> <button style="hover-highlight hover-shadow">Add Inflections Group</button></div></div>'),vC=F('<div class="tab-pane"><div><!></div></div>');function mC(o,e){Qe(e,!0);const t=()=>ne(W,"$Language",r),n=()=>ne(ds,"$fileLoadIncrement",r),i=()=>ne(lt,"$selectedTab",r),[r,s]=rt(),a=require("vex-js");function l(_,k){const N=_.currentTarget;z(W,v(t).Inflections[k].tags=N.value.split(/\s+/g),v(t))}function c(_){for(let k=g.length;k>0;k--)g[k-1].destroy(),g.pop();t().Inflections.filter((k,N)=>N!==_).forEach((k,N)=>{const H={holder:`inflection ${N}`,data:k.tables,tools:{underline:tl,table:{class:el,inlineToolbar:!0,config:{rows:3,cols:3,withHeadings:!0}},header:{class:Qa,inlineToolbar:!0}},minHeight:30,logLevel:"ERROR"},I=new cs(H);g.push(I)})}let u=0;Zo(()=>{n()!==u&&(u=n(),c(-1))});function p(){const _={holder:`inflection ${t().Inflections.length-1}`,data:{blocks:[{type:"header",data:{text:"New Inflections Group",level:1}},{type:"table",data:{withHeadings:!1,content:[["","",""],["","",""],["","",""]]}},{type:"paragraph",data:{text:"Table cells containing sound change rules will be used to generate inflected forms.                             Apply them to your words in your lexicon by providing the lexicon tags they apply to and an                             optional Regular Expression filter."}}]},tools:{underline:tl,table:{class:el,inlineToolbar:!0,config:{rows:3,cols:3,withHeadings:!0}},header:{class:Qa,inlineToolbar:!0}},minHeight:30,logLevel:"ERROR"},k=new cs(_);g.push(k)}async function h(){for(let _=0;_<g.length;_++)g[_].save().then(k=>{z(W,v(t).Inflections[_].tables=k,v(t))}).catch(k=>{console.error(`Error while saving editor.
index: ${_}
object at i: ${g[_]}
editors.length: ${g.length}
message:
 ${String(k)}`)}),await g[_].isReady;return"done"}let g=[];var f=vC();Ue(f,"spellcheck",!1);var m=E(f),L=E(m);{let _=qt(()=>i().includes(3)&&t().Layouts.tabmode==="switch");bt(L,{panel:"inflections",get auto_maximize(){return d(_)},children:(k,N)=>{var H=gC(),I=E(H);I.__focusout=h;var D=E(I);we(D,1,()=>t().Inflections,ye,(w,A,R)=>{var M=pC(),T=ie(M),O=E(T),b=E(O),x=y(E(b)),S=E(x);S.__change=ae=>l(ae,R);var B=y(b,2),j=y(E(B)),q=y(E(j),2),P=y(O,2),U=E(P),K=y(E(U)),X=E(K),de=y(T,2);Ue(de,"id",`inflection ${R}`);var re=y(de,2),se=E(re);se.__click=()=>{a.dialog.confirm({message:"Are you sure you want to delete this inflection group? This action is irreversible.",callback:ae=>{ae&&(h(),window.setTimeout(()=>{c(R),z(W,v(t).Inflections=t().Inflections.filter((ge,Le)=>Le!==R),v(t))},666))}})},Q(ae=>un(S,ae),[()=>d(A).tags.join(" ")]),pe(q,()=>d(A).filter,ae=>(d(A).filter=ae,Wt(r,"$Language"))),pe(X,()=>d(A).categories,ae=>(d(A).categories=ae,Wt(r,"$Language"))),$(w,M)});var C=y(D,2);C.__click=[fC,h,t,p],$(k,H)},$$slots:{default:!0}})}Q(_=>Ue(m,"hidden",_),[()=>!i().includes(3)]),$(o,f),et(),s()}Yt(["focusout","change","click"]);var bC=F('<label>Font <input type="text"/></label>'),yC=F(`<br/> <i>File</i>: <u> </u> <button>Import Graphemy (.gmy) File</button> <br/> <div style="
                            max-width: 30rem;
                            width: 90%;
                            margin: auto;
                        "><div style="display:flex">Maximum Width <input type="range" min="0" max="500"/> <input type="number" min="0"/></div> <div style="display:flex">Maximum Height <input type="range" min="0" max="500"/> <input type="number" min="0"/></div></div>`,1),wC=F("<span>Base input</span>"),kC=F("<select><option>Base from pronunciation</option><option>Base from romanization</option></select>"),xC=F("<span>Standard typeface</span>"),_C=F("<select><option>Standard typeface</option><option>Graphemy</option></select>"),EC=F("<option> </option>"),CC=F("<label>Lect <select></select></label>"),SC=F('<button class="hover-highlight hover-shadow">Delete</button>'),TC=F('<label>Name <input type="text"/></label> <!> <label>Root: <!></label> <br/> <p></p> <label>Typesetter: <!></label> <br/> <!> <br/> <label>Conversion Rules <textarea rows="3"></textarea></label> <!>',1),LC=(o,e)=>{z(W,v(e).Orthographies=[...e().Orthographies,{name:`New Orthography ${e().Orthographies.length}`,font:"Gentium",root:"ipa",typesetter:"standard",graphemy:!1,lect:e().Lects[0],rules:"",display:!0,displayInPhrasebook:!0}],v(e))},BC=F('<div class="glasspane container scrolled"><!> <button class="hover-highlight hover-shadow">New Orthography</button> <br/><br/></div>'),OC=F("<option> </option>"),IC=F('<textarea rows="6" readonly=""></textarea>'),AC=F('<span class="grapheme-svg"><!></span>'),PC=F("<i>generating...</i>"),MC=F("<i>generating...</i>"),NC=F('<div class="glasspane container scrolled"><select></select> <label>Test Input <textarea rows="6"></textarea> <!></label></div>'),$C=(o,e,t,n)=>{for(let i in e().Lexicon)if(i.includes(t.pattern))try{let r="#"+i+"#",s=t.pattern.replaceAll("^","#");r=r.replaceAll(s,t.replacement),z(W,v(e).Lexicon[r]=e().Lexicon[i],v(e)),delete e().Lexicon[i],V(n,"Change applied successfully.")}catch(r){console.log(r),V(n,"An error occurred while applying the change. Please contact the developer for assistance and check the console.")}},RC=F('<div class="container glasspane scrolled"><label>Change Romanization (Destructive) <div class="narrow">Pattern: <input type="text"/> Replacement: <input type="text"/> <button>Apply</button> <span> </span></div></label></div>'),DC=F("<!> <!> <!>",1),jC=F('<div class="tab-pane"><!></div>');function FC(o,e){Qe(e,!0);const t=()=>ne(W,"$Language",i),n=()=>ne(lt,"$selectedTab",i),[i,r]=rt();let s=He(""),a=He("");const l=require("vex-js");let c=$t({pattern:"",replacement:""}),u=He("");function p(m,L,_){const k=m.target;let N=k.value.trim();if(L==="name"){if([N,...t().Orthographies.filter(H=>H.name===N)].length-1>1){l.dialog.alert("The name must be unique."),k.value=`New Orthography ${_}`;return}if(N===""){l.dialog.alert("The name cannot be blank."),k.value=`New Orthography ${_}`;return}}z(W,v(t).Orthographies[_]={...t().Orthographies[_],[L]:N},v(t))}var h=jC(),g=E(h);{var f=m=>{var L=DC(),_=ie(L);bt(_,{panel:"orthography",children:(H,I)=>{var D=BC(),C=E(D);we(C,1,()=>t().Orthographies,ye,(A,R,M)=>{var T=TC(),O=ie(T),b=y(E(O));let x;var S=y(O,2);{var B=he=>{var Z=bC(),oe=y(E(Z));let Re;Q(Ae=>{un(oe,d(R).font),oe.readOnly=d(R).name==="Romanization",Re=Et(oe,"",Re,Ae)},[()=>({"background-color":d(R).name==="Romanization"?"transparent":""})]),Te("blur",oe,Ae=>{p(Ae,"font",M)}),$(he,Z)},j=he=>{var Z=yC(),oe=y(ie(Z),4),Re=E(oe),Ae=y(oe,2);Ae.__click=()=>{Li({title:"Select Graphemy File",properties:["openFile"]},ke=>{dl(ke[0],async(Pe,Ee)=>{if(Pe){console.error(Pe),l.dialog.alert("There was a problem reading the file.");return}console.log(Ee.toString()),z(W,v(t).Orthographies[M].font=LE.basename(ke[0]),v(t)),z(W,v(t).Orthographies[M].graphemy.engine=Ee.toString(),v(t))})})};var Fe=y(Ae,4),ve=E(Fe),Se=y(E(ve));Se.__change=ke=>{t().Orthographies[M].graphemy.hasOwnProperty("bounds")&&z(W,v(t).Orthographies[M].graphemy.bounds.width=Number(ke.target.value),v(t))};var Xe=y(Se,2);Xe.__change=ke=>{t().Orthographies[M].graphemy.hasOwnProperty("bounds")&&z(W,v(t).Orthographies[M].graphemy.bounds.width=Number(ke.target.value),v(t))};var J=y(ve,2),te=y(E(J));te.__change=ke=>{t().Orthographies[M].graphemy.hasOwnProperty("bounds")&&z(W,v(t).Orthographies[M].graphemy.bounds.height=Number(ke.target.value),v(t))};var Ne=y(te,2);Ne.__change=ke=>{t().Orthographies[M].graphemy.hasOwnProperty("bounds")&&z(W,v(t).Orthographies[M].graphemy.bounds.height=Number(ke.target.value),v(t))},Q(()=>ce(Re,d(R).font||"No file selected.")),pe(Se,()=>d(R).graphemy.bounds.width,ke=>(d(R).graphemy.bounds.width=ke,Wt(i,"$Language"))),pe(Xe,()=>d(R).graphemy.bounds.width,ke=>(d(R).graphemy.bounds.width=ke,Wt(i,"$Language"))),pe(te,()=>d(R).graphemy.bounds.height,ke=>(d(R).graphemy.bounds.height=ke,Wt(i,"$Language"))),pe(Ne,()=>d(R).graphemy.bounds.height,ke=>(d(R).graphemy.bounds.height=ke,Wt(i,"$Language"))),$(he,Z)};ee(S,he=>{d(R).graphemy?he(j,!1):he(B)})}var q=y(S,2),P=y(E(q));{var U=he=>{var Z=wC();$(he,Z)},K=he=>{var Z=kC(),oe=E(Z);oe.value=oe.__value="ipa";var Re=y(oe);Re.value=Re.__value="rom",Rt(Z,()=>d(R).root,Ae=>(d(R).root=Ae,Wt(i,"$Language"))),$(he,Z)};ee(P,he=>{d(R).name==="Romanization"?he(U):he(K,!1)})}var X=y(q,6),de=y(E(X));{var re=he=>{var Z=xC();$(he,Z)},se=he=>{var Z=_C();Z.__change=Ae=>{let Fe=Ae.target.value;z(W,v(t).Orthographies[M].typesetter=Fe,v(t)),z(W,v(t).Orthographies[M].font="",v(t)),z(W,v(t).Orthographies[M].graphemy=Fe==="standard"?!1:{engine:"",bounds:{width:100,height:100}},v(t))};var oe=E(Z);oe.value=oe.__value="standard";var Re=y(oe);Re.value=Re.__value="graphemy",Rt(Z,()=>d(R).typesetter,Ae=>(d(R).typesetter=Ae,Wt(i,"$Language"))),$(he,Z)};ee(de,he=>{d(R).name==="Romanization"?he(re):he(se,!1)})}var ae=y(X,4);{var ge=he=>{var Z=CC(),oe=y(E(Z));we(oe,5,()=>t().Lects,ye,(Re,Ae)=>{var Fe=EC(),ve=E(Fe),Se={};Q(()=>{ce(ve,d(Ae)),Se!==(Se=d(Ae))&&(Fe.value=(Fe.__value=d(Ae))??"")}),$(Re,Fe)}),Rt(oe,()=>d(R).lect,Re=>(d(R).lect=Re,Wt(i,"$Language"))),$(he,Z)};ee(ae,he=>{t().UseLects&&d(R).root==="ipa"&&he(ge)})}var Le=y(ae,4),Ie=y(E(Le));let Me;var ot=y(Le,2);{var xe=he=>{var Z=SC();Z.__click=()=>{z(W,v(t).Orthographies=[...t().Orthographies.slice(0,M),...t().Orthographies.slice(M+1)],v(t))},$(he,Z)};ee(ot,he=>{d(R).name!=="Romanization"&&he(xe)})}Q((he,Z)=>{un(b,d(R).name),b.readOnly=d(R).name==="Romanization",x=Et(b,"",x,he),xo(Ie,1,Nh(d(R).name==="Romanization"?"text-center":"text-left")),un(Ie,d(R).rules),Ie.readOnly=d(R).name==="Romanization",Me=Et(Ie,"",Me,Z)},[()=>({"background-color":d(R).name==="Romanization"?"transparent":""}),()=>({"background-color":d(R).name==="Romanization"?"transparent":""})]),Te("blur",b,he=>{p(he,"name",M)}),Te("blur",Ie,he=>{p(he,"rules",M)}),$(A,T)});var w=y(C,2);w.__click=[LC,t],$(H,D)},$$slots:{default:!0}});var k=y(_,2);bt(k,{panel:"orthographytesting",children:(H,I)=>{var D=NC(),C=E(D);we(C,5,()=>t().Orthographies,ye,(M,T)=>{var O=OC(),b=E(O),x={};Q(()=>{ce(b,d(T).name),x!==(x=d(T).name)&&(O.value=(O.__value=d(T).name)??"")}),$(M,O)});var w=y(C,2),A=y(E(w)),R=y(A,2);ks(R,{},M=>{const T=qt(()=>t().Orthographies.find(B=>B.name===d(s)));var O=We(),b=ie(O);{var x=B=>{var j=IC();let q;Q((P,U)=>{un(j,P),q=Et(j,"",q,U)},[()=>(()=>{const P=Si(d(T).rules||"");return xr(P.rules,d(a),P.categories)})(),()=>({"background-color":"transparent","font-family":d(T).font||"Gentium"})]),$(B,j)},S=B=>{var j=We(),q=ie(j);{var P=U=>{var K=We(),X=ie(K);Mn(X,()=>Ja(d(a),d(T)),de=>{var re=MC();$(de,re)},(de,re)=>{var se=We(),ae=ie(se);Mn(ae,()=>tf(d(T).graphemy.engine,d(re),d(T).graphemy.bounds.width,d(T).graphemy.bounds.height),ge=>{var Le=PC();$(ge,Le)},(ge,Le)=>{var Ie=AC(),Me=E(Ie);No(Me,()=>d(Le)),$(ge,Ie)}),$(de,se)}),$(U,K)};ee(q,U=>{d(T)?.typesetter==="graphemy"&&d(T).graphemy&&U(P)},!0)}$(B,j)};ee(b,B=>{d(T)?.typesetter==="standard"?B(x):B(S,!1)})}$(M,O)}),Rt(C,()=>d(s),M=>V(s,M)),pe(A,()=>d(a),M=>V(a,M)),$(H,D)},$$slots:{default:!0}});var N=y(k,2);bt(N,{panel:"romchangewizard",children:(H,I)=>{var D=RC(),C=E(D),w=y(E(C)),A=y(E(w)),R=y(A,2),M=y(R,2);M.__click=[$C,t,c,u];var T=y(M,2);Et(T,"",{},{color:"red"});var O=E(T);Q(()=>ce(O,d(u))),pe(A,()=>c.pattern,b=>c.pattern=b),pe(R,()=>c.replacement,b=>c.replacement=b),$(H,D)},$$slots:{default:!0}}),$(m,L)};ee(g,m=>{n().includes(5)&&m(f)})}$(o,h),et(),r()}Yt(["click","change"]);var HC=(o,e,t)=>V(e,d(t),!0),zC=F("<div> </div>"),UC=F(`<div class="row container glasspane"><div class="column" style="
                    width: 10%;
                    min-width: 120px; 
                "></div> <div class="column scrolled" style="
                    height: 100%; 
                    text-align: left;
                "><div style="width: 85%; max-width: 50rem; margin: auto"><!></div> <br/><br/><br/><br/></div></div>`),WC=F('<div class="tab-pane"><!></div>');function qC(o,e){Qe(e,!0);const t=()=>ne(lt,"$selectedTab",n),[n,i]=rt(),r={Lexicon:`# The Lexicon Tab
When you first open Lexicanter, you’ll find yourself on the Lexicon tab. This is the place where you will be adding words to your lexicon. This tab is composed of three panels: the alphabet panel, the editor panel, and the lexicon panel itself.

## The Alphabet Panel
Under the tab navigation at the top of the app, you’ll see two checkboxes and the alphabet text input.
### Alphabet Settings
- Case Sensitivity will make letters case sensitive making the app alphabetize ‘A’ differently for ‘a’, for example.
- Ignore Diacritics is on by default and turning it off will make the app alphabetize ‘a’ separately from ‘â’.
### The Alphabet
The alphabet field is where you organize the alphabet of your conlang. This will determine the order of your words in the lexicon. Any letters or symbols you use in your words can be added here and will alphabetize the lexicon according to the order you write here. Each alphabetization token should be separated by a space: this way, it is possible to alphabetize multi-character tokens (ie 'sh') separately from single-character tokens and other multi-character tokens (ie 's', 'sz'). 

## Editor Panel
Below the Alphabet panel we have the Editor panel on the left, where you can add new words and edit existing words.
In the Editor panel, you’ll see three text boxes when using the default settings. There are some advanced settings which alter the appearance of this tab, which you can read about on other pages in this wiki. 
### New Word & Pronunciation
The text box under ‘New Word’ is where you type your new words. The intention is that you use your romanized orthography here, although technically this is not necessary. Under this text box is where the pronunciation will automatically fill in. Lexicanter automatically updates pronunciations in your lexicon based on rules you can specify in the Phonology tab. See [Pronunciation Rules](https://github.com/Saturnine-Softworks/Lexicanter/wiki/Pronunciation-Rules) to read up on how to write these. 
### Irregular Pronunciations
If the pronunciation is manually altered, it will not automatically update unless the word itself is edited, so keep this in mind when making manual changes.

### Definitions and Senses
The next text field is for the definition of the word. If the word has multiple definitions, you may write all of them in this first text box if you wish; however, Lexicanter offers a way you can format multiple definitions separately. By clicking the ‘Add Sense’ button, you can create another set of text boxes for another definition and its tags. 

### Tags
Tags are a useful way to organize and filter through the words in your lexicon, and they can also be utilized by advanced users for setting up automatic inflection tables. Each sense of a word is allowed to have its own set of tags. Tags are arbitrary space-separated terms which will appear above the sense definition in the lexicon, and can be searched by. One advantage to using multiple senses for separate definitions is that they can each have their own tags. 

## Lexicon Panel
### Adding and Editing Words
Clicking the ‘Add Word’ button will add your new word to the lexicon on the right.
If you attempt to add a word that already exists, you will be given the option to ‘overwrite’ or ‘append the definition’ to the existing word. To edit the word, right-click on it in the lexicon panel. 

### Searching
In the lexicon panel, there are three text boxes along the top. These are the lexicon’s search functions. You can search the lexicon for specific words, definitions, and tags. 

There are some special functions which can be applied to help find specific entries. The character \`^\` means *word boundary*. 
Searching for \`^an\` will only show results which *start* with 'an', and searching \`an^\` will only show results that *end* with 'an'. Just searching 'an' will show results which have 'an' anywhere in the word. 
In both the tags and definition searches, you can prefix your search with \`!\` to only show results which have your search term as a whole word. For example, searching for the tag \`culture\` will also show words tagged 'agriculture' and 'horticulture', but searching for \`!culture\` will only show words tagged 'culture'. 
`,Phrasebook:`# Phrasebook Tab
Lexicanter’s Phrasebook feature allows you to add phrases with all the features of the main Lexicon. When opening the Phrasebook tab, you’ll see three panels. At the left are the Categories where you can organize your phrases; to the right is where your phrases will be displayed depending on what category is selected; and at the bottom is where you can add and edit phrases.

When adding new phrases, it functions the same as the Lexicon tab. On the bottom left, when the phrase is added it will have pronunciation rules applied automatically. You can add the definition and tags to organize it even further. Under that is a fourth textbox to enter the category of the phrase. This can be a single or multi-word phrase. If you are already viewing the phrases in a category, this text box will be filled in for you.

On the right side of the phrase editor panel, you can add variants - or other versions - of the new phrase. You can add as many variants as needed.
The ‘Add Phrase’ button will add the new phrase, as well as the category if it is not already present.
On the top right panel, there are search functions just like in the Lexicon tab and can be used to search the Phrasebook.
`,Documenting:`# The Documentation Tab
When you first open the Documentation tab, you’ll notice that it is empty save for a single line of text and a \`+\` on the far right. This tab can be used to add details about your conlang using text and tables. When you click on the \`+\`, you’ll see three options: Text, Heading, and Table. Clicking any of these will create the corresponding block section.

## Tools for Documenting Your Language
### Headings
A heading will place your cursor and all you need to do is type. A large, bold font will be used by default. To the left of that new text, you’ll see a \`+\` and a new button with 6 dots. Clicking this will give you the option to fine tune that section of text. You can change the heading type, move it up or down and delete it entirely.

### Paragraphs and Formatting
Clicking the \`+\` again will give you the options for other sections to add, such as a paragraph section. Additionally, in any type of block, you can highlight text to apply a range of styles to it, such as italics, bolding, underlining, and hyperlinking. If you wish to have linebreaks within the same paragraph block, you can press Shift+Enter. Pressing Enter alone will make a create a new paragraph block.

### Tables
The last type of section to add is the table. When you first add it, there will be three rows and three columns. You can click the \`+\`’s just right and to the bottom of the table to add new rows or columns. Hovering over a specific table cell will bring up a button with 4 dots, which can be used to add rows above/below, columns to the left/right or to delete an entire row or column. For fine tuning the table, you have two different options along with the standard move up/down and delete: 'With headings' and 'Without headings'. By default, the table is set to 'Without headings'. Selecting 'With headings' will make the text in the top row of cells bold, and add a slightly thicker border to the bottom of that row.
To navigate rows and columns within the table, you can use the arrow keys to go left and right, the Enter key to go directly down, or simply click in the cell you want to edit.
`,"Pronunciation Rules":"# The Sound Change Engine\nLexicanter uses a custom-built sound change engine to allow you to configure automatic orthography to phonetic notation conversion.\n\nIf you're not familiar with sound change appliers, you might be lost here, and if you *are* familiar with sound change appliers, you might be wondering how such a thing is supposed to be used to convert your romanization to IPA. In any case, let's start from the beginning. \n\n## The Basics\n### Defining Rules\nLet's say you write the phoneme /θ/ as ⟨th⟩. To convert your *orthograph* ⟨th⟩ to *phonetic notation* /θ/, we can use a rule. \n```\nth > θ\n```\n### Using Contexts\nThis is straightforward enough. ⟨th⟩ becomes /θ/. But what if /θ/ only occurs before front-vowels, and everywhere else it's /tʰ/. How would we write a rule to accomodate for this? One way is to use a *context*. \n```\nth > θ / _e\nth > θ / _i\nth > tʰ\n```\n### Anonymous Categories\nNow we're telling it only to turn ⟨th⟩ into /θ/ if it comes before /e/ or /i/. But this is a little bulky; we can condense these rules. \n```\nth > θ / _{e, i}\nth > tʰ\n```\nThese two rules do the exact same thing as the last set, but now we're using an *anonymous category* `{e, i}` to mean 'either e or i'. \n### Named Categories\nBut let's say we have several rules which make use of the same anonymous category:\n```\nth > θ / _{e, i}\nth > tʰ\nc > s / _{e, i}\nc > k\ng > ʤ / _{e, i}\n```\nWe can avoid writing `{e, i}` a bunch of times by defining a *named category*. \n```\nE :: e, i\nth > θ / _E\nth > tʰ\nc > s / _E\nc > k\ng > ʤ / _E\n```\nThat's a little better. \n### Category Conversion\nBut several of these rules are very similar. There's something we can do about that:\n```\nE :: e, i\n{th, c, g} > {θ, s, ʤ} / _E\n{th, c} > {tʰ, k}\n```\nWe can create anonymous categories of equal length on both sides of the conversion in order to convert between them. We can also do this with named categories, if we prefer:\n```\nP :: th, c, g\nF :: θ, s, ʤ\nK :: tʰ, k, g\nE :: e, i\nP > F / _E\nP > K\n```\nThis takes up a few more lines, but now we can re-use these named categories in further rules should we need to. \n\n## Advanced Usage\nNow that we understand the basics, let's look at how Lexicanter's sound change engine can deal with common and important edge cases.\n\n### Alternate Rule Formats\nBefore we get into those, though, let's briefly talk about the rule format. On this page, I've been using the formats\n```\npattern > substitution\npattern > substitution / context\n```\nIn the first case, the implicit context is just `_`, or 'always'. \nBut many of you may be familiar with another standard sound change notation format:\n```\npattern/substitution/context\n```\nLexicanter accepts rules written this way as well. In fact, all of the following are valid and will be accepted:\n```\npattern>substitution\npattern / substitution\npattern/substitution / context\npattern  > substitution/context\n```\nThe rule parser ignores all spaces, and the implicit 'always' context shorthand can be done with either `>` or `/` rules.\n\n### Word Boundaries\nOften times, the pronunciation of a grapheme changes depending on whether or not it's at the beginning or end of a word. Lexicanter reserves two symbols for this purpose: `^` and `#`. Both of them have the exact same purpose, and which one you use is a matter of personal preference. I'll be using `^`. \n\nTurn ⟨e⟩ into /ə/ at the end of words:\n```\ne > ə / _^\n```\nTurn ⟨y⟩ to /ɪ/ at the beginning of words:\n```\ny > ɪ / ^_\n```\n\n### Exceptions\nSometimes a grapheme has a pronunciation in all except a specific case. \nFor example, this rule turns all ⟨x⟩ into /ks/ as long as they are preceded by anything except /e/ or /i/:\n```\nx > ks / {!e, i}_\n```\nNote that this does assume `{!e}` must be *some* character, just not the ones in the group. If you would like to make this rule also apply at word boundaries, you can write it as so:\n```\nx > ks / {^, {!e, i}}_\n```\nor write it as two rules:\n```\nx > ks / {e, i}_\nx > ks / ^_\n```\nThere are usually multiple ways to get things to happen. \n\n### Wildcards\nSometimes, you just need to specify *any character at all* must be in a certain position. For that, another character is reserved: `.`.\nThe following rules turns ⟨h⟩ to /ç/ when it comes before /u/ and two other character:\n```\nh > ç / _u..\n```\nOther times, you may need to specify that any number of certain characters can appear. Two more symbols are reserved: `*` for 0 or more and `+` for 1 or more. \nThe following rule turns ⟨y⟩ to /i/ when it comes before any number of optional /d/ and at least one /o/ before the end of a word:\n```\ny > i / _ d* o+ ^\n```\nThese two symbols can also be used with categories. Note that the spaces here will be ignored and are just for readability; the parser ignores all spaces.\n\n### Optional Members\nThere is also a way to specify that something is optional without necessarily being allowed to repeat indefinitely. The character `?` is reserved for this.\nThe following rule changes ⟨n⟩ to /ŋ/ before a single optional /g/ or /k/ followed by the end of the word. \n```\nn > ŋ / _ {g, k}? ^\n```\nAs you can see, this works with categories as well. \n\n### Reduplication\nIn rare cases, a grapheme or sequence of graphemes may always be pronounced multiple times. For these cases, we can use `_` in the substitution to represent the entire captured pattern.\nThis is also useful in some cases for auto-inflection rules. \nThe following rule turns /er/ into /erer/ wherever it comes in the middle of a word:\n```\ner > __ / ._.\n```\n\n### Prefixes & Suffixes\nWhen writing rules for auto-inflections, you may need to add prefixes and suffixes to a word. You can write such rules using an insertion format. (For these, `#` typically looks better than `^`). \nAdds a suffix:\n```\n/ate/._#\n```\nAdds a prefix:\n```\n/eta/#_.\n```\nAlternatively, you can replace the word boundary itself. Equivalent to the rules above:\n```\n# > ate / ._\n# > eta / _.\n```","Word Generator":`# Generator Modes
The word generator in this app has two modes. The first is designed to be as straightforward as possible, while the second mode is more complex, but also much more powerful.

## Basic Phonotactics
There are fields for what consonants and clusters can go word-initially, medially, finally, as well as vowels and polyphthongs are available, and what sounds should never appear next to one another. The Trial Words field will try to autocomplete a word as you type based on those simple rules, and the Generate Words button will make around 24 fresh words. 

## Advanced Phonotactics
At the top of the word generator, there is a checkbox labelled Use Advanced Phonotactics. Checking it will switch the UI below it to an entirely different set-up (this does *not* delete any information you have in the default fields).

### Categories
The first of these new fields is the Categories field. Here, you can define groups of sounds as you wish. The format is as follows in this example:
\`\`\`
C:: m n p b t d k g f v l r th sh
V:: a e i o u ai au ei eu oi ou
\`\`\`
Note that each token is space-separated, unlike categories in the pronunciation rules (which are comma-separated). You can have multiple-character length tokens here. It's up to you whether to use IPA or your romanization/other orthography here.

### Syllables
The next field is for defining, as you might guess, syllables. There are two ways you can do this. The first way is to simply write out all the allowed syllables line by line, such as
\`\`\`
V
CV
ClV
CVC
ClVC
\`\`\`
Note that non-category symbols used here are interpreted literally (the \`l\`'s in the above example will actually just be \`l\`'s).

The second way is to define categories of syllables: this will be useful for the next step, so we'll try that out. 
\`\`\`
S:: V CV ClV
1:: o Co a Ca
2:: ete Cete Clete
\`\`\`

### Structures
Words in your language usually aren't actually allowed to freely follow generic phonotactic rules. You usually have some sort of morphological rules as well, such as all verbs having specific endings, nouns genders being marked, et cetera. Structures allow you to fully control how syllables are put together to form words. Let's start with a set for nouns that all end in \`o\` or \`a\`. 
\`\`\`
S1 SS1 SSS1
\`\`\`
That's it, for this simple example. All of the generated words will be 2 to 4 syllables and end in \`o\` or \`a\`. Let's now add a new set of structures by clicking the Add Set button and create a set for our verbs. 
\`\`\`
1S2 1SS2 1SSS2
\`\`\`
In this hypothetical language, all verbs start with a gendered prefix and end with \`-ete\`. Now we can generate that.

Let's say we only want to have one of these sets active at a time. You can click on the checkboxes next to each set to toggle them, and when you click the Generate Words button, only the structures in enabled sets will be selected from. If you create too many sets, the \`-\` button next to each one will delete it. You can't delete your last set, but if all of your structure sets are empty or disabled, the word generator will just construct 1-4 syllable words composed of random syllable types from your syllables field. 

### Illegals
If there are specific sounds that should never appear next to each other, this is the place to specify those.
\`\`\`
ji wu mn ou ao
\`\`\`
Again, space-separated tokens. 

Because it's possible to accidentally (or perhaps intentionally) ban *all* of your syllables this way, the app will only try to come up with a word that doesn't have any illegals in it 20 times. If it fails, it will show \`[ ∅ ]\`. If you see this show up when you try to generate words, it means that it tried and failed to generate a legal word 20 times.`,Lects:`# What is a 'Lect'? 
The term 'lect' refers agnostically to any kind of variation of a language that may be classified as a dialect, ethnolect, regiolect, cryptolect, idiolect, et cetera. Lexicanter offers a suite of features which make it easier to document your language's various lects, should you have any. 

## Adding, Removing, and Renaming
### Adding
Adding new lects can always be done safely, as adding a new lect does not change the contents of the lexicon. When you add a lect, you will be prompted to name it. Then its name will appear in a list under the other lect-related settings, with three buttons. One of these is for deleting the lect, one of these is for renaming the lect, and one of these has a special purpose: adding all words in your lexicon to this lect. This is a useful features if you create a new lect midway through developing your language which should have all or most of the existing words. 

### Renaming
Renaming lects can also always be done safely, as this does not actually change the contents of the lexicon aside from the name which appears next to options and information related to the changed lect.

### Removing
Removing lects *does not* delete the words which were assigned to that lect, but it *does* delete any pronunciations and the pronunciation rule set associated with that lect. You cannot delete the last remaining lect; there must always be at least one. Even when lect features are disabled, the app uses a lect named 'General' under the hood. 

## Phonetics & Semantics
### Lect-Specific Pronunciation Rules
This is likely the main reason you would want to use the lect features. Each lect can have it own set of pronunciation rules, which you can write by selecting the lect from the dropdown which appears over the Pronunciations text field in the Phonology tab. To learn more about writing pronunciation rules, see the [Pronunciation Rules](https://github.com/Saturnine-Softworks/Lexicanter/wiki/Pronunciation-Rules) page. 

### Lexicon and Phrasebook
In both of these tabs, a new set of checkboxes will appear in the entry editor panel. In the Lexicon, this set of checkboxes appears for every *sense* of a word; in the phrasebook, you have this option for each *phrase*.
Checking these boxes assigns that sense/phrase to that lect. A new pronunciation field will appear for each lect which is selected, and will be auto-filled using the pronunciation rules assigned to that lect. All of a word or phrase's pronunciations will appear beneath it in the lexicon/book. This way, you can include words and phrases which only appear in specific lects. 
`,Etymology:`# Creating Etymology Trees
When you enable Etymology Features under Advanced Settings, Lexicanter will reveal to you a new tab called *Etymology* and slightly change the appearance of entries in the lexicon. These features are a powerful and convenient way to document the lineages of your language's words. 

## The Etymology Tab
You'll be greeted by a small panel on the left with a search bar and two lists, labelled *Internal* and *External*. If this is your first time opening this tab, *External* is probably empty. We'll get back to that. 

*Internal* will be populated by a list of all of the words in your lexicon. If you click on one of these, you'll see the large panel on the left is updated. The word you clicked on will appear floating in the upper-middle of the panel, and its lexicon entry will appear slightly below. Further below, there are two columns, labelled *Ancestors* and *Descendants*, each with a checkbox labelled *Manual Entry*, unticked by default, and below that, a blank dropdown.

### Editing Ancestor and Descendant Tethers
When you click on either of those dropdowns, you'll be greeted with, once again, your entire lexicon. You should be able to use the keyboard to navigate this list, but since some lexicons can be massive and overwhelming, the search field at the top of the left-hand panel narrows down not only the list in that column, but also the lists you see in the dropdowns on this tab. 
After selecting a word from your lexicon, pressing the *Link* button will link the currently selected word to the ancestor/descendant word. As you add more ancestors and descendants, you'll see how the tree graph is drawn in this panel. 
To remove a word from another words ancestors/descendants, find it in the list which appears in the respective column and click the *Sever* button to sever the tie. 

### Manual Entry
In many cases, you'll need to link to a word which is not in your lexicon. It may be from an ancestor language, or even from an unrelated language. For these cases, you can enable *Manual Entry*. 
When Manual Entry is enabled, you will see two text fields instead of a dropdown. The first of these text fields is for the related word itself, and the other text field is for specifying the *source* – that is, what language the word comes from. 
When you create entries this way, they will appear in the *External* list in the left-hand panel. External words also appear in the drop-downs after they are created. 

### Removing Etymology Entries
When a word is selected, but it has no ancestor or descendant tethers, a button will appear that allows you to delete the entry altogether. 
For words in your lexicon, this will *not delete the word from your lexicon* - it will simply clear the space for its etymology data out of the file data. This has no permanent effect, as you can select the word from the list to create its etymology entry again, but it may help to put at ease those of you who are particularly conscious about your file sizes. 
For external entries, this *will delete* the entry altogether. This is how you can remove words from the *External* list in the left-hand panel. 

## Importing Related Lexicons
When Etymology features are enabled, another option will appear in the Advanced Settings section: a button which allows you to import related lexicons. Using this button, you can select another Lexicanter file to import a lexicon from. The entirety of the lexicon will be saved to your *External* etymology entries. You can manage the external lexicons in your file under Advanced Settings.

## Lexicon Appearance Changes
On every lexical entry which is part of an etymology tree, a short, simplified version of that word's ancestry will appear beneath its senses. This makes it easy to see a word's history at a glance when viewing your lexicon. 
`,Inflections:`# Inflection Features
Lexicanter offers a way to expand your lexical entries with inflection information automatically generated from sound change rules.
It's a useful feature for generating verb conjugation tables, noun declension tables, and the like. This feature must be enabled under
Advanced Settings.

## The Inflection Tab
When you first open this tab, there will be a single button which reads 'Add Inflection Group'.
When you click on this, an inflection group editor will be created. It has two text fields: the first is labelled 'Tags',
and the second is labelled 'RegEx Filter' and should be pre-populated with \`.+\`. Below that, there will be a block-based
editor similar to what is used in the Documentation tab.

### Tags
The tags you assign to an inflection group should correspond to tags that you use in the lexicon. For example, if this inflection
group is for verbs and you've marked verbs in the lexicon with the tag \`verb\`, you should put that tag here. The inflection group 
will only be applied to lexical entries with tags that match the inflection group's own tags. You can use multiple tags if you wish, 
and the inflection group will be applied to any entry that has at least one of those tags. 

### RegEx Filter
You can write a regular expression to filter which words the inflection group is applied to even further. If you're unfamiliar with regular 
expressions, you can read up on them [here](https://www.regular-expressions.info). Some basic patterns will be described here. 
As an example, let's say that, like in Spanish, your verbs end in -ar, -er, and -ir, and there is a different set of conjugations depending 
on which ending the verb has, but in the lexicon, each kind of verb has the same 'verb' tag. You can target your inflection group toward only 
-ar verbs by writing the following RegEx filter:
\`\`\`regex
^.+ar$
\`\`\`
Now this inflection group will only apply to words which have the 'verb' tag *and* end in -ar.

### Editor
You can write whatever you want in the editor. You have headings, paragraphs, tables, and document markup at your disposal. However, 
there is a key difference between this and the Documentation tab editor: the app will check through the table cells of all tables in your 
inflection group when it applies the inflection group to a word, and if the table cell has a sound change rule in it, it will replace the
contents of that cell with the word and apply the rule to it. So for example, if a table has a cell in it with the rule
\`\`\`
ar > o / _^
\`\`\`
Then in the lexicon tab, on the word *hablar*, that cell will be replaced with 'hablo'. Cells which do not have \`/\` or \`>\` in them are ignored. 
To learn more about writing sound change rules in Lexicanter, read the 
[Pronunciation Rules](https://github.com/Saturnine-Softworks/Lexicanter/wiki/Pronunciation-Rules) page. 

## In the Lexicon
After creating inflection groups, a dropdown labelled 'Inflections' will appear in the lexical entries underneath the senses to 
which that inflection group applies. 

## Agenda
Several improvements are planned for the Inflections features, including a way to specify irregulars and a UI-based way to filter 
words instead of requiring the user to manually write RegEx filters (although that will remain an option for advanced users). 
        `},s=Object.keys(r);let a=He($t(s[0]));var l=WC(),c=E(l);{var u=p=>{bt(p,{panel:"help",children:(h,g)=>{var f=UC();Et(f,"",{},{height:"100%"});var m=E(f);we(m,21,()=>s,ye,(N,H)=>{var I=zC();let D;I.__mousedown=[HC,a,H];var C=E(I);Q(w=>{D=xo(I,1,"lex-entry",null,D,w),ce(C,d(H))},[()=>({selected:d(H)===d(a)})]),$(N,I)});var L=y(m,2),_=E(L),k=E(_);No(k,()=>hr(r[d(a)])),$(h,f)},$$slots:{default:!0}})};ee(c,p=>{t().includes(10)&&p(u)})}$(o,l),et(),i()}Yt(["mousedown"]);var VC=(o,e)=>e.send("buttonclose"),GC=(o,e)=>e.send("minimize"),KC=(o,e)=>e.send("maximize"),YC=F("<button> </button>"),ZC=F("<div><!></div>"),XC=F(`<link rel="stylesheet"/> <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/> <main id="main"><div class="tab-container"><div class="row"><div class="column" style="width:100%"><p class="window-control"><button class="hover-highlight close material-icons">close</button> <button class="hover-highlight minimize material-icons">remove</button> <button class="hover-highlight maximize material-icons">fullscreen</button></p> <p class="version-info" style="
                    text-align: right;
                    margin-right: .5rem;
                    margin-top: .25rem;
                "><em><i>β</i></em> </p> <div class="button-container"></div> <!></div></div></div></main>`,1);function JC(o,e){Qe(e,!0);const t=()=>ne(pi,"$autosave",a),n=()=>ne(Ce,"$CurrentLayouts",a),i=()=>ne(W,"$Language",a),r=()=>ne(li,"$theme",a),s=()=>ne(lt,"$selectedTab",a),[a,l]=rt(),{ipcRenderer:c}=require("electron"),u=require("vex-js");u.registerPlugin(require("vex-dialog")),u.defaultOptions.className="vex-theme-os";const p=[q_,I2,sE,mC,wE,FC,_E,Px,aC,hC,qC],h=["Lexicon","Etymology","Phrasebook","Inflection","Phonology","Orthography","Documentation","File","settings","history","help"];c.on("app-close",()=>{t()?$n().then(b=>{window.setTimeout(()=>c.send("close"),1e3)}):window.confirm("You may have unsaved changes. Are you sure you want to exit?")&&c.send("close")}),c.on("adjustGrid",g);function g(){z(Ce,v(n).window={width:window.innerWidth,height:window.innerHeight},v(n)),console.log(n().ratios);for(const b in n().positions)z(Ce,v(n).positions[b]={top:n().ratios[b].top*(n().window.height-25),left:n().ratios[b].left*n().window.width,height:n().ratios[b].height*(n().window.height-25),width:n().ratios[b].width*n().window.width,z:n().positions[b].z},v(n));n().snapping.proportional&&(z(Ce,v(n).snapping.x=Math.round(window.innerWidth/n().snapping.columns*100)/100,v(n)),z(Ce,v(n).snapping.y=Math.round((window.innerHeight-25)/n().snapping.rows*100)/100,v(n)))}let f=He("");c.invoke("getVersion").then(b=>V(f,b,!0));let m=He("");c.invoke("platform").then(b=>V(m,b,!0));var L=XC();Te("resize",vi,g);var _=ie(L),k=y(_,4);Ue(k,"spellcheck",!1);var N=E(k),H=E(N),I=E(H),D=E(I),C=E(D);C.__click=[VC,c];var w=y(C,2);w.__click=[GC,c];var A=y(w,2);A.__click=[KC,c];var R=y(D,2),M=y(E(R)),T=y(R,2);we(T,21,()=>h,ye,(b,x,S)=>{var B=We(),j=ie(B);{var q=P=>{var U=YC();let K;U.__click=()=>{i().Layouts.tabmode==="switch"?fe(lt,[S]):s().includes(S)?fe(lt,[s().slice(0,s().indexOf(S)),s().slice(s().indexOf(S)+1)].flat()):fe(lt,[...s(),S])};var X=E(U);Q((de,re)=>{K=xo(U,1,"hover-highlight tab-button",null,K,de),Et(U,re),ce(X,d(x))},[()=>({selected:s().includes(S)}),()=>["settings","history","help"].includes(d(x))?'font-family: "Material Icons"; font-size: 1em; vertical-align: bottom; height: 1.8em;':""]),$(P,U)};ee(j,P=>{(d(x)!=="Etymology"&&d(x)!=="Inflection"&&d(x)!=="Orthography"&&d(x)!=="Phrasebook"||d(x)==="Phrasebook"&&i().ShowPhrasebook||d(x)==="Etymology"&&i().ShowEtymology||d(x)==="Inflection"&&i().ShowInflection||d(x)==="Orthography"&&i().ShowOrthography)&&P(q)})}$(b,B)});var O=y(T,2);we(O,17,()=>p,ye,(b,x,S)=>{var B=ZC();let j;var q=E(B);Av(q,()=>d(x),(P,U)=>{U(P,{})}),Q(P=>j=xo(B,1,"",null,j,P),[()=>({collapsed:!s().includes(S)})]),$(b,B)}),Q(()=>{Ue(_,"href",i().FileTheme==="default"?r():i().FileTheme),ce(M,`-${d(f)??""}-${d(m)??""}`)}),$(o,L),et(),l()}Yt(["click"]);Cv(JC,{target:document.body});
